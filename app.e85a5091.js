webpackJsonp([0],[,,function(e,exports,t){"use strict";function n(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var i=r(o);return[n].concat(o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"})).concat([i]).join("\n")}return[n].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,exports,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=p[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(l(r.parts[i],t))}else{for(var a=[],i=0;i<r.parts.length;i++)a.push(l(r.parts[i],t));p[r.id]={id:r.id,refs:1,parts:a}}}}function r(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],c=i[1],s=i[2],l=i[3],u={css:c,media:s,sourceMap:l};r[a]?r[a].parts.push(u):n.push(r[a]={id:a,parts:[u]})}return n}function o(e,t){var n=h(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function i(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function a(e){var t=document.createElement("style");return e.attrs.type="text/css",s(t,e.attrs),o(e,t),t}function c(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",s(t,e.attrs),o(e,t),t}function s(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function l(e,t){var n,r,o,s;if(t.transform&&e.css){if(!(s=t.transform(e.css)))return function(){};e.css=s}if(t.singleton){var l=v++;n=g||(g=a(t)),r=u.bind(null,n,l,!1),o=u.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=c(t),r=f.bind(null,n,t),o=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=d.bind(null,n),o=function(){i(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function u(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=x(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function d(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t,n){var r=n.css,o=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(r=y(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),c=e.href;e.href=URL.createObjectURL(a),c&&URL.revokeObjectURL(c)}var p={},m=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),h=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),g=null,v=0,b=[],y=t(525);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=m()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var o=r(e,t);return n(o,t),function(e){for(var i=[],a=0;a<o.length;a++){var c=o[a],s=p[c.id];s.refs--,i.push(s)}if(e){n(r(e,t),t)}for(var a=0;a<i.length;a++){var s=i[a];if(0===s.refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete p[s.id]}}}};var x=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},,function(e,exports,t){"use strict";var n=t(9),r=n.SHOW_LOADING,o=n.HIDE_LOADING,i=n.SHOW_ALERT,a=n.HIDE_ALERT,c=n.SHOW_MODAL,s=n.HIDE_MODAL,l=n.SHOW_TOAST,u=n.HIDE_TOAST,d=n.SHOW_PROFILE_CARD,f=n.HIDE_PROFILE_CARD,p=n.SHOW_SLIDE_PANEL,m=n.HIDE_SLIDE_PANEL,h=n.SWITCH_MENU_PANNEL,g=n.SET_LAST_DICE_TYPE,v=n.CHANGE_NETWORK_STATE,b=n.UPDATE_SOCKET_ID,y=t(55);exports.showLoading=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"加载中...";return{type:r,text:e}},exports.hideLoading=function(){return{type:o}},exports.showAlert=function(e){return"string"==typeof e&&(e={content:e}),{type:i,payload:e}},exports.hideAlert=function(){return{type:a}},exports.showModal=function(e){return{type:c,payload:e}},exports.hideModal=function(){return{type:s}};var x=void 0;exports.showToast=function(e){return function(t,n){t({type:l,text:e}),x&&clearTimeout(x),x=setTimeout(function(){t({type:u}),x=null},2e3)}},exports.hideToast=function(){return{type:u}},exports.showProfileCard=function(e){return function(t,n){e||(e=n().getIn(["user","info","uuid"])),t(y.getUserInfo(e)),t({type:d,uuid:e})}},exports.hideProfileCard=function(){return{type:f}},exports.showSlidePanel=function(e,t){return{type:p,payload:{title:e,content:t}}},exports.hideSlidePanel=function(){return{type:m}},exports.switchMenuPannel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:h,menuIndex:e,payload:t}},exports.setLastDiceType=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"basicDice";return{type:g,payload:e}},exports.changeNetworkStatue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:v,payload:{isOnline:e,msg:t,tryReconnect:n}}},exports.updateSocketId=function(e){return{type:b,socketId:e}}},,function(e,exports,t){"use strict";var n="127.0.0.1",r=!1;window&&window.location&&window.location.host&&(n=window.location.host.split(":")[0],r="https:"===window.location.protocol),n="trpgapi.moonrailgun.com";n="180.76.145.64";var o=r?"443":"80",i={version:t(493).version,environment:"production",platform:"electron",io:{protocol:r?"wss":"ws",host:n,port:o},file:{protocol:r?"https":"http",host:n,port:o},defaultImg:{user:"/src/assets/img/gugugu1.png",group:"/src/assets/img/gugugu1.png",trpgsystem:"/src/assets/img/system_notice.png",actor:""},github:{projectUrl:"https://github.com/TRPGEngine/Client",projectPackageUrl:"https://raw.githubusercontent.com/TRPGEngine/Client/master/package.json"},url:{goddessfantasy:"http://www.goddessfantasy.net/",blog:"http://moonrailgun.com"},defaultSettings:{user:{favoriteDice:[]},system:{notification:!0}}};i.file.url=i.file.protocol+"://"+i.file.host+":"+i.file.port,i.file.getAbsolutePath=function(e){return e||(e=""),e&&"/"===e[0]?i.file.url+e:e},e.exports=i},,function(e,exports,t){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=t(7);e.exports=n({RESET:"RESET"},t(497),t(498),t(499),t(500),t(501),t(502),t(503),t(504),"app"===r.platform?t(273):null)},,function(e,exports,t){"use strict";var n=t(9),r=n.CREATE_GROUP_SUCCESS,o=n.UPDATE_CONVERSES_MSGLIST_SUCCESS,i=n.GET_GROUP_INFO_SUCCESS,a=n.UPDATE_GROUP_INFO_SUCCESS,c=n.FIND_GROUP_REQUEST,s=n.FIND_GROUP_SUCCESS,l=n.REQUEST_JOIN_GROUP_SUCCESS,u=n.AGREE_GROUP_REQUEST_SUCCESS,d=n.SEND_GROUP_INVITE_SUCCESS,f=n.AGREE_GROUP_INVITE_SUCCESS,p=n.REFUSE_GROUP_INVITE_SUCCESS,m=n.GET_GROUP_INVITE_SUCCESS,h=n.GET_GROUP_LIST_SUCCESS,g=n.SWITCH_GROUP,v=n.GET_GROUP_ACTOR_SUCCESS,b=n.GET_GROUP_MEMBERS_SUCCESS,y=n.SET_PLAYER_SELECTED_GROUP_ACTOR_SUCCESS,x=n.ADD_GROUP_ACTOR_SUCCESS,w=n.REMOVE_GROUP_ACTOR_SUCCESS,E=n.AGREE_GROUP_ACTOR_SUCCESS,_=n.REFUSE_GROUP_ACTOR_SUCCESS,S=n.UPDATE_GROUP_ACTOR_INFO_SUCCESS,k=n.QUIT_GROUP_SUCCESS,C=n.DISMISS_GROUP_SUCCESS,T=n.TICK_MEMBER_SUCCESS,I=n.SET_MEMBER_TO_MANAGER_SUCCESS,D=n.UPDATE_GROUP_STATUS,R=t(7),O=t(22),N=O.getInstance(),U=t(16),A=U.addConverse,P=U.updateCardChatData,M=t(27),L=M.checkUser,j=M.checkTemplate,F=t(5),G=F.showLoading,B=F.hideLoading,H=F.showAlert,z=F.hideModal,W=F.hideAlert,q=F.hideSlidePanel,V=function(e,t){var n=t.uuid;e(A({uuid:n,id:t.id,name:t.name,type:"group",msgList:[],lastMsg:"",lastTime:""})),N.emit("group::getGroupMembers",{groupUUID:n},function(t){if(t.result){var r=t.members,o=[],i=!0,a=!1,c=void 0;try{for(var s,l=r["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(i=(s=l.next()).done);i=!0){var u=s.value,d=u.uuid;o.push(d),L(d)}}catch(e){a=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw c}}e({type:b,groupUUID:n,payload:o})}}),N.emit("group::getGroupActors",{groupUUID:n},function(t){if(t.result){var r=t.actors,o=!0,i=!1,a=void 0;try{for(var c,s=r["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(o=(c=s.next()).done);o=!0){var l=c.value;j(l.actor.template_uuid)}}catch(e){i=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw a}}e({type:v,groupUUID:n,payload:r})}}),N.emit("chat::getConverseChatLog",{converse_uuid:n},function(t){t.result&&e({type:o,convUUID:n,payload:t.list})})};exports.createGroup=function(e,t,n){return function(o,i){o(G()),N.emit("group::create",{name:e,subname:t,desc:n},function(e){o(B()),e.result?(o(z()),o(H("创建成功")),o({type:r,payload:e.group}),V(o,e.group)):o(H(e.msg))})}},exports.getGroupInfo=function(e){return function(t,n){return N.emit("group::getInfo",{uuid:e},function(n){if(n.result){var r=n.group;r.avatar=R.file.getAbsolutePath(r.avatar),t({type:i,payload:r}),t(exports.getGroupStatus(e))}})}},exports.updateGroupInfo=function(e,t){return function(n,r){N.emit("group::updateInfo",{groupUUID:e,groupInfo:t},function(e){if(e.result){var t=e.group;t.avatar=R.file.getAbsolutePath(t.avatar),n({type:a,payload:t}),n(z()),n(H("操作成功"))}else n(H(e.msg))})}},exports.findGroup=function(e,t){return function(n,r){return n({type:c}),N.emit("group::findGroup",{text:e,type:t},function(e){if(e.result){var t=!0,r=!1,o=void 0;try{for(var i,a=e.results["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(t=(i=a.next()).done);t=!0){var c=i.value;c.avatar=R.file.getAbsolutePath(c.avatar)}}catch(e){r=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw o}}n({type:s,payload:e.results})}})}},exports.requestJoinGroup=function(e){return function(t,n){return N.emit("group::requestJoinGroup",{group_uuid:e},function(e){t(e.result?{type:l,payload:e.request}:H(e.msg))})}},exports.agreeGroupRequest=function(e,t,n){return L(n),function(n,r){return N.emit("group::agreeGroupRequest",{request_uuid:t},function(t){t.result&&(n(P(e,{is_processed:!0})),n({type:u,groupUUID:t.groupUUID,payload:t.members}))})}},exports.refuseGroupRequest=function(e,t){return function(n,r){return N.emit("group::refuseGroupRequest",{request_uuid:t},function(t){t.result&&n(P(e,{is_processed:!0}))})}},exports.sendGroupInvite=function(e,t){return function(n,r){N.emit("group::sendGroupInvite",{group_uuid:e,to_uuid:t},function(e){e.result?(n(H("发送邀请成功!")),n(q()),n({type:d,payload:e.invite})):n(H(e.msg))})}},exports.agreeGroupInvite=function(e){return function(t,n){N.emit("group::agreeGroupInvite",{uuid:e},function(e){if(e.result){var n=e.res,r=n.uuid,o=n.group;o.avatar=R.file.getAbsolutePath(o.avatar),t({type:f,payload:{uuid:r,group:o}}),o&&V(t,o)}})}},exports.refuseGroupInvite=function(e){return function(t,n){N.emit("group::refuseGroupInvite",{uuid:e},function(e){e.result&&t({type:p,payload:e.res})})}},exports.getGroupInvite=function(e){return function(t,n){N.emit("group::getGroupInvite",{uuid:e},function(e){e.result&&t({type:m,payload:e.res})})}},exports.getGroupList=function(){return function(e,t){return N.emit("group::getGroupList",{},function(t){if(t.result){var n=t.groups;e({type:h,payload:n});var r=!0,o=!1,i=void 0;try{for(var a,c=n["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(r=(a=c.next()).done);r=!0){var s=a.value;s.avatar=R.file.getAbsolutePath(s.avatar),V(e,s),e(exports.getGroupStatus(s.uuid))}}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}}})}},exports.switchSelectGroup=function(e){return{type:g,payload:e}},exports.changeSelectGroupActor=function(e,t){return function(n,r){return N.emit("group::setPlayerSelectedGroupActor",{groupUUID:e,groupActorUUID:t},function(e){e.result&&n({type:y,payload:e.data})})}},exports.addGroupActor=function(e,t){return function(n,r){return N.emit("group::addGroupActor",{groupUUID:e,actorUUID:t},function(t){t.result?(n({type:x,groupUUID:e,payload:t.groupActor}),n(z()),n(H("提交成功!"))):n(H(t.msg))})}},exports.removeGroupActor=function(e,t){return function(n,r){return N.emit("group::removeGroupActor",{groupUUID:e,groupActorUUID:t},function(r){r.result?(n({type:w,groupUUID:e,groupActorUUID:t}),n(W()),n(H("提交成功!"))):n(H(r.msg))})}},exports.agreeGroupActor=function(e,t){return function(n,r){return N.emit("group::agreeGroupActor",{groupUUID:e,groupActorUUID:t},function(t){t.result?(n({type:E,groupUUID:e,payload:t.groupActor}),n(z()),n(H("已同意该人物加入本团!"))):n(H(t.msg))})}},exports.refuseGroupActor=function(e,t){return function(n,r){return N.emit("group::refuseGroupActor",{groupUUID:e,groupActorUUID:t},function(r){r.result?(n({type:_,groupUUID:e,groupActorUUID:t}),n(z()),n(H("已拒绝该人物加入本团!"))):n(H(r.msg))})}},exports.updateGroupActorInfo=function(e,t,n){return function(r,o){return N.emit("group::updateGroupActorInfo",{groupUUID:e,groupActorUUID:t,groupActorInfo:n},function(o){o.result?(r({type:S,groupUUID:e,groupActorUUID:t,groupActorInfo:n}),r(z()),r(H("保存完毕!"))):r(H(o.msg))})}},exports.quitGroup=function(e){return function(t,n){return N.emit("group::quitGroup",{groupUUID:e},function(n){n.result&&(t({type:k,groupUUID:e}),t(H("已退出本群!")))})}},exports.dismissGroup=function(e){return function(t,n){return N.emit("group::dismissGroup",{groupUUID:e},function(n){n.result&&(t({type:C,groupUUID:e}),t(H("已解散本群!")))})}},exports.tickMember=function(e,t){return function(n,r){return N.emit("group::tickMember",{groupUUID:e,memberUUID:t},function(r){r.result&&(n({type:T,groupUUID:e,memberUUID:t}),n(H("操作成功")),n(z()))})}},exports.setMemberToManager=function(e,t){return function(n,r){return N.emit("group::setMemberToManager",{groupUUID:e,memberUUID:t},function(r){r.result?(n({type:I,groupUUID:e,memberUUID:t}),n(H("操作成功")),n(z())):n(H(r.msg))})}},exports.updateGroupStatus=function(e,t){return{type:D,groupUUID:e,groupStatus:t}},exports.getGroupStatus=function(e){return function(t,n){return N.emit("group::getGroupStatus",{groupUUID:e},function(n){n.result&&t(exports.updateGroupStatus(e,n.status))})}},exports.setGroupStatus=function(e,t){return function(n,r){return N.emit("group::setGroupStatus",{groupUUID:e,groupStatus:t},function(r){r.result&&n(exports.updateGroupStatus(e,t))})}}},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(6);t(568);var s=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){return a.createElement("div",{className:"modal-panel "+(this.props.className||"")},a.createElement("div",{className:"head"},this.props.title),a.createElement("div",{className:"body"},this.props.children),this.props.actions?a.createElement("div",{className:"foot"},this.props.actions):null)}}]),t}(a.Component);s.propTypes={title:c.string,children:c.node,actions:c.element},e.exports=s},,,,function(e,exports,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var r=t(9),o=r.ADD_CONVERSES,i=r.ADD_MSG,a=r.UPDATE_MSG,c=r.GET_CONVERSES_REQUEST,s=r.GET_CONVERSES_SUCCESS,l=r.GET_CONVERSES_FAILED,u=r.GET_USER_CONVERSES_SUCCESS,d=r.CREATE_CONVERSES_REQUEST,f=r.CREATE_CONVERSES_SUCCESS,p=r.CREATE_CONVERSES_FAILED,m=r.REMOVE_CONVERSES_SUCCESS,h=r.UPDATE_CONVERSES_INFO_SUCCESS,g=r.UPDATE_CONVERSES_MSGLIST_SUCCESS,v=r.SWITCH_CONVERSES,b=r.SEND_MSG,y=r.SEND_MSG_COMPLETED,x=r.UPDATE_SYSTEM_CARD_CHAT_DATA,w=t(22),E=w.getInstance(),_=t(29),S=t(27),k=S.checkUser,C=t(5),T=C.hideProfileCard,I=C.switchMenuPannel,D=function(e,t){return{type:v,converseUUID:e,userUUID:t}},R=function(e,t){return function(n,r){n(T()),n(I(0)),n(D(e,t))}},O=function(e){return{type:o,payload:e}},N=function(e){return function(t,n){return t({type:c}),E.emit("chat::getConverses",{},function(r){if(e&&e(),r.result){var o=r.list;t({type:s,payload:o});var i=n().getIn(["user","info","uuid"]);k(i);var a=!0,c=!1,u=void 0;try{for(var d,f=o["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(a=(d=f.next()).done);a=!0)!function(){var e=d.value,n=e.uuid;/^trpg/.test(n)||k(n),E.emit("chat::getConverseChatLog",{converse_uuid:n},function(e){e.result&&t({type:g,payload:e.list,convUUID:n})})}()}catch(e){c=!0,u=e}finally{try{!a&&f.return&&f.return()}finally{if(c)throw u}}}else t({type:l,payload:r.msg})})}},U=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(r,o){return o().getIn(["chat","converses",e])?void(n&&r(R(e,e))):(r({type:d}),E.emit("chat::createConverse",{uuid:e,type:t},function(t){if(t.result){var o=t.data;r({type:f,payload:o});var i=o.uuid;n&&r(R(i,i)),k(e),E.emit("chat::getConverseChatLog",{converse_uuid:i},function(e){if(e.result){var t=e.list;r({type:g,payload:t,convUUID:i})}})}else r({type:p,payload:t.msg})}))}},A=function(e){return function(t,n){return E.emit("chat::removeConverse",{converseUUID:e},function(n){n.result&&t({type:m,converseUUID:e})})}},P=function(e){return function(t,r){"string"==typeof e&&(e=[e]),t({type:u,payload:e.map(function(e){return{uuid:e,type:"user"}})});var o=r().getIn(["user","info","uuid"]);_.get("userConverses#"+o).then(function(t){t=Array.from(new Set([].concat(n(t),n(e)))),_.set("userConverses#"+o,t).then(function(e){})});var i=!0,a=!1,c=void 0;try{for(var s,l=e["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(i=(s=l.next()).done);i=!0)!function(){var e=s.value;E.emit("player::getInfo",{type:"user",uuid:e},function(e){if(e.result){var n=e.info;t({type:h,uuid:n.uuid,payload:{name:n.nickname||n.username}})}}),E.emit("chat::getUserChatLog",{user_uuid:e},function(n){if(n.result){var r=n.list;t({type:g,payload:r,convUUID:e})}})}()}catch(e){a=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw c}}}},M=function(e){return function(t,n){E.emit("chat::getOfflineUserConverse",{lastLoginDate:e},function(e){!0===e.result&&t(P(e.senders))})}},L=function(){return function(e,t){E.emit("chat::getAllUserConverse",{},function(t){!0===t.result&&e(P(t.senders))})}},j=function(e,t){return function(n,r){if(e&&"string"==typeof e){r().getIn(["chat","converses",e])||n(t.is_group?U(t.room,"group",!1):U(t.sender_uuid,"user",!1));var o=!0;e!==r().getIn(["chat","selectedConversesUUID"])&&e!==r().getIn(["group","selectedGroupUUID"])||(o=!1),n({type:i,converseUUID:e,unread:o,payload:t})}}},F=function(e,t){return function(n,r){n({type:b});var o=r().getIn(["user","info"]),i={room:t.room||"",sender_uuid:o.get("uuid"),to_uuid:e,converse_uuid:t.converse_uuid,type:t.type,message:t.message,is_public:t.is_public,is_group:t.is_group,date:new Date,data:t.data};return n(j(t.converse_uuid||e,i)),E.emit("chat::message",i,function(e){n({type:y,payload:e}),e.result})}},G=function(e,t){return{type:a,converseUUID:e,msgUUID:t.uuid,payload:t}},B=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(r,o){n?E.emit("chat::getUserChatLog",{user_uuid:e,offsetDate:t},function(t){!0===t.result&&r({type:g,payload:t.list,convUUID:e})}):E.emit("chat::getConverseChatLog",{converse_uuid:e,offsetDate:t},function(t){!0===t.result&&r({type:g,payload:t.list,convUUID:e})})}},H=function(e,t){return function(n,r){return E.emit("chat::updateCardChatData",{chatUUID:e,newData:t},function(t){t.result&&n({type:x,chatUUID:e,payload:t.log})})}};exports.switchToConverse=R,exports.addConverse=O,exports.switchConverse=D,exports.getConverses=N,exports.createConverse=U,exports.removeConverse=A,exports.addUserConverse=P,exports.getAllUserConverse=L,exports.getOfflineUserConverse=M,exports.addMsg=j,exports.sendMsg=F,exports.updateMsg=G,exports.getMoreChatLog=B,exports.updateCardChatData=H},function(e,exports,t){"use strict";function n(e,n){if(e&&n){var r=t(16),o=r.getConverses,i=r.addUserConverse,a=r.getOfflineUserConverse,c=r.getAllUserConverse,s=t(17),l=s.getFriends,u=s.getFriendsInvite,d=s.getSettings,f=t(23),p=f.getTemplate,m=f.getActor,h=t(11),g=h.getGroupList,v=h.getGroupInvite,b=t(45),y=b.getNote,x=n().getIn(["user","info"]),w=x.get("uuid");e(o()),e(l()),e(u()),e(p()),e(m()),e(g()),e(v()),e(y()),e(d()),R.get("userConverses#"+w).then(function(t){t&&t.length>0?(e(i(t)),e(a(x.get("last_login")))):e(c())})}}var r=t(9),o=r.RESET,i=r.LOGIN_REQUEST,a=r.LOGIN_SUCCESS,c=r.LOGIN_FAILED,s=r.LOGIN_TOKEN_SUCCESS,l=r.LOGOUT,u=r.REGISTER_REQUEST,d=r.REGISTER_SUCCESS,f=r.REGISTER_FAILED,p=r.FIND_USER_REQUEST,m=r.FIND_USER_SUCCESS,h=r.FIND_USER_FAILED,g=r.UPDATE_INFO_SUCCESS,v=r.ADD_FRIEND_SUCCESS,b=r.ADD_FRIEND_FAILED,y=r.GET_FRIENDS_REQUEST,x=r.GET_FRIENDS_SUCCESS,w=r.GET_FRIENDS_FAILED,E=r.SEND_FRIEND_INVITE_SUCCESS,_=r.AGREE_FRIEND_INVITE_SUCCESS,S=r.GET_FRIEND_INVITE_SUCCESS,k=r.GET_FRIEND_INVITE_ERROR,C=r.REFUSE_FRIEND_INVITE_SUCCESS,T=r.REFUSE_FRIEND_INVITE_ERROR,I=r.ADD_FRIEND_INVITE,D=t(86),R=t(29),O=t(7),N=t(22),U=N.getInstance(),A=t(5),P=A.showLoading,M=A.hideLoading,L=A.showAlert,j=t(27),F=j.checkUser,G=t(38),B=G.setUserSettings,H=G.setSystemSettings;exports.login=function(e,t){return function(r,o){t=D(t);var s="app"===O.platform;return r({type:i}),U.emit("player::login",{username:e,password:t,platform:O.platform,isApp:s},function(e){if(r(M()),e.result){var t=e.info,i=t.uuid,l=t.token,u=t.app_token;s?R.save({uuid:i,token:u}):R.set({uuid:i,token:l}),e.info.avatar=O.file.getAbsolutePath(e.info.avatar),r({type:a,payload:e.info,isApp:s}),n(r,o)}else R.remove("uuid"),R.remove("token"),r(L({type:"alert",title:"登录失败",content:e.msg})),r({type:c,payload:e.msg})})}},exports.loginWithToken=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(i,a){var l="app"===O.platform;return U.emit("player::loginWithToken",{uuid:e,token:t,platform:O.platform,isApp:l,channel:r},function(e){e.result?(e.info.avatar=O.file.getAbsolutePath(e.info.avatar),i({type:s,payload:e.info,isApp:l}),n(i,a)):a().getIn(["user","isLogin"])&&(i({type:o}),i({type:c,payload:e.msg}),i(L({type:"alert",title:"登录失败",content:"您的登录已超时，请重新登录"})))})}},exports.updateAllInfo=function(){return function(e,t){!0===t().getIn(["user","isLogin"])&&n(e,t)}},exports.logout=function(){var e="app"===O.platform;return function(t,n){var r=n().getIn(["user","info"]),i=r.get("uuid"),a=e?r.get("app_token"):r.get("token");t(P()),t({type:l}),U.emit("player::logout",{uuid:i,token:a,isApp:e},function(e){t(M()),e.result?(R.remove("uuid"),R.remove("token"),t({type:o})):t(L(e.msg))})}},exports.register=function(e,t,n){return t=D(t),function(r,o){return r({type:u}),U.emit("player::register",{username:e,password:t},function(e){r(M()),e.result?(r({type:d,payload:e.results}),n&&n()):(r({type:f,payload:e.msg}),r(L({type:"alert",title:"注册失败",content:e.msg})))})}},exports.findUser=function(e,t){return function(n,r){return n({type:p}),U.emit("player::findUser",{text:e,type:t},function(e){if(e.result){var t=e.results;if(t&&t.length>0){var r=!0,o=!1,i=void 0;try{for(var a,c=t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(r=(a=c.next()).done);r=!0){var s=a.value,l=s.uuid;l&&F(l)}}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}}n({type:m,payload:t})}else n({type:h,payload:e.msg})})}},exports.updateInfo=function(e){return function(t,n){return U.emit("player::updateInfo",e,function(e){e.result&&(e.user.avatar=O.file.getAbsolutePath(e.user.avatar),t({type:g,payload:e.user}))})}},exports.changePassword=function(e,t,n,r){return e=D(e),t=D(t),function(o,i){return U.emit("player::changePassword",{oldPassword:e,newPassword:t},function(e){e.result?n():r(e.msg)})}},exports.addFriend=function(e){return function(t,n){return U.emit("player::addFriend",{uuid:e},function(n){t(n.result?{type:v,friendUUID:e}:{type:b,payload:n.msg})})}},exports.getFriends=function(){return function(e,t){return e({type:y}),U.emit("player::getFriends",{},function(t){if(t.result){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t.list["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(r=(a=c.next()).done);r=!0){var s=a.value,l=s.uuid;n.push(l),F(l)}}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}e({type:x,payload:n})}else e({type:w,payload:t.msg})})}},exports.sendFriendInvite=function(e){return function(t,n){return U.emit("player::sendFriendInvite",{to:e},function(n){t(n.result?{type:E,payload:n.invite,uuid:e}:L(n.msg))})}},exports.agreeFriendInvite=function(e){return function(t,n){return U.emit("player::agreeFriendInvite",{uuid:e},function(e){t(e.result?{type:_,payload:e.invite}:L(e.msg))})}},exports.getFriendsInvite=function(){return function(e,t){return U.emit("player::getFriendsInvite",{},function(t){if(t.result){var n=!0,r=!1,o=void 0;try{for(var i,a=t.res["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(n=(i=a.next()).done);n=!0){var c=i.value;F(c.from_uuid)}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}e({type:S,payload:t.res})}else e({type:k,payload:t.msg})})}},exports.refuseFriendInvite=function(e){return function(t,n){return U.emit("player::refuseFriendInvite",{uuid:e},function(e){t(e.result?{type:C,payload:e.res}:{type:T,payload:e.msg})})}},exports.addFriendInvite=function(e){return{type:I,payload:e}},exports.getSettings=function(){return function(e,t){return U.emit("player::getSettings",{},function(t){if(t.result){var n=t.userSettings,r=t.systemSettings;e(B(n)),e(H(r))}})}},exports.saveSettings=function(){return function(e,t){var n=t().get("settings");return U.emit("player::saveSettings",{userSettings:n.user,systemSettings:n.system},function(e){e.result})}}},,,,,function(e,exports,t){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function r(){var e=this;this.serverUrl=l.io.protocol+"://"+l.io.host+":"+l.io.port,this.socket=s(this.serverUrl,p),this.emit=function(t,n,r){return e.socket.disconnected&&e.socket.connect(),e.socket.emit(t,n,r)},this.on=this.socket.on.bind(this.socket)}function o(){return f||(f=new r),f}function i(e){var o=t(16),i=o.addMsg,a=o.updateMsg,s=o.switchConverse,u=t(17),f=u.addFriendInvite,p=u.loginWithToken,m=t(11),h=m.updateGroupStatus,g=t(5),v=g.changeNetworkStatue,b=g.showAlert,y=g.switchMenuPannel,x=g.updateSocketId,w=t(27),E=w.getUserInfoCache;if(!(this instanceof r))throw new Error("bindEventFunc shound a API object class");var _=this;_.on("chat::message",function(t){var n=t.converse_uuid||t.sender_uuid;if(e.dispatch(i(n,t)),window.document&&document.hidden){if(e.getState().getIn(["settings","system","notification"])){var r=E(t.sender_uuid),o=r.get("nickname")||r.get("username"),a=r.get("uuid");new Notification("来自 "+o+":",{body:t.message,icon:r.get("avatar")||l.defaultImg.trpgsystem,tag:"trpg-msg",renotify:!0,data:{uuid:a}}).onclick=function(){window.focus(),e.dispatch(y(0)),e.dispatch(s(this.data.uuid))}}}}),_.on("chat::updateMessage",function(t){var n=t.converseUUID,r=t.payload;e.dispatch(a(n,r))}),_.on("player::invite",function(t){e.dispatch(f(t))}),_.on("player::tick",function(t){e.dispatch(b(t.msg)),e.dispatch({type:d})}),_.on("group::updateGroupStatus",function(t){e.dispatch(h(t.groupUUID,t.groupStatus))}),_.on("connect",function(t){e.dispatch(v(!0,"网络连接畅通")),e.dispatch(x(_.socket.id))}),_.on("connecting",function(t){e.dispatch(v(!1,"正在连接...",!0))}),_.on("reconnect",function(r){var o=this;e.dispatch(v(!0,"网络连接畅通")),e.dispatch(x(_.socket.id)),e.getState().getIn(["user","isLogin"])&&n(c.default.mark(function n(){var r,i,a;return c.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t(29),n.next=3,r.get("uuid");case 3:return i=n.sent,n.next=6,r.get("token");case 6:a=n.sent,e.dispatch(p(i,a));case 9:case"end":return n.stop()}},n,o)}))()}),_.on("reconnecting",function(t){e.dispatch(v(!1,"正在连接...",!0))}),_.on("disconnect",function(t){e.dispatch(v(!1,"已断开连接"))}),_.on("connect_failed",function(t){e.dispatch(v(!1,"连接失败"))}),_.on("error",function(t){e.dispatch(v(!1,"网络出现异常"))})}var a=t(54),c=function(e){return e&&e.__esModule?e:{default:e}}(a),s=t(257),l=t(7),u=t(9),d=u.RESET,f=null,p={jsonp:!1};exports.bindEventFunc=i,exports.getInstance=o,exports.fileUrl=l.file.url+"/file"},function(e,exports,t){"use strict";var n=t(22),r=n.getInstance(),o=t(9),i=o.GET_TEMPLATE_SUCCESS,a=o.FIND_TEMPLATE_SUCCESS,c=o.CREATE_TEMPLATE_SUCCESS,s=o.UPDATE_TEMPLATE_SUCCESS,l=o.SET_EDITED_TEMPLATE,u=o.SELECT_TEMPLATE,d=o.CREATE_ACTOR_SUCCESS,f=o.GET_ACTOR_SUCCESS,p=o.SELECT_ACTOR,m=o.REMOVE_ACTOR_SUCCESS,h=o.UPDATE_ACTOR_SUCCESS,g=t(5),v=g.showLoading,b=g.hideLoading,y=g.showAlert,x=g.hideAlert,w=g.hideModal,E=function(e,t,n,r,o){return{uuid:e,name:t,desc:n,avatar:r,info:o}},_=function(e){return function(t,n){return r.emit("actor::getTemplate",{uuid:e},function(n){if(n.result){var r=e?n.template:n.templates;t({type:i,uuid:e,payload:r})}})}},S=function(e){return function(t,n){return r.emit("actor::findTemplate",{name:e},function(e){e.result&&t({type:a,payload:e.templates})})}},k=function(e,t,n,o){return function(i,a){return i(v("创建中...")),r.emit("actor::createTemplate",{name:e,desc:t,avatar:n,info:o},function(e){i(b()),i(y({title:"成功",content:"模板创建完毕"})),i(e.result?{type:c,payload:e.template}:y(e.msg))})}},C=function(e,t,n,o){return function(i,a){if(i(v("创建中...")),!e)try{var s=JSON.parse(o);e=s.name}catch(e){return i(b()),void i(y({title:"创建失败",content:"请检查输入模板信息"}))}if(!t)try{var l=JSON.parse(o);t=l.desc}catch(e){return i(b()),void i(y({title:"创建失败",content:"请检查输入模板信息"}))}return r.emit("actor::createTemplateAdvanced",{name:e,desc:t,avatar:n,info:o},function(e){i(b()),i(w()),i(y({title:"成功",content:"模板创建完毕"})),i(e.result?{type:c,payload:e.template}:y(e.msg))})}},T=function(e,t,n,o,i){return function(a,c){return a(v("保存中...")),r.emit("actor::updateTemplate",{uuid:e,name:t,desc:n,avatar:o,info:i},function(e){a(b()),a(y({title:"成功",content:"模板更新完毕"})),a(e.result?{type:s,payload:e.template}:y(e.msg))})}},I=function(e){return{type:l,payload:e}},D=function(e){return{type:u,payload:e}},R=function(e,t,n,o,i){return function(a,c){return a(v("创建人物中，请稍后...")),r.emit("actor::createActor",{name:e,avatar:t,desc:n,info:o,template_uuid:i},function(e){a(b()),a(x()),a(w()),a(e.result?{type:d,payload:e.actor}:y(e.msg))})}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,n){return r.emit("actor::getActor",{uuid:e},function(n){if(n.result){var r=e?n.actor:n.actors;t({type:f,uuid:e,payload:r})}})}},N=function(e){return{type:p,payload:e}},U=function(e){return function(t,n){return r.emit("actor::removeActor",{uuid:e},function(n){if(t(x()),n.result){var r=n.remove;t({type:m,uuid:e,payload:r})}})}},A=function(e,t,n,o,i){return function(a,c){return a(v("正在更新人物卡信息，请稍后...")),r.emit("actor::updateActor",{uuid:e,name:t,avatar:n,desc:o,info:i},function(e){a(b()),a(x()),a(w()),a(e.result?{type:h,payload:e.actor}:y(e.msg))})}};e.exports={setTemplate:E,getTemplate:_,findTemplate:S,createTemplate:k,createTemplateAdvanced:C,updateTemplate:T,setEditedTemplate:I,selectTemplate:D,createActor:R,getActor:O,selectActor:N,removeActor:U,updateActor:A}},,,,function(e,exports,t){"use strict";var n=t(55),r=n.getUserInfo,o=n.getTemplateInfo,i=t(61),a=t(13),c=null;exports.attachStore=function(e){c=e},exports.checkUser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";if(i.v1(e)){var n=c;if(!n||!n.dispatch)throw new Error("checkUser func should bind store");var o=n.getState();if("user"===t){o.getIn(["cache","user",e])||n.dispatch(r(e))}}},exports.checkTemplate=function(e){var t=c;if(!t||!t.dispatch)throw new Error("checkUser func should bind store");t.getState().getIn(["cache","template",e])||t.dispatch(o(e))},exports.savecache=function(){},exports.loadcache=function(){},exports.getUserInfoCache=function(e){var t=c;if(t&&t.dispatch){var n=t.getState(),o=n.getIn(["cache","user",e]);return o||(t.dispatch(r(e)),a.Map())}throw new Error("checkUser func should bind store")}},,function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var o=t(54),i=n(o),a="function"==typeof Symbol&&"symbol"==typeof("function"==typeof Symbol?Symbol.iterator:"@@iterator")?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==("function"==typeof Symbol?Symbol.prototype:"@@prototype")?"symbol":typeof e},c=t(517),s=n(c),l=t(7),u=new s.default({size:1e3,storageBackend:"app"===l.platform?t(519).AsyncStorage:localStorage,defaultExpires:864e5,enableCache:!0});e.exports={set:function(){var e=r(i.default.mark(function e(t,n){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t||!n){e.next=6;break}return e.next=4,u.save({key:t,data:n});case 4:e.next=15;break;case 6:if(!t||"object"!==(void 0===t?"undefined":a(t))||n){e.next=15;break}e.t0=i.default.keys(t);case 8:if((e.t1=e.t0()).done){e.next=15;break}if(r=e.t1.value,!t.hasOwnProperty(r)){e.next=13;break}return e.next=13,u.save({key:r,data:t[r]});case 13:e.next=8;break;case 15:e.next=20;break;case 17:e.prev=17,e.t2=e.catch(0);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}},e,void 0,[[0,17]])}));return function(t,n){return e.apply(this,arguments)}}(),get:function(){var e=r(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,e.prev=1,e.next=4,u.load({key:t,autoSync:!0,syncInBackground:!1});case 4:n=e.sent,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),n="";case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}},e,void 0,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=r(i.default.mark(function e(t){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.remove({key:t});case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),save:function(){var e=r(i.default.mark(function e(t,n){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t||!n){e.next=6;break}return e.next=4,u.save({key:t,data:n,expires:null});case 4:e.next=15;break;case 6:if(!t||"object"!==(void 0===t?"undefined":a(t))||n){e.next=15;break}e.t0=i.default.keys(t);case 8:if((e.t1=e.t0()).done){e.next=15;break}if(r=e.t1.value,!t.hasOwnProperty(r)){e.next=13;break}return e.next=13,u.save({key:r,data:t[r],expires:null});case 13:e.next=8;break;case 15:e.next=20;break;case 17:e.prev=17,e.t2=e.catch(0);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}},e,void 0,[[0,17]])}));return function(t,n){return e.apply(this,arguments)}}()}},,,,,,,,,function(e,exports,t){"use strict";var n=t(9),r=n.SET_USER_SETTINGS,o=n.SET_SYSTEM_SETTINGS,i=n.UPDATE_NOTIFICATION_PERMISSION,a=n.ADD_FAVORITE_DICE,c=n.REMOVE_FAVORITE_DICE,s=n.UPDATE_FAVORITE_DICE,l=t(5),u=l.showAlert,d=t(29);exports.saveSettings=function(){return function(e,t){d.save("userSettings",t().getIn(["settings","user"])),d.save("systemSettings",t().getIn(["settings","system"]))}},exports.setUserSettings=function(e){return function(t,n){d.save("userSettings",n().getIn(["settings","user"]).merge(e)),t({type:r,payload:e})}},exports.setSystemSettings=function(e){return function(t,n){void 0!==e.notification&&!0===e.notification&&("denied"===Notification.permission?(t(u("桌面通知权限已被禁止, 请手动修改后刷新应用")),e.notification=!1):"default"===Notification.permission&&t(exports.requestNotificationPermission())),d.save("systemSettings",n().getIn(["settings","system"]).merge(e)),t({type:o,payload:e})}},exports.setNotificationPermission=function(e){return{type:i,payload:e}},exports.requestNotificationPermission=function(){return function(e,t){Notification.requestPermission(function(t){e(exports.setNotificationPermission(t)),"granted"!==t&&e(exports.setSystemSettings({notification:!1}))})}},exports.addFavoriteDice=function(){return{type:a}},exports.removeFavoriteDice=function(e){return{type:c,index:e}},exports.updateFavoriteDice=function(e,t){return{type:s,index:e,payload:t}}},,,,,,,function(e,exports,t){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var r=t(54),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=t(9),c=a.ADD_NOTE,s=a.GET_NOTE,l=a.SWITCH_NOTE,u=a.SAVE_NOTE,d=t(29);exports.addNote=function(){return{type:c}},exports.saveNote=function(e,t,r){var a=this;return n(o.default.mark(function n(){var c;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.get("note");case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={};case 5:c=n.t0,c[e]=i({},c[e],{uuid:e,title:t,content:r,updatedAt:(new Date).getTime()}),d.save("note",c);case 8:case"end":return n.stop()}},n,a)}))(),{type:u,payload:{uuid:e,title:t,content:r}}},exports.getNote=function(){return function(){var e=n(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.get("note");case 2:r=e.sent,r&&t({type:s,noteList:r});case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},exports.switchNote=function(e){return{type:l,noteUUID:e}}},,,,,,,,,function(e,exports,t){"use strict";e.exports=t(490)},function(e,exports,t){"use strict";var n=t(9),r=n.GET_USER_INFO,o=n.GET_TEMPLATE_INFO,i=n.GET_ACTOR_INFO,a=t(22),c=a.getInstance(),s=t(7);exports.getUserInfo=function(e){if(!e)throw new Error("getUserInfo need uuid");return function(t,n){return c.emit("player::getInfo",{type:"user",uuid:e},function(e){e.result&&(e.info.avatar=s.file.getAbsolutePath(e.info.avatar),t({type:r,payload:e.info}))})}},exports.getTemplateInfo=function(e){if(!e)throw new Error("getTemplateInfo need uuid");return function(t,n){return c.emit("actor::getTemplate",{uuid:e},function(e){e.result&&t({type:o,payload:e.template})})}},exports.getActorInfo=function(e){if(!e)throw new Error("getActorInfo need uuid");return function(t,n){return c.emit("actor::getActor",{uuid:e},function(e){if(e.result){var n=e.actor?e.actor:e.actors[0];t({type:i,payload:n})}})}}},function(e,exports,t){"use strict";var n=t(0),r={getShortDiff:function(e){var t=e?n(e):n();return r.isToday(t)?t.format("HH:mm"):t.fromNow()},getShortDate:function(e){var t=e?n(e):n();return r.isToday(t)?t.format("HH:mm"):t.format("MM-DD HH:mm")},getMsgDate:function(e){var t=e?n(e):n();return r.isToday(t)?t.format("HH:mm:ss"):t.format("YYYY-MM-DD HH:mm:ss")},getFullDate:function(e){return(e?n(e):n()).format("YYYY-MM-DD HH:mm:ss")},getSamlpeDate:function(e){return(e?n(e):n()).format("YYYY-MM-DD")},isToday:function(e){return n().isSame(e,"day")},getDateDiff:function(e,t){return new Date(t)-new Date(e)}};e.exports=r},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(5),u=l.showModal,d=t(23),f=d.setEditedTemplate,p=d.findTemplate,m=d.selectTemplate,h=t(280),g=t(281),v=t(588),b=t(12),y=t(26);t(591);var x=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={searchName:""},o}return o(t,e),i(t,[{key:"_handleSearch",value:function(){var e=this.state.searchName;this.props.findTemplate(e)}},{key:"_handleCreateTemplate",value:function(){this.props.setEditedTemplate({}),this.props.showModal(a.createElement(h,{isEdit:!1}))}},{key:"_handleCreateActor",value:function(e){e=e.toJS(),this.props.selectTemplate(e),this.props.showModal(a.createElement(g,null))}},{key:"_handleEdit",value:function(e){this.props.setEditedTemplate(e.toJS()),this.props.showModal(a.createElement(h,{isEdit:!0}))}},{key:"getFindResult",value:function(){var e=this,t=this.props.findingResult;return t?0===t.size?a.createElement("div",{className:"no-result"},"暂无搜索结果..."):t.map(function(t,n){return a.createElement(v,{key:"template-find-result"+t.get("uuid"),canEdit:!1,name:t.get("name"),desc:t.get("desc"),creator:t.get("creator_name")||"未知",time:t.get("updateAt"),onEdit:function(){return e._handleEdit(t)},onCreate:function(){return e._handleCreateActor(t)}})}):null}},{key:"render",value:function(){var e=this;return a.createElement(b,{title:"创建人物卡"},a.createElement("div",{className:"template-select"},a.createElement(y,{effect:"solid"}),a.createElement("div",{className:"header"},a.createElement("input",{type:"text",placeholder:"输入要搜索的模板名",value:this.state.searchName,onChange:function(t){e.setState({searchName:t.target.value})}}),a.createElement("button",{onClick:function(){return e._handleSearch()}},a.createElement("i",{className:"iconfont"},""),"搜索"),a.createElement("button",{onClick:function(){return e._handleCreateTemplate()}},a.createElement("i",{className:"iconfont"},""),"创建新的人物模板")),a.createElement("div",{className:"body"},a.createElement("div",{className:"search-result"},a.createElement("p",{className:"title"},"搜索列表"),this.getFindResult()),a.createElement("div",{className:"self-template"},a.createElement("p",{className:"title"},"我的模板"),this.props.selfTemplate.map(function(t,n){return a.createElement(v,{key:t.get("uuid"),canEdit:!0,name:t.get("name"),desc:t.get("desc"),creator:e.props.username,time:t.get("updateAt"),onEdit:function(){return e._handleEdit(t)},onCreate:function(){return e._handleCreateActor(t)}})})))))}}]),t}(a.Component);e.exports=s(function(e){return{username:e.getIn(["user","info","username"]),findingResult:e.getIn(["actor","findingResult"]),selfTemplate:e.getIn(["actor","selfTemplate"])}},function(e){return{showModal:function(t){return e(u(t))},setEditedTemplate:function(t){return e(f(t))},findTemplate:function(t){return e(p(t))},selectTemplate:function(t){return e(m(t))}}})(x)},,,,,,,,,,,,,,,,,function(e,exports,t){"use strict";var n=t(22),r=n.getInstance(),o=t(16),i=o.addMsg,a=t(5),c=a.showAlert;exports.sendDiceRequest=function(e,t,n,o){return function(a,c){return r.emit("dice::sendDiceRequest",{to_uuid:e,is_group:t,dice_request:n,reason:o},function(t){t.result&&a(i(e,t.pkg))})}},exports.acceptDiceRequest=function(e){return function(t,n){return r.emit("dice::acceptDiceRequest",{msg_card_uuid:e},function(e){e.result})}},exports.sendDiceInvite=function(e,t,n,o,a,c){return function(s,l){return r.emit("dice::sendDiceInvite",{to_uuid:e,is_group:t,dice_request:n,reason:o,inviteUUIDList:a,inviteNameList:c},function(t){t.result&&s(i(e,t.pkg))})}},exports.acceptDiceInvite=function(e,t){return function(t,n){return r.emit("dice::acceptDiceInvite",{msg_card_uuid:e},function(e){e.result})}},exports.sendQuickDice=function(e,t,n,o){return function(i,a){return r.emit("dice::sendQuickDice",{to_uuid:e,is_group:t,dice_request:n,reason:o},function(e){e.result||i(c("快速投骰失败"))})}}},function(e,exports,t){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=t(212),o=r.emojify,i={convertShortnames:!0,convertUnicode:!0,convertAscii:!0,styles:{backgroundImage:"url(/src/assets/img/emojione.sprites.png)",width:"64px",height:"64px",margin:"4px",zoom:"0.4"}};exports.emojify=function(e,t){return o(e,n({},t,i))},exports.getCodeList=function(){return{people:[":smile:",":laughing:",":blush:",":smiley:",":relaxed:",":smirk:",":heart_eyes:",":kissing_heart:",":kissing_closed_eyes:",":flushed:",":relieved:",":grin:",":wink:",":stuck_out_tongue_winking_eye:",":stuck_out_tongue_closed_eyes:",":grinning:",":kissing:",":kissing_smiling_eyes:",":stuck_out_tongue:",":sleeping:",":worried:",":frowning:",":anguished:",":open_mouth:",":grimacing:",":confused:",":hushed:",":expressionless:",":unamused:",":sweat_smile:",":sweat:",":disappointed_relieved:",":weary:",":pensive:",":disappointed:",":confounded:",":fearful:",":cold_sweat:",":persevere:",":cry:",":sob:",":joy:",":astonished:",":scream:",":tired_face:",":angry:",":rage:",":triumph:",":sleepy:",":yum:",":mask:",":sunglasses:",":dizzy_face:",":imp:",":smiling_imp:",":neutral_face:",":no_mouth:",":innocent:",":alien:",":yellow_heart:",":blue_heart:",":purple_heart:",":heart:",":green_heart:",":broken_heart:",":heartbeat:",":heartpulse:",":two_hearts:",":revolving_hearts:",":cupid:",":sparkling_heart:",":sparkles:",":star:",":star2:",":dizzy:",":boom:",":anger:",":exclamation:",":question:",":grey_exclamation:",":grey_question:",":zzz:",":dash:",":sweat_drops:",":notes:",":musical_note:",":fire:",":hankey:",":+1:",":-1:",":ok_hand:",":facepunch:",":fist:",":v:",":wave:",":hand:",":open_hands:",":point_up:",":point_down:",":point_left:",":point_right:",":raised_hands:",":pray:",":point_up_2:",":clap:",":muscle:",":metal:",":runner:",":couple:",":family:",":two_men_holding_hands:",":two_women_holding_hands:",":dancer:",":dancers:",":ok_woman:",":no_good:",":information_desk_person:",":raising_hand:",":bride_with_veil:",":person_with_pouting_face:",":person_frowning:",":bow:",":couplekiss:",":couple_with_heart:",":massage:",":haircut:",":nail_care:",":boy:",":girl:",":woman:",":man:",":baby:",":older_woman:",":older_man:",":person_with_blond_hair:",":man_with_gua_pi_mao:",":man_with_turban:",":construction_worker:",":cop:",":angel:",":princess:",":smiley_cat:",":smile_cat:",":heart_eyes_cat:",":kissing_cat:",":smirk_cat:",":scream_cat:",":crying_cat_face:",":joy_cat:",":pouting_cat:",":japanese_ogre:",":japanese_goblin:",":see_no_evil:",":hear_no_evil:",":speak_no_evil:",":guardsman:",":skull:",":feet:",":lips:",":kiss:",":droplet:",":ear:",":eyes:",":nose:",":tongue:",":love_letter:",":bust_in_silhouette:",":busts_in_silhouette:",":speech_balloon:",":thought_balloon:"],nature:[":sunny:",":umbrella:",":cloud:",":snowflake:",":snowman:",":zap:",":cyclone:",":foggy:",":ocean:",":cat:",":dog:",":mouse:",":hamster:",":rabbit:",":wolf:",":frog:",":tiger:",":koala:",":bear:",":pig:",":pig_nose:",":cow:",":boar:",":monkey_face:",":monkey:",":horse:",":racehorse:",":camel:",":sheep:",":elephant:",":panda_face:",":snake:",":bird:",":baby_chick:",":hatched_chick:",":hatching_chick:",":chicken:",":penguin:",":turtle:",":bug:",":ant:",":beetle:",":snail:",":octopus:",":tropical_fish:",":fish:",":whale:",":whale2:",":dolphin:",":cow2:",":ram:",":rat:",":water_buffalo:",":tiger2:",":rabbit2:",":dragon:",":goat:",":rooster:",":dog2:",":pig2:",":mouse2:",":ox:",":dragon_face:",":blowfish:",":crocodile:",":dromedary_camel:",":leopard:",":cat2:",":poodle:",":bouquet:",":cherry_blossom:",":tulip:",":four_leaf_clover:",":rose:",":sunflower:",":hibiscus:",":maple_leaf:",":leaves:",":fallen_leaf:",":herb:",":mushroom:",":cactus:",":palm_tree:",":evergreen_tree:",":deciduous_tree:",":chestnut:",":seedling:",":blossom:",":ear_of_rice:",":shell:",":globe_with_meridians:",":sun_with_face:",":full_moon_with_face:",":new_moon_with_face:",":new_moon:",":waxing_crescent_moon:",":first_quarter_moon:",":waxing_gibbous_moon:",":full_moon:",":waning_gibbous_moon:",":last_quarter_moon:",":waning_crescent_moon:",":last_quarter_moon_with_face:",":first_quarter_moon_with_face:",":crescent_moon:",":earth_africa:",":earth_americas:",":earth_asia:",":volcano:",":milky_way:",":partly_sunny:"],objects:[":bamboo:",":gift_heart:",":dolls:",":school_satchel:",":mortar_board:",":flags:",":fireworks:",":sparkler:",":wind_chime:",":rice_scene:",":jack_o_lantern:",":ghost:",":santa:",":christmas_tree:",":gift:",":bell:",":no_bell:",":tanabata_tree:",":tada:",":confetti_ball:",":balloon:",":crystal_ball:",":cd:",":dvd:",":floppy_disk:",":camera:",":video_camera:",":movie_camera:",":computer:",":tv:",":iphone:",":phone:",":telephone_receiver:",":pager:",":fax:",":minidisc:",":vhs:",":sound:",":speaker:",":mute:",":loudspeaker:",":mega:",":hourglass:",":hourglass_flowing_sand:",":alarm_clock:",":watch:",":radio:",":satellite:",":loop:",":mag:",":mag_right:",":unlock:",":lock:",":lock_with_ink_pen:",":closed_lock_with_key:",":key:",":bulb:",":flashlight:",":high_brightness:",":low_brightness:",":electric_plug:",":battery:",":calling:",":email:",":mailbox:",":postbox:",":bath:",":bathtub:",":shower:",":toilet:",":wrench:",":nut_and_bolt:",":hammer:",":seat:",":moneybag:",":yen:",":dollar:",":pound:",":euro:",":credit_card:",":money_with_wings:",":e-mail:",":inbox_tray:",":outbox_tray:",":envelope:",":incoming_envelope:",":postal_horn:",":mailbox_closed:",":mailbox_with_mail:",":mailbox_with_no_mail:",":package:",":door:",":smoking:",":bomb:",":gun:",":pill:",":syringe:",":page_facing_up:",":page_with_curl:",":bookmark_tabs:",":bar_chart:",":chart_with_upwards_trend:",":chart_with_downwards_trend:",":scroll:",":clipboard:",":calendar:",":date:",":file_folder:",":open_file_folder:",":scissors:",":pushpin:",":paperclip:",":black_nib:",":pencil2:",":straight_ruler:",":triangular_ruler:",":closed_book:",":green_book:",":blue_book:",":orange_book:",":notebook:",":notebook_with_decorative_cover:",":ledger:",":books:",":bookmark:",":name_badge:",":microscope:",":telescope:",":newspaper:",":football:",":basketball:",":soccer:",":baseball:",":tennis:",":8ball:",":rugby_football:",":bowling:",":golf:",":mountain_bicyclist:",":bicyclist:",":horse_racing:",":snowboarder:",":swimmer:",":surfer:",":ski:",":spades:",":hearts:",":clubs:",":diamonds:",":gem:",":ring:",":trophy:",":musical_score:",":musical_keyboard:",":violin:",":space_invader:",":video_game:",":black_joker:",":flower_playing_cards:",":game_die:",":dart:",":mahjong:",":clapper:",":pencil:",":book:",":art:",":microphone:",":headphones:",":trumpet:",":saxophone:",":guitar:",":sandal:",":high_heel:",":lipstick:",":boot:",":shirt:",":necktie:",":womans_clothes:",":dress:",":running_shirt_with_sash:",":jeans:",":kimono:",":bikini:",":ribbon:",":tophat:",":crown:",":womans_hat:",":mans_shoe:",":closed_umbrella:",":briefcase:",":handbag:",":pouch:",":purse:",":eyeglasses:",":fishing_pole_and_fish:",":coffee:",":tea:",":sake:",":baby_bottle:",":beer:",":beers:",":cocktail:",":tropical_drink:",":wine_glass:",":fork_and_knife:",":pizza:",":hamburger:",":fries:",":poultry_leg:",":meat_on_bone:",":spaghetti:",":curry:",":fried_shrimp:",":bento:",":sushi:",":fish_cake:",":rice_ball:",":rice_cracker:",":rice:",":ramen:",":stew:",":oden:",":dango:",":egg:",":bread:",":doughnut:",":custard:",":icecream:",":ice_cream:",":shaved_ice:",":birthday:",":cake:",":cookie:",":chocolate_bar:",":candy:",":lollipop:",":honey_pot:",":apple:",":green_apple:",":tangerine:",":lemon:",":cherries:",":grapes:",":watermelon:",":strawberry:",":peach:",":melon:",":banana:",":pear:",":pineapple:",":sweet_potato:",":eggplant:",":tomato:",":corn:"],places:[":house:",":house_with_garden:",":school:",":office:",":post_office:",":hospital:",":bank:",":convenience_store:",":love_hotel:",":hotel:",":wedding:",":church:",":department_store:",":european_post_office:",":city_sunrise:",":city_sunset:",":japanese_castle:",":european_castle:",":tent:",":factory:",":tokyo_tower:",":japan:",":mount_fuji:",":sunrise_over_mountains:",":sunrise:",":stars:",":statue_of_liberty:",":bridge_at_night:",":carousel_horse:",":rainbow:",":ferris_wheel:",":fountain:",":roller_coaster:",":ship:",":speedboat:",":boat:",":sailboat:",":rowboat:",":anchor:",":rocket:",":airplane:",":helicopter:",":steam_locomotive:",":tram:",":mountain_railway:",":bike:",":aerial_tramway:",":suspension_railway:",":mountain_cableway:",":tractor:",":blue_car:",":oncoming_automobile:",":car:",":taxi:",":oncoming_taxi:",":articulated_lorry:",":bus:",":oncoming_bus:",":rotating_light:",":police_car:",":oncoming_police_car:",":fire_engine:",":ambulance:",":minibus:",":truck:",":train:",":station:",":train2:",":bullettrain_front:",":bullettrain_side:",":light_rail:",":monorail:",":railway_car:",":trolleybus:",":ticket:",":fuelpump:",":vertical_traffic_light:",":traffic_light:",":warning:",":construction:",":beginner:",":atm:",":slot_machine:",":busstop:",":barber:",":hotsprings:",":checkered_flag:",":crossed_flags:",":izakaya_lantern:",":moyai:",":circus_tent:",":performing_arts:",":round_pushpin:",":triangular_flag_on_post:"],symbols:[":one:",":two:",":three:",":four:",":five:",":six:",":seven:",":eight:",":nine:",":keycap_ten:",":1234:",":zero:",":hash:",":symbols:",":arrow_backward:",":arrow_down:",":arrow_forward:",":arrow_left:",":capital_abcd:",":abcd:",":abc:",":arrow_lower_left:",":arrow_lower_right:",":arrow_right:",":arrow_up:",":arrow_upper_left:",":arrow_upper_right:",":arrow_double_down:",":arrow_double_up:",":arrow_down_small:",":arrow_heading_down:",":arrow_heading_up:",":leftwards_arrow_with_hook:",":arrow_right_hook:",":left_right_arrow:",":arrow_up_down:",":arrow_up_small:",":arrows_clockwise:",":arrows_counterclockwise:",":rewind:",":fast_forward:",":information_source:",":ok:",":twisted_rightwards_arrows:",":repeat:",":repeat_one:",":new:",":top:",":up:",":cool:",":free:",":ng:",":cinema:",":koko:",":signal_strength:",":u5272:",":u5408:",":u55b6:",":u6307:",":u6708:",":u6709:",":u6e80:",":u7121:",":u7533:",":u7a7a:",":u7981:",":sa:",":restroom:",":mens:",":womens:",":baby_symbol:",":no_smoking:",":parking:",":wheelchair:",":metro:",":baggage_claim:",":accept:",":wc:",":potable_water:",":put_litter_in_its_place:",":secret:",":congratulations:",":m:",":passport_control:",":left_luggage:",":customs:",":ideograph_advantage:",":cl:",":sos:",":id:",":no_entry_sign:",":underage:",":no_mobile_phones:",":do_not_litter:",":non-potable_water:",":no_bicycles:",":no_pedestrians:",":children_crossing:",":no_entry:",":eight_spoked_asterisk:",":sparkle:",":eight_pointed_black_star:",":heart_decoration:",":vs:",":vibration_mode:",":mobile_phone_off:",":chart:",":currency_exchange:",":aries:",":taurus:",":gemini:",":cancer:",":leo:",":virgo:",":libra:",":scorpius:",":sagittarius:",":capricorn:",":aquarius:",":pisces:",":ophiuchus:",":six_pointed_star:",":negative_squared_cross_mark:",":a:",":b:",":ab:",":o2:",":diamond_shape_with_a_dot_inside:",":recycle:",":end:",":back:",":on:",":soon:",":clock1:",":clock130:",":clock10:",":clock1030:",":clock11:",":clock1130:",":clock12:",":clock1230:",":clock2:",":clock230:",":clock3:",":clock330:",":clock4:",":clock430:",":clock5:",":clock530:",":clock6:",":clock630:",":clock7:",":clock730:",":clock8:",":clock830:",":clock9:",":clock930:",":heavy_dollar_sign:",":copyright:",":registered:",":tm:",":x:",":bangbang:",":interrobang:",":o:",":heavy_multiplication_x:",":heavy_plus_sign:",":heavy_minus_sign:",":heavy_division_sign:",":white_flower:",":100:",":heavy_check_mark:",":ballot_box_with_check:",":radio_button:",":link:",":curly_loop:",":wavy_dash:",":part_alternation_mark:",":trident:",":black_small_square:",":white_small_square:",":black_medium_small_square:",":white_medium_small_square:",":black_medium_square:",":white_medium_square:",":black_large_square:",":white_large_square:",":white_check_mark:",":black_square_button:",":white_square_button:",":black_circle:",":white_circle:",":red_circle:",":large_blue_diamond:",":large_orange_diamond:",":small_blue_diamond:",":small_orange_diamond:",":small_red_triangle:",":small_red_triangle_down:"]}}},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(6),u=t(44),d=t(26);t(570);var f=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"getActorProperty",value:function(e,t){var n=this;if(t){var r=u.parse(t.get("info"));return r.setData(e.info),r.getCells().map(function(t,r){var o=t.name,i=n.props.overwritedActorData[o]||t.value;return a.createElement("div",{key:"actor-property#"+e.uuid+"#"+r,className:"actor-property-cell","data-tip":t.desc,"data-for":"property-desc"},a.createElement("span",null,o,":"),a.createElement("span",{style:{textDecoration:n.props.editingData[o]?"line-through":"initial"}},i),n.props.canEdit&&a.createElement("input",{type:"text",value:n.props.editingData[o]||"",disabled:"expression"===t.func,onChange:function(e){n.props.onEditData&&n.props.onEditData(o,e.target.value)}}))})}}},{key:"render",value:function(){var e=this.props.actor,t=this.props.templateCache.get(e.template_uuid);return a.createElement("div",{className:"actor-profile"},a.createElement(d,{effect:"solid",id:"property-desc",place:"left"}),a.createElement("div",{className:"profile"},a.createElement("div",{className:"name"},e.name),a.createElement("div",{className:"uuid",title:e.uuid},e.uuid),a.createElement("div",{className:"avatar",style:{backgroundImage:"url("+e.avatar+")"}}),a.createElement("div",{className:"desc"},e.desc)),a.createElement("div",{className:"property"},this.getActorProperty(e,t)))}}]),t}(a.Component);f.defaultProps={canEdit:!1,editingData:{},overwritedActorData:{}},f.propTypes={actor:l.object.isRequired,canEdit:l.bool,editingData:l.object,onEditData:l.func,overwritedActorData:l.object},e.exports=s(function(e){return{templateCache:e.getIn(["cache","template"])}})(f)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof("function"==typeof Symbol?Symbol.iterator:"@@iterator")?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==("function"==typeof Symbol?Symbol.prototype:"@@prototype")?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=t(1),s=t(4),l=s.connect,u=t(6),d=t(22).fileUrl,f=t(5),p=f.showAlert;t(584);var m=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={isUploading:!1},o}return o(t,e),a(t,[{key:"_handleSelect",value:function(){if(this.state.isUploading)return void this.props.dispatch(p("图片正在上传中, 请稍后..."));this.refs.file.click()}},{key:"_handleUpload",value:function(){var e=this,t=this.refs.file.files[0],n=new FormData;n.append("avatar",t);var r={"avatar-type":this.props.type||"actor","user-uuid":this.props.user_uuid};this.props.attachUUID&&(r["attach-uuid"]=this.props.attachUUID),this.props.width&&(r.width=this.props.width,this.props.height&&(r.height=this.props.height)),this.setState({isUploading:!0}),fetch(d+"/avatar",{method:"POST",headers:r,body:n}).then(function(e){return e.ok?e.json():e.text()}).then(function(t){e.setState({isUploading:!1}),"object"===(void 0===t?"undefined":i(t))?e.props.onUploadSuccess&&e.props.onUploadSuccess(t):e.props.dispatch(p("图片上传失败:"+t))}).catch(function(t){e.props.dispatch(p("图片上传失败:"+t))})}},{key:"render",value:function(){var e=this;return c.createElement("div",{className:"image-uploader",style:{width:this.props.containerWidth,height:this.props.containerHeight},onClick:function(){return e._handleSelect()}},c.createElement("input",{type:"file",ref:"file",accept:"image/*",onChange:function(t){return e._handleUpload()}}),c.createElement("div",{className:"mask"},this.state.isUploading?"图片上传中...":"点击上传图片"),this.props.children)}}]),t}(c.Component);m.propTypes={onUploadSuccess:u.func,width:u.oneOfType([u.string,u.number]),height:u.oneOfType([u.string,u.number]),type:u.oneOf(["actor","user","group"]),attachUUID:u.string,containerWidth:u.string,containerHeight:u.string},e.exports=l(function(e){return{user_uuid:e.getIn(["user","info","uuid"])}})(m)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,exports){e.exports=require("./nav")},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(56),u=t(7),d=t(554),f=t(282),p=f.TabsController,m=f.Tab,h=t(283),g=t(16),v=g.switchConverse,b=t(5),y=b.showProfileCard;t(604);var x=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"_handleSelectConverse",value:function(e,t){this.props.dispatch(v(e,t))}},{key:"getWelcomeMessage",value:function(){var e=(new Date).getHours();return e<6?"我欲修仙，法力无边。":e<12?"早上好，今天请继续加油！":e<18?"下午好，喝杯茶吧，让精神抖擞起来。":"跑团时间到！赶紧找个团一起哈啤！"}},{key:"getConverseList",value:function(){var e=this;if(this.props.converses.size>0){var t=this.props.usercache,n=this.props.converses.valueSeq().filter(function(e){return"user"===e.get("type")||"system"===e.get("type")}).sortBy(function(e){return new Date(e.get("lastTime"))}).reverse().map(function(n,r){var o=n.get("uuid"),i="trpgsystem"===o?u.defaultImg.trpgsystem:u.defaultImg.user,c="user"===n.get("type")?e.props.usercache.getIn([n.get("members",0),"avatar"]):null,s=n.get("members")?n.get("members").find(function(t){return t!==e.props.userinfo.get("uuid")}):o,d=n.get("icon")||t.getIn([o,"avatar"])||c;return d=u.file.getAbsolutePath(d)||i,a.createElement(h,{key:"converses#"+r,icon:d,title:n.get("name"),content:n.get("lastMsg"),time:n.get("lastTime")?l.getShortDiff(n.get("lastTime")):"",uuid:o,unread:n.get("unread"),isSelected:e.props.selectedUUID===o,onClick:function(){return e._handleSelectConverse(o,s)},hideCloseBtn:!1})});return a.createElement("div",{className:"converses-list"},n)}return a.createElement("div",{className:"converses-list"},a.createElement("div",{className:"converses-tip"},this.props.conversesDesc))}},{key:"getFriendList",value:function(){var e=this,t=this.props.friends.toJS(),n=this.props.usercache;return a.createElement("div",{className:"friend-list"},t.length>0?t.map(function(t,r){var o=t;return a.createElement(h,{key:"friends#"+o+"#"+r,icon:n.getIn([o,"avatar"])||u.defaultImg.user,title:n.getIn([o,"nickname"])||n.getIn([o,"username"]),content:n.getIn([o,"sign"]),time:"",uuid:"",isSelected:!1,onClick:function(){return e.props.dispatch(y(o))},hideCloseBtn:!0})}):a.createElement("div",{className:"no-friend"},"暂无好友哦"))}},{key:"render",value:function(){return a.createElement("div",{className:"converse"},a.createElement("div",{className:"list"},a.createElement(p,null,a.createElement(m,{name:a.createElement("span",null,a.createElement("i",{className:"iconfont"},""),"消息")},this.getConverseList()),a.createElement(m,{name:a.createElement("span",null,a.createElement("i",{className:"iconfont"},""),"好友")},this.getFriendList()))),a.createElement("div",{className:"detail"},this.props.selectedUUID?a.createElement(d,{converseUUID:this.props.selectedUUID}):a.createElement("div",{className:"nocontent"},a.createElement("p",{className:"nocontent-img"},a.createElement("img",{src:"/src/assets/img/dice.png"})),a.createElement("p",{className:"welcome"},this.getWelcomeMessage()))))}}]),t}(a.Component);e.exports=s(function(e){return{selectedUUID:e.getIn(["chat","selectedConversesUUID"]),conversesDesc:e.getIn(["chat","conversesDesc"]),converses:e.getIn(["chat","converses"]),friends:e.getIn(["user","friendList"]),usercache:e.getIn(["cache","user"]),userinfo:e.getIn(["user","info"])}})(x)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(15),u=t(5),d=u.setLastDiceType;t(555);var f=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={diceType:o.props.lastDiceType||"basicDice",diceReason:"",favoriteDiceValue:""},o}return o(t,e),i(t,[{key:"_handleSendReq",value:function(){var e="";"basicDice"===this.state.diceType?e=this.refs.diceNum.value+"d"+this.refs.diceFace.value:"complexDice"===this.state.diceType?e=this.refs.diceExp.value:"favoriteDice"===this.state.diceType&&(e=this.state.favoriteDiceValue+"+"+(this.refs.diceTempAdd.value||0)),this.props.onSendDiceRequest&&this.props.onSendDiceRequest(this.state.diceReason,e)}},{key:"_handleChangeDiceType",value:function(e){this.setState({diceType:e}),this.props.dispatch(d(e))}},{key:"render",value:function(){var e=this,t=[{value:"basicDice",label:"基本骰"},{value:"complexDice",label:"复合骰"},{value:"favoriteDice",label:"常用骰"}],n=this.props.favoriteDice.map(function(e){return{value:e.get("value"),label:e.get("title")+"("+e.get("value")+")"}}).toJS();return a.createElement("div",{className:"dice-request"},a.createElement("span",null,"因为"),a.createElement("input",{type:"text",className:"dice-reason",placeholder:"投骰理由",value:this.state.diceReason,onChange:function(t){return e.setState({diceReason:t.target.value})}}),a.createElement("span",null,"请求投骰",a.createElement("i",{className:"iconfont"},"")),a.createElement(l,{name:"dice-select",className:"dice-select",value:this.state.diceType,options:t,clearable:!1,searchable:!1,placeholder:"请选择骰子类型...",onChange:function(t){return e._handleChangeDiceType(t.value)}}),"basicDice"===this.state.diceType?a.createElement("div",{className:"dice basicDice"},a.createElement("input",{key:"dicereq-diceNum",type:"number",placeholder:"骰数",defaultValue:"1",ref:"diceNum"}),a.createElement("span",null,"d"),a.createElement("input",{key:"dicereq-diceFace",type:"number",placeholder:"骰面",defaultValue:"100",ref:"diceFace"})):"complexDice"===this.state.diceType?a.createElement("div",{className:"dice complexDice"},a.createElement("input",{key:"dicereq-diceExp",type:"text",placeholder:"请输入骰子表达式",ref:"diceExp",defaultValue:"1d100"})):a.createElement("div",{className:"dice favoriteDice"},a.createElement(l,{name:"dice-favorite-select",className:"dice-favorite-select",value:this.state.favoriteDiceValue,options:n,clearable:!1,searchable:!1,placeholder:"请选择常用骰",onChange:function(t){return e.setState({favoriteDiceValue:t.value})}}),a.createElement("input",{key:"dicereq-diceTempAdd",type:"number",placeholder:"临时加值",ref:"diceTempAdd",defaultValue:"0"})),a.createElement("button",{onClick:function(){return e._handleSendReq()}},"发送申请"))}}]),t}(a.Component);e.exports=s(function(e){return{lastDiceType:e.getIn(["ui","lastDiceType"]),favoriteDice:e.getIn(["settings","user","favoriteDice"])}})(f)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(15),u=t(5),d=u.setLastDiceType;t(557);var f=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={diceType:o.props.lastDiceType||"basicDice",diceReason:""},o}return o(t,e),i(t,[{key:"_handleSendReq",value:function(){var e="";e="basicDice"===this.state.diceType?this.refs.diceNum.value+"d"+this.refs.diceFace.value:this.refs.diceExp.value,this.props.onSendDiceInvite&&this.props.onSendDiceInvite(this.state.diceReason,e)}},{key:"_handleChangeDiceType",value:function(e){this.setState({diceType:e}),this.props.dispatch(d(e))}},{key:"render",value:function(){var e=this,t=[{value:"basicDice",label:"基本骰"},{value:"complexDice",label:"复合骰"}];return a.createElement("div",{className:"dice-invite"},a.createElement("span",null,"因为"),a.createElement("input",{type:"text",className:"dice-reason",placeholder:"投骰理由",value:this.state.diceReason,onChange:function(t){return e.setState({diceReason:t.target.value})}}),a.createElement("span",null,"邀请",this.props.inviteList?this.props.inviteList.join(","):"所有人","投骰",a.createElement("i",{className:"iconfont"},"")),a.createElement(l,{name:"dice-select",className:"dice-select",value:this.state.diceType,options:t,clearable:!1,searchable:!1,placeholder:"请选择骰子类型...",onChange:function(t){return e._handleChangeDiceType(t.value)}}),"complexDice"===this.state.diceType?a.createElement("div",{className:"dice complexDice"},a.createElement("input",{key:"dicereq-diceExp",type:"text",placeholder:"请输入骰子表达式",ref:"diceExp",defaultValue:"1d100"})):a.createElement("div",{className:"dice basicDice"},a.createElement("input",{key:"dicereq-diceNum",type:"number",placeholder:"骰数",defaultValue:"1",ref:"diceNum"}),a.createElement("span",null,"d"),a.createElement("input",{key:"dicereq-diceFace",type:"number",placeholder:"骰面",defaultValue:"100",ref:"diceFace"})),a.createElement("button",{onClick:function(){return e._handleSendReq()}},"发送申请"))}}]),t}(a.Component);e.exports=s(function(e){return{lastDiceType:e.getIn(["ui","lastDiceType"])}})(f)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(562),u=t(7),d=t(56),f=t(572),p=t(16),m=p.getMoreChatLog,h=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={nomore:!1},o}return o(t,e),i(t,[{key:"componentDidMount",value:function(){f.bottom(this.refs.container,400),0===this.props.msgList.size?this.setState({nomore:!0}):this.setState({nomore:!1})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(0===e.msgList.size||e.msgList.size===this.props.msgList.size?this.setState({nomore:!0}):this.setState({nomore:!1}),e.converseUUID===this.props.converseUUID&&0!==e.msgList.size&&0!==this.props.msgList.size&&e.msgList.last().get("date")===this.props.msgList.last().get("date")||setTimeout(function(){f.bottom(t.refs.container,100)},0),this.props.msgList.first()&&e.msgList.first()&&e.msgList.first().get("date")!==this.props.msgList.first().get("date")){var n=this.refs.container.scrollHeight-this.refs.container.scrollTop;setTimeout(function(){t.refs.container.scrollTop=t.refs.container.scrollHeight-n},0)}}},{key:"_handleGetMoreLog",value:function(){var e=this.props.msgList.first().get("date"),t=this.props.converseUUID;this.props.dispatch(m(t,e,!this.props.isGroup))}},{key:"prepareMsgItemCardData",value:function(e){if("friendInvite"===e.get("type")){var t=e.getIn(["invite","uuid"]),n=e.getIn(["invite","from_uuid"]);if(this.props.friendRequests.findIndex(function(e){return e.get("uuid")===t})>=0)e=e.set("actionState",0);else{e=this.props.friendList.indexOf(n)>=0?e.set("actionState",1):e.set("actionState",2)}}else if("groupInvite"===e.get("type")){var r=e.getIn(["invite","uuid"]),o=e.getIn(["invite","group_uuid"]),i=this.props.groupInvites.findIndex(function(e){return e.get("uuid")===r});if(i>=0)e=e.set("actionState",0);else{var a=this.props.groupUUIDList.indexOf(o);e=a>=0?e.set("actionState",1):e.set("actionState",2)}}return e}},{key:"render",value:function(){var e=this,t=this.props,n=t.userUUID,r=t.usercache;return a.createElement("div",{className:"msg-container "+this.props.className,ref:"container"},this.state.nomore||this.props.msgList.size<10?a.createElement("button",{className:"get-more-log-btn",disabled:!0,style:{display:this.props.msgList.size<10?"none":"block"}},"没有更多记录了"):a.createElement("button",{className:"get-more-log-btn",onClick:function(){return e._handleGetMoreLog()}},"点击获取更多记录"),a.createElement("div",{className:"msg-items"},this.props.msgList.map(function(t,o,i){var c=o>0?i.getIn([o-1,"date"]):0,s="trpgsystem"===t.get("sender_uuid")?u.defaultImg.trpgsystem:u.defaultImg.user,f=t.get("data"),p=n===t.get("sender_uuid"),m=p?e.props.selfInfo.get("avatar"):r.getIn([t.get("sender_uuid"),"avatar"]),h=p?e.props.selfInfo.get("nickname")||e.props.selfInfo.get("username"):r.getIn([t.get("sender_uuid"),"nickname"])||r.getIn([t.get("sender_uuid"),"username"]),g=t.get("date");f&&"card"===t.get("type")&&(f=e.prepareMsgItemCardData(f));var v=d.getDateDiff(c,g),b=v/1e3/60>=10;return a.createElement(l,{key:t.get("uuid")+"+"+o,uuid:t.get("uuid"),icon:m||s,name:h||"",type:t.get("type"),content:t.get("message"),data:f,time:g,me:p,isGroupMsg:!1,emphasizeTime:b})})))}}]),t}(a.Component);e.exports=s(function(e,t){var n=t.converseUUID,r=e.getIn(["chat","converses",n,"msgList"]);return{msgList:r&&r.sortBy(function(e){return e.get("date")}),userUUID:e.getIn(["user","info","uuid"]),selfInfo:e.getIn(["user","info"]),usercache:e.getIn(["cache","user"]),friendRequests:e.getIn(["user","friendRequests"]),friendList:e.getIn(["user","friendList"]),groupInvites:e.getIn(["group","invites"]),groupUUIDList:e.getIn(["group","groups"]).map(function(e){return e.get("uuid")})}})(h)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(6),s=t(4),l=s.connect,u=t(26),d=t(573),f=t(16),p=f.sendMsg,m=t(5),h=m.showModal,g=m.hideModal,v=t(279);t(595);var b=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={inputMsg:"",inputType:"normal",showEmoticon:!1,showDiceMethods:!1},o.clickableBtn=[{label:"发送表情",icon:"&#xe683;",onClick:function(e){e.stopPropagation(),o._handleShowEmoticon()}},{label:"发送人物卡",icon:"&#xe61b;",onClick:function(e){return o._handleShowSendActor()}}],o.inputType=[{label:"普通信息",type:"normal",icon:"&#xe72d;"},{label:"吐槽信息",type:"ooc",icon:"&#xe64d;"},{label:"对话信息",type:"speak",icon:"&#xe61f;"},{label:"行动信息",type:"action",icon:"&#xe619;"}],o.actions=[{label:"",icon:"&#xe631;",onClick:function(){return o._handleShowDiceMethods()}}],o.props.onQuickDice&&o.actions.unshift({label:"快速投骰",icon:"&#xe609;",onClick:function(){return o.props.onQuickDice()}}),o.hidePopup=function(){window.removeEventListener("click",o.hidePopup),o.setState({showEmoticon:!1,showDiceMethods:!1})},o}return o(t,e),i(t,[{key:"componentDidMount",value:function(){this.refs.inputMsg.focus()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.hidePopup)}},{key:"_handleMsgInputKeyDown",value:function(e){var t=this;if(9===e.keyCode){e.preventDefault();var n=this.inputType.findIndex(function(e){return e.type===t.state.inputType});if(e.shiftKey){var r=(n+this.inputType.length-1)%this.inputType.length;this.setState({inputType:this.inputType[r].type})}else{var o=(n+1)%this.inputType.length;this.setState({inputType:this.inputType[o].type})}}13!==e.keyCode||e.shiftKey||e.preventDefault()}},{key:"_handleMsgInputKeyUp",value:function(e){13!==e.keyCode||e.shiftKey||this._handleSendMsg()}},{key:"_handleSendMsg",value:function(){var e=this.state.inputMsg.trim(),t=this.state.inputType;e&&(this.props.onSendMsg(e,t),this.refs.inputMsg.focus(),this.setState({inputMsg:""}))}},{key:"_handleShowEmoticon",value:function(){var e=this;this.setState({showEmoticon:!this.state.showEmoticon}),setTimeout(function(){return window.addEventListener("click",e.hidePopup)},0)}},{key:"_handleSelectEmoticon",value:function(e){this.setState({inputMsg:this.state.inputMsg+e}),this.hidePopup(),this.refs.inputMsg.focus()}},{key:"_handleShowDiceMethods",value:function(){var e=this;this.setState({showDiceMethods:!this.state.showDiceMethods}),setTimeout(function(){return window.addEventListener("click",e.hidePopup)},0)}},{key:"_handleShowSendActor",value:function(){var e=this;this.props.dispatch(h(a.createElement(v,{onSelect:function(t,n){e.props.dispatch(g());var r=e.props,o=r.converseUUID,i=r.isGroup;e.props.dispatch(p(o,{room:i?o:"",type:"card",message:"[人物卡]",is_public:i,data:{type:"actor",uuid:t,avatar:n.avatar,name:n.name,desc:n.desc}}))}})))}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"send-msg-box"},a.createElement("div",{className:"input-area"},a.createElement("div",{className:"tool-area"},a.createElement("div",{className:"popup emoticon"+(this.state.showEmoticon?" active":"")},a.createElement(d,{onSelect:function(t){return e._handleSelectEmoticon(t)}})),a.createElement("div",{className:"popup dice"+(this.state.showDiceMethods?" active":"")},a.createElement("ul",null,a.createElement("li",{onClick:function(){return e.props.onSendDiceReq&&e.props.onSendDiceReq()}},"请求投骰"),a.createElement("li",{onClick:function(){return e.props.onSendDiceInv&&e.props.onSendDiceInv()}},"邀请投骰"))),a.createElement(u,{effect:"solid"}),a.createElement("div",{className:"btn-group"},this.clickableBtn.map(function(e,t){return a.createElement("div",{key:"btn-group#"+t,"data-tip":e.label,className:"tool-item",onClick:function(t){return!!e.onClick&&e.onClick(t)}},a.createElement("i",{className:"iconfont",dangerouslySetInnerHTML:{__html:e.icon}}))})),a.createElement("div",{className:"type-select"},this.inputType.map(function(t,n){return a.createElement("div",{key:"input-type#"+n,"data-tip":t.label,className:e.state.inputType===t.type?"tool-item active":"tool-item",onClick:function(){return e.setState({inputType:t.type})}},a.createElement("i",{className:"iconfont",dangerouslySetInnerHTML:{__html:t.icon}}))})),a.createElement("div",{className:"input-actions"},this.actions.map(function(e,t){return a.createElement("div",{key:"input-action#"+t,"data-tip":e.label,className:"tool-item",onClick:function(){return e.onClick?e.onClick():""}},a.createElement("i",{className:"iconfont",dangerouslySetInnerHTML:{__html:e.icon}}))}))),a.createElement("textarea",{ref:"inputMsg",className:"input-msg",value:this.state.inputMsg,onChange:function(t){return e.setState({inputMsg:t.target.value})},onKeyDown:function(t){return e._handleMsgInputKeyDown(t)},onKeyUp:function(t){return e._handleMsgInputKeyUp(t)}})),a.createElement("div",{className:"action-area"},a.createElement("button",{onClick:function(){return e._handleSendMsg()},disabled:!this.state.inputMsg},"发送<Enter>")))}}]),t}(a.Component);b.propTypes={conversesUUID:c.string,isRoom:c.bool},e.exports=l()(b)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(7),u=t(5),d=u.showAlert,f=u.showModal,p=t(57);t(593);var m=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={selectActorUUID:""},o}return o(t,e),i(t,[{key:"_handleSelect",value:function(){var e=this.state.selectActorUUID;if(e){var t=this.props.selfActors.find(function(t){return t.get("uuid")===e});this.props.onSelect&&this.props.onSelect(e,t&&t.toJS())}else this.props.showAlert("请选择人物卡")}},{key:"_handleActorCreate",value:function(){this.props.showModal(a.createElement(p,null))}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"actor-select"},a.createElement("h3",null,"请选择人物卡"),a.createElement("div",{className:"actor-list"},this.props.selfActors.size>0?this.props.selfActors.map(function(t,n){var r=t.get("uuid");return a.createElement("div",{key:"actor-item#"+r+"#"+n,className:"actor-item"+(e.state.selectActorUUID===r?" active":""),onClick:function(){return e.setState({selectActorUUID:r})}},a.createElement("div",{className:"actor-avatar",style:{backgroundImage:"url("+(t.get("avatar")||l.defaultImg.actor)+")"}}),a.createElement("div",{className:"actor-info"},a.createElement("div",{className:"actor-name"},t.get("name")),a.createElement("div",{className:"actor-desc"},t.get("desc"))),a.createElement("div",{className:"actor-extra"},a.createElement("i",{className:"iconfont"},"")))}):a.createElement("div",{className:"no-actor"},"尚无人物卡, 现在去",a.createElement("span",{onClick:function(){return e._handleActorCreate()}},"创建"))),a.createElement("div",{className:"action"},a.createElement("button",{onClick:function(){return e._handleSelect()}},"确定")))}}]),t}(a.Component);e.exports=s(function(e){return{selfActors:e.getIn(["actor","selfActors"])}},function(e){return{showAlert:function(){return e(d.apply(void 0,arguments))},showModal:function(){return e(f.apply(void 0,arguments))}}})(m)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(5),u=l.showModal,d=l.showAlert,f=l.hideAlert,p=t(15),m=t(576),h=t(44),g=t(23),v=g.createTemplate,b=g.updateTemplate;t(579);var y=function(e){function c(e){n(this,c);var t=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.state={selectFunc:"value",name:"",desc:"",inspectCell:void 0},t.props.isEdit&&t.props.currentEditedTemplate.get("uuid")?(t.state.template=h.parse(t.props.currentEditedTemplate.get("info")),t.state.name=t.props.currentEditedTemplate.get("name"),t.state.desc=t.props.currentEditedTemplate.get("desc")):t.state.template=h.getInitTemplate(),t}return o(c,e),i(c,[{key:"_handleBack",value:function(){var e=t(57);this.props.showModal(a.createElement(e,null))}},{key:"_handleSave",value:function(){var e=this.state.template;e.name=this.state.name,e.desc=this.state.desc,e.avatar="";var t=h.stringify(e),n=this.props.currentEditedTemplate.get("uuid");n?this.props.updateTemplate(n,e.name,e.desc,e.avatar,t):this.props.createTemplate(e.name,e.desc,e.avatar,t)}},{key:"_handleEdit",value:function(e){this.setState({inspectCell:e})}},{key:"_handleRemove",value:function(e,t){this.state.inspectCell===e&&this.setState({inspectCell:void 0}),this.state.template.table.splice(t,1),this.setState({template:this.state.template})}},{key:"_handleCreateAdvancedTemplate",value:function(){var e=this;this.props.showAlert({title:"切换到进阶模式",content:"当前编辑的内容不会被保存。是否确定切换到进阶模式?",onConfirm:function(){e.props.hideAlert();var n=t(581);e.props.showModal(a.createElement(n,null))}})}},{key:"getInspectPanel",value:function(){var e=this,t=this.state.inspectCell,n=[{value:"value",label:"值"},{value:"expression",label:"表达式"}];return t?a.createElement("div",{className:"inspect-panel"},a.createElement("div",{className:"data"},a.createElement("span",null,"属性名:"),a.createElement("input",{type:"text",placeholder:"属性名",value:t.name,onChange:function(n){t.name=n.target.value,e.setState({inspectCell:t})}})),a.createElement("div",{className:"data"},a.createElement("span",null,"是否所有人可见:"),a.createElement("input",{type:"checkbox",checked:t.visibility,onChange:function(n){t.visibility=n.target.checked,e.setState({inspectCell:t})}})),a.createElement("div",{className:"data"},a.createElement("span",null,"描述:"),a.createElement("textarea",{placeholder:"属性描述",rows:"3",value:t.desc||"",onChange:function(n){t.desc=n.target.value,e.setState({inspectCell:t})}})),a.createElement("div",{className:"data"},a.createElement("span",null,"计算方式:"),a.createElement(p,{name:"func",className:"func-select",value:t.func,options:n,clearable:!1,searchable:!1,placeholder:"属性计算方式",onChange:function(n){t.func=n.value,e.setState({inspectCell:t})}})),a.createElement("div",{className:"data"},a.createElement("span",null,"expression"===t.func?"表达式":"默认值",":"),a.createElement("input",{type:"text",value:t.default,onChange:function(n){t.default=n.target.value,e.setState({inspectCell:t})}})),a.createElement("div",{className:"data"},a.createElement("span",null,"测试值:"),a.createElement("input",{type:"text",value:t.value,disabled:"expression"===t.func,onChange:function(n){t.value=n.target.value,e.setState({inspectCell:t})}}))):a.createElement("div",{className:"inspect-panel"},"选择属性进行编辑")}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"template-edit"},a.createElement("div",{className:"profile-panel"},a.createElement("div",{className:"header"},a.createElement("button",{onClick:function(){return e._handleBack()}},"<返回"),a.createElement("input",{placeholder:"模板名",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),a.createElement("button",{onClick:function(){return e._handleSave()}},"保存")),a.createElement("div",{className:"desc"},a.createElement("textarea",{placeholder:"模板描述",rows:"4",cols:"60",value:this.state.desc,onChange:function(t){return e.setState({desc:t.target.value})}})),a.createElement("div",{className:"actions"},a.createElement("button",{onClick:function(){var t=h.getInitCell();e.state.template.insertCell(t),e.setState({template:e.state.template})}},a.createElement("i",{className:"iconfont"},""),"添加新属性"),!this.props.isEdit&&a.createElement("button",{onClick:function(){return e._handleCreateAdvancedTemplate()}},a.createElement("i",{className:"iconfont"},""),"切换到进阶模式")),a.createElement("div",{className:"property-list"},a.createElement("table",{cellSpacing:"0",cellPadding:"0"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("td",null,"属性名"),a.createElement("td",null,"默认值/表达式"),a.createElement("td",null,"测试值"),a.createElement("td",null,"操作"))),a.createElement("tbody",null,this.state.template.table.map(function(t,n){return a.createElement(m,{key:"template-cell-"+n,isActive:t===e.state.inspectCell,name:t.name,defaultValue:t.default,value:t.value,onEdit:function(){return e._handleEdit(t)},onRemove:function(){return e._handleRemove(t,n)}})}))))),this.getInspectPanel())}}]),c}(a.Component);e.exports=s(function(e){return{currentEditedTemplate:e.getIn(["actor","currentEditedTemplate"])}},function(e){return{showModal:function(t){return e(u(t))},showAlert:function(t){return e(d(t))},hideAlert:function(){return e(f())},createTemplate:function(t,n,r,o){return e(v(t,n,r,o))},updateTemplate:function(t,n,r,o,i){return e(b(t,n,r,o,i))}}})(y)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(44),u=t(7),d=t(5),f=d.showAlert,p=t(23),m=p.createActor,h=p.updateActor,g=t(77);t(586);var v=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(o.state={cells:[],profileName:"",profileDesc:"",profileAvatar:""},o.props.selectedActorUUID){var i=o.props.selfActors.findIndex(function(e,t){return e.get("uuid")===o.props.selectedActorUUID});if(i>=0){var a=o.editedActor=o.props.selfActors.get(i);o.state.profileName=a.get("name"),o.state.profileDesc=a.get("desc"),o.state.profileAvatar=a.get("avatar")}}return o}return o(t,e),i(t,[{key:"componentDidMount",value:function(){this.template_uuid=this.props.selectedTemplate.get("uuid");var e=this.props.selectedTemplate.get("info"),t=this.template=l.parse(e);if(this.editedActor){var n=this.editedActor.get("info").toJS();t.setData(n)}t.eval(),this.setState({cells:t.getCells()})}},{key:"_handleSave",value:function(){var e=this,t=!this.props.selectedActorUUID,n=this.state.profileName,r=this.state.profileAvatar,o=this.state.profileDesc,i=this.template.getData(),c=this.template_uuid;if(n){var s=a.createElement("div",null,a.createElement("p",{key:c+"-cell-tip"},"是否要",t?"创建":"更新","人物？数据如下:"),this.template.getCells().map(function(e,t){return a.createElement("p",{key:c+"-cell-"+t,style:{textAlign:"left"}},e.name,":",e.value)}));this.props.showAlert({title:t?"创建人物":"更新人物",content:s,type:"alert",onConfirm:function(){if(t)e.props.createActor(n,r,o,i,c);else{var a=e.props.selectedActorUUID;e.props.updateActor(a,n,r,o,i)}}})}else this.props.showAlert("人物名不能为空")}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"actor-edit"},a.createElement("div",{className:"actor-edit-header"},a.createElement("input",{placeholder:"人物卡名",value:this.state.profileName,onChange:function(t){return e.setState({profileName:t.target.value})}}),a.createElement("button",{onClick:function(){return e._handleSave()}},this.props.selectedActorUUID?"更新":"创建")),a.createElement("div",{className:"actor-edit-body"},a.createElement("div",{className:"actor-edit-profile"},a.createElement(g,{type:"actor",containerHeight:"240px",onUploadSuccess:function(t){return e.setState({profileAvatar:t.url})}},a.createElement("div",{className:"avatar",style:{backgroundImage:"url("+u.file.getAbsolutePath(this.state.profileAvatar)+")"}})),a.createElement("div",{className:"desc"},a.createElement("textarea",{placeholder:"人物卡描述/背景",value:this.state.profileDesc,onChange:function(t){return e.setState({profileDesc:t.target.value})}}))),a.createElement("div",{className:"actor-edit-property"},this.state.cells.map(function(t,n){var r="expression"===t.func;return a.createElement("div",{key:t.uuid+"-"+n,className:"actor-property-cell"},a.createElement("div",{className:"cell-name"},t.name,":"),a.createElement("div",{className:"cell-value"},a.createElement("input",{disabled:r,placeholder:r?t.value:t.default,value:t.value,onChange:function(t){try{var r=e.state.cells;r[n].value=t.target.value,e.setState({cells:r}),e.template.eval()}catch(t){}}})))}))))}}]),t}(a.Component);e.exports=s(function(e){return{selectedTemplate:e.getIn(["actor","selectedTemplate"]),selectedActorUUID:e.getIn(["actor","selectedActorUUID"]),selfActors:e.getIn(["actor","selfActors"])}},function(e){return{showAlert:function(t){e(f(t))},createActor:function(t,n,r,o,i){e(m(t,n,r,o,i))},updateActor:function(t,n,r,o,i){e(h(t,n,r,o,i))}}})(v)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1);t(599);var c=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={selectedIndex:0},o}return o(t,e),i(t,[{key:"render",value:function(){var e=this;return a.createElement("div",{className:"tab"},a.createElement("nav",{className:"tab-nav"},a.Children.map(this.props.children,function(t,n){return a.createElement("div",{className:"tab-item"+(n===e.state.selectedIndex?" active":""),onClick:function(){return e.setState({selectedIndex:n})}},t.props.name)})),a.createElement("div",{className:"tab-content"},a.Children.map(this.props.children,function(t,n){return a.createElement("div",{className:n===e.state.selectedIndex?"active":""},t)})))}}]),t}(a.Component),s=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){return a.createElement("div",{className:"tab-items"},this.props.children)}}]),t}(a.Component);e.exports={TabsController:c,Tab:s}},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(6),s=t(4),l=s.connect,u=t(601),d=u.isUserUUID,f=t(16),p=f.removeConverse,m=t(5),h=m.showProfileCard;t(602);var g=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"_handleCloseConv",value:function(e){d(this.props.uuid)&&(this.props.dispatch(p(this.props.uuid)),e.stopPropagation())}},{key:"_handleShowInfo",value:function(e){d(this.props.uuid)&&(e.stopPropagation(),this.props.dispatch(h(this.props.uuid)))}},{key:"render",value:function(){var e=this,t=this.props.hideCloseBtn?null:a.createElement("div",{className:"close",onClick:function(t){return e._handleCloseConv(t)}},a.createElement("i",{className:"iconfont"},""));return a.createElement("div",{className:"conv-item "+(this.props.isSelected?"active":"")+" "+(this.props.hideCloseBtn?"hide-close-btn":"")+" "+(this.props.unread?"unread":""),onClick:this.props.onClick},t,a.createElement("div",{className:"icon",onClick:function(t){return e._handleShowInfo(t)}},a.createElement("img",{src:this.props.icon})),a.createElement("div",{className:"body"},a.createElement("div",{className:"title"},a.createElement("p",null,this.props.title),a.createElement("span",null,this.props.time)),a.createElement("div",{className:"content"},this.props.content)))}}]),t}(a.Component);g.propTypes={icon:c.string,title:c.string,time:c.string,content:c.string,uuid:c.string},e.exports=l()(g)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(6),s=t(226).default;t(632);var l=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={isOpen:!1},o}return o(t,e),i(t,[{key:"_handleClick",value:function(){this.setState({isOpen:!0})}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"image-viewer",onClick:function(){return e._handleClick()}},this.props.children,this.props.originImageUrl&&this.state.isOpen&&a.createElement(s,{mainSrc:this.props.originImageUrl,onCloseRequest:function(){return e.setState({isOpen:!1})}}))}}]),t}(a.Component);l.propTypes={originImageUrl:c.string},e.exports=l},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1);t(642);var c=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){return a.createElement("div",{className:"is-developing"},a.createElement("i",{className:"iconfont"},""),a.createElement("p",null,"工程师正在开发中..."))}}]),t}(a.Component);e.exports=c},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(7),u=t(17),d=u.sendFriendInvite,f=u.agreeFriendInvite,p=t(11),m=p.requestJoinGroup;t(682);var h=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"getUserAction",value:function(e){var t=this,n=this.props.friendList.toJS(),r=this.props.friendInvite.toJS(),o=this.props.friendRequests.toArray().map(function(e){return e.get("from_uuid")});return this.props.selfUUID===e?a.createElement("button",{disabled:!0},a.createElement("i",{className:"iconfont"},""),"我自己"):n.indexOf(e)>=0?a.createElement("button",{disabled:!0},a.createElement("i",{className:"iconfont"},""),"已添加"):r.indexOf(e)>=0?a.createElement("button",{disabled:!0},a.createElement("i",{className:"iconfont"},""),"已发送"):o.indexOf(e)>=0?a.createElement("button",{onClick:function(){return t.props.agreeFriendInvite(e)}},a.createElement("i",{className:"iconfont"},""),"同意"):a.createElement("button",{onClick:function(){return t.props.sendFriendInvite(e)}},a.createElement("i",{className:"iconfont"},""),"添加好友")}},{key:"getGroupAction",value:function(e){var t=this,n=this.props.joinedGroupUUIDs,r=this.props.requestingGroupUUID;return n.includes(e)?a.createElement("button",{disabled:!0},a.createElement("i",{className:"iconfont"},""),"已加入"):r.includes(e)?a.createElement("button",{disabled:!0},a.createElement("i",{className:"iconfont"},""),"已申请"):a.createElement("button",{onClick:function(){return t.props.requestJoinGroup(e)}},a.createElement("i",{className:"iconfont"},""),"添加团")}},{key:"render",value:function(){var e=this.props.info,t=this.props.type||"user";return"user"===t?a.createElement("div",{className:"find-result-item"},a.createElement("div",{className:"avatar"},a.createElement("img",{src:e.avatar||l.defaultImg.user})),a.createElement("div",{className:"profile"},a.createElement("span",{className:"username"},e.nickname||e.username),a.createElement("span",{className:"uuid"},e.uuid)),a.createElement("div",{className:"action"},this.getUserAction(e.uuid))):"group"===t?a.createElement("div",{className:"find-result-item"},a.createElement("div",{className:"avatar"},a.createElement("img",{src:e.avatar||l.defaultImg.group})),a.createElement("div",{className:"profile"},a.createElement("span",{className:"username"},e.name),a.createElement("span",{className:"uuid"},e.uuid)),a.createElement("div",{className:"action"},this.getGroupAction(e.uuid))):void 0}}]),t}(a.Component);e.exports=s(function(e){return{selfUUID:e.getIn(["user","info","uuid"]),friendList:e.getIn(["user","friendList"]),friendInvite:e.getIn(["user","friendInvite"]),friendRequests:e.getIn(["user","friendRequests"]),joinedGroupUUIDs:e.getIn(["group","groups"]).map(function(e){return e.get("uuid")}),requestingGroupUUID:e.getIn(["group","requestingGroupUUID"])}},function(e){return{sendFriendInvite:function(t){e(d(t))},agreeFriendInvite:function(t){e(function(e,n){var r=n().getIn(["user","friendRequests"]).toJS(),o="",i=!0,a=!1,c=void 0;try{for(var s,l=r["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(i=(s=l.next()).done);i=!0){var u=s.value;if(u.from_uuid===t){o=u.uuid;break}}}catch(e){a=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw c}}o&&e(f(o))})},requestJoinGroup:function(t){return e(m(t))}}})(h)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(6),s=t(211),l=t(7);t(698),t(700);var u=0,d="electron"===l.platform,f=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.id="webframe"+u,u++,o}return o(t,e),i(t,[{key:"componentDidMount",value:function(){s.configure({parent:"#"+this.id}),s.start(),d?(this.refs.webframe.src=this.props.src,this.refs.webframe.addEventListener("dom-ready",function(){s.done()}),this.refs.webframe.addEventListener("will-navigate",function(e){s.start()})):(this.refs.webframe.src=this.props.src,this.refs.webframe.onload=function(e){s.done()})}},{key:"_handleOpenInNewWindow",value:function(){window.open(this.refs.webframe.src,"square","frame=true")}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"webview",id:this.id},this.props.allowExopen&&a.createElement("div",{className:"open-new",title:"在新窗口打开",onClick:function(){return e._handleOpenInNewWindow()}},a.createElement("i",{className:"iconfont"},"")),d?a.createElement("webview",{ref:"webframe"}):a.createElement("iframe",{ref:"webframe"}))}}]),t}(a.Component);f.propTypes={src:c.string,allowExopen:c.bool},e.exports=f},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,exports,t){"use strict";var n=t(54),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t(0).locale("zh_CN"),t(492);var o=t(1),i=t(40),a=t(4),c=a.Provider,s=t(7),l=t(494),u=l();t(27).attachStore(u);var d=t(22),f=d.getInstance();d.bindEventFunc.call(f,u);var p=t(29);if(function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}(r.default.mark(function e(){var n,o,i,a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("uuid");case 2:return n=e.sent,e.next=5,p.get("token");case 5:return o=e.sent,o&&n&&u.dispatch(t(17).loginWithToken(n,o)),u.dispatch(t(38).setNotificationPermission(Notification.permission)),e.next=10,p.get("systemSettings");case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0=s.defaultSettings.system;case 13:return i=e.t0,i&&u.dispatch(t(38).setSystemSettings(i)),e.next=17,p.get("userSettings");case 17:if(e.t1=e.sent,e.t1){e.next=20;break}e.t1=s.defaultSettings.user;case 20:a=e.t1,a&&u.dispatch(t(38).setUserSettings(a));case 22:case"end":return e.stop()}},e,void 0)}))(),"web"!==s.platform){t(520)(function(e){e||u.dispatch(t(5).showAlert({title:"检测到新版本",content:"检测到有新的版本, 是否现在获取",onConfirm:function(){window.open(s.github.projectUrl)}}))})}var m=t(521);i.render(o.createElement(c,{store:u},o.createElement(m,null)),document.querySelector("#app"))},function(e,exports,t){"use strict";var n=function(){return this}()||Function("return this")(),r=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=r&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=t(491),r)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},function(e,exports,t){"use strict";(function(e){var t="function"==typeof Symbol&&"symbol"==typeof("function"==typeof Symbol?Symbol.iterator:"@@iterator")?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==("function"==typeof Symbol?Symbol.prototype:"@@prototype")?"symbol":typeof e};!function(n){function r(e,t,n,r){var o=t&&t.prototype instanceof i?t:i,a=Object.create(o.prototype),c=new m(r||[]);return a._invoke=u(e,n,c),a}function o(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function a(){}function c(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function l(e){function n(r,i,a,c){var s=o(e[r],e,i);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"===(void 0===u?"undefined":t(u))&&y.call(u,"__await")?Promise.resolve(u.__await).then(function(e){n("next",e,a,c)},function(e){n("throw",e,a,c)}):Promise.resolve(u).then(function(e){l.value=e,a(l)},c)}c(s.arg)}function r(e,t){function r(){return new Promise(function(r,o){n(e,t,r,o)})}return i=i?i.then(r,r):r()}var i;this._invoke=r}function u(e,t,n){var r=C;return function(i,a){if(r===I)throw new Error("Generator is already running");if(r===D){if("throw"===i)throw a;return g()}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=d(c,n);if(s){if(s===R)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===C)throw r=D,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=I;var l=o(e,t,n);if("normal"===l.type){if(r=n.done?D:T,l.arg===R)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=D,n.method="throw",n.arg=l.arg)}}}function d(e,t){var n=e.iterator[t.method];if(n===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,d(e,t),"throw"===t.method))return R;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return R}var r=o(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,R;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,R):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,R)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function m(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function h(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t};return r.next=r}}return{next:g}}function g(){return{value:v,done:!0}}var v,b=Object.prototype,y=b.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},w=x.iterator||"@@iterator",E=x.asyncIterator||"@@asyncIterator",_=x.toStringTag||"@@toStringTag",S="object"===t(e),k=n.regeneratorRuntime;if(k)return void(S&&(e.exports=k));k=n.regeneratorRuntime=S?e.exports:{},k.wrap=r;var C="suspendedStart",T="suspendedYield",I="executing",D="completed",R={},O={};O[w]=function(){return this};var N=Object.getPrototypeOf,U=N&&N(N(h([])));U&&U!==b&&y.call(U,w)&&(O=U);var A=c.prototype=i.prototype=Object.create(O);a.prototype=A.constructor=c,c.constructor=a,c[_]=a.displayName="GeneratorFunction",k.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},k.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,_ in e||(e[_]="GeneratorFunction")),e.prototype=Object.create(A),e},k.awrap=function(e){return{__await:e}},s(l.prototype),l.prototype[E]=function(){return this},k.AsyncIterator=l,k.async=function(e,t,n,o){var i=new l(r(e,t,n,o));return k.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},s(A),A[_]="Generator",A[w]=function(){return this},A.toString=function(){return"[object Generator]"},k.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},k.values=h,m.prototype={constructor:m,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=y.call(o,"catchLoc"),c=y.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,R):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),R},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),p(n),R}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;p(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:h(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=v),R}}}(function(){return this}()||Function("return this")())}).call(exports,t(25)(e))},function(e,exports,t){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},Array.prototype.remove=function(e){var t=n([],this),r=t.indexOf(e);return r>-1&&t.splice(r,1),t}},function(e,exports){e.exports={name:"trpg-game-client",version:"0.0.3",description:"",main:"./dist/entry.js",scripts:{dev:"cross-env NODE_ENV=development webpack-dev-server --hot --inline --progress --colors --port 8080 --host 0.0.0.0 --config ./config/webpack.config.js",build:"cross-env PLATFORM=web webpack --progress --colors --display-modules --config ./config/webpack.config.js",pc:"cross-env PLATFORM=electron NODE_ENV=production TRPG_HOST=localhost gulp --gulpfile build/gulpfile.js && electron .",pcdev:"cross-env PLATFORM=electron npm run dev & gulp assets --gulpfile build/gulpfile.js && cross-env NODE_ENV=development electron .",package:"cross-env PLATFORM=electron NODE_ENV=production gulp package --gulpfile build/gulpfile.js","package-all":"cross-env PLATFORM=electron NODE_ENV=production gulp package:all --gulpfile build/gulpfile.js",app:"cross-env PLATFORM=app node node_modules/react-native/local-cli/cli.js start --root ./src/app","app-clear":"cross-env PLATFORM=app node node_modules/react-native/local-cli/cli.js start --root ./src/app --reset-cache",test:'echo "Error: no test specified" && exit 1',lint:"eslint --ext .js,.jsx src","lint:fix":"eslint --fix --ext .js,.jsx src"},repository:{type:"git",url:"git+https://github.com/TRPGEngine/Client.git"},keywords:["trpg"],author:"moonrailgun",license:"GPL-3.0",bugs:{url:"https://github.com/TRPGEngine/Client/issues"},homepage:"https://github.com/TRPGEngine/Client#readme",dependencies:{"apsl-react-native-button":"^3.1.1",axios:"^0.17.1","bbcode-to-react":"^0.2.9",chalk:"^2.4.1",immutable:"^3.8.2","is-uuid":"^1.0.2",md5:"^2.2.1",moment:"^2.22.2",nprogress:"^0.2.0",react:"16.2.0","react-dom":"16.2.0","react-emojione2":"^2.2.18","react-fileupload":"^2.4.0","react-image-lightbox":"^5.0.0","react-native":"0.52.0","react-native-photo-browser":"^0.4.0","react-native-root-toast":"^3.0.1","react-native-storage":"^0.2.2","react-native-style-block":"0.0.4","react-navigation":"^2.6.2","react-navigation-redux-helpers":"^1.1.2","react-redux":"^5.0.7","react-router-dom":"^4.3.1","react-router-redux":"^4.0.8","react-select":"1.0.0-rc.5","react-tooltip":"^3.6.1",redux:"^3.7.2","redux-devtools-extension":"^2.13.5","redux-immutable":"^4.0.0","redux-logger":"^3.0.6","redux-thunk":"^2.3.0","socket.io-client":"^2.1.1",tinycon:"^0.6.8",tinymce:"^4.8.0","trpg-actor-template":"github:TRPGEngine/ActorTemplate"},devDependencies:{babel:"^6.23.0","babel-core":"^6.26.3","babel-eslint":"^8.2.6","babel-loader":"^7.1.5","babel-plugin-transform-inline-environment-variables":"^0.2.0","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.24.1","babel-preset-react":"^6.24.1","babel-preset-react-native":"^4.0.0","babel-preset-stage-3":"^6.24.1","copy-webpack-plugin":"^4.5.2","cross-env":"^5.2.0","css-loader":"^0.28.11",electron:"^1.8.7","electron-packager":"^9.1.0",eslint:"^4.19.1","eslint-plugin-react":"^7.10.0","file-loader":"^0.11.2",gulp:"^3.9.1","gulp-replace":"^0.6.1","html-webpack-include-assets-plugin":"^1.0.4","html-webpack-plugin":"^2.30.1","node-sass":"^4.9.2","sass-loader":"^6.0.7","style-loader":"^0.18.2","url-loader":"^0.5.9",webpack:"^3.12.0","webpack-dev-server":"^2.11.2","webpack-merge":"^4.1.3"}}},function(e,exports,t){"use strict";function n(e){var n="production"!==d.environment?t(252).composeWithDevTools({actionCreators:t(516)})(c(o.default)):void 0;return m(s,e,n)}var r=t(256),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=t(49),a=i.createStore,c=i.applyMiddleware,s=t(495),l=t(255),u=l.createLogger,d=t(7),f=u({level:"info",logger:console,collapsed:!0,stateTransformer:function(e){return e.toJS()}}),p=[o.default];"production"!==d.environment&&p.push(f),"app"===d.platform&&p.push(t(515).createReactNavigationReduxMiddleware("root",function(e){return e.nav}));var m=c.apply(void 0,p)(a);e.exports=n},function(e,exports,t){"use strict";var n=t(253),r=t(7),o={ui:t(496),chat:t(505),user:t(506),cache:t(507),note:t(508),actor:t(512),group:t(513),settings:t(514)};"app"===r.platform&&(o.nav=t(273)),e.exports=(0,n.combineReducers)(o)},function(e,exports,t){"use strict";var n=t(9),r=n.RESET,o=n.SHOW_LOADING,i=n.HIDE_LOADING,a=n.SHOW_ALERT,c=n.HIDE_ALERT,s=n.SHOW_MODAL,l=n.HIDE_MODAL,u=n.SHOW_TOAST,d=n.HIDE_TOAST,f=n.SHOW_PROFILE_CARD,p=n.HIDE_PROFILE_CARD,m=n.SHOW_SLIDE_PANEL,h=n.HIDE_SLIDE_PANEL,g=n.SWITCH_MENU_PANNEL,v=n.SET_LAST_DICE_TYPE,b=n.CHANGE_NETWORK_STATE,y=n.UPDATE_SOCKET_ID,x=t(13),w=x.fromJS({showAlert:!1,showAlertInfo:{},showLoading:!1,showLoadingText:"加载中...",showModal:!1,showModalBody:void 0,showToast:!1,showToastText:"",showProfileCard:!1,showProfileCardUUID:"",showSlidePanel:!1,showSlidePanelInfo:{title:"",content:""},menuIndex:0,menuPannel:null,network:{isOnline:!1,tryReconnect:!1,msg:""},socketId:"",lastDiceType:"basicDice"});e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments[1];switch(t.type){case r:return e.set("showModal",!1);case a:var n=t.payload||{};return e.set("showAlert",!0).set("showAlertInfo",x.fromJS(n));case c:return e.set("showAlert",!1).set("showAlertInfo",x.Map());case o:return e.set("showLoading",!0).set("showLoadingText",t.text||"加载中...");case i:return e.set("showLoading",!1);case s:return e.set("showModal",!0).set("showModalBody",x.fromJS(t.payload));case l:return e.set("showModal",!1).set("showModalBody",void 0);case u:return e.set("showToast",!0).set("showToastText",t.text||"");case d:return e.set("showToast",!1);case f:return e.set("showProfileCard",!0).set("showProfileCardUUID",t.uuid);case p:return e.set("showProfileCard",!1);case m:return e.set("showSlidePanel",!0).set("showSlidePanelInfo",x.fromJS(t.payload));case h:return e.set("showSlidePanel",!1);case g:return e.set("menuIndex",t.menuIndex).set("menuPannel",t.payload);case v:return e.set("lastDiceType",t.payload);case b:return e.set("network",x.fromJS(t.payload));case y:return e.set("socketId",t.socketId);default:return e}}},function(e,exports,t){"use strict";e.exports={GET_TEMPLATE_SUCCESS:"GET_TEMPLATE_SUCCESS",FIND_TEMPLATE_SUCCESS:"FIND_TEMPLATE_SUCCESS",CREATE_TEMPLATE_SUCCESS:"CREATE_TEMPLATE_SUCCESS",UPDATE_TEMPLATE_SUCCESS:"UPDATE_TEMPLATE_SUCCESS",SET_EDITED_TEMPLATE:"SET_EDITED_TEMPLATE",SELECT_TEMPLATE:"SELECT_TEMPLATE",CREATE_ACTOR_SUCCESS:"CREATE_ACTOR_SUCCESS",GET_ACTOR_SUCCESS:"GET_ACTOR_SUCCESS",SELECT_ACTOR:"SELECT_ACTOR",REMOVE_ACTOR_SUCCESS:"REMOVE_ACTOR_SUCCESS",UPDATE_ACTOR_SUCCESS:"UPDATE_ACTOR_SUCCESS"}},function(e,exports,t){"use strict";e.exports={GET_USER_INFO:"GET_USER_INFO",GET_TEMPLATE_INFO:"GET_TEMPLATE_INFO",GET_ACTOR_INFO:"GET_ACTOR_INFO"}},function(e,exports,t){"use strict";e.exports={ADD_CONVERSES:"ADD_CONVERSES",ADD_MSG:"ADD_MSG",UPDATE_MSG:"UPDATE_MSG",GET_CONVERSES_REQUEST:"GET_CONVERSES_REQUEST",GET_CONVERSES_SUCCESS:"GET_CONVERSES_SUCCESS",GET_USER_CONVERSES_SUCCESS:"GET_USER_CONVERSES_SUCCESS",UPDATE_CONVERSES_INFO_SUCCESS:"UPDATE_CONVERSES_INFO_SUCCESS",UPDATE_CONVERSES_MSGLIST_SUCCESS:"UPDATE_CONVERSES_MSGLIST_SUCCESS",SWITCH_CONVERSES:"SWITCH_CONVERSES",CREATE_CONVERSES_REQUEST:"CREATE_CONVERSES_REQUEST",CREATE_CONVERSES_SUCCESS:"CREATE_CONVERSES_SUCCESS",CREATE_CONVERSES_FAILED:"CREATE_CONVERSES_FAILED",REMOVE_CONVERSES_SUCCESS:"REMOVE_CONVERSES_SUCCESS",SEND_MSG:"SEND_MSG",SEND_MSG_COMPLETED:"SEND_MSG_COMPLETED",UPDATE_SYSTEM_CARD_CHAT_DATA:"UPDATE_SYSTEM_CARD_CHAT_DATA"}},function(e,exports,t){"use strict";e.exports={CREATE_GROUP_SUCCESS:"CREATE_GROUP_SUCCESS",GET_GROUP_INFO_SUCCESS:"GET_GROUP_INFO_SUCCESS",UPDATE_GROUP_INFO_SUCCESS:"UPDATE_GROUP_INFO_SUCCESS",FIND_GROUP_REQUEST:"FIND_GROUP_REQUEST",FIND_GROUP_SUCCESS:"FIND_GROUP_SUCCESS",REQUEST_JOIN_GROUP_SUCCESS:"REQUEST_JOIN_GROUP_SUCCESS",AGREE_GROUP_REQUEST_SUCCESS:"AGREE_GROUP_REQUEST_SUCCESS",SEND_GROUP_INVITE_SUCCESS:"SEND_GROUP_INVITE_SUCCESS",AGREE_GROUP_INVITE_SUCCESS:"AGREE_GROUP_INVITE_SUCCESS",REFUSE_GROUP_INVITE_SUCCESS:"REFUSE_GROUP_INVITE_SUCCESS",GET_GROUP_INVITE_SUCCESS:"GET_GROUP_INVITE_SUCCESS",GET_GROUP_LIST_SUCCESS:"GET_GROUP_LIST_SUCCESS",SWITCH_GROUP:"SWITCH_GROUP",GET_GROUP_MEMBERS_SUCCESS:"GET_GROUP_MEMBERS_SUCCESS",GET_GROUP_ACTOR_SUCCESS:"GET_GROUP_ACTOR_SUCCESS",SET_PLAYER_SELECTED_GROUP_ACTOR_SUCCESS:"SET_PLAYER_SELECTED_GROUP_ACTOR_SUCCESS",ADD_GROUP_ACTOR_SUCCESS:"ADD_GROUP_ACTOR_SUCCESS",REMOVE_GROUP_ACTOR_SUCCESS:"REMOVE_GROUP_ACTOR_SUCCESS",AGREE_GROUP_ACTOR_SUCCESS:"AGREE_GROUP_ACTOR_SUCCESS",REFUSE_GROUP_ACTOR_SUCCESS:"REFUSE_GROUP_ACTOR_SUCCESS",UPDATE_GROUP_ACTOR_INFO_SUCCESS:"UPDATE_GROUP_ACTOR_INFO_SUCCESS",QUIT_GROUP_SUCCESS:"QUIT_GROUP_SUCCESS",DISMISS_GROUP_SUCCESS:"DISMISS_GROUP_SUCCESS",TICK_MEMBER_SUCCESS:"TICK_MEMBER_SUCCESS",SET_MEMBER_TO_MANAGER_SUCCESS:"SET_MEMBER_TO_MANAGER_SUCCESS",UPDATE_GROUP_STATUS:"UPDATE_GROUP_STATUS"}},function(e,exports,t){"use strict";e.exports={ADD_NOTE:"ADD_NOTE",GET_NOTE:"GET_NOTE",SWITCH_NOTE:"SWITCH_NOTE",SAVE_NOTE:"SAVE_NOTE",UPDATE_NOTE:"UPDATE_NOTE"}},function(e,exports,t){"use strict";e.exports={SHOW_ALERT:"SHOW_ALERT",HIDE_ALERT:"HIDE_ALERT",SHOW_LOADING:"SHOW_LOADING",HIDE_LOADING:"HIDE_LOADING",SHOW_MODAL:"SHOW_MODAL",HIDE_MODAL:"HIDE_MODAL",SHOW_TOAST:"SHOW_TOAST",HIDE_TOAST:"HIDE_TOAST",SHOW_PROFILE_CARD:"SHOW_PROFILE_CARD",HIDE_PROFILE_CARD:"HIDE_PROFILE_CARD",SHOW_SLIDE_PANEL:"SHOW_SLIDE_PANEL",HIDE_SLIDE_PANEL:"HIDE_SLIDE_PANEL",SWITCH_MENU_PANNEL:"SWITCH_MENU_PANNEL",SET_LAST_DICE_TYPE:"SET_LAST_DICE_TYPE",CHANGE_NETWORK_STATE:"CHANGE_NETWORK_STATE",UPDATE_SOCKET_ID:"UPDATE_SOCKET_ID"}},function(e,exports,t){"use strict";e.exports={LOGIN_REQUEST:"LOGIN_REQUEST",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILED:"LOGIN_FAILED",LOGIN_TOKEN_SUCCESS:"LOGIN_TOKEN_SUCCESS",LOGOUT:"LOGOUT",REGISTER_REQUEST:"REGISTER_REQUEST",REGISTER_SUCCESS:"REGISTER_SUCCESS",REGISTER_FAILED:"REGISTER_FAILED",FIND_USER_REQUEST:"FIND_USER_REQUEST",FIND_USER_SUCCESS:"FIND_USER_SUCCESS",FIND_USER_FAILED:"FIND_USER_FAILED",UPDATE_INFO_SUCCESS:"UPDATE_INFO_SUCCESS",ADD_FRIEND_SUCCESS:"ADD_FRIEND_SUCCESS",ADD_FRIEND_FAILED:"ADD_FRIEND_FAILED",GET_FRIENDS_REQUEST:"GET_FRIENDS_REQUEST",GET_FRIENDS_SUCCESS:"GET_FRIENDS_SUCCESS",GET_FRIENDS_FAILED:"GET_FRIENDS_FAILED",SEND_FRIEND_INVITE_SUCCESS:"SEND_FRIEND_INVITE_SUCCESS",AGREE_FRIEND_INVITE_SUCCESS:"AGREE_FRIEND_INVITE_SUCCESS",GET_FRIEND_INVITE_SUCCESS:"GET_FRIEND_INVITE_SUCCESS",GET_FRIEND_INVITE_ERROR:"GET_FRIEND_INVITE_ERROR",REFUSE_FRIEND_INVITE_SUCCESS:"REFUSE_FRIEND_INVITE_SUCCESS",REFUSE_FRIEND_INVITE_ERROR:"REFUSE_FRIEND_INVITE_ERROR",ADD_FRIEND_INVITE:"ADD_FRIEND_INVITE"}},function(e,exports,t){"use strict";e.exports={SET_USER_SETTINGS:"SET_USER_SETTINGS",SET_SYSTEM_SETTINGS:"SET_SYSTEM_SETTINGS",UPDATE_NOTIFICATION_PERMISSION:"UPDATE_NOTIFICATION_PERMISSION",ADD_FAVORITE_DICE:"ADD_FAVORITE_DICE",REMOVE_FAVORITE_DICE:"REMOVE_FAVORITE_DICE",UPDATE_FAVORITE_DICE:"UPDATE_FAVORITE_DICE"}},function(e,exports,t){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=t(9),o=r.RESET,i=r.ADD_CONVERSES,a=r.ADD_MSG,c=r.UPDATE_MSG,s=r.GET_CONVERSES_REQUEST,l=r.GET_CONVERSES_SUCCESS,u=r.GET_USER_CONVERSES_SUCCESS,d=r.CREATE_CONVERSES_SUCCESS,f=r.CREATE_CONVERSES_FAILED,p=r.UPDATE_CONVERSES_INFO_SUCCESS,m=r.UPDATE_CONVERSES_MSGLIST_SUCCESS,h=r.REMOVE_CONVERSES_SUCCESS,g=r.SWITCH_CONVERSES,v=r.SWITCH_GROUP,b=r.UPDATE_SYSTEM_CARD_CHAT_DATA,y=t(13),x=y.fromJS({selectedConversesUUID:"",selectedConversesUserUUID:"",conversesDesc:"",converses:{}});e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments[1];try{var r=void 0;switch(t.type){case o:return x;case i:var w=t.payload.uuid;return e.getIn(["converses",w])?e:e.setIn(["converses",w],y.fromJS(t.payload));case a:var E=t.converseUUID;return e.getIn(["converses",E])?(r=y.fromJS(t.payload),e.updateIn(["converses",E,"msgList"],function(e){return e.push(r)}).setIn(["converses",E,"lastMsg"],r.get("message")).setIn(["converses",E,"lastTime"],r.get("date")).setIn(["converses",E,"unread"],t.unread)):e;case c:return e.updateIn(["converses",t.converseUUID,"msgList"],function(e){if(e)for(var n=0;n<e.size;n++){var r=e.get(n);if(r.get("uuid")===t.msgUUID){e=e.set(n,r.merge(y.fromJS(t.payload)));break}}return e});case s:return e.set("conversesDesc","正在获取会话列表...");case f:return e.set("conversesDesc","获取会话列表失败, 请重试");case l:case u:var _=t.payload;if(_ instanceof Array&&_.length>0){for(var S=e.get("converses"),k=0;k<_.length;k++){var C=_[k],T=C.uuid,I=n({},{msgList:[],lastMsg:"",lastTime:""},C);S=S.set(T,y.fromJS(I))}return e.setIn(["converses"],S)}return e;case m:var D=t.convUUID;if(r=y.fromJS(t.payload),r.size>0){var R=e.getIn(["converses",D,"msgList"]),O=r.concat(R).sortBy(function(e){return e.get("date")}).last();return e.updateIn(["converses",D,"msgList"],function(e){return new y.List(new y.Set(e.concat(r)))}).setIn(["converses",D,"lastMsg"],O.get("message")).setIn(["converses",D,"lastTime"],O.get("date"))}return e;case p:return t.payload.name&&(e=e.setIn(["converses",t.uuid,"name"],t.payload.name)),t.payload.icon&&(e=e.setIn(["converses",t.uuid,"icon"],t.payload.icon)),e;case h:return e.deleteIn(["converses",t.converseUUID]);case g:return e.set("selectedConversesUUID",t.converseUUID).set("selectedConversesUserUUID",t.userUUID).setIn(["converses",t.converseUUID,"unread"],!1);case v:return e.setIn(["converses",t.payload,"unread"],!1);case d:var N=t.payload.uuid,U=n({},{msgList:[],lastMsg:"",lastTime:""},t.payload);return e.setIn(["converses",N],y.fromJS(U));case b:return e.updateIn(["converses","trpgsystem","msgList"],function(e){for(var n=0;n<e.size;n++)e.getIn([n,"uuid"])===t.chatUUID&&(e=e.set(n,y.fromJS(t.payload)));return e});default:return e}}catch(t){return e}}},function(e,exports,t){"use strict";var n=t(13),r=t(9),o=r.RESET,i=r.LOGIN_REQUEST,a=r.LOGIN_SUCCESS,c=r.LOGIN_FAILED,s=r.LOGIN_TOKEN_SUCCESS,l=r.LOGOUT,u=r.REGISTER_REQUEST,d=r.REGISTER_SUCCESS,f=r.REGISTER_FAILED,p=r.FIND_USER_REQUEST,m=r.FIND_USER_SUCCESS,h=r.FIND_USER_FAILED,g=r.UPDATE_INFO_SUCCESS,v=r.ADD_FRIEND_SUCCESS,b=r.GET_FRIENDS_SUCCESS,y=r.SEND_FRIEND_INVITE_SUCCESS,x=r.AGREE_FRIEND_INVITE_SUCCESS,w=r.GET_FRIEND_INVITE_SUCCESS,E=r.REFUSE_FRIEND_INVITE_SUCCESS,_=r.ADD_FRIEND_INVITE,S=n.fromJS({isTryLogin:!1,isLogin:!1,info:{},friendList:[],friendInvite:[],friendRequests:[],isFindingUser:!1,findingResult:[]});e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments[1];switch(t.type){case o:return S;case i:return e.set("isTryLogin",!0);case a:case s:return e.set("isLogin",!0).set("isTryLogin",!1).set("info",n.fromJS(t.payload));case c:return e.set("isLogin",!1).set("isTryLogin",!1).set("info",n.Map());case l:return e.set("isLogin",!1).set("info",n.Map());case u:case f:case d:return e;case p:return e.set("isFindingUser",!0);case m:case h:return e.set("isFindingUser",!1).set("findingResult",n.fromJS(t.payload||[]));case g:return e.set("info",n.fromJS(t.payload));case v:var r=t.friendUUID;return e.update("friendList",function(e){return-1===e.indexOf(r)?e.push(r):e});case b:return e.set("friendList",n.fromJS(t.payload));case y:return e.update("friendInvite",function(e){var n=t.uuid;return-1===e.indexOf(n)?e.push(n):e});case w:return e.set("friendRequests",n.fromJS(t.payload||[]));case x:return e.update("friendRequests",function(e){for(var n=t.payload.uuid,r=-1,o=0;o<e.count();o++){if(e.get(o).get("uuid")===n){r=o;break}}return r>=0?e.delete(r):e}).update("friendList",function(e){return e.push(t.payload.from_uuid)});case E:return e.update("friendRequests",function(e){for(var n=t.payload.uuid,r=-1,o=0;o<e.count();o++){if(e.get(o).get("uuid")===n){r=o;break}}return r>=0?e.delete(r):e});case _:return e.update("friendRequests",function(e){return e.push(n.fromJS(t.payload))});default:return e}}},function(e,exports,t){"use strict";var n=t(13),r=t(9),o=r.RESET,i=r.GET_USER_INFO,a=r.GET_TEMPLATE_INFO,c=r.GET_ACTOR_INFO,s=r.GET_TEMPLATE_SUCCESS,l=n.fromJS({user:{},template:{},actor:{}});e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case o:return l;case i:return e.setIn(["user",t.payload.uuid],n.fromJS(t.payload));case a:return e.setIn(["template",t.payload.uuid],n.fromJS(t.payload));case c:return e.setIn(["actor",t.payload.uuid],n.fromJS(t.payload));case s:if(t.uuid)return e.setIn(["template",t.payload.uuid],n.fromJS(t.payload));var r=!0,u=!1,d=void 0;try{for(var f,p=t.payload["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(r=(f=p.next()).done);r=!0){var m=f.value;e=e.setIn(["template",m.uuid],n.fromJS(m))}}catch(e){u=!0,d=e}finally{try{!r&&p.return&&p.return()}finally{if(u)throw d}}return e;default:return e}}},function(e,exports,t){"use strict";function n(){return{uuid:u(),createdAt:(new Date).getTime(),updatedAt:(new Date).getTime(),title:"笔记标题",content:"欢迎使用笔记本"}}var r=t(9),o=r.RESET,i=r.ADD_NOTE,a=r.GET_NOTE,c=r.SWITCH_NOTE,s=r.SAVE_NOTE,l=t(13),u=t(509),d=l.fromJS({noteList:{},selectedNoteUUID:""});e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments[1];switch(t.type){case o:return d;case i:var r=l.fromJS(n()),u=r.get("uuid");return e.setIn(["noteList",u],r).set("selectedNoteUUID",u);case s:var f=t.payload.uuid,p=t.payload.title,m=t.payload.content;return e=e.setIn(["noteList",f,"title"],p).setIn(["noteList",f,"content"],m).setIn(["noteList",f,"updatedAt"],(new Date).getTime());case a:return e.set("noteList",l.fromJS(t.noteList));case c:return e.set("selectedNoteUUID",t.noteUUID);default:return e}}},function(e,exports,t){"use strict";function n(e,t,n){var l=t&&n||0,u=t||[];e=e||{};var d=e.node||r,f=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==f){var p=i();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=o=16383&(p[6]<<8|p[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:s+1,g=m-c+(h-s)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||m>c)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=m,s=h,o=f,m+=122192928e5;var v=(1e4*(268435455&m)+h)%4294967296;u[l++]=v>>>24&255,u[l++]=v>>>16&255,u[l++]=v>>>8&255,u[l++]=255&v;var b=m/4294967296*1e4&268435455;u[l++]=b>>>8&255,u[l++]=255&b,u[l++]=b>>>24&15|16,u[l++]=b>>>16&255,u[l++]=f>>>8|128,u[l++]=255&f;for(var y=0;y<6;++y)u[l+y]=d[y];return t||a(u)}var r,o,i=t(510),a=t(511),c=0,s=0;e.exports=n},function(e,exports,t){"use strict";var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,exports,t){"use strict";function n(e,t){var n=t||0,o=r;return o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]}for(var r=[],o=0;o<256;++o)r[o]=(o+256).toString(16).substr(1);e.exports=n},function(e,exports,t){"use strict";function n(e,t,n){for(var r=0;r<e.size;r++)if(t===e.getIn([r,"uuid"]))return e.set(r,o.fromJS(n));return e}function r(e,t,n){for(var r=0;r<e.size;r++)if(t===e.getIn([r,"uuid"]))return e.set(r,o.fromJS(n));return e}var o=t(13),i=t(9),a=i.RESET,c=i.GET_TEMPLATE_SUCCESS,s=i.FIND_TEMPLATE_SUCCESS,l=i.CREATE_TEMPLATE_SUCCESS,u=i.UPDATE_TEMPLATE_SUCCESS,d=i.SET_EDITED_TEMPLATE,f=i.SELECT_TEMPLATE,p=i.CREATE_ACTOR_SUCCESS,m=i.GET_ACTOR_SUCCESS,h=i.SELECT_ACTOR,g=i.REMOVE_ACTOR_SUCCESS,v=i.UPDATE_ACTOR_SUCCESS,b=o.fromJS({isFindingTemplate:!1,findingResult:[],currentEditedTemplate:{uuid:"",name:"模板名",desc:"",avatar:"",info:""},selfTemplate:[],selectedTemplate:{},selfActors:[],selectedActorUUID:""});e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments[1];switch(t.type){case a:return b;case s:return e.set("findingResult",o.fromJS(t.payload));case l:return e.set("currentEditedTemplate",o.fromJS(t.payload)).update("selfTemplate",function(e){return e.push(o.fromJS(t.payload))});case u:return e.set("currentEditedTemplate",o.fromJS(t.payload)).update("selfTemplate",function(e){return n(e,t.payload.uuid,t.payload)});case c:return t.uuid?e.update("selfTemplate",function(e){return n(e,t.uuid,t.payload)}):e.set("selfTemplate",o.fromJS(t.payload));case d:return e.set("currentEditedTemplate",o.fromJS(t.payload));case f:return e.set("selectedTemplate",o.fromJS(t.payload));case p:return e.update("selfActors",function(e){return e.push(o.fromJS(t.payload))}).set("selectedActorUUID","");case m:return t.uuid?e.update("selfActors",function(e){return r(e,t.uuid,t.payload)}):e.set("selfActors",o.fromJS(t.payload));case h:return e.set("selectedActorUUID",t.payload);case g:return e.update("selfActors",function(e){for(var n=0;n<e.size;n++)if(e.getIn([n,"uuid"])===t.uuid)return e.delete(n);return e});case v:return e.update("selfActors",function(e){return r(e,t.payload.uuid,t.payload)});default:return e}}},function(e,exports,t){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=t(13),o=t(9),i=o.RESET,a=o.CREATE_GROUP_SUCCESS,c=o.GET_GROUP_INFO_SUCCESS,s=o.UPDATE_GROUP_INFO_SUCCESS,l=o.FIND_GROUP_REQUEST,u=o.FIND_GROUP_SUCCESS,d=o.REQUEST_JOIN_GROUP_SUCCESS,f=o.AGREE_GROUP_REQUEST_SUCCESS,p=o.AGREE_GROUP_INVITE_SUCCESS,m=o.REFUSE_GROUP_INVITE_SUCCESS,h=o.GET_GROUP_INVITE_SUCCESS,g=o.GET_GROUP_LIST_SUCCESS,v=o.SWITCH_GROUP,b=o.GET_GROUP_ACTOR_SUCCESS,y=o.GET_GROUP_MEMBERS_SUCCESS,x=o.SET_PLAYER_SELECTED_GROUP_ACTOR_SUCCESS,w=o.ADD_GROUP_ACTOR_SUCCESS,E=o.REMOVE_GROUP_ACTOR_SUCCESS,_=o.AGREE_GROUP_ACTOR_SUCCESS,S=o.REFUSE_GROUP_ACTOR_SUCCESS,k=o.UPDATE_GROUP_ACTOR_INFO_SUCCESS,C=o.QUIT_GROUP_SUCCESS,T=o.DISMISS_GROUP_SUCCESS,I=o.TICK_MEMBER_SUCCESS,D=o.SET_MEMBER_TO_MANAGER_SUCCESS,R=o.UPDATE_GROUP_STATUS,O=r.fromJS({info:{},invites:[],groups:[],selectedGroupUUID:"",isFindingGroup:!1,findingResult:[],requestingGroupUUID:[]});e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments[1];switch(t.type){case i:return O;case a:return e.update("groups",function(e){return e.push(r.fromJS(t.payload))});case c:var o=t.payload.uuid;return e.setIn(["info",o],t.payload);case s:var N=e.get("groups").findIndex(function(e){return e.get("uuid")===t.payload.uuid});if(N>=0){var U=e.getIn(["groups",N]).toJS();return U=n({},U,t.payload),e.setIn(["groups",N],r.fromJS(U))}return e;case l:return e.set("isFindingGroup",!0);case u:return e.set("isFindingGroup",!1).set("findingResult",r.fromJS(t.payload));case d:return e.update("requestingGroupUUID",function(e){return e.push(t.payload.group_uuid)});case f:return e.update("groups",function(e){for(var n=0;n<e.size;n++)e.getIn([n,"uuid"])===t.groupUUID&&(e=e.setIn([n,"group_members"],r.fromJS(t.payload)));return e});case h:return e.set("invites",r.fromJS(t.payload));case p:return e.update("invites",function(e){for(var n=t.payload.uuid,r=-1,o=0;o<e.size;o++){if(e.get(o).get("uuid")===n){r=o;break}}return r>=0?e.delete(r):e}).update("groups",function(e){return e.push(r.fromJS(t.payload.group))});case m:return e.update("invites",function(e){for(var n=t.payload.uuid,r=-1,o=0;o<e.size;o++){if(e.get(o).get("uuid")===n){r=o;break}}return r>=0?e.delete(r):e});case g:return e.set("groups",r.fromJS(t.payload));case v:return e.set("selectedGroupUUID",t.payload);case b:return e.update("groups",function(e){for(var n=0;n<e.size;n++)e.getIn([n,"uuid"])===t.groupUUID&&(e=e.setIn([n,"group_actors"],r.fromJS(t.payload)));return e});case y:return e.update("groups",function(e){for(var n=0;n<e.size;n++)e.getIn([n,"uuid"])===t.groupUUID&&(e=e.setIn([n,"group_members"],r.fromJS(t.payload)));return e});case x:return e.update("groups",function(e){for(var n=0;n<e.size;n++)e.getIn([n,"uuid"])===t.payload.groupUUID&&(e=e.setIn([n,"extra","selected_group_actor_uuid"],t.payload.groupActorUUID));return e});case w:return e.update("groups",function(e){for(var n=0;n<e.size;n++)e.getIn([n,"uuid"])===t.groupUUID&&(e=e.updateIn([n,"group_actors"],function(e){return e.push(r.fromJS(t.payload))}));return e});case E:var A=e.get("groups").findIndex(function(e){return e.get("uuid")===t.groupUUID});return A>=0?e.updateIn(["groups",A,"group_actors"],function(e){var n=e.findIndex(function(e){return e.get("uuid")===t.groupActorUUID});return A>=0?e.remove(n):e}):e;case _:return e.update("groups",function(e){for(var n=0;n<e.size;n++)e.getIn([n,"uuid"])===t.groupUUID&&function(){var r=t.payload.uuid;e=e.updateIn([n,"group_actors"],function(t){var n=e.findIndex(function(e){return e.uuid===r});return t.setIn([n,"passed"],!0)})}();return e});case S:return e.update("groups",function(e){for(var n=0;n<e.size;n++)e.getIn([n,"uuid"])===t.groupUUID&&function(){var r=t.groupActorUUID;e=e.updateIn([n,"group_actors"],function(t){var n=e.findIndex(function(e){return e.uuid===r});return t.delete(n)})}();return e});case k:var P=e.get("groups").findIndex(function(e){return e.uuid===t.groupUUID}),M=e.getIn(["groups",P,"group_actors"]).findIndex(function(e){return e.uuid===t.groupActorUUID});return e.setIn(["groups",P,"group_actors",M,"actor_info"],r.fromJS(t.groupActorInfo));case C:case T:return e.update("groups",function(e){var n=e.findIndex(function(e){return e.get("uuid")===t.groupUUID});return e.delete(n)});case I:return e.update("groups",function(e){var n=e.findIndex(function(e){return e.get("uuid")===t.groupUUID});return e.updateIn([n,"group_members"],function(e){return e.delete(e.findIndex(function(e){return e===t.memberUUID}))})});case D:return e.update("groups",function(e){var n=e.findIndex(function(e){return e.get("uuid")===t.groupUUID});return e.updateIn([n,"managers_uuid"],function(e){return e.push(t.memberUUID)})});case R:return e.update("groups",function(e){var n=e.findIndex(function(e){return e.get("uuid")===t.groupUUID});return e.setIn([n,"status"],t.groupStatus)});default:return e}}},function(e,exports,t){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=t(9),o=r.RESET,i=r.SET_USER_SETTINGS,a=r.SET_SYSTEM_SETTINGS,c=r.UPDATE_NOTIFICATION_PERMISSION,s=r.ADD_FAVORITE_DICE,l=r.REMOVE_FAVORITE_DICE,u=r.UPDATE_FAVORITE_DICE,d=t(7),f=t(13),p=f.fromJS(n({},d.defaultSettings,{notificationPermission:"default"}));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1];switch(t.type){case o:return p;case i:return e.set("user",e.get("user").merge(f.fromJS(t.payload)));case a:return e.set("system",e.get("system").merge(f.fromJS(t.payload)));case c:return e.set("notificationPermission",t.payload);case s:return e.updateIn(["user","favoriteDice"],function(e){return e.push(f.fromJS({title:"常用骰",value:"1d100"}))});case l:return e.updateIn(["user","favoriteDice"],function(e){return e.delete(t.index)});case u:return e.setIn(["user","favoriteDice",t.index],f.fromJS(t.payload));default:return e}}},function(e,exports){e.exports=require("react-navigation-redux-helpers")},function(e,exports,t){"use strict";e.exports={ui:t(5),chat:t(16),user:t(17),cache:t(55),note:t(45),actor:t(23),group:t(11)}},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=t(518),a=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n(this,e),this._SIZE=r.size||1e3,this.sync=r.sync||{},this.defaultExpires=void 0!==r.defaultExpires?r.defaultExpires:864e5,this.enableCache=!1!==r.enableCache,this._s=r.storageBackend||null,this._innerVersion=11,this.cache={},this._s&&this._s.setItem)try{var o=this._s.setItem("__react_native_storage_test","test");this.isPromise=!(!o||!o.then)}catch(e){throw delete this._s,e}this._mapPromise=this.getItem("map").then(function(e){t._m=t._checkMap(e&&JSON.parse(e)||{})})}return o(e,[{key:"getItem",value:function(e){return this._s?this.isPromise?this._s.getItem(e):Promise.resolve(this._s.getItem(e)):Promise.resolve()}},{key:"setItem",value:function(e,t){return this._s?this.isPromise?this._s.setItem(e,t):Promise.resolve(this._s.setItem(e,t)):Promise.resolve()}},{key:"removeItem",value:function(e){return this._s?this.isPromise?this._s.removeItem(e):Promise.resolve(this._s.removeItem(e)):Promise.resolve()}},{key:"_initMap",value:function(){return{innerVersion:this._innerVersion,index:0,__keys__:{}}}},{key:"_checkMap",value:function(e){return e&&e.innerVersion&&e.innerVersion===this._innerVersion?e:this._initMap()}},{key:"_getId",value:function(e,t){return e+"_"+t}},{key:"_saveToMap",value:function(e){var t=e.key,n=e.id,r=e.data,o=this._getId(t,n),i=this._m;if(void 0!==i[o])return this.enableCache&&(this.cache[o]=JSON.parse(r)),this.setItem("map_"+i[o],r);if(void 0!==i[i.index]){var a=i[i.index],c=a.split("_");delete i[a],this._removeIdInKey(c[0],c[1]),this.enableCache&&delete this.cache[a]}if(i[o]=i.index,i[i.index]=o,i.__keys__[t]=i.__keys__[t]||[],i.__keys__[t].push(n),this.enableCache){var s=JSON.parse(r);this.cache[o]=s}var l=i.index;++i.index===this._SIZE&&(i.index=0),this.setItem("map_"+l,r),this.setItem("map",JSON.stringify(i))}},{key:"save",value:function(e){var t=this,n=e.key,r=e.id,o=e.data,i=e.rawData,a=e.expires,c=void 0===a?this.defaultExpires:a;n.toString().indexOf("_");var s={rawData:o};if(void 0===o){if(void 0===i)return;s.rawData=i}var l=(new Date).getTime();if(null!==c&&(s.expires=l+c),s=JSON.stringify(s),void 0===r){if(this.enableCache){var u=JSON.parse(s);this.cache[n]=u}return this.setItem(n,s)}return r.toString().indexOf("_"),this._mapPromise.then(function(){return t._saveToMap({key:n,id:r,data:s})})}},{key:"getBatchData",value:function(e){for(var t,n=[],r=0;t=e[r];r++)n[r]=this.load(t);return Promise.all(n)}},{key:"getBatchDataWithIds",value:function(e){var t=this,n=e.key,r=e.ids,o=e.syncInBackground;return Promise.all(r.map(function(e){return t.load({key:n,id:e,syncInBackground:o,autoSync:!1,batched:!0})})).then(function(e){return new Promise(function(r,o){var i=e.filter(function(e){return void 0!==e.syncId});return i.length?t.sync[n]({id:i.map(function(e){return e.syncId}),resolve:r,reject:o}):r()}).then(function(t){return e.map(function(e){return e.syncId?t.shift():e})})})}},{key:"_lookupGlobalItem",value:function(e){var t=this,n=void 0,o=e.key;return this.enableCache&&void 0!==this.cache[o]?(n=this.cache[o],this._loadGlobalItem(r({ret:n},e))):this.getItem(o).then(function(n){return t._loadGlobalItem(r({ret:n},e))})}},{key:"_loadGlobalItem",value:function(e){var t=this,n=e.key,r=e.ret,o=e.autoSync,a=e.syncInBackground,c=e.syncParams;if(null===r||void 0===r)return o&&this.sync[n]?new Promise(function(e,r){return t.sync[n]({resolve:e,reject:r,syncParams:c})}):Promise.reject(new i.NotFoundError(JSON.stringify(e)));"string"==typeof r&&(r=JSON.parse(r),this.enableCache&&(this.cache[n]=r));var s=(new Date).getTime();return r.expires<s?o&&this.sync[n]?a?(this.sync[n]({syncParams:c}),Promise.resolve(r.rawData)):new Promise(function(e,r){return t.sync[n]({resolve:e,reject:r,syncParams:c})}):Promise.reject(new i.ExpiredError(JSON.stringify(e))):Promise.resolve(r.rawData)}},{key:"_noItemFound",value:function(e){var t=this,n=e.key,r=e.id,o=e.autoSync,a=e.syncParams;return this.sync[n]?o?new Promise(function(e,o){return t.sync[n]({id:r,syncParams:a,resolve:e,reject:o})}):Promise.resolve({syncId:r}):Promise.reject(new i.NotFoundError(JSON.stringify(e)))}},{key:"_loadMapItem",value:function(e){var t=this,n=e.ret,r=e.key,o=e.id,a=e.autoSync,c=e.batched,s=e.syncInBackground,l=e.syncParams;if(null===n||void 0===n)return this._noItemFound(e);if("string"==typeof n){n=JSON.parse(n);var u=e.key,d=e.id,f=this._getId(u,d);this.enableCache&&(this.cache[f]=n)}var p=(new Date).getTime();return n.expires<p?a&&this.sync[r]?s?(this.sync[r]({id:o,syncParams:l}),Promise.resolve(n.rawData)):new Promise(function(e,n){return t.sync[r]({id:o,resolve:e,reject:n,syncParams:l})}):c?Promise.resolve({syncId:o}):Promise.reject(new i.ExpiredError(JSON.stringify(e))):Promise.resolve(n.rawData)}},{key:"_lookUpInMap",value:function(e){var t=this,n=this._m,o=void 0,i=e.key,a=e.id,c=this._getId(i,a);return this.enableCache&&this.cache[c]?(o=this.cache[c],this._loadMapItem(r({ret:o},e))):void 0!==n[c]?this.getItem("map_"+n[c]).then(function(n){return t._loadMapItem(r({ret:n},e))}):this._noItemFound(r({ret:o},e))}},{key:"remove",value:function(e){var t=this;return this._mapPromise.then(function(){var n=t._m,r=e.key,o=e.id;if(void 0===o)return t.enableCache&&t.cache[r]&&delete t.cache[r],t.removeItem(r);var i=t._getId(r,o);if(void 0!==n[i]){t.enableCache&&t.cache[i]&&delete t.cache[i],t._removeIdInKey(r,o);var a=n[i];return delete n[i],t.setItem("map",JSON.stringify(n)),t.removeItem("map_"+a)}})}},{key:"_removeIdInKey",value:function(e,t){var n=(this._m.__keys__[e]||[]).indexOf(t);-1!==n&&this._m.__keys__[e].splice(n,1)}},{key:"load",value:function(e){var t=this,n=e.key,r=e.id,o=e.autoSync,i=void 0===o||o,a=e.syncInBackground,c=void 0===a||a,s=e.syncParams;return this._mapPromise.then(function(){return new Promise(function(e,o){return e(void 0===r?t._lookupGlobalItem({key:n,resolve:e,reject:o,autoSync:i,syncInBackground:c,syncParams:s}):t._lookUpInMap({key:n,id:r,resolve:e,reject:o,autoSync:i,syncInBackground:c,syncParams:s}))})})}},{key:"clearMap",value:function(){var e=this;this.removeItem("map").then(function(){e._m=e._initMap()})}},{key:"clearMapForKey",value:function(e){var t=this;return this._mapPromise.then(function(){var n=(t._m.__keys__[e]||[]).map(function(n){return t.remove({key:e,id:n})});return Promise.all(n)})}},{key:"getIdsForKey",value:function(e){var t=this;return this._mapPromise.then(function(){return t._m.__keys__[e]||[]})}},{key:"getAllDataForKey",value:function(e,t){var n=this;return t=r({syncInBackground:!0},t),this.getIdsForKey(e).then(function(r){var o=r.map(function(n){return{key:e,id:n,syncInBackground:t.syncInBackground}});return n.getBatchData(o)})}}]),e}();exports.default=a},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});exports.NotFoundError=function e(t){n(this,e),this.name="NotFoundError",this.message="Not Found! Params: "+t,this.stack=(new Error).stack},exports.ExpiredError=function e(t){n(this,e),this.name="ExpiredError",this.message="Expired! Params: "+t,this.stack=(new Error).stack}},function(e,exports){e.exports=require("react-native")},function(e,exports,t){"use strict";function n(e){r.get(o.github.projectPackageUrl).then(function(t){var n=t.data,r=n.version;e(r===o.version)}).catch(function(e){})}var r=t(58),o=t(7);e.exports=n},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=function(e){return e&&e.__esModule?e:{default:e}}(a),s=t(4),l=t(50),u=l.Route,d=l.Switch,f=l.HashRouter,p=l.BrowserRouter,m=l.Link,h=t(522),g=t(526),v=t(529),b=t(532),y=t(7);t(535),t(537),t(539),t(541);var x="web"===y.platform||"development"===y.environment?p:f,w=y.version,E=t(543),_=t(546),S=t(549),k=t(75),C=k.emojify,T=k.getCodeList,I=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.showLoading,n=e.showLoadingText;return c.default.createElement(x,null,c.default.createElement("div",null,c.default.createElement(h,null),c.default.createElement(g,{show:t,text:n}),c.default.createElement(v,null),c.default.createElement("div",{className:"app"},c.default.createElement(d,null,c.default.createElement(u,{name:"login",path:"/login",component:E}),c.default.createElement(u,{name:"register",path:"/register",component:_}),c.default.createElement(u,{name:"main",path:"/main",component:S}),c.default.createElement(u,{name:"emoji",path:"/emoji"},c.default.createElement("div",null,T().people.map(function(e){return c.default.createElement("span",{key:e},C(e))}),T().nature.map(function(e){return c.default.createElement("span",{key:e},C(e))}),T().objects.map(function(e){return c.default.createElement("span",{key:e},C(e))}),T().places.map(function(e){return c.default.createElement("span",{key:e},C(e))}),T().symbols.map(function(e){return c.default.createElement("span",{key:e},C(e))}))),c.default.createElement(u,{name:"index",path:"/"},c.default.createElement(m,{to:"login",className:"start-btn"},c.default.createElement("div",{className:"main"},"点击屏幕登录"),c.default.createElement("div",{className:"sub"},"Press screen to login")))),"web"===y.platform?c.default.createElement(b,null):null,c.default.createElement("div",{className:"version"},"当前版本号v",w))))}}]),t}(c.default.Component);e.exports=(0,s.connect)(function(e){return{playSound:e.getIn(["pc","playSound"]),showLoading:e.getIn(["ui","showLoading"]),showLoadingText:e.getIn(["ui","showLoadingText"])}})(I)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(6),s=t(4),l=s.connect,u=t(5),d=u.hideModal;t(523);var f=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){var e=this,t="";return this.props.show&&this.props.body&&(t=a.createElement("div",{className:"modal-mask",onClick:function(e){return e.stopPropagation()}},a.createElement("div",{className:"modal-card"},a.createElement("div",{className:"modal-close",onClick:function(){return e.props.hideModal()}},a.createElement("i",{className:"iconfont"},"")),a.createElement("div",{className:"modal-content"},this.props.body.toJS())))),a.createElement("div",{className:"modal"},t)}}]),t}(a.Component);f.propTypes={show:c.bool,body:c.object},e.exports=l(function(e){return{show:e.getIn(["ui","showModal"]),body:e.getIn(["ui","showModalBody"])}},function(e){return{hideModal:function(){e(d())}}})(f)},function(e,exports,t){var n=t(524);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".modal .modal-mask {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.6);\n  z-index: 100; }\n  .modal .modal-mask .modal-card {\n    border-radius: 3px;\n    overflow: hidden;\n    background-color: white;\n    text-align: center;\n    box-shadow: rgba(0, 0, 0, 0.15) 1px 4px 12px;\n    min-width: 375px;\n    min-height: 375px;\n    max-width: 100%;\n    max-height: 100%;\n    display: flex;\n    position: relative; }\n    .modal .modal-mask .modal-card .modal-content {\n      flex: 1; }\n    .modal .modal-mask .modal-card .modal-close {\n      position: absolute;\n      right: 10px;\n      top: 10px;\n      cursor: pointer;\n      z-index: 1; }\n      .modal .modal-mask .modal-card .modal-close .iconfont {\n        font-size: 21px;\n        color: rgba(0, 0, 0, 0.2);\n        line-height: 1em;\n        display: block;\n        transition: all 0.2s ease-in-out; }\n        .modal .modal-mask .modal-card .modal-close .iconfont:hover {\n          color: rgba(0, 0, 0, 0.6); }\n",""])},function(e,exports,t){"use strict";e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o))return e;var i;return i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")"})}},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(6);t(527);var s=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){var e="";return this.props.show&&(e=a.createElement("div",{className:"mask"},a.createElement("div",{className:"content"},a.createElement("div",{className:"spinner"},a.createElement("div",{className:"rect1"}),a.createElement("div",{className:"rect2"}),a.createElement("div",{className:"rect3"}),a.createElement("div",{className:"rect4"}),a.createElement("div",{className:"rect5"})),a.createElement("span",null,this.props.text)))),a.createElement("div",{className:"loading"},e)}}]),t}(a.Component);s.propTypes={show:c.bool,text:c.string},e.exports=s},function(e,exports,t){var n=t(528);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".loading .mask {\n  position: fixed;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n  z-index: 100; }\n  .loading .mask .content {\n    padding: 20px;\n    border-radius: 4px;\n    background-color: rgba(255, 255, 255, 0.6);\n    text-align: center; }\n    .loading .mask .content .spinner {\n      margin: 20px auto;\n      width: 200px;\n      height: 60px;\n      text-align: center;\n      font-size: 10px; }\n      .loading .mask .content .spinner > div {\n        background-color: #5da4ce;\n        height: 100%;\n        width: 6px;\n        display: inline-block;\n        margin: 1px;\n        -webkit-animation: stretchdelay 1.2s infinite ease-in-out;\n        animation: stretchdelay 1.2s infinite ease-in-out; }\n        .loading .mask .content .spinner > div.rect2 {\n          -webkit-animation-delay: -1.1s;\n          animation-delay: -1.1s; }\n        .loading .mask .content .spinner > div.rect3 {\n          -webkit-animation-delay: -1.0s;\n          animation-delay: -1.0s; }\n        .loading .mask .content .spinner > div.rect4 {\n          -webkit-animation-delay: -0.9s;\n          animation-delay: -0.9s; }\n        .loading .mask .content .spinner > div.rect5 {\n          -webkit-animation-delay: -0.8s;\n          animation-delay: -0.8s; }\n\n@-webkit-keyframes stretchdelay {\n  0%, 40%, 100% {\n    -webkit-transform: scaleY(0.4); }\n  20% {\n    -webkit-transform: scaleY(1); } }\n\n@keyframes stretchdelay {\n  0%, 40%, 100% {\n    transform: scaleY(0.4);\n    -webkit-transform: scaleY(0.4); }\n  20% {\n    transform: scaleY(1);\n    -webkit-transform: scaleY(1); } }\n    .loading .mask .content span {\n      color: #666666; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(5),u=l.hideAlert;t(530);var d=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"getAlertContent",value:function(){var e=this,t=this.props.showAlertInfo.get("title")||"",n=this.props.showAlertInfo.get("content"),r=this.props.showAlertInfo.get("confirmTitle"),o=this.props.showAlertInfo.get("onConfirm"),i=this.props.showAlertInfo.get("onCancel"),c=void 0;return o&&(c=a.createElement("button",{onClick:function(){return i?i():e.props.dispatch(u())}},"取消")),n&&n._root&&(n=n.toJS()),a.createElement("div",null,a.createElement("div",{className:"header"},t||""),a.createElement("div",{className:"body"},n||"确认进行该操作?"),a.createElement("button",{onClick:function(){o?o():e.props.dispatch(u())}},r||"确认"),c)}},{key:"render",value:function(){var e=this.props.showAlert||!1,t=this.props.showAlertInfo.get("type")||"alert",n="";t&&"alert"!==t||(n=this.getAlertContent());var r="";return e&&(r=a.createElement("div",{className:"mask",onClick:function(e){return e.stopPropagation()}},a.createElement("div",{className:"content"},n))),a.createElement("div",{className:"alert"},r)}}]),t}(a.Component);e.exports=s(function(e){return{showAlert:e.getIn(["ui","showAlert"]),showAlertInfo:e.getIn(["ui","showAlertInfo"])}})(d)},function(e,exports,t){var n=t(531);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".alert .mask {\n  position: fixed;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n  z-index: 100; }\n  .alert .mask .content {\n    padding: 20px;\n    border-radius: 4px;\n    background-color: white;\n    text-align: center;\n    min-width: 300px;\n    min-height: 100px;\n    max-width: 400px; }\n    .alert .mask .content .header {\n      font-size: 20px;\n      margin-bottom: 20px; }\n    .alert .mask .content .body {\n      color: #666666;\n      line-height: 1.5em;\n      max-height: 200px;\n      overflow: hidden; }\n      .alert .mask .content .body:hover {\n        overflow-y: auto;\n        overflow-y: overlay; }\n      .alert .mask .content .body p {\n        margin: 0; }\n    .alert .mask .content button {\n      font-size: 16px;\n      border: 0;\n      cursor: pointer;\n      color: white;\n      border-radius: 3px;\n      background-color: #999;\n      padding: 6px 12px;\n      outline: 0;\n      user-select: none;\n      width: 100%;\n      height: 40px;\n      margin-top: 8px;\n      font-size: 15px; }\n      .alert .mask .content button:hover, .alert .mask .content button:active, .alert .mask .content button.active {\n        background-color: #705949; }\n      .alert .mask .content button:disabled {\n        cursor: not-allowed;\n        background-color: #999999; }\n      .alert .mask .content button:nth-of-type(1) {\n        margin-top: 20px; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect;t(533);var l=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){var e=this.props.network.toJS(),t="",n="";return e.isOnline?(n="ok",t="&#xe620;"):e.tryReconnect?(n="loading",t="&#xeb0f;"):(n="close",t="&#xe70c;"),a.createElement("div",{className:"network-indicator "+n},a.createElement("div",{className:"icon"},a.createElement("i",{className:"iconfont",dangerouslySetInnerHTML:{__html:t}})),a.createElement("div",{className:"msg"},e.msg))}}]),t}(a.Component);e.exports=s(function(e){return{network:e.getIn(["ui","network"])}})(l)},function(e,exports,t){var n=t(534);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,"@keyframes rotatespin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg); } }\n\n.network-indicator {\n  position: absolute;\n  left: 15px;\n  top: 10px;\n  color: rgba(255, 255, 255, 0.6);\n  font-size: 12px;\n  user-select: none;\n  cursor: default;\n  line-height: 18px; }\n  .network-indicator > div {\n    display: inline-block; }\n  .network-indicator .icon {\n    width: 18px;\n    height: 18px;\n    vertical-align: bottom;\n    margin-right: 4px; }\n    .network-indicator .icon > .iconfont {\n      line-height: 18px;\n      font-size: 18px; }\n  .network-indicator.loading .icon {\n    animation: rotatespin 2s infinite linear; }\n  .network-indicator .msg {\n    margin-left: 2px; }\n",""])},function(e,exports,t){var n=t(536);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,'@charset "UTF-8";\n* {\n  box-sizing: border-box;\n  font-family: PingFang SC, "Microsoft YaHei", arial, serif;\n  transition: all 0.1s ease-in-out; }\n\n.Select * {\n  transition: initial; }\n\nhtml, body {\n  margin: 0;\n  padding: 0;\n  min-height: 100%;\n  min-width: 100%;\n  -webkit-font-smoothing: antialiased;\n  overflow: hidden; }\n\nul, li, p {\n  margin: 0;\n  padding: 0;\n  list-style: none; }\n\na, a:link, a:visited, a:hover, a:active {\n  text-decoration: none;\n  color: #2596e5;\n  font-size: 14px; }\n\npre {\n  margin: 0;\n  white-space: pre-wrap;\n  word-wrap: break-word; }\n\nimg {\n  user-select: none;\n  pointer-events: none; }\n\n/* 滚动条 */\n::-webkit-scrollbar {\n  width: 8px;\n  height: 8px; }\n\n::-webkit-scrollbar-track-piece {\n  background-color: transparent; }\n\n::-webkit-scrollbar-thumb {\n  border-radius: 9px;\n  background-color: #cccccc; }\n\n::-webkit-scrollbar-thumb:hover {\n  background-color: #929292; }\n\n::-webkit-file-upload-button {\n  cursor: pointer; }\n\n#app .app {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n  min-width: 100%;\n  height: 100vh;\n  background-color: rgba(255, 255, 255, 0.2);\n  transition: initial; }\n  #app .app .version {\n    position: absolute;\n    left: 15px;\n    bottom: 10px;\n    color: rgba(255, 255, 255, 0.6);\n    font-size: 12px; }\n  #app .app .start-btn {\n    font-size: 24px;\n    animation: blink 3s infinite ease-in-out;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    flex-direction: column; }\n\n@keyframes blink {\n  0% {\n    opacity: 0.2; }\n  50% {\n    opacity: 1; }\n  100% {\n    opacity: 0.2; } }\n    #app .app .start-btn .main {\n      font-size: 28px;\n      color: #BACED9; }\n    #app .app .start-btn .sub {\n      font-size: 18px;\n      color: #F9FCFA; }\n',""])},function(e,exports,t){var n=t(538);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,'@font-face {\n  font-family: \'iconfont\';\n  /* project id 395009 */\n  src: url("//at.alicdn.com/t/font_395009_shami6uv9md.eot");\n  src: url("//at.alicdn.com/t/font_395009_shami6uv9md.eot?#iefix") format("embedded-opentype"), url("//at.alicdn.com/t/font_395009_shami6uv9md.woff") format("woff"), url("//at.alicdn.com/t/font_395009_shami6uv9md.ttf") format("truetype"), url("//at.alicdn.com/t/font_395009_shami6uv9md.svg#iconfont") format("svg"); }\n\n.iconfont {\n  font-family: "iconfont" !important;\n  font-size: 16px;\n  font-style: normal;\n  -webkit-font-smoothing: antialiased;\n  /* -webkit-text-stroke-width: 0.2px; */\n  -moz-osx-font-smoothing: grayscale;\n  user-select: none; }\n',""])},function(e,exports,t){var n=t(540);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,"/**\n * React Select\n * ============\n * Created by Jed Watson and Joss Mackison for KeystoneJS, http://www.keystonejs.com/\n * https://twitter.com/jedwatson https://twitter.com/jossmackison https://twitter.com/keystonejs\n * MIT License: https://github.com/JedWatson/react-select\n*/\n.Select {\n  position: relative; }\n\n.Select,\n.Select div,\n.Select input,\n.Select span {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box; }\n\n.Select.is-disabled > .Select-control {\n  background-color: #f9f9f9; }\n\n.Select.is-disabled > .Select-control:hover {\n  box-shadow: none; }\n\n.Select.is-disabled .Select-arrow-zone {\n  cursor: default;\n  pointer-events: none;\n  opacity: 0.35; }\n\n.Select-control {\n  background-color: #fff;\n  border-color: #d9d9d9 #ccc #b3b3b3;\n  border-radius: 4px;\n  border: 1px solid #ccc;\n  color: #333;\n  cursor: default;\n  display: table;\n  border-spacing: 0;\n  border-collapse: separate;\n  height: 36px;\n  outline: none;\n  overflow: hidden;\n  position: relative;\n  width: 100%; }\n\n.Select-control:hover {\n  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.06); }\n\n.Select-control .Select-input:focus {\n  outline: none; }\n\n.is-searchable.is-open > .Select-control {\n  cursor: text; }\n\n.is-open > .Select-control {\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n  background: #fff;\n  border-color: #b3b3b3 #ccc #d9d9d9; }\n\n.is-open > .Select-control .Select-arrow {\n  top: -2px;\n  border-color: transparent transparent #999;\n  border-width: 0 5px 5px; }\n\n.is-searchable.is-focused:not(.is-open) > .Select-control {\n  cursor: text; }\n\n.is-focused:not(.is-open) > .Select-control {\n  border-color: #007eff;\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 0 3px rgba(0, 126, 255, 0.1); }\n\n.Select-placeholder,\n.Select--single > .Select-control .Select-value {\n  bottom: 0;\n  color: #aaa;\n  left: 0;\n  line-height: 34px;\n  padding-left: 10px;\n  padding-right: 10px;\n  position: absolute;\n  right: 0;\n  top: 0;\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap; }\n\n.has-value.Select--single > .Select-control .Select-value .Select-value-label,\n.has-value.is-pseudo-focused.Select--single > .Select-control .Select-value .Select-value-label {\n  color: #333; }\n\n.has-value.Select--single > .Select-control .Select-value a.Select-value-label,\n.has-value.is-pseudo-focused.Select--single > .Select-control .Select-value a.Select-value-label {\n  cursor: pointer;\n  text-decoration: none; }\n\n.has-value.Select--single > .Select-control .Select-value a.Select-value-label:hover,\n.has-value.is-pseudo-focused.Select--single > .Select-control .Select-value a.Select-value-label:hover,\n.has-value.Select--single > .Select-control .Select-value a.Select-value-label:focus,\n.has-value.is-pseudo-focused.Select--single > .Select-control .Select-value a.Select-value-label:focus {\n  color: #007eff;\n  outline: none;\n  text-decoration: underline; }\n\n.Select-input {\n  height: 34px;\n  padding-left: 10px;\n  padding-right: 10px;\n  vertical-align: middle; }\n\n.Select-input > input {\n  width: 100%;\n  background: none transparent;\n  border: 0 none;\n  box-shadow: none;\n  cursor: default;\n  display: inline-block;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  outline: none;\n  line-height: 14px;\n  /* For IE 8 compatibility */\n  padding: 8px 0 12px;\n  /* For IE 8 compatibility */\n  -webkit-appearance: none; }\n\n.is-focused .Select-input > input {\n  cursor: text; }\n\n.has-value.is-pseudo-focused .Select-input {\n  opacity: 0; }\n\n.Select-control:not(.is-searchable) > .Select-input {\n  outline: none; }\n\n.Select-loading-zone {\n  cursor: pointer;\n  display: table-cell;\n  position: relative;\n  text-align: center;\n  vertical-align: middle;\n  width: 16px; }\n\n.Select-loading {\n  -webkit-animation: Select-animation-spin 400ms infinite linear;\n  -o-animation: Select-animation-spin 400ms infinite linear;\n  animation: Select-animation-spin 400ms infinite linear;\n  width: 16px;\n  height: 16px;\n  box-sizing: border-box;\n  border-radius: 50%;\n  border: 2px solid #ccc;\n  border-right-color: #333;\n  display: inline-block;\n  position: relative;\n  vertical-align: middle; }\n\n.Select-clear-zone {\n  -webkit-animation: Select-animation-fadeIn 200ms;\n  -o-animation: Select-animation-fadeIn 200ms;\n  animation: Select-animation-fadeIn 200ms;\n  color: #999;\n  cursor: pointer;\n  display: table-cell;\n  position: relative;\n  text-align: center;\n  vertical-align: middle;\n  width: 17px; }\n\n.Select-clear-zone:hover {\n  color: #D0021B; }\n\n.Select-clear {\n  display: inline-block;\n  font-size: 18px;\n  line-height: 1; }\n\n.Select--multi .Select-clear-zone {\n  width: 17px; }\n\n.Select-arrow-zone {\n  cursor: pointer;\n  display: table-cell;\n  position: relative;\n  text-align: center;\n  vertical-align: middle;\n  width: 25px;\n  padding-right: 5px; }\n\n.Select-arrow {\n  border-color: #999 transparent transparent;\n  border-style: solid;\n  border-width: 5px 5px 2.5px;\n  display: inline-block;\n  height: 0;\n  width: 0;\n  position: relative; }\n\n.is-open .Select-arrow,\n.Select-arrow-zone:hover > .Select-arrow {\n  border-top-color: #666; }\n\n.Select--multi .Select-multi-value-wrapper {\n  display: inline-block; }\n\n.Select .Select-aria-only {\n  display: inline-block;\n  height: 1px;\n  width: 1px;\n  margin: -1px;\n  clip: rect(0, 0, 0, 0);\n  overflow: hidden;\n  float: left; }\n\n@-webkit-keyframes Select-animation-fadeIn {\n  from {\n    opacity: 0; }\n  to {\n    opacity: 1; } }\n\n@keyframes Select-animation-fadeIn {\n  from {\n    opacity: 0; }\n  to {\n    opacity: 1; } }\n\n.Select-menu-outer {\n  border-bottom-right-radius: 4px;\n  border-bottom-left-radius: 4px;\n  background-color: #fff;\n  border: 1px solid #ccc;\n  border-top-color: #e6e6e6;\n  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.06);\n  box-sizing: border-box;\n  margin-top: -1px;\n  max-height: 200px;\n  position: absolute;\n  top: 100%;\n  width: 100%;\n  z-index: 1;\n  -webkit-overflow-scrolling: touch; }\n\n.Select-menu {\n  max-height: 198px;\n  overflow-y: auto; }\n\n.Select-option {\n  box-sizing: border-box;\n  background-color: #fff;\n  color: #666666;\n  cursor: pointer;\n  display: block;\n  padding: 8px 10px; }\n\n.Select-option:last-child {\n  border-bottom-right-radius: 4px;\n  border-bottom-left-radius: 4px; }\n\n.Select-option.is-selected {\n  background-color: #f5faff;\n  /* Fallback color for IE 8 */\n  background-color: rgba(0, 126, 255, 0.04);\n  color: #333; }\n\n.Select-option.is-focused {\n  background-color: #ebf5ff;\n  /* Fallback color for IE 8 */\n  background-color: rgba(0, 126, 255, 0.08);\n  color: #333; }\n\n.Select-option.is-disabled {\n  color: #cccccc;\n  cursor: default; }\n\n.Select-noresults {\n  box-sizing: border-box;\n  color: #999999;\n  cursor: default;\n  display: block;\n  padding: 8px 10px; }\n\n.Select--multi .Select-input {\n  vertical-align: middle;\n  margin-left: 10px;\n  padding: 0; }\n\n.Select--multi.has-value .Select-input {\n  margin-left: 5px; }\n\n.Select--multi .Select-value {\n  background-color: #ebf5ff;\n  /* Fallback color for IE 8 */\n  background-color: rgba(0, 126, 255, 0.08);\n  border-radius: 2px;\n  border: 1px solid #c2e0ff;\n  /* Fallback color for IE 8 */\n  border: 1px solid rgba(0, 126, 255, 0.24);\n  color: #007eff;\n  display: inline-block;\n  font-size: 0.9em;\n  line-height: 1.4;\n  margin-left: 5px;\n  margin-top: 5px;\n  vertical-align: top; }\n\n.Select--multi .Select-value-icon,\n.Select--multi .Select-value-label {\n  display: inline-block;\n  vertical-align: middle; }\n\n.Select--multi .Select-value-label {\n  border-bottom-right-radius: 2px;\n  border-top-right-radius: 2px;\n  cursor: default;\n  padding: 2px 5px; }\n\n.Select--multi a.Select-value-label {\n  color: #007eff;\n  cursor: pointer;\n  text-decoration: none; }\n\n.Select--multi a.Select-value-label:hover {\n  text-decoration: underline; }\n\n.Select--multi .Select-value-icon {\n  cursor: pointer;\n  border-bottom-left-radius: 2px;\n  border-top-left-radius: 2px;\n  border-right: 1px solid #c2e0ff;\n  /* Fallback color for IE 8 */\n  border-right: 1px solid rgba(0, 126, 255, 0.24);\n  padding: 1px 5px 3px; }\n\n.Select--multi .Select-value-icon:hover,\n.Select--multi .Select-value-icon:focus {\n  background-color: #d8eafd;\n  /* Fallback color for IE 8 */\n  background-color: rgba(0, 113, 230, 0.08);\n  color: #0071e6; }\n\n.Select--multi .Select-value-icon:active {\n  background-color: #c2e0ff;\n  /* Fallback color for IE 8 */\n  background-color: rgba(0, 126, 255, 0.24); }\n\n.Select--multi.is-disabled .Select-value {\n  background-color: #fcfcfc;\n  border: 1px solid #e3e3e3;\n  color: #333; }\n\n.Select--multi.is-disabled .Select-value-icon {\n  cursor: not-allowed;\n  border-right: 1px solid #e3e3e3; }\n\n.Select--multi.is-disabled .Select-value-icon:hover,\n.Select--multi.is-disabled .Select-value-icon:focus,\n.Select--multi.is-disabled .Select-value-icon:active {\n  background-color: #fcfcfc; }\n\n@keyframes Select-animation-spin {\n  to {\n    transform: rotate(1turn); } }\n\n@-webkit-keyframes Select-animation-spin {\n  to {\n    -webkit-transform: rotate(1turn); } }\n",""])},function(e,exports,t){var n=t(542);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,'@-webkit-keyframes closeWindow {\n  0% {\n    opacity: 1; }\n  100% {\n    opacity: 0; } }\n\n@keyframes closeWindow {\n  0% {\n    opacity: 1; }\n  100% {\n    opacity: 0; } }\n\n.ril__outer {\n  background-color: rgba(0, 0, 0, 0.85);\n  outline: none;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1000;\n  width: 100%;\n  height: 100%;\n  -ms-content-zooming: none;\n  -ms-user-select: none;\n  -ms-touch-select: none;\n  -ms-touch-action: none;\n  touch-action: none; }\n\n.ril__outerClosing {\n  opacity: 0; }\n\n.ril__inner {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0; }\n\n.ril__image,\n.ril__imagePrev,\n.ril__imageNext {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  max-width: none;\n  -ms-content-zooming: none;\n  -ms-user-select: none;\n  -ms-touch-select: none;\n  -ms-touch-action: none;\n  touch-action: none; }\n\n.ril__imageDiscourager {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: contain; }\n\n.ril__navButtons {\n  border: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 20px;\n  height: 34px;\n  padding: 40px 30px;\n  margin: auto;\n  cursor: pointer;\n  opacity: 0.7; }\n\n.ril__navButtons:hover {\n  opacity: 1; }\n\n.ril__navButtons:active {\n  opacity: 0.7; }\n\n.ril__navButtonPrev {\n  left: 0;\n  background: rgba(0, 0, 0, 0.2) url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjM0Ij48cGF0aCBkPSJtIDE5LDMgLTIsLTIgLTE2LDE2IDE2LDE2IDEsLTEgLTE1LC0xNSAxNSwtMTUgeiIgZmlsbD0iI0ZGRiIvPjwvc3ZnPg==") no-repeat center; }\n\n.ril__navButtonNext {\n  right: 0;\n  background: rgba(0, 0, 0, 0.2) url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjM0Ij48cGF0aCBkPSJtIDEsMyAyLC0yIDE2LDE2IC0xNiwxNiAtMSwtMSAxNSwtMTUgLTE1LC0xNSB6IiBmaWxsPSIjRkZGIi8+PC9zdmc+") no-repeat center; }\n\n.ril__downloadBlocker {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image: url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");\n  background-size: cover; }\n\n.ril__caption,\n.ril__toolbar {\n  background-color: rgba(0, 0, 0, 0.5);\n  position: absolute;\n  left: 0;\n  right: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n  -ms-flex-pack: justify;\n  justify-content: space-between; }\n\n.ril__caption {\n  bottom: 0;\n  max-height: 150px;\n  overflow: auto; }\n\n.ril__captionContent {\n  padding: 10px 20px;\n  color: #fff; }\n\n.ril__toolbar {\n  top: 0;\n  height: 50px; }\n\n.ril__toolbarSide {\n  height: 50px;\n  margin: 0; }\n\n.ril__toolbarLeftSide {\n  padding-left: 20px;\n  padding-right: 0;\n  -webkit-box-flex: 0;\n  -ms-flex: 0 1 auto;\n  flex: 0 1 auto;\n  overflow: hidden;\n  text-overflow: ellipsis; }\n\n.ril__toolbarRightSide {\n  padding-left: 0;\n  padding-right: 20px;\n  -webkit-box-flex: 0;\n  -ms-flex: 0 0 auto;\n  flex: 0 0 auto; }\n\n.ril__toolbarItem {\n  display: inline-block;\n  line-height: 50px;\n  padding: 0;\n  color: #fff;\n  font-size: 120%;\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap; }\n\n.ril__toolbarItemChild {\n  vertical-align: middle; }\n\n.ril__builtinButton {\n  width: 40px;\n  height: 35px;\n  cursor: pointer;\n  border: none;\n  opacity: 0.7; }\n\n.ril__builtinButton:hover {\n  opacity: 1; }\n\n.ril__builtinButton:active {\n  outline: none; }\n\n.ril__builtinButtonDisabled {\n  cursor: default;\n  opacity: 0.5; }\n\n.ril__builtinButtonDisabled:hover {\n  opacity: 0.5; }\n\n.ril__closeButton {\n  background: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj48cGF0aCBkPSJtIDEsMyAxLjI1LC0xLjI1IDcuNSw3LjUgNy41LC03LjUgMS4yNSwxLjI1IC03LjUsNy41IDcuNSw3LjUgLTEuMjUsMS4yNSAtNy41LC03LjUgLTcuNSw3LjUgLTEuMjUsLTEuMjUgNy41LC03LjUgLTcuNSwtNy41IHoiIGZpbGw9IiNGRkYiLz48L3N2Zz4=") no-repeat center; }\n\n.ril__zoomInButton {\n  background: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PGcgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTEgMTlsNi02Ii8+PHBhdGggZD0iTTkgOGg2Ii8+PHBhdGggZD0iTTEyIDV2NiIvPjwvZz48Y2lyY2xlIGN4PSIxMiIgY3k9IjgiIHI9IjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9zdmc+") no-repeat center; }\n\n.ril__zoomOutButton {\n  background: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PGcgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTEgMTlsNi02Ii8+PHBhdGggZD0iTTkgOGg2Ii8+PC9nPjxjaXJjbGUgY3g9IjEyIiBjeT0iOCIgcj0iNyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjIiLz48L3N2Zz4=") no-repeat center; }\n\n.ril__outerAnimating {\n  -webkit-animation-name: closeWindow;\n  animation-name: closeWindow; }\n\n@-webkit-keyframes pointFade {\n  0%,\n  19.999%,\n  100% {\n    opacity: 0; }\n  20% {\n    opacity: 1; } }\n\n@keyframes pointFade {\n  0%,\n  19.999%,\n  100% {\n    opacity: 0; }\n  20% {\n    opacity: 1; } }\n\n.ril__loadingCircle {\n  width: 60px;\n  height: 60px;\n  position: relative; }\n\n.ril__loadingCirclePoint {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0; }\n\n.ril__loadingCirclePoint::before {\n  content: \'\';\n  display: block;\n  margin: 0 auto;\n  width: 11%;\n  height: 30%;\n  background-color: #fff;\n  border-radius: 30%;\n  -webkit-animation: pointFade 800ms infinite ease-in-out both;\n  animation: pointFade 800ms infinite ease-in-out both; }\n\n.ril__loadingCirclePoint:nth-of-type(1) {\n  -webkit-transform: rotate(0deg);\n  transform: rotate(0deg); }\n\n.ril__loadingCirclePoint:nth-of-type(7) {\n  -webkit-transform: rotate(180deg);\n  transform: rotate(180deg); }\n\n.ril__loadingCirclePoint:nth-of-type(1)::before,\n.ril__loadingCirclePoint:nth-of-type(7)::before {\n  -webkit-animation-delay: -800ms;\n  animation-delay: -800ms; }\n\n.ril__loadingCirclePoint:nth-of-type(2) {\n  -webkit-transform: rotate(30deg);\n  transform: rotate(30deg); }\n\n.ril__loadingCirclePoint:nth-of-type(8) {\n  -webkit-transform: rotate(210deg);\n  transform: rotate(210deg); }\n\n.ril__loadingCirclePoint:nth-of-type(2)::before,\n.ril__loadingCirclePoint:nth-of-type(8)::before {\n  -webkit-animation-delay: -666ms;\n  animation-delay: -666ms; }\n\n.ril__loadingCirclePoint:nth-of-type(3) {\n  -webkit-transform: rotate(60deg);\n  transform: rotate(60deg); }\n\n.ril__loadingCirclePoint:nth-of-type(9) {\n  -webkit-transform: rotate(240deg);\n  transform: rotate(240deg); }\n\n.ril__loadingCirclePoint:nth-of-type(3)::before,\n.ril__loadingCirclePoint:nth-of-type(9)::before {\n  -webkit-animation-delay: -533ms;\n  animation-delay: -533ms; }\n\n.ril__loadingCirclePoint:nth-of-type(4) {\n  -webkit-transform: rotate(90deg);\n  transform: rotate(90deg); }\n\n.ril__loadingCirclePoint:nth-of-type(10) {\n  -webkit-transform: rotate(270deg);\n  transform: rotate(270deg); }\n\n.ril__loadingCirclePoint:nth-of-type(4)::before,\n.ril__loadingCirclePoint:nth-of-type(10)::before {\n  -webkit-animation-delay: -400ms;\n  animation-delay: -400ms; }\n\n.ril__loadingCirclePoint:nth-of-type(5) {\n  -webkit-transform: rotate(120deg);\n  transform: rotate(120deg); }\n\n.ril__loadingCirclePoint:nth-of-type(11) {\n  -webkit-transform: rotate(300deg);\n  transform: rotate(300deg); }\n\n.ril__loadingCirclePoint:nth-of-type(5)::before,\n.ril__loadingCirclePoint:nth-of-type(11)::before {\n  -webkit-animation-delay: -266ms;\n  animation-delay: -266ms; }\n\n.ril__loadingCirclePoint:nth-of-type(6) {\n  -webkit-transform: rotate(150deg);\n  transform: rotate(150deg); }\n\n.ril__loadingCirclePoint:nth-of-type(12) {\n  -webkit-transform: rotate(330deg);\n  transform: rotate(330deg); }\n\n.ril__loadingCirclePoint:nth-of-type(6)::before,\n.ril__loadingCirclePoint:nth-of-type(12)::before {\n  -webkit-animation-delay: -133ms;\n  animation-delay: -133ms; }\n\n.ril__loadingCirclePoint:nth-of-type(7) {\n  -webkit-transform: rotate(180deg);\n  transform: rotate(180deg); }\n\n.ril__loadingCirclePoint:nth-of-type(13) {\n  -webkit-transform: rotate(360deg);\n  transform: rotate(360deg); }\n\n.ril__loadingCirclePoint:nth-of-type(7)::before,\n.ril__loadingCirclePoint:nth-of-type(13)::before {\n  -webkit-animation-delay: 0ms;\n  animation-delay: 0ms; }\n\n.ril__loadingContainer {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0; }\n\n.ril__imagePrev .ril__loadingContainer,\n.ril__imageNext .ril__loadingContainer {\n  display: none; }\n\n.ril__errorContainer {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  color: #fff; }\n\n.ril__imagePrev .ril__errorContainer,\n.ril__imageNext .ril__errorContainer {\n  display: none; }\n\n.ril__loadingContainer__icon {\n  color: #fff;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%); }\n',""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return{isLogin:e.getIn(["user","isLogin"])}}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=t(1),s=t(4),l=s.connect,u=t(50),d=u.Link,f=t(5),p=f.showLoading,m=t(17),h=m.login,g=m.loginWithToken,v=t(7),b=t(29);t(544);var y=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={username:"",password:""},o.onQQConnectFinished=function(e){var t=e.data,n=t.type,r=t.uuid,i=t.token;if("onOAuthFinished"===n){if(!r||!i)return;b.set("uuid",r),b.set("token",i),o.props.dispatch(g(r,i,"qq"))}},o}return o(t,e),a(t,[{key:"componentDidMount",value:function(){this.props.isLogin?this.props.history.push("main"):window.addEventListener("message",this.onQQConnectFinished)}},{key:"componentWillUpdate",value:function(e,t){e.isLogin&&this.props.history.push("main")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.onQQConnectFinished)}},{key:"_handleLogin",value:function(){this.props.dispatch(p());var e=this.state.username,t=this.state.password;this.props.dispatch(h(e,t))}},{key:"_handleQQLogin",value:function(){window.open(v.file.url+"/oauth/qq/login","TencentLogin","width=450,height=600")}},{key:"render",value:function(){var e=this,t=this.state.username&&this.state.password&&this.state.password.length>=5;return c.createElement("div",{className:"login-screen"},c.createElement("h2",null,"欢迎来到TRPG的世界"),c.createElement("input",{type:"text",placeholder:"用户名",value:this.state.username,onChange:function(t){e.setState({username:t.target.value})}}),c.createElement("input",{type:"password",placeholder:"密码",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})},onKeyUp:function(t){return 13===t.keyCode&&e._handleLogin()}}),c.createElement("div",{className:"loginArea"},c.createElement("button",{className:t?"active":"",onClick:function(){return e._handleLogin()},disabled:!t},"登录"),c.createElement("button",{onClick:function(){return e._handleQQLogin()}},c.createElement("i",{className:"iconfont"},""))),c.createElement(d,{to:"register"},"没有账号？现在注册"))}}]),t}(c.Component);e.exports=l(i)(y)},function(e,exports,t){var n=t(545);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".login-screen {\n  width: 372px;\n  height: 343px;\n  background-color: rgba(230, 242, 248, 0.5);\n  border-radius: 5px;\n  box-shadow: rgba(0, 0, 0, 0.15) 0 0 8px;\n  padding: 25px 30px 0; }\n  .login-screen h2 {\n    text-align: center;\n    margin-top: 30px;\n    margin-bottom: 40px;\n    color: #333333; }\n  .login-screen input {\n    color: #222;\n    font-size: 14px;\n    width: 312px;\n    height: 40px;\n    border: 1px solid #999999;\n    border-radius: 3px;\n    background-color: rgba(240, 248, 255, 0.5);\n    margin: 0;\n    padding: 10px;\n    outline: 0;\n    margin: 0 0 5px; }\n  .login-screen .loginArea {\n    display: flex; }\n    .login-screen .loginArea button {\n      height: 40px;\n      margin: 8px 0 5px;\n      font-size: 16px;\n      border: 0;\n      cursor: pointer;\n      color: white;\n      border-radius: 3px;\n      background-color: #999;\n      padding: 6px 12px;\n      outline: 0;\n      user-select: none; }\n      .login-screen .loginArea button:hover, .login-screen .loginArea button:active, .login-screen .loginArea button.active {\n        background-color: #705949; }\n      .login-screen .loginArea button:disabled {\n        cursor: not-allowed;\n        background-color: #999999; }\n      .login-screen .loginArea button:nth-of-type(1) {\n        flex: 1; }\n      .login-screen .loginArea button:nth-of-type(2) {\n        margin-left: 6px; }\n  .login-screen a, .login-screen a:link, .login-screen a:visited {\n    float: right;\n    font-size: 14px;\n    background-color: transparent;\n    border: 0;\n    cursor: pointer;\n    color: #705949;\n    padding: 0 2px;\n    margin: 4px 6px;\n    outline: 0;\n    position: relative;\n    user-select: none; }\n    .login-screen a:disabled, .login-screen a:link:disabled, .login-screen a:visited:disabled {\n      cursor: not-allowed;\n      color: #999999; }\n    .login-screen a:enabled:after, .login-screen a:link:enabled:after, .login-screen a:visited:enabled:after {\n      content: ' ';\n      position: absolute;\n      border-top: 1px solid #705949;\n      bottom: 0;\n      transition: all 0.2s ease-in-out;\n      left: 0;\n      width: 0; }\n    .login-screen a:enabled:hover:after, .login-screen a:enabled:active:after, .login-screen a:enabled.active:after, .login-screen a:link:enabled:hover:after, .login-screen a:link:enabled:active:after, .login-screen a:link:enabled.active:after, .login-screen a:visited:enabled:hover:after, .login-screen a:visited:enabled:active:after, .login-screen a:visited:enabled.active:after {\n      border-top: 1px solid #705949;\n      width: 100%; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(50),u=l.Link,d=t(5),f=d.showLoading,p=d.showAlert,m=t(17),h=m.register;t(547);var g=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={username:"",password:"",passwordRepeat:""},o}return o(t,e),i(t,[{key:"componentWillUpdate",value:function(e,t){e.isLogin&&this.props.history.push("main")}},{key:"_handleRegister",value:function(){var e=this;this.props.dispatch(f());var t=this.state.username,n=this.state.password;this.props.dispatch(h(t,n,function(){e.props.dispatch(p({content:"注册成功"}))}))}},{key:"_getErrorMsg",value:function(){var e=this.state,t=e.username,n=e.password,r=e.passwordRepeat;return t?/^[A-Za-z\d]{5,16}$/.test(t)?n?/^[A-Za-z\d]{5,16}$/.test(n)?n!==r?"重复密码不一致":"":"密码必须为5到16位英文或数字":"密码不能为空":"用户名必须为5到16位英文或数字":"用户名不能为空"}},{key:"render",value:function(){var e=this,t=this._getErrorMsg();return a.createElement("div",{className:"register-screen"},a.createElement("h2",null,"注册账号"),a.createElement("input",{type:"text",placeholder:"用户名",value:this.state.username,onChange:function(t){e.setState({username:t.target.value})}}),a.createElement("input",{type:"password",placeholder:"密码",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})}}),a.createElement("input",{type:"password",placeholder:"重复密码",value:this.state.passwordRepeat,onChange:function(t){e.setState({passwordRepeat:t.target.value})}}),a.createElement("p",null,t),a.createElement("button",{className:"active",onClick:function(){e._handleRegister()},disabled:""!==t},"成为祭品"),a.createElement(u,{to:"login"},"已有账号？现在登录"))}}]),t}(a.Component);e.exports=s()(g)},function(e,exports,t){var n=t(548);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".register-screen {\n  width: 372px;\n  background-color: rgba(230, 242, 248, 0.5);\n  border-radius: 5px;\n  box-shadow: rgba(0, 0, 0, 0.15) 0 0 8px;\n  padding: 25px 30px 50px; }\n  .register-screen h2 {\n    text-align: center;\n    margin-top: 20px;\n    margin-bottom: 40px;\n    color: #333333; }\n  .register-screen input {\n    color: #222;\n    font-size: 14px;\n    width: 312px;\n    height: 40px;\n    border: 1px solid #BACED9;\n    border-radius: 3px;\n    background-color: rgba(240, 248, 255, 0.5);\n    margin: 0;\n    padding: 10px;\n    outline: 0;\n    margin: 0 0 5px; }\n  .register-screen p {\n    margin: 0;\n    color: #EC2121; }\n  .register-screen button {\n    font-size: 16px;\n    border: 0;\n    cursor: pointer;\n    color: white;\n    border-radius: 3px;\n    background-color: #999;\n    padding: 6px 12px;\n    outline: 0;\n    user-select: none;\n    width: 312px;\n    height: 40px;\n    margin-top: 8px; }\n    .register-screen button:hover, .register-screen button:active, .register-screen button.active {\n      background-color: #705949; }\n    .register-screen button:disabled {\n      cursor: not-allowed;\n      background-color: #999999; }\n    .register-screen button:disabled {\n      cursor: default !important;\n      background-color: #c7c7cc; }\n  .register-screen a, .register-screen a:link, .register-screen a:visited {\n    float: right;\n    font-size: 14px;\n    background-color: transparent;\n    border: 0;\n    cursor: pointer;\n    color: #705949;\n    padding: 0 2px;\n    margin: 4px 6px;\n    outline: 0;\n    position: relative;\n    user-select: none; }\n    .register-screen a:disabled, .register-screen a:link:disabled, .register-screen a:visited:disabled {\n      cursor: not-allowed;\n      color: #999999; }\n    .register-screen a:enabled:after, .register-screen a:link:enabled:after, .register-screen a:visited:enabled:after {\n      content: ' ';\n      position: absolute;\n      border-top: 1px solid #705949;\n      bottom: 0;\n      transition: all 0.2s ease-in-out;\n      left: 0;\n      width: 0; }\n    .register-screen a:enabled:hover:after, .register-screen a:enabled:active:after, .register-screen a:enabled.active:after, .register-screen a:link:enabled:hover:after, .register-screen a:link:enabled:active:after, .register-screen a:link:enabled.active:after, .register-screen a:visited:enabled:hover:after, .register-screen a:visited:enabled:active:after, .register-screen a:visited:enabled.active:after {\n      border-top: 1px solid #705949;\n      width: 100%; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(7),u=t(5),d=u.switchMenuPannel,f=t(550),p=t(274),m=t(606),h=t(706),g=t(285),v=t(287),b="electron"===l.platform?t(709):null;t(713),"electron"===l.platform&&t(715);var y=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={titleMenuIndex:0},o.titleMenu=[{name:"平台",menuIndex:0,component:a.createElement(p,null)},{name:"广场",menuIndex:-1,component:a.createElement(v,{src:l.url.goddessfantasy,allowExopen:!0})},{name:"应用",menuIndex:-1,component:a.createElement(g,null)}],o}return o(t,e),i(t,[{key:"componentDidMount",value:function(){this.props.isLogin||this.props.history.push("login")}},{key:"componentWillUpdate",value:function(e,t){e.isLogin||this.props.history.push("login")}},{key:"_handleSelectTitleMenu",value:function(e){var t=this.titleMenu[e];t&&this.props.switchMenuPannel(void 0!==t.menuIndex?t.menuIndex:-1,t.component),this.setState({titleMenuIndex:e})}},{key:"render",value:function(){var e=this;return a.createElement("div",{id:"main"},a.createElement(f,null,a.createElement(h,null),a.createElement("div",{className:"head"},a.createElement("span",{className:"title"},"TRPG - 桌上角色扮演游戏客户端"),a.createElement("div",{className:"title-blank"}),a.createElement("div",{className:"menu"},this.titleMenu.map(function(t,n){var r=!1;return r=-1!==e.props.menuIndex?0===n:n===e.state.titleMenuIndex,a.createElement("button",{key:"title-menu#"+n,className:r?"active":"",onClick:function(){return e._handleSelectTitleMenu(n)}},t.name)})),b?a.createElement(b,null):null),a.createElement(m,{className:"body"})))}}]),t}(a.Component);e.exports=s(function(e){return{isLogin:e.getIn(["user","isLogin"]),menuIndex:e.getIn(["ui","menuIndex"])}},function(e){return{switchMenuPannel:function(t,n){e(d(t,n))}}})(y)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(551),s=c.sendErrorReport;t(552);var l=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={hasError:!1},o}return o(t,e),i(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0}),s({message:e,stack:t.componentStack})}},{key:"render",value:function(){return this.state.hasError?a.createElement("div",{className:"error-boundary"},a.createElement("h1",null,"啊哦Σ(ﾟдﾟ;), 出现了一些错误."),a.createElement("h2",null,"错误已经汇报给TRPG后台, 请",a.createElement("span",{onClick:function(){return location.reload()}},"刷新"),"一下页面重试哦.")):this.props.children}}]),t}(a.Component);e.exports=l},function(e,exports,t){"use strict";function n(e){r.post(o.file.getAbsolutePath("/report/error"),e).then(function(e){}).catch(function(e){})}var r=t(58),o=t(7);exports.sendErrorReport=n,exports.web=function(){console.error=function(e){return function(t){e.call(console,t);var r="";if(t.stack)r=t.stack;else{var o={};Error.captureStackTrace(o),r=o.stack}n({message:t.toString(),stack:r})}}(console.error)}},function(e,exports,t){var n=t(553);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".error-boundary {\n  color: white;\n  background-color: #705949;\n  padding: 50px;\n  height: 360px;\n  padding-top: 100px; }\n  .error-boundary span {\n    cursor: pointer;\n    color: #3498db; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(7),u=t(5),d=u.showModal,f=u.hideModal,p=u.showProfileCard,m=t(16),h=m.sendMsg,g=t(74),v=g.sendDiceRequest,b=g.sendDiceInvite,y=g.sendQuickDice,x=t(275),w=t(276),E=t(559),_=t(277),S=t(278);t(597);var k=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"_handleSendMsg",value:function(e,t){this.props.dispatch(h(this.props.converseUserUUID,{message:e,is_public:!1,is_group:!1,type:t}))}},{key:"_handleSendDiceReq",value:function(){var e=this;this.props.dispatch(d(a.createElement(x,{onSendDiceRequest:function(t,n){e.props.dispatch(v(e.props.converseUserUUID,!1,n,t)),e.props.dispatch(f())}})))}},{key:"_handleSendDiceInv",value:function(){var e=this,t=this.props.converseUUID,n=this.props.usercache,r=n.getIn([t,"nickname"])||n.getIn([t,"username"]);this.props.dispatch(d(a.createElement(w,{inviteList:[r],onSendDiceInvite:function(n,o){e.props.dispatch(b(t,!1,o,n,[t],[r])),e.props.dispatch(f())}})))}},{key:"_handleQuickDice",value:function(){var e=this,t=this.props.converseUUID;this.props.dispatch(d(a.createElement(E,{onSendQuickDice:function(n,r){e.props.dispatch(y(t,!1,r,n)),e.props.dispatch(f())}})))}},{key:"getHeaderActions",value:function(){var e=this,t=[];return this.props.usercache.get(this.props.converseUserUUID)&&t.push({name:"个人信息",icon:"&#xe611;",click:function(){e.props.dispatch(p(e.props.converseUserUUID))}}),t.map(function(e,t){return a.createElement("button",{key:"group-action-"+t,"data-tip":e.name,onClick:function(t){t.stopPropagation(),e.click()}},a.createElement("i",{className:"iconfont",dangerouslySetInnerHTML:{__html:e.icon}}))})}},{key:"render",value:function(){var e=this,t=this.props.converseUserUUID,n=this.props.usercache,r=void 0,o=void 0,i=void 0;return"trpgsystem"===t?(r="系统消息",i="TRPG Engine 系统消息",o=l.defaultImg.trpgsystem):(r=n.getIn([t,"nickname"])||n.getIn([t,"username"]),i=n.getIn([t,"desc"]),o=n.getIn([t,"avatar"])||l.defaultImg.user),a.createElement("div",{className:"conv-detail"},a.createElement("div",{className:"conv-header"},a.createElement("div",{className:"avatar"},a.createElement("img",{src:o})),a.createElement("div",{className:"title"},a.createElement("div",{className:"main-title"},r),a.createElement("div",{className:"sub-title"},i)),a.createElement("div",{className:"actions"},this.getHeaderActions())),a.createElement(_,{className:"conv-container",converseUUID:this.props.converseUUID,converseUserUUID:t,isGroup:!1}),a.createElement(S,{converseUUID:this.props.converseUUID,isGroup:!1,onSendMsg:function(t,n){return e._handleSendMsg(t,n)},onSendDiceReq:function(){return e._handleSendDiceReq()},onSendDiceInv:function(){return e._handleSendDiceInv()},onQuickDice:function(){return e._handleQuickDice()}}))}}]),t}(a.Component);e.exports=s(function(e){var t=e.getIn(["chat","selectedConversesUUID"]);return{userUUID:e.getIn(["user","info","uuid"]),selfInfo:e.getIn(["user","info"]),usercache:e.getIn(["cache","user"]),converseUUID:t,converseUserUUID:e.getIn(["chat","selectedConversesUserUUID"])}})(k)},function(e,exports,t){var n=t(556);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,'.dice-request {\n  display: flex;\n  flex-direction: column;\n  padding: 10%;\n  overflow: hidden; }\n  .dice-request > span {\n    margin-bottom: 10px; }\n  .dice-request .dice-reason {\n    background-color: transparent;\n    font-size: 16px;\n    border: 1px solid #DDDCDD;\n    outline: 0;\n    padding: 4px 6px;\n    border-radius: 3px;\n    resize: none;\n    margin-bottom: 10px; }\n    .dice-request .dice-reason:focus {\n      border-color: #705949; }\n    .dice-request .dice-reason:disabled {\n      cursor: not-allowed;\n      background-color: rgba(0, 0, 0, 0.1);\n      color: #999999; }\n    .dice-request .dice-reason[type="checkbox"] {\n      -webkit-appearance: none;\n      background-color: white;\n      background-image: url("/src/assets/img/checkbox.png");\n      height: 22px;\n      vertical-align: middle;\n      width: 22px;\n      outline: none;\n      border: 0;\n      transition: initial;\n      padding: 0; }\n      .dice-request .dice-reason[type="checkbox"]:focus, .dice-request .dice-reason[type="checkbox"]:hover {\n        background-position: -24px 0; }\n      .dice-request .dice-reason[type="checkbox"]:checked {\n        background-position: -48px 0; }\n      .dice-request .dice-reason[type="checkbox"][disabled] {\n        background-position: -72px 0; }\n      .dice-request .dice-reason[type="checkbox"][disabled]:checked {\n        background-position: -96px 0; }\n  .dice-request .Select {\n    margin-bottom: 20px; }\n  .dice-request .dice {\n    display: flex;\n    align-items: center;\n    margin-bottom: 20px; }\n    .dice-request .dice input {\n      background-color: transparent;\n      font-size: 16px;\n      border: 1px solid #DDDCDD;\n      outline: 0;\n      padding: 4px 6px;\n      border-radius: 3px;\n      resize: none;\n      flex: 1; }\n      .dice-request .dice input:focus {\n        border-color: #705949; }\n      .dice-request .dice input:disabled {\n        cursor: not-allowed;\n        background-color: rgba(0, 0, 0, 0.1);\n        color: #999999; }\n      .dice-request .dice input[type="checkbox"] {\n        -webkit-appearance: none;\n        background-color: white;\n        background-image: url("/src/assets/img/checkbox.png");\n        height: 22px;\n        vertical-align: middle;\n        width: 22px;\n        outline: none;\n        border: 0;\n        transition: initial;\n        padding: 0; }\n        .dice-request .dice input[type="checkbox"]:focus, .dice-request .dice input[type="checkbox"]:hover {\n          background-position: -24px 0; }\n        .dice-request .dice input[type="checkbox"]:checked {\n          background-position: -48px 0; }\n        .dice-request .dice input[type="checkbox"][disabled] {\n          background-position: -72px 0; }\n        .dice-request .dice input[type="checkbox"][disabled]:checked {\n          background-position: -96px 0; }\n    .dice-request .dice.basicDice input {\n      width: 120px; }\n    .dice-request .dice.basicDice span {\n      margin: 0 6px; }\n    .dice-request .dice.complexDice input {\n      width: 240px; }\n    .dice-request .dice.favoriteDice .dice-favorite-select {\n      width: 200px;\n      margin: 0; }\n    .dice-request .dice.favoriteDice input {\n      width: 80px;\n      margin-left: 10px;\n      height: 36px; }\n  .dice-request button {\n    font-size: 16px;\n    border: 0;\n    cursor: pointer;\n    color: white;\n    border-radius: 3px;\n    background-color: #999;\n    padding: 6px 12px;\n    outline: 0;\n    user-select: none; }\n    .dice-request button:hover, .dice-request button:active, .dice-request button.active {\n      background-color: #705949; }\n    .dice-request button:disabled {\n      cursor: not-allowed;\n      background-color: #999999; }\n',""])},function(e,exports,t){var n=t(558);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,'.dice-invite {\n  display: flex;\n  flex-direction: column;\n  padding: 10%;\n  overflow: hidden; }\n  .dice-invite > span {\n    margin-bottom: 10px; }\n  .dice-invite .dice-reason {\n    background-color: transparent;\n    font-size: 16px;\n    border: 1px solid #DDDCDD;\n    outline: 0;\n    padding: 4px 6px;\n    border-radius: 3px;\n    resize: none;\n    margin-bottom: 10px; }\n    .dice-invite .dice-reason:focus {\n      border-color: #705949; }\n    .dice-invite .dice-reason:disabled {\n      cursor: not-allowed;\n      background-color: rgba(0, 0, 0, 0.1);\n      color: #999999; }\n    .dice-invite .dice-reason[type="checkbox"] {\n      -webkit-appearance: none;\n      background-color: white;\n      background-image: url("/src/assets/img/checkbox.png");\n      height: 22px;\n      vertical-align: middle;\n      width: 22px;\n      outline: none;\n      border: 0;\n      transition: initial;\n      padding: 0; }\n      .dice-invite .dice-reason[type="checkbox"]:focus, .dice-invite .dice-reason[type="checkbox"]:hover {\n        background-position: -24px 0; }\n      .dice-invite .dice-reason[type="checkbox"]:checked {\n        background-position: -48px 0; }\n      .dice-invite .dice-reason[type="checkbox"][disabled] {\n        background-position: -72px 0; }\n      .dice-invite .dice-reason[type="checkbox"][disabled]:checked {\n        background-position: -96px 0; }\n  .dice-invite .Select {\n    margin-bottom: 20px; }\n  .dice-invite .dice {\n    display: flex;\n    align-items: center;\n    margin-bottom: 20px; }\n    .dice-invite .dice input {\n      background-color: transparent;\n      font-size: 16px;\n      border: 1px solid #DDDCDD;\n      outline: 0;\n      padding: 4px 6px;\n      border-radius: 3px;\n      resize: none;\n      flex: 1; }\n      .dice-invite .dice input:focus {\n        border-color: #705949; }\n      .dice-invite .dice input:disabled {\n        cursor: not-allowed;\n        background-color: rgba(0, 0, 0, 0.1);\n        color: #999999; }\n      .dice-invite .dice input[type="checkbox"] {\n        -webkit-appearance: none;\n        background-color: white;\n        background-image: url("/src/assets/img/checkbox.png");\n        height: 22px;\n        vertical-align: middle;\n        width: 22px;\n        outline: none;\n        border: 0;\n        transition: initial;\n        padding: 0; }\n        .dice-invite .dice input[type="checkbox"]:focus, .dice-invite .dice input[type="checkbox"]:hover {\n          background-position: -24px 0; }\n        .dice-invite .dice input[type="checkbox"]:checked {\n          background-position: -48px 0; }\n        .dice-invite .dice input[type="checkbox"][disabled] {\n          background-position: -72px 0; }\n        .dice-invite .dice input[type="checkbox"][disabled]:checked {\n          background-position: -96px 0; }\n    .dice-invite .dice.basicDice input {\n      width: 120px; }\n    .dice-invite .dice.basicDice span {\n      margin: 0 6px; }\n    .dice-invite .dice.complexDice input {\n      width: 240px; }\n  .dice-invite button {\n    font-size: 16px;\n    border: 0;\n    cursor: pointer;\n    color: white;\n    border-radius: 3px;\n    background-color: #999;\n    padding: 6px 12px;\n    outline: 0;\n    user-select: none; }\n    .dice-invite button:hover, .dice-invite button:active, .dice-invite button.active {\n      background-color: #705949; }\n    .dice-invite button:disabled {\n      cursor: not-allowed;\n      background-color: #999999; }\n',""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(15),u=t(5),d=u.setLastDiceType;t(560);var f=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={diceType:o.props.lastDiceType||"basicDice",diceReason:"",favoriteDiceValue:""},o}return o(t,e),i(t,[{key:"_handleSendReq",value:function(){var e="";"basicDice"===this.state.diceType?e=this.refs.diceNum.value+"d"+this.refs.diceFace.value:"complexDice"===this.state.diceType?e=this.refs.diceExp.value:"favoriteDice"===this.state.diceType&&(e=this.state.favoriteDiceValue+"+"+(this.refs.diceTempAdd.value||0)),this.props.onSendQuickDice&&this.props.onSendQuickDice(this.state.diceReason,e)}},{key:"_handleChangeDiceType",value:function(e){this.setState({diceType:e}),this.props.dispatch(d(e))}},{key:"render",value:function(){var e=this,t=[{value:"basicDice",label:"基本骰"},{value:"complexDice",label:"复合骰"},{value:"favoriteDice",label:"常用骰"}],n=this.props.favoriteDice.map(function(e){return{value:e.get("value"),label:e.get("title")+"("+e.get("value")+")"}}).toJS();return a.createElement("div",{className:"quick-dice"},a.createElement("span",null,"因为"),a.createElement("input",{type:"text",className:"dice-reason",placeholder:"投骰理由",value:this.state.diceReason,onChange:function(t){return e.setState({diceReason:t.target.value})}}),a.createElement("span",null,"发起快速投骰",a.createElement("i",{className:"iconfont"},"")),a.createElement(l,{name:"dice-select",className:"dice-select",value:this.state.diceType,options:t,clearable:!1,searchable:!1,placeholder:"请选择骰子类型...",onChange:function(t){return e._handleChangeDiceType(t.value)}}),"basicDice"===this.state.diceType?a.createElement("div",{className:"dice basicDice"},a.createElement("input",{key:"dicereq-diceNum",type:"number",placeholder:"骰数",defaultValue:"1",ref:"diceNum"}),a.createElement("span",null,"d"),a.createElement("input",{key:"dicereq-diceFace",type:"number",placeholder:"骰面",defaultValue:"100",ref:"diceFace"})):"complexDice"===this.state.diceType?a.createElement("div",{className:"dice complexDice"},a.createElement("input",{key:"dicereq-diceExp",type:"text",placeholder:"请输入骰子表达式",ref:"diceExp",defaultValue:"1d100"})):a.createElement("div",{className:"dice favoriteDice"},a.createElement(l,{name:"dice-favorite-select",className:"dice-favorite-select",value:this.state.favoriteDiceValue,options:n,clearable:!1,searchable:!1,placeholder:"请选择常用骰",onChange:function(t){return e.setState({favoriteDiceValue:t.value})}}),a.createElement("input",{key:"dicereq-diceTempAdd",type:"number",placeholder:"临时加值",ref:"diceTempAdd",defaultValue:"0"})),a.createElement("button",{onClick:function(){return e._handleSendReq()}},"快速投骰"))}}]),t}(a.Component);e.exports=s(function(e){return{lastDiceType:e.getIn(["ui","lastDiceType"]),favoriteDice:e.getIn(["settings","user","favoriteDice"])}})(f)},function(e,exports,t){var n=t(561);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,'.quick-dice {\n  display: flex;\n  flex-direction: column;\n  padding: 10%;\n  overflow: hidden; }\n  .quick-dice > span {\n    margin-bottom: 10px; }\n  .quick-dice .dice-reason {\n    background-color: transparent;\n    font-size: 16px;\n    border: 1px solid #DDDCDD;\n    outline: 0;\n    padding: 4px 6px;\n    border-radius: 3px;\n    resize: none;\n    margin-bottom: 10px; }\n    .quick-dice .dice-reason:focus {\n      border-color: #705949; }\n    .quick-dice .dice-reason:disabled {\n      cursor: not-allowed;\n      background-color: rgba(0, 0, 0, 0.1);\n      color: #999999; }\n    .quick-dice .dice-reason[type="checkbox"] {\n      -webkit-appearance: none;\n      background-color: white;\n      background-image: url("/src/assets/img/checkbox.png");\n      height: 22px;\n      vertical-align: middle;\n      width: 22px;\n      outline: none;\n      border: 0;\n      transition: initial;\n      padding: 0; }\n      .quick-dice .dice-reason[type="checkbox"]:focus, .quick-dice .dice-reason[type="checkbox"]:hover {\n        background-position: -24px 0; }\n      .quick-dice .dice-reason[type="checkbox"]:checked {\n        background-position: -48px 0; }\n      .quick-dice .dice-reason[type="checkbox"][disabled] {\n        background-position: -72px 0; }\n      .quick-dice .dice-reason[type="checkbox"][disabled]:checked {\n        background-position: -96px 0; }\n  .quick-dice .Select {\n    margin-bottom: 20px; }\n  .quick-dice .dice {\n    display: flex;\n    align-items: center;\n    margin-bottom: 20px; }\n    .quick-dice .dice input {\n      background-color: transparent;\n      font-size: 16px;\n      border: 1px solid #DDDCDD;\n      outline: 0;\n      padding: 4px 6px;\n      border-radius: 3px;\n      resize: none;\n      flex: 1; }\n      .quick-dice .dice input:focus {\n        border-color: #705949; }\n      .quick-dice .dice input:disabled {\n        cursor: not-allowed;\n        background-color: rgba(0, 0, 0, 0.1);\n        color: #999999; }\n      .quick-dice .dice input[type="checkbox"] {\n        -webkit-appearance: none;\n        background-color: white;\n        background-image: url("/src/assets/img/checkbox.png");\n        height: 22px;\n        vertical-align: middle;\n        width: 22px;\n        outline: none;\n        border: 0;\n        transition: initial;\n        padding: 0; }\n        .quick-dice .dice input[type="checkbox"]:focus, .quick-dice .dice input[type="checkbox"]:hover {\n          background-position: -24px 0; }\n        .quick-dice .dice input[type="checkbox"]:checked {\n          background-position: -48px 0; }\n        .quick-dice .dice input[type="checkbox"][disabled] {\n          background-position: -72px 0; }\n        .quick-dice .dice input[type="checkbox"][disabled]:checked {\n          background-position: -96px 0; }\n    .quick-dice .dice.basicDice input {\n      width: 120px; }\n    .quick-dice .dice.basicDice span {\n      margin: 0 6px; }\n    .quick-dice .dice.complexDice input {\n      width: 240px; }\n    .quick-dice .dice.favoriteDice .dice-favorite-select {\n      width: 200px;\n      margin: 0; }\n    .quick-dice .dice.favoriteDice input {\n      width: 80px;\n      margin-left: 10px;\n      height: 36px; }\n  .quick-dice button {\n    font-size: 16px;\n    border: 0;\n    cursor: pointer;\n    color: white;\n    border-radius: 3px;\n    background-color: #999;\n    padding: 6px 12px;\n    outline: 0;\n    user-select: none; }\n    .quick-dice button:hover, .quick-dice button:active, .quick-dice button.active {\n      background-color: #705949; }\n    .quick-dice button:disabled {\n      cursor: not-allowed;\n      background-color: #999999; }\n',""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(6),s=t(4),l=s.connect,u=t(13),d=t(7),f=t(563),p=t(56),m=t(17),h=m.agreeFriendInvite,g=m.refuseFriendInvite,v=t(11),b=v.agreeGroupRequest,y=v.refuseGroupRequest,x=v.agreeGroupInvite,w=v.refuseGroupInvite,E=t(74),_=E.acceptDiceRequest,S=E.acceptDiceInvite,k=t(5),C=k.showModal,T=t(55),I=T.getActorInfo;t(565);var D=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"getCardView",value:function(e){return"actor"===e.get("type")?a.createElement("div",{className:"card-content-actor"},a.createElement("div",{className:"card-content-avatar",style:{backgroundImage:"url("+(e.get("avatar")||d.defaultImg.actor)+")"}}),a.createElement("div",{className:"card-content-profile"},a.createElement("h3",null,e.get("name")),a.createElement("p",null,e.get("desc")))):a.createElement("pre",{className:"card-content"},e.get("content")||this.props.content)}},{key:"getCardAction",value:function(e){var t=this,n=e.get("type");if("friendInvite"===n){var r=e.get("actionState"),o=e.getIn(["invite","uuid"]);switch(r){case 1:return a.createElement("div",{className:"card-action"},a.createElement("button",{disabled:!0},"已同意"));case 2:return a.createElement("div",{className:"card-action"},a.createElement("button",{disabled:!0},"已拒绝"));case 0:default:return a.createElement("div",{className:"card-action"},a.createElement("button",{onClick:function(){return t.props.refuseFriendInvite(o)}},"拒绝"),a.createElement("button",{onClick:function(){return t.props.agreeFriendInvite(o)}},"同意"))}}else{if("groupInvite"!==n){if("diceRequest"===n){var i=this.props.uuid,c=e.get("is_accept"),s=e.get("allow_accept_list");if(c)return a.createElement("div",{className:"card-action"},a.createElement("button",{disabled:!0},"已通过"));var l=s.includes(this.props.selfUUID);return a.createElement("div",{className:"card-action"},l?a.createElement("button",{onClick:function(){return t.props.acceptDiceRequest(i)}},"接受"):a.createElement("button",{disabled:!0},this.props.me?"等待对方处理":"等待处理"))}if("diceInvite"===n){var u=this.props.uuid,d=e.get("is_accept_list"),f=e.get("allow_accept_list"),p=f.includes(this.props.selfUUID)&&f.size!==d.size,m=this.props.isGroupMsg;if(p&&d.includes(this.props.selfUUID))return a.createElement("div",{className:"card-action"},a.createElement("button",{disabled:!0},"已接受"));var h=f.size===d.size?"已完成":this.props.me?"等待对方处理":"等待处理";return a.createElement("div",{className:"card-action"},p?a.createElement("button",{onClick:function(){return t.props.acceptDiceInvite(u,m)}},"接受"):a.createElement("button",{disabled:!0},h))}if("groupRequest"===n){var g=this.props.uuid,v=e.get("requestUUID"),b=e.get("groupUUID"),y=e.get("fromUUID"),x=this.props.groups.find(function(e){return e.get("uuid")===b});return x?x.get("group_members").includes(y)?a.createElement("div",{className:"card-action"},a.createElement("button",{disabled:!0},"已同意")):e.get("is_processed")?a.createElement("div",{className:"card-action"},a.createElement("button",{disabled:!0},"已处理")):a.createElement("div",{className:"card-action"},a.createElement("button",{onClick:function(){return t.props.agreeGroupRequest(g,v,y)}},"同意"),a.createElement("button",{onClick:function(){return t.props.refuseGroupRequest(g,v)}},"拒绝")):a.createElement("div",{className:"card-action"},a.createElement("span",{className:"no-support"},"数据异常"))}return"actor"===n?a.createElement("div",{className:"card-action"},a.createElement("button",{onClick:function(){return t.props.showActorProfile(e.get("uuid"))}},"查看")):a.createElement("div",{className:"card-action"},a.createElement("span",{className:"no-support"},"您当前的版本暂时不支持处理该信息"))}var w=e.get("actionState"),E=e.getIn(["invite","uuid"]);switch(w){case 1:return a.createElement("div",{className:"card-action"},a.createElement("button",{disabled:!0},"已同意"));case 2:return a.createElement("div",{className:"card-action"},a.createElement("button",{disabled:!0},"已拒绝"));case 0:default:return a.createElement("div",{className:"card-action"},a.createElement("button",{onClick:function(){return t.props.refuseGroupInvite(E)}},"拒绝"),a.createElement("button",{onClick:function(){return t.props.agreeGroupInvite(E)}},"同意"))}}}},{key:"getContent",value:function(){if("card"===this.props.type){var e=this.props.data||u.Map();return a.createElement("div",{className:"bubble"},a.createElement("div",{className:"card-title"},e.get("title")),this.getCardView(e),this.getCardAction(e))}return a.createElement("pre",{className:"bubble"},f(this.props.content))}},{key:"render",value:function(){return"tip"===this.props.type?a.createElement("div",{className:"msg-item-tip"},a.createElement("div",{className:"content"},this.props.content)):a.createElement("div",{className:"msg-item "+(this.props.me?"me ":"")+this.props.type},this.props.emphasizeTime?a.createElement("div",{className:"emphasize-time"},a.createElement("span",null,p.getShortDate(this.props.time))):null,a.createElement("div",{className:"profile"},a.createElement("span",{className:"name"},this.props.name),a.createElement("span",{className:"time"},p.getMsgDate(this.props.time))),a.createElement("div",{className:"content"},a.createElement("div",{className:"avatar"},a.createElement("img",{src:this.props.icon})),a.createElement("div",{className:"body"},this.getContent())))}}]),t}(a.Component);D.propTypes={icon:c.string,name:c.string,type:c.string,content:c.string,me:c.bool,isGroupMsg:c.bool},e.exports=l(function(e){return{selfUUID:e.getIn(["user","info","uuid"]),groups:e.getIn(["group","groups"])}},function(e){return{agreeFriendInvite:function(t){return e(h(t))},refuseFriendInvite:function(t){return e(g(t))},agreeGroupInvite:function(t){return e(x(t))},refuseGroupInvite:function(t){return e(w(t))},acceptDiceRequest:function(t){return e(_(t))},acceptDiceInvite:function(t){return e(S(t))},agreeGroupRequest:function(t,n){return e(b(t,n))},refuseGroupRequest:function(t,n){return e(y(t,n))},showActorProfile:function(n){if(n){var r=t(567);e(I(n)),e(C(a.createElement(r,{uuid:n})))}}}})(D)},function(e,exports,t){"use strict";var n=t(564);e.exports=function(e){return e=e.replace(/:(\S*?):/g,"[emoji]$1[/emoji]"),n.toReact(e)}},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(84),c=t(75),s=c.emojify,l=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"toReact",value:function(){var e=this.getContent(!0);return s(":"+e+":")}}]),t}(a.Tag);a.registerTag("emoji",l),e.exports=a},function(e,exports,t){var n=t(566);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,"@charset \"UTF-8\";\n.msg-item {\n  margin-top: 20px;\n  margin-bottom: 22px; }\n  .msg-item:hover > .profile .time {\n    visibility: visible; }\n  .msg-item.me .profile, .msg-item.me .content {\n    flex-direction: row-reverse; }\n  .msg-item.me .content .avatar {\n    margin-right: 0;\n    margin-left: 7px; }\n  .msg-item.me .content > .body {\n    margin-right: 0;\n    margin-left: 140px; }\n    .msg-item.me .content > .body .bubble {\n      float: right; }\n  .msg-item.ooc .content > .body > .bubble {\n    color: #ccc;\n    border-style: dashed; }\n    .msg-item.ooc .content > .body > .bubble:before {\n      content: '\\FF08'; }\n    .msg-item.ooc .content > .body > .bubble:after {\n      content: '\\FF09'; }\n  .msg-item.speak .content > .body > .bubble {\n    padding-left: 22px;\n    padding-right: 22px;\n    border-color: #bec9ff;\n    box-shadow: 0px 0px 2px 0px #bec9ff; }\n    .msg-item.speak .content > .body > .bubble:before {\n      content: '\\E605';\n      top: 0;\n      left: 6px; }\n    .msg-item.speak .content > .body > .bubble:after {\n      content: '\\E601';\n      bottom: 16px;\n      right: 6px; }\n    .msg-item.speak .content > .body > .bubble:before, .msg-item.speak .content > .body > .bubble:after {\n      font-family: \"iconfont\";\n      color: #ccc;\n      position: absolute;\n      font-size: 12px; }\n  .msg-item.action .content > .body > .bubble {\n    border-color: #ffa787;\n    box-shadow: 0px 0px 2px 0px #ffa787; }\n    .msg-item.action .content > .body > .bubble:after {\n      content: '\\E619';\n      font-family: \"iconfont\";\n      color: #ccc;\n      margin-left: 4px; }\n  .msg-item.action.me .content > .body > .bubble:after {\n    content: ''; }\n  .msg-item.action.me .content > .body > .bubble:before {\n    content: '\\E619';\n    font-family: \"iconfont\";\n    color: #ccc;\n    margin-right: 4px; }\n  .msg-item.card .content > .body > .bubble {\n    padding: 0;\n    min-width: 230px;\n    max-width: 467px; }\n    .msg-item.card .content > .body > .bubble > .card-title {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      color: white;\n      line-height: 30px;\n      padding: 0 6px;\n      background-color: #D0A282; }\n    .msg-item.card .content > .body > .bubble > .card-content {\n      padding: 10px 6px;\n      color: #4a4a4a;\n      min-height: 60px; }\n    .msg-item.card .content > .body > .bubble > .card-action {\n      margin: 0 6px;\n      padding: 4px 0;\n      border-top: 1px solid #DDDCDD; }\n      .msg-item.card .content > .body > .bubble > .card-action button {\n        font-size: 14px;\n        background-color: transparent;\n        border: 0;\n        cursor: pointer;\n        color: #705949;\n        padding: 0 2px;\n        margin: 4px 6px;\n        outline: 0;\n        position: relative;\n        user-select: none; }\n        .msg-item.card .content > .body > .bubble > .card-action button:disabled {\n          cursor: not-allowed;\n          color: #999999; }\n        .msg-item.card .content > .body > .bubble > .card-action button:enabled:after {\n          content: ' ';\n          position: absolute;\n          border-top: 1px solid #705949;\n          bottom: 0;\n          transition: all 0.2s ease-in-out;\n          left: 0;\n          width: 0; }\n        .msg-item.card .content > .body > .bubble > .card-action button:enabled:hover:after, .msg-item.card .content > .body > .bubble > .card-action button:enabled:active:after, .msg-item.card .content > .body > .bubble > .card-action button:enabled.active:after {\n          border-top: 1px solid #705949;\n          width: 100%; }\n      .msg-item.card .content > .body > .bubble > .card-action .no-support {\n        color: #999999;\n        font-size: 12px;\n        user-select: none; }\n    .msg-item.card .content > .body > .bubble > .card-content-actor {\n      width: 420px;\n      height: 160px;\n      display: flex; }\n      .msg-item.card .content > .body > .bubble > .card-content-actor > .card-content-avatar {\n        display: flex;\n        height: 100%;\n        width: 110px;\n        overflow: hidden;\n        align-items: center;\n        justify-content: center;\n        background-position: center;\n        background-size: cover; }\n      .msg-item.card .content > .body > .bubble > .card-content-actor > .card-content-profile {\n        flex: 1;\n        padding: 10px;\n        display: flex;\n        flex-direction: column; }\n        .msg-item.card .content > .body > .bubble > .card-content-actor > .card-content-profile > h3 {\n          margin: 0;\n          margin-bottom: 4px; }\n        .msg-item.card .content > .body > .bubble > .card-content-actor > .card-content-profile > p {\n          margin: 0;\n          flex: 1;\n          overflow: hidden; }\n          .msg-item.card .content > .body > .bubble > .card-content-actor > .card-content-profile > p:hover {\n            overflow-y: auto;\n            overflow-y: overlay; }\n  .msg-item .profile {\n    padding: 0 45px;\n    margin: 2px 0;\n    display: flex;\n    flex-direction: row;\n    align-items: center; }\n    .msg-item .profile .name {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      color: #8e97a1;\n      max-width: 180px;\n      word-wrap: normal;\n      font-size: 12px; }\n    .msg-item .profile .time {\n      visibility: hidden;\n      color: #BDBEBF;\n      font-size: 12px;\n      margin: 0 6px; }\n  .msg-item .content {\n    display: flex;\n    flex-direction: row; }\n    .msg-item .content .avatar {\n      width: 38px;\n      height: 38px;\n      border-radius: 50%;\n      overflow: hidden;\n      margin-right: 7px; }\n      .msg-item .content .avatar > img {\n        width: 100%;\n        height: 100%; }\n    .msg-item .content > .body {\n      flex: 1;\n      margin-right: 140px; }\n      .msg-item .content > .body .bubble {\n        min-width: 0;\n        padding: 5px 11px;\n        border: 1px solid #e1e0e4;\n        border-radius: 6px;\n        background-color: #fff;\n        line-height: 1.5;\n        word-break: break-all;\n        float: left;\n        position: relative;\n        overflow: hidden; }\n  .msg-item .emphasize-time {\n    text-align: center; }\n    .msg-item .emphasize-time > span {\n      color: white;\n      font-size: 12px;\n      padding: 1px 5px;\n      background-color: rgba(204, 204, 204, 0.5);\n      border-radius: 3px; }\n\n.msg-item-tip {\n  text-align: center;\n  margin: 10px 0; }\n  .msg-item-tip .content {\n    display: inline-block;\n    background-color: rgba(0, 0, 0, 0.1);\n    color: #666666;\n    max-width: 360px;\n    margin: auto;\n    overflow: hidden;\n    border-radius: 5px;\n    word-break: break-all;\n    padding: 6px 12px;\n    font-size: 12px;\n    vertical-align: middle; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(12),u=t(76),d=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){var e=this.props.uuid,t=this.props.actorcache;return a.createElement(l,{title:"人物信息"},a.createElement(u,{actor:t.get(e)?t.get(e).toJS():{}}))}}]),t}(a.Component);e.exports=s(function(e){return{actorcache:e.getIn(["cache","actor"])}})(d)},function(e,exports,t){var n=t(569);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".modal-panel {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%; }\n  .modal-panel > .head {\n    height: 50px;\n    line-height: 52px;\n    text-align: center;\n    background-color: #fff;\n    padding: 0 30px;\n    position: relative;\n    border-bottom: 1px solid #DDDCDD;\n    border-radius: 3px; }\n  .modal-panel > .body {\n    flex: 1;\n    padding: 12px;\n    overflow-y: auto;\n    background-color: #FAFAFC; }\n  .modal-panel > .foot {\n    width: 100%;\n    text-align: center;\n    padding-top: 10px;\n    padding-bottom: 10px;\n    background-color: #fff; }\n    .modal-panel > .foot button {\n      font-size: 16px;\n      border: 0;\n      cursor: pointer;\n      color: white;\n      border-radius: 3px;\n      background-color: #999;\n      padding: 6px 12px;\n      outline: 0;\n      user-select: none;\n      margin: 0 4px; }\n      .modal-panel > .foot button:hover, .modal-panel > .foot button:active, .modal-panel > .foot button.active {\n        background-color: #705949; }\n      .modal-panel > .foot button:disabled {\n        cursor: not-allowed;\n        background-color: #999999; }\n",""])},function(e,exports,t){var n=t(571);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".actor-profile {\n  width: 700px;\n  height: 500px;\n  padding: 10px;\n  padding-left: 20px;\n  display: flex; }\n  .actor-profile .profile {\n    width: 210px;\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    padding-right: 20px;\n    border-right: 1px dashed #DDDCDD; }\n    .actor-profile .profile .uuid {\n      font-size: 9px;\n      color: #C7C7CC;\n      margin-bottom: 10px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap; }\n    .actor-profile .profile .avatar {\n      width: 100%;\n      height: 240px;\n      border: 1px solid #DDDCDD;\n      background-position: center;\n      background-size: cover; }\n    .actor-profile .profile .desc {\n      flex: 1;\n      margin-top: 10px;\n      text-align: left;\n      color: #4a4a4a;\n      overflow: hidden; }\n      .actor-profile .profile .desc:hover {\n        overflow-y: auto;\n        overflow-y: overlay; }\n  .actor-profile .property {\n    flex: 1;\n    margin-left: 20px;\n    padding-top: 15px;\n    padding-right: 20px;\n    overflow: hidden; }\n    .actor-profile .property:hover {\n      overflow-y: auto;\n      overflow-y: overlay; }\n    .actor-profile .property .actor-property-cell {\n      text-align: left;\n      display: flex;\n      margin-bottom: 6px;\n      padding: 4px 6px;\n      border-radius: 3px; }\n      .actor-profile .property .actor-property-cell:hover {\n        background-color: rgba(0, 0, 0, 0.2); }\n      .actor-profile .property .actor-property-cell span:nth-child(1) {\n        flex: 2; }\n      .actor-profile .property .actor-property-cell span:nth-child(2) {\n        flex: 3; }\n    .actor-profile .property input {\n      flex: 1;\n      outline: 0; }\n",""])},function(e,exports,t){"use strict";function n(e,t,n){if(arguments.length>3&&void 0!==arguments[3]&&!arguments[3])return void(e.scrollTop=t);var r=e.scrollTop,o=t-r,i=0;!function t(){i+=20;var a=Math.easeInOutQuad(i,r,o,n);e.scrollTop=a,i<n&&setTimeout(t,20)}()}function r(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n(e,e.scrollHeight-e.clientHeight,t,r)}Math.easeInOutQuad=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)},exports.to=n,exports.bottom=r},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(75),s=c.emojify,l=c.getCodeList;t(574);var u=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={selectGroup:"people"},o.emoji=l(),o}return o(t,e),i(t,[{key:"getEmoticonItems",value:function(){var e=this,t=this.state.selectGroup;return t&&this.emoji[t]?this.emoji[t].map(function(t){return a.createElement("span",{key:"emoji-cell#"+t,className:"emoji-cell",onClick:function(){return e.props.onSelect(t)}},s(t))}):null}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"emoticon",onClick:function(e){e.stopPropagation()}},a.createElement("div",{className:"items"},this.getEmoticonItems()),a.createElement("div",{className:"group"},Object.keys(this.emoji).map(function(t){return a.createElement("div",{key:"emoji-group#"+t,className:"group-selection"+(e.state.selectGroup===t?" active":""),onClick:function(){return e.setState({selectGroup:t})}},s(e.emoji[t][0]))})))}}]),t}(a.Component);e.exports=u},function(e,exports,t){var n=t(575);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".emoticon {\n  min-width: 388px;\n  max-width: 388px;\n  min-height: 288px; }\n  .emoticon .items {\n    height: 252px;\n    padding: 8px;\n    padding-bottom: 0;\n    margin-bottom: 4px;\n    overflow: hidden; }\n    .emoticon .items:hover {\n      overflow-y: auto;\n      overflow-y: overlay; }\n    .emoticon .items .emoji-cell {\n      cursor: pointer;\n      margin: 4px; }\n  .emoticon .group {\n    height: 36px;\n    display: flex;\n    background-color: #F5F5F5;\n    padding: 0 14px; }\n    .emoticon .group .group-selection {\n      width: 42px;\n      cursor: pointer;\n      height: 36px;\n      line-height: 33px;\n      text-align: center;\n      border-color: transparent; }\n      .emoticon .group .group-selection.active {\n        border-top: 1px solid white;\n        border-left: 1px solid #e6e5e6;\n        border-right: 1px solid #e6e5e6;\n        background-color: white; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(6);t(577);var s=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.defaultValue,r=e.value,o=e.onEdit,i=e.onRemove,c=e.isActive;return a.createElement("tr",{className:"template-property-cell"+(c?" active":"")},a.createElement("td",{className:"property"},t," : "),a.createElement("td",{className:"defaultValue"},n),a.createElement("td",{className:"value"},r),a.createElement("td",{className:"actions"},a.createElement("button",{title:"编辑",onClick:o},a.createElement("i",{className:"iconfont"},"")),a.createElement("button",{title:"删除",onClick:i},a.createElement("i",{className:"iconfont"},""))))}}]),t}(a.Component);s.propTypes={name:c.string,onEdit:c.func,onRemove:c.func},e.exports=s},function(e,exports,t){var n=t(578);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".template-property-cell {\n  margin-bottom: 10px; }\n  .template-property-cell:hover, .template-property-cell.active {\n    background-color: rgba(0, 0, 0, 0.1); }\n  .template-property-cell .property {\n    padding: 8px;\n    flex: 1;\n    text-align: left; }\n  .template-property-cell .defaultValue {\n    text-align: left; }\n  .template-property-cell .actions {\n    padding: 8px; }\n    .template-property-cell .actions button {\n      border: 0;\n      background-color: transparent;\n      user-select: none;\n      cursor: pointer;\n      outline: 0; }\n      .template-property-cell .actions button:hover {\n        color: #705949; }\n      .template-property-cell .actions button .iconfont {\n        font-size: 18px; }\n",""])},function(e,exports,t){var n=t(580);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,'.template-edit {\n  width: 1000px;\n  height: 600px;\n  display: flex; }\n  .template-edit .profile-panel {\n    flex: 1;\n    display: flex;\n    flex-direction: column; }\n    .template-edit .profile-panel .header {\n      padding: 20px;\n      display: flex; }\n      .template-edit .profile-panel .header button {\n        font-size: 14px;\n        background-color: transparent;\n        border: 0;\n        cursor: pointer;\n        color: #705949;\n        padding: 0 2px;\n        margin: 4px 6px;\n        outline: 0;\n        position: relative;\n        user-select: none;\n        margin: 0 5px;\n        height: 40px;\n        margin-top: 2px;\n        padding: 6px 12px; }\n        .template-edit .profile-panel .header button:disabled {\n          cursor: not-allowed;\n          color: #999999; }\n        .template-edit .profile-panel .header button:enabled:after {\n          content: \' \';\n          position: absolute;\n          border-top: 1px solid #705949;\n          bottom: 0;\n          transition: all 0.2s ease-in-out;\n          left: 0;\n          width: 0; }\n        .template-edit .profile-panel .header button:enabled:hover:after, .template-edit .profile-panel .header button:enabled:active:after, .template-edit .profile-panel .header button:enabled.active:after {\n          border-top: 1px solid #705949;\n          width: 100%; }\n      .template-edit .profile-panel .header input {\n        flex: 1;\n        margin: 0 5px;\n        height: 44px;\n        font-size: 16px;\n        padding: 12px 16px;\n        border: 0;\n        outline: 0;\n        border-bottom: 1px solid #DDDCDD;\n        background-color: transparent; }\n        .template-edit .profile-panel .header input:focus {\n          border-bottom-color: #705949; }\n    .template-edit .profile-panel .desc {\n      text-align: left;\n      padding: 0 30px; }\n      .template-edit .profile-panel .desc textarea {\n        resize: none;\n        font-size: 16px;\n        border: 1px solid #DDDCDD;\n        outline: 0;\n        padding: 10px; }\n        .template-edit .profile-panel .desc textarea:focus {\n          border-color: #705949; }\n    .template-edit .profile-panel > .actions {\n      display: flex;\n      padding: 10px 30px; }\n      .template-edit .profile-panel > .actions button {\n        font-size: 16px;\n        border: 0;\n        cursor: pointer;\n        color: white;\n        border-radius: 3px;\n        background-color: #999;\n        padding: 6px 12px;\n        outline: 0;\n        user-select: none;\n        margin: 0 5px;\n        margin-top: 2px; }\n        .template-edit .profile-panel > .actions button:hover, .template-edit .profile-panel > .actions button:active, .template-edit .profile-panel > .actions button.active {\n          background-color: #705949; }\n        .template-edit .profile-panel > .actions button:disabled {\n          cursor: not-allowed;\n          background-color: #999999; }\n        .template-edit .profile-panel > .actions button > .iconfont {\n          margin-right: 2px; }\n    .template-edit .profile-panel .property-list {\n      overflow: hidden;\n      padding: 20px 30px;\n      flex: 1; }\n      .template-edit .profile-panel .property-list:hover {\n        overflow-y: auto;\n        overflow-y: overlay; }\n      .template-edit .profile-panel .property-list table {\n        width: 100%; }\n  .template-edit .inspect-panel {\n    width: 320px;\n    border-left: 1px solid #DDDCDD;\n    background-color: #FFFBF8;\n    padding: 20px 10px; }\n    .template-edit .inspect-panel .data {\n      display: flex;\n      margin-bottom: 6px; }\n      .template-edit .inspect-panel .data > span {\n        padding: 4px 6px;\n        color: #666666; }\n      .template-edit .inspect-panel .data > input, .template-edit .inspect-panel .data > textarea {\n        background-color: transparent;\n        font-size: 16px;\n        border: 1px solid #DDDCDD;\n        outline: 0;\n        padding: 4px 6px;\n        border-radius: 3px;\n        resize: none; }\n        .template-edit .inspect-panel .data > input:focus, .template-edit .inspect-panel .data > textarea:focus {\n          border-color: #705949; }\n        .template-edit .inspect-panel .data > input:disabled, .template-edit .inspect-panel .data > textarea:disabled {\n          cursor: not-allowed;\n          background-color: rgba(0, 0, 0, 0.1);\n          color: #999999; }\n        .template-edit .inspect-panel .data > input[type="checkbox"], .template-edit .inspect-panel .data > textarea[type="checkbox"] {\n          -webkit-appearance: none;\n          background-color: white;\n          background-image: url("/src/assets/img/checkbox.png");\n          height: 22px;\n          vertical-align: middle;\n          width: 22px;\n          outline: none;\n          border: 0;\n          transition: initial;\n          padding: 0; }\n          .template-edit .inspect-panel .data > input[type="checkbox"]:focus, .template-edit .inspect-panel .data > input[type="checkbox"]:hover, .template-edit .inspect-panel .data > textarea[type="checkbox"]:focus, .template-edit .inspect-panel .data > textarea[type="checkbox"]:hover {\n            background-position: -24px 0; }\n          .template-edit .inspect-panel .data > input[type="checkbox"]:checked, .template-edit .inspect-panel .data > textarea[type="checkbox"]:checked {\n            background-position: -48px 0; }\n          .template-edit .inspect-panel .data > input[type="checkbox"][disabled], .template-edit .inspect-panel .data > textarea[type="checkbox"][disabled] {\n            background-position: -72px 0; }\n          .template-edit .inspect-panel .data > input[type="checkbox"][disabled]:checked, .template-edit .inspect-panel .data > textarea[type="checkbox"][disabled]:checked {\n            background-position: -96px 0; }\n      .template-edit .inspect-panel .data .func-select {\n        min-width: 180px; }\n    .template-edit .inspect-panel .actions {\n      text-align: right;\n      margin-top: 20px; }\n      .template-edit .inspect-panel .actions button {\n        font-size: 16px;\n        border: 0;\n        cursor: pointer;\n        color: white;\n        border-radius: 3px;\n        background-color: #999;\n        padding: 6px 12px;\n        outline: 0;\n        user-select: none;\n        margin: 0 5px;\n        margin-top: 2px; }\n        .template-edit .inspect-panel .actions button:hover, .template-edit .inspect-panel .actions button:active, .template-edit .inspect-panel .actions button.active {\n          background-color: #705949; }\n        .template-edit .inspect-panel .actions button:disabled {\n          cursor: not-allowed;\n          background-color: #999999; }\n        .template-edit .inspect-panel .actions button .iconfont {\n          margin-right: 4px; }\n',""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(12),u=t(23),d=u.createTemplateAdvanced;t(582);var f=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={templateStr:""},o}return o(t,e),i(t,[{key:"_handleCreateTemplate",value:function(){this.props.dispatch(d("","","",this.state.templateStr))}},{key:"getActions",value:function(){var e=this;return a.createElement("div",null,a.createElement("button",{onClick:function(){return e._handleCreateTemplate()}},"创建模板"))}},{key:"render",value:function(){var e=this;return a.createElement(l,{className:"template-advanced-create",title:"进阶模板导入",actions:this.getActions()},a.createElement("p",null,"模板内容:"),a.createElement("textarea",{value:this.state.templateStr,onChange:function(t){return e.setState({templateStr:t.target.value})}}))}}]),t}(a.Component);e.exports=s()(f)},function(e,exports,t){var n=t(583);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,'.template-advanced-create .body p {\n  text-align: left;\n  margin-bottom: 10px; }\n\n.template-advanced-create .body textarea {\n  background-color: transparent;\n  font-size: 16px;\n  border: 1px solid #DDDCDD;\n  outline: 0;\n  padding: 4px 6px;\n  border-radius: 3px;\n  resize: none;\n  width: 100%;\n  min-height: 200px;\n  background-color: white;\n  word-break: break-all; }\n  .template-advanced-create .body textarea:focus {\n    border-color: #705949; }\n  .template-advanced-create .body textarea:disabled {\n    cursor: not-allowed;\n    background-color: rgba(0, 0, 0, 0.1);\n    color: #999999; }\n  .template-advanced-create .body textarea[type="checkbox"] {\n    -webkit-appearance: none;\n    background-color: white;\n    background-image: url("/src/assets/img/checkbox.png");\n    height: 22px;\n    vertical-align: middle;\n    width: 22px;\n    outline: none;\n    border: 0;\n    transition: initial;\n    padding: 0; }\n    .template-advanced-create .body textarea[type="checkbox"]:focus, .template-advanced-create .body textarea[type="checkbox"]:hover {\n      background-position: -24px 0; }\n    .template-advanced-create .body textarea[type="checkbox"]:checked {\n      background-position: -48px 0; }\n    .template-advanced-create .body textarea[type="checkbox"][disabled] {\n      background-position: -72px 0; }\n    .template-advanced-create .body textarea[type="checkbox"][disabled]:checked {\n      background-position: -96px 0; }\n',""])},function(e,exports,t){var n=t(585);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,'.image-uploader {\n  position: relative;\n  width: 100%;\n  height: 100%; }\n  .image-uploader .mask {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: rgba(0, 0, 0, 0.6);\n    opacity: 0;\n    color: white;\n    cursor: pointer; }\n    .image-uploader .mask:hover {\n      opacity: 1; }\n  .image-uploader > input[type="file"] {\n    display: none; }\n',""])},function(e,exports,t){var n=t(587);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,'.actor-edit {\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n  width: 100%;\n  width: 700px;\n  max-height: 560px; }\n  .actor-edit .actor-edit-header {\n    text-align: left;\n    display: flex; }\n    .actor-edit .actor-edit-header input {\n      flex: 1;\n      margin: 0 5px;\n      height: 44px;\n      padding: 8px 12px;\n      border: 0;\n      outline: 0;\n      border-bottom: 1px solid #DDDCDD;\n      background-color: transparent;\n      font-size: 16px;\n      position: relative; }\n      .actor-edit .actor-edit-header input:focus {\n        border-bottom-color: #705949; }\n      .actor-edit .actor-edit-header input:disabled {\n        cursor: not-allowed;\n        color: #999999; }\n    .actor-edit .actor-edit-header button {\n      font-size: 14px;\n      background-color: transparent;\n      border: 0;\n      cursor: pointer;\n      color: #705949;\n      padding: 0 2px;\n      margin: 4px 6px;\n      outline: 0;\n      position: relative;\n      user-select: none; }\n      .actor-edit .actor-edit-header button:disabled {\n        cursor: not-allowed;\n        color: #999999; }\n      .actor-edit .actor-edit-header button:enabled:after {\n        content: \' \';\n        position: absolute;\n        border-top: 1px solid #705949;\n        bottom: 0;\n        transition: all 0.2s ease-in-out;\n        left: 0;\n        width: 0; }\n      .actor-edit .actor-edit-header button:enabled:hover:after, .actor-edit .actor-edit-header button:enabled:active:after, .actor-edit .actor-edit-header button:enabled.active:after {\n        border-top: 1px solid #705949;\n        width: 100%; }\n  .actor-edit .actor-edit-body {\n    display: flex; }\n    .actor-edit .actor-edit-body .actor-edit-profile {\n      margin-right: 20px;\n      padding: 20px 0;\n      display: flex;\n      flex-direction: column; }\n      .actor-edit .actor-edit-body .actor-edit-profile .avatar {\n        background-image: url(/src/assets/img/actor.jpeg);\n        display: flex;\n        height: 240px;\n        width: 100%;\n        overflow: hidden;\n        align-items: center;\n        justify-content: center;\n        border: 1px solid #DDDCDD;\n        background-position: center;\n        background-size: cover; }\n      .actor-edit .actor-edit-body .actor-edit-profile .desc {\n        flex: 1;\n        margin-top: 10px; }\n        .actor-edit .actor-edit-body .actor-edit-profile .desc textarea {\n          height: 100%;\n          background-color: transparent;\n          font-size: 16px;\n          border: 1px solid #DDDCDD;\n          outline: 0;\n          padding: 4px 6px;\n          border-radius: 3px;\n          resize: none; }\n          .actor-edit .actor-edit-body .actor-edit-profile .desc textarea:focus {\n            border-color: #705949; }\n          .actor-edit .actor-edit-body .actor-edit-profile .desc textarea:disabled {\n            cursor: not-allowed;\n            background-color: rgba(0, 0, 0, 0.1);\n            color: #999999; }\n          .actor-edit .actor-edit-body .actor-edit-profile .desc textarea[type="checkbox"] {\n            -webkit-appearance: none;\n            background-color: white;\n            background-image: url("/src/assets/img/checkbox.png");\n            height: 22px;\n            vertical-align: middle;\n            width: 22px;\n            outline: none;\n            border: 0;\n            transition: initial;\n            padding: 0; }\n            .actor-edit .actor-edit-body .actor-edit-profile .desc textarea[type="checkbox"]:focus, .actor-edit .actor-edit-body .actor-edit-profile .desc textarea[type="checkbox"]:hover {\n              background-position: -24px 0; }\n            .actor-edit .actor-edit-body .actor-edit-profile .desc textarea[type="checkbox"]:checked {\n              background-position: -48px 0; }\n            .actor-edit .actor-edit-body .actor-edit-profile .desc textarea[type="checkbox"][disabled] {\n              background-position: -72px 0; }\n            .actor-edit .actor-edit-body .actor-edit-profile .desc textarea[type="checkbox"][disabled]:checked {\n              background-position: -96px 0; }\n    .actor-edit .actor-edit-body .actor-edit-property {\n      overflow: hidden;\n      margin-top: 10px;\n      padding-right: 12px;\n      flex: 1; }\n      .actor-edit .actor-edit-body .actor-edit-property:hover {\n        overflow-y: auto;\n        overflow-y: overlay; }\n      .actor-edit .actor-edit-body .actor-edit-property .actor-property-cell {\n        display: flex;\n        align-items: center;\n        margin-bottom: 6px; }\n        .actor-edit .actor-edit-body .actor-edit-property .actor-property-cell .cell-name {\n          width: 50%;\n          text-align: left; }\n        .actor-edit .actor-edit-body .actor-edit-property .actor-property-cell .cell-value input {\n          background-color: transparent;\n          font-size: 16px;\n          border: 1px solid #DDDCDD;\n          outline: 0;\n          padding: 4px 6px;\n          border-radius: 3px;\n          resize: none; }\n          .actor-edit .actor-edit-body .actor-edit-property .actor-property-cell .cell-value input:focus {\n            border-color: #705949; }\n          .actor-edit .actor-edit-body .actor-edit-property .actor-property-cell .cell-value input:disabled {\n            cursor: not-allowed;\n            background-color: rgba(0, 0, 0, 0.1);\n            color: #999999; }\n          .actor-edit .actor-edit-body .actor-edit-property .actor-property-cell .cell-value input[type="checkbox"] {\n            -webkit-appearance: none;\n            background-color: white;\n            background-image: url("/src/assets/img/checkbox.png");\n            height: 22px;\n            vertical-align: middle;\n            width: 22px;\n            outline: none;\n            border: 0;\n            transition: initial;\n            padding: 0; }\n            .actor-edit .actor-edit-body .actor-edit-property .actor-property-cell .cell-value input[type="checkbox"]:focus, .actor-edit .actor-edit-body .actor-edit-property .actor-property-cell .cell-value input[type="checkbox"]:hover {\n              background-position: -24px 0; }\n            .actor-edit .actor-edit-body .actor-edit-property .actor-property-cell .cell-value input[type="checkbox"]:checked {\n              background-position: -48px 0; }\n            .actor-edit .actor-edit-body .actor-edit-property .actor-property-cell .cell-value input[type="checkbox"][disabled] {\n              background-position: -72px 0; }\n            .actor-edit .actor-edit-body .actor-edit-property .actor-property-cell .cell-value input[type="checkbox"][disabled]:checked {\n              background-position: -96px 0; }\n',""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(0);t(589);var s=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"getActions",value:function(){return a.createElement("div",{className:"actions"},this.props.canEdit?a.createElement("button",{"data-tip":"编辑模板",onClick:this.props.onEdit},a.createElement("i",{className:"iconfont"},"")):null,a.createElement("button",{"data-tip":"创建人物",onClick:this.props.onCreate},a.createElement("i",{className:"iconfont"},"")))}},{key:"render",value:function(){return a.createElement("div",{className:"template-item"},a.createElement("div",{className:"header"},a.createElement("div",{className:"name"},this.props.name),this.getActions()),a.createElement("div",{className:"desc"},this.props.desc),a.createElement("div",{className:"footer"},a.createElement("div",{className:"creator",title:"moonrailgun"},this.props.creator),a.createElement("div",{className:"time"},c(this.props.time).format("YYYY-MM-DD HH:mm:ss"))))}}]),t}(a.Component);e.exports=s},function(e,exports,t){var n=t(590);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".template-item {\n  display: flex;\n  flex-direction: column;\n  background-color: white;\n  box-shadow: rgba(0, 0, 0, 0.15) 0 0 6px;\n  margin-bottom: 10px;\n  border-radius: 3px;\n  text-align: left;\n  padding: 6px 10px;\n  user-select: none; }\n  .template-item:hover {\n    box-shadow: rgba(0, 0, 0, 0.5) 0 0 6px; }\n  .template-item .header {\n    font-size: 16px;\n    border-bottom: 1px solid #dddcdd;\n    padding: 6px;\n    font-weight: bold;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    cursor: pointer;\n    display: flex; }\n    .template-item .header .name {\n      flex: 1; }\n    .template-item .header .actions button {\n      background-color: transparent;\n      border: 0;\n      outline: 0;\n      cursor: pointer;\n      color: #9ea1a2; }\n      .template-item .header .actions button:not(:disabled):hover, .template-item .header .actions button:not(:disabled):active, .template-item .header .actions button:not(:disabled).active {\n        color: #7e3f12; }\n        .template-item .header .actions button:not(:disabled):hover .iconfont, .template-item .header .actions button:not(:disabled):active .iconfont, .template-item .header .actions button:not(:disabled).active .iconfont {\n          color: #7e3f12; }\n      .template-item .header .actions button:disabled {\n        cursor: not-allowed; }\n      .template-item .header .actions button .iconfont {\n        color: #9ea1a2;\n        line-height: 18px;\n        height: 18px;\n        font-size: 18px; }\n  .template-item .desc {\n    font-size: 14px;\n    padding: 6px 0;\n    color: #333; }\n  .template-item .footer {\n    font-size: 12px;\n    display: flex;\n    color: #999;\n    padding-bottom: 4px; }\n    .template-item .footer .creator {\n      flex: 1;\n      text-align: left;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      margin-right: 10px;\n      cursor: pointer; }\n",""])},function(e,exports,t){var n=t(592);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".template-select {\n  height: 520px;\n  width: 760px;\n  display: flex;\n  flex: 1;\n  flex-direction: column; }\n  .template-select > .header {\n    padding: 20px 26px;\n    display: flex; }\n    .template-select > .header input {\n      height: 44px;\n      padding: 8px 12px;\n      border: 0;\n      outline: 0;\n      border-bottom: 1px solid #DDDCDD;\n      background-color: transparent;\n      font-size: 16px;\n      position: relative;\n      flex: 1;\n      margin: 0 5px;\n      padding: 12px 16px; }\n      .template-select > .header input:focus {\n        border-bottom-color: #705949; }\n      .template-select > .header input:disabled {\n        cursor: not-allowed;\n        color: #999999; }\n    .template-select > .header button {\n      font-size: 16px;\n      border: 0;\n      cursor: pointer;\n      color: white;\n      border-radius: 3px;\n      background-color: #999;\n      padding: 6px 12px;\n      outline: 0;\n      user-select: none;\n      margin: 0 5px;\n      height: 40px;\n      margin-top: 2px; }\n      .template-select > .header button:hover, .template-select > .header button:active, .template-select > .header button.active {\n        background-color: #705949; }\n      .template-select > .header button:disabled {\n        cursor: not-allowed;\n        background-color: #999999; }\n      .template-select > .header button .iconfont {\n        margin-right: 4px; }\n  .template-select > .body {\n    flex: 1;\n    display: flex;\n    padding-bottom: 20px; }\n    .template-select > .body .search-result {\n      overflow: hidden;\n      flex: 1;\n      overflow: hidden;\n      padding: 20px;\n      padding-top: 0; }\n      .template-select > .body .search-result:hover {\n        overflow-y: auto;\n        overflow-y: overlay; }\n      .template-select > .body .search-result:hover {\n        overflow-y: overlay; }\n      .template-select > .body .search-result .title {\n        font-size: 14px;\n        line-height: 20px;\n        color: #CCCCCC;\n        margin-bottom: 6px; }\n      .template-select > .body .search-result .no-result {\n        color: #666;\n        margin-top: 40px;\n        user-select: none;\n        cursor: default; }\n    .template-select > .body .self-template {\n      overflow: hidden;\n      width: 340px;\n      border-left: 1px solid #dddcdd;\n      padding: 20px;\n      overflow: hidden;\n      padding-top: 0; }\n      .template-select > .body .self-template:hover {\n        overflow-y: auto;\n        overflow-y: overlay; }\n      .template-select > .body .self-template:hover {\n        overflow-y: overlay; }\n      .template-select > .body .self-template .title {\n        font-size: 14px;\n        line-height: 20px;\n        color: #CCCCCC;\n        margin-bottom: 6px; }\n",""])},function(e,exports,t){var n=t(594);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".actor-select {\n  width: 600px;\n  height: 500px;\n  padding: 20px 10px;\n  display: flex;\n  flex-direction: column; }\n  .actor-select .actor-list {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    padding: 10px;\n    overflow: hidden; }\n    .actor-select .actor-list:hover {\n      overflow-y: auto;\n      overflow-y: overlay; }\n    .actor-select .actor-list .actor-item {\n      display: flex;\n      width: auto;\n      height: 120px;\n      background-color: white;\n      border-radius: 4px;\n      margin-bottom: 14px;\n      box-shadow: rgba(0, 0, 0, 0.15) 0 0 6px;\n      border: 1px solid #DDDCDD;\n      padding: 10px 6px;\n      cursor: pointer;\n      overflow: hidden; }\n      .actor-select .actor-list .actor-item:hover {\n        box-shadow: rgba(0, 0, 0, 0.5) 0 0 6px; }\n      .actor-select .actor-list .actor-item.active .actor-extra {\n        color: #705949; }\n      .actor-select .actor-list .actor-item .actor-avatar {\n        height: 98px;\n        width: 80px;\n        overflow: hidden;\n        align-items: center;\n        justify-content: center;\n        border: 1px solid #DDDCDD;\n        background-position: center;\n        background-size: cover; }\n      .actor-select .actor-list .actor-item .actor-info {\n        display: flex;\n        flex-direction: column;\n        flex: 1; }\n      .actor-select .actor-list .actor-item .actor-extra {\n        width: 40px;\n        height: 100%;\n        color: #DDDCDD;\n        display: flex;\n        justify-content: center;\n        align-items: center; }\n        .actor-select .actor-list .actor-item .actor-extra .iconfont {\n          font-size: 22px; }\n  .actor-select .no-actor {\n    color: #999; }\n    .actor-select .no-actor > span {\n      color: #FFA160;\n      cursor: pointer; }\n  .actor-select .action button {\n    font-size: 16px;\n    border: 0;\n    cursor: pointer;\n    color: white;\n    border-radius: 3px;\n    background-color: #999;\n    padding: 6px 12px;\n    outline: 0;\n    user-select: none; }\n    .actor-select .action button:hover, .actor-select .action button:active, .actor-select .action button.active {\n      background-color: #705949; }\n    .actor-select .action button:disabled {\n      cursor: not-allowed;\n      background-color: #999999; }\n",""])},function(e,exports,t){var n=t(596);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".send-msg-box {\n  height: 106px;\n  background-color: #FFFBF8;\n  border-top: 1px solid #DDDCDD;\n  display: flex; }\n  .send-msg-box .input-area {\n    display: flex;\n    flex: 1;\n    flex-direction: column; }\n    .send-msg-box .input-area .tool-area {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      height: 34px;\n      padding: 0 10px;\n      user-select: none;\n      position: relative; }\n      .send-msg-box .input-area .tool-area .tool-item {\n        background-color: transparent;\n        border: 0;\n        outline: 0;\n        cursor: pointer;\n        color: #9ea1a2;\n        margin-right: 8px;\n        width: 18px;\n        height: 18px; }\n        .send-msg-box .input-area .tool-area .tool-item:not(:disabled):hover, .send-msg-box .input-area .tool-area .tool-item:not(:disabled):active, .send-msg-box .input-area .tool-area .tool-item:not(:disabled).active {\n          color: #7e3f12; }\n          .send-msg-box .input-area .tool-area .tool-item:not(:disabled):hover .iconfont, .send-msg-box .input-area .tool-area .tool-item:not(:disabled):active .iconfont, .send-msg-box .input-area .tool-area .tool-item:not(:disabled).active .iconfont {\n            color: #7e3f12; }\n        .send-msg-box .input-area .tool-area .tool-item:disabled {\n          cursor: not-allowed; }\n        .send-msg-box .input-area .tool-area .tool-item .iconfont {\n          color: #9ea1a2;\n          line-height: 18px;\n          height: 18px;\n          font-size: 18px; }\n      .send-msg-box .input-area .tool-area .btn-group, .send-msg-box .input-area .tool-area .type-select, .send-msg-box .input-area .tool-area .input-actions {\n        display: flex; }\n      .send-msg-box .input-area .tool-area .type-select {\n        flex: 1; }\n    .send-msg-box .input-area .input-msg {\n      overflow: hidden;\n      background-color: transparent;\n      resize: none;\n      border: 0;\n      padding: 6px 10px 6px 6px;\n      line-height: 1.2em;\n      flex: 1;\n      color: #222222;\n      font-size: 14px;\n      outline: 0; }\n      .send-msg-box .input-area .input-msg:hover {\n        overflow-y: auto;\n        overflow-y: overlay; }\n  .send-msg-box .action-area {\n    width: 78px;\n    border-left: 1px solid #DDDCDD; }\n    .send-msg-box .action-area button {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 100%;\n      height: 100%;\n      background-color: white;\n      border: 0;\n      outline: 0;\n      cursor: pointer;\n      user-select: none; }\n      .send-msg-box .action-area button:disabled {\n        cursor: default; }\n  .send-msg-box .popup.emoticon, .send-msg-box .popup.dice {\n    border-radius: 3px;\n    min-width: 72px;\n    box-shadow: rgba(0, 0, 0, 0.15) 0 0 8px;\n    background-color: white;\n    position: absolute;\n    left: 12px;\n    bottom: 32px;\n    padding: 0;\n    z-index: 1;\n    display: none; }\n    .send-msg-box .popup.emoticon.active, .send-msg-box .popup.dice.active {\n      display: block; }\n    .send-msg-box .popup.emoticon:after, .send-msg-box .popup.dice:after {\n      content: ' ';\n      border-width: 5px;\n      border-style: solid dashed dashed dashed;\n      border-color: #F9FCFA transparent transparent transparent;\n      position: absolute;\n      left: 2px; }\n  .send-msg-box .popup.dice {\n    left: auto;\n    right: -36px; }\n    .send-msg-box .popup.dice > ul > li {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      border-bottom: 1px solid rgba(220, 220, 220, 0.5);\n      line-height: 31px;\n      cursor: pointer;\n      text-align: left;\n      text-indent: 10px;\n      font-size: 12px;\n      color: #222;\n      padding-right: 10px;\n      word-wrap: normal; }\n      .send-msg-box .popup.dice > ul > li:last-child {\n        border-bottom: 0; }\n      .send-msg-box .popup.dice > ul > li:hover {\n        background-color: #FFF4EB; }\n",""])},function(e,exports,t){var n=t(598);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".conv-detail {\n  display: flex;\n  flex-direction: column;\n  flex: 1; }\n  .conv-detail .conv-header {\n    height: 50px;\n    border-bottom: 1px solid #DDDCDD;\n    display: flex;\n    align-items: center;\n    padding: 0 16px; }\n    .conv-detail .conv-header .avatar {\n      height: 38px;\n      width: 38px;\n      border-radius: 50%;\n      margin-right: 18px;\n      overflow: hidden; }\n      .conv-detail .conv-header .avatar img {\n        width: 100%;\n        height: 100%; }\n    .conv-detail .conv-header .title {\n      flex: 2; }\n      .conv-detail .conv-header .title .main-title {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        font-size: 14px; }\n      .conv-detail .conv-header .title .sub-title {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        color: #999999;\n        font-size: 12px; }\n    .conv-detail .conv-header .group-actor-select {\n      width: 140px;\n      margin-right: 20px; }\n    .conv-detail .conv-header .actions button {\n      background-color: transparent;\n      border: 0;\n      outline: 0;\n      cursor: pointer;\n      color: #9ea1a2; }\n      .conv-detail .conv-header .actions button:not(:disabled):hover, .conv-detail .conv-header .actions button:not(:disabled):active, .conv-detail .conv-header .actions button:not(:disabled).active {\n        color: #7e3f12; }\n        .conv-detail .conv-header .actions button:not(:disabled):hover .iconfont, .conv-detail .conv-header .actions button:not(:disabled):active .iconfont, .conv-detail .conv-header .actions button:not(:disabled).active .iconfont {\n          color: #7e3f12; }\n      .conv-detail .conv-header .actions button:disabled {\n        cursor: not-allowed; }\n      .conv-detail .conv-header .actions button .iconfont {\n        color: #9ea1a2;\n        line-height: 18px;\n        height: 18px;\n        font-size: 18px; }\n      .conv-detail .conv-header .actions button .iconfont {\n        font-size: 20px; }\n  .conv-detail .conv-container {\n    overflow: hidden;\n    flex: 1; }\n    .conv-detail .conv-container:hover {\n      overflow-y: auto;\n      overflow-y: overlay; }\n    .conv-detail .conv-container .get-more-log-btn {\n      font-size: 14px;\n      background-color: transparent;\n      border: 0;\n      cursor: pointer;\n      color: #705949;\n      padding: 0 2px;\n      margin: 4px 6px;\n      outline: 0;\n      position: relative;\n      user-select: none;\n      display: block;\n      text-align: center;\n      width: 100%;\n      padding: 0;\n      margin: 10px 0;\n      font-size: 12px; }\n      .conv-detail .conv-container .get-more-log-btn:disabled {\n        cursor: not-allowed;\n        color: #999999; }\n      .conv-detail .conv-container .get-more-log-btn:enabled:after {\n        content: ' ';\n        position: absolute;\n        border-top: 1px solid #705949;\n        bottom: 0;\n        transition: all 0.2s ease-in-out;\n        left: 0;\n        width: 0; }\n      .conv-detail .conv-container .get-more-log-btn:enabled:hover:after, .conv-detail .conv-container .get-more-log-btn:enabled:active:after, .conv-detail .conv-container .get-more-log-btn:enabled.active:after {\n        border-top: 1px solid #705949;\n        width: 100%; }\n      .conv-detail .conv-container .get-more-log-btn:after {\n        width: 0 !important; }\n    .conv-detail .conv-container .msg-items {\n      padding: 4px 16px 16px 16px; }\n",""])},function(e,exports,t){var n=t(600);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,'.tab {\n  display: flex;\n  flex-direction: column; }\n  .tab .tab-nav {\n    display: flex;\n    margin-bottom: 10px; }\n    .tab .tab-nav .tab-item {\n      flex: 1;\n      text-align: center;\n      line-height: 44px;\n      position: relative;\n      color: #999999;\n      cursor: pointer; }\n      .tab .tab-nav .tab-item:after {\n        content: " ";\n        position: absolute;\n        left: 10%;\n        bottom: 0;\n        right: 10%;\n        border-bottom: 2px solid transparent; }\n      .tab .tab-nav .tab-item:hover:after {\n        border-bottom-color: #999999; }\n      .tab .tab-nav .tab-item.active {\n        color: #705949; }\n        .tab .tab-nav .tab-item.active:after {\n          border-bottom-color: #705949; }\n      .tab .tab-nav .tab-item .tab-label .iconfont {\n        margin-right: 2px; }\n  .tab .tab-content {\n    flex: 1; }\n    .tab .tab-content > div {\n      display: none; }\n      .tab .tab-content > div.active {\n        display: block; }\n',""])},function(e,exports,t){"use strict";var n=t(61);e.exports={isUserUUID:function(e){return n.v1(e)},isGroupUUID:function(e){return n.v4(e)}}},function(e,exports,t){var n=t(603);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".conv-item {\n  display: flex;\n  height: 55px;\n  padding: 8px 0;\n  cursor: pointer;\n  position: relative; }\n  .conv-item.active {\n    background-color: #FBF5F1; }\n  .conv-item:hover {\n    background-color: #FBF5F1; }\n    .conv-item:hover .close {\n      opacity: 1; }\n  .conv-item.hide-close-btn {\n    padding-left: 13px; }\n  .conv-item.unread:before {\n    content: ' ';\n    width: 8px;\n    height: 8px;\n    background-color: #ff8673;\n    position: absolute;\n    border-radius: 50%;\n    left: 42px;\n    bottom: 9px; }\n  .conv-item .close {\n    line-height: 39px;\n    width: 13px;\n    text-align: center;\n    opacity: 0;\n    color: #7d7d7e; }\n    .conv-item .close .iconfont {\n      font-size: 10px; }\n  .conv-item .icon {\n    min-width: 38px;\n    width: 38px;\n    height: 38px;\n    overflow: hidden;\n    display: inline-block;\n    border-radius: 50%;\n    margin-right: 7px; }\n    .conv-item .icon > img {\n      width: 100%;\n      height: 100%; }\n  .conv-item .body {\n    flex-direction: column;\n    flex: 1;\n    min-width: 0; }\n    .conv-item .body p {\n      margin: 0;\n      padding: 0; }\n    .conv-item .body .title {\n      display: flex;\n      justify-content: space-between;\n      font-size: 13px;\n      padding-right: 4px; }\n      .conv-item .body .title p {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        flex: 1; }\n      .conv-item .body .title span {\n        color: #BDBEBF;\n        font-size: 12px; }\n    .conv-item .body .content {\n      flex: 1;\n      font-size: 12px;\n      color: #777;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap; }\n",""])},function(e,exports,t){var n=t(605);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".converse .list {\n  overflow: hidden;\n  user-select: none;\n  width: 240px;\n  background-color: #FFFBF8;\n  border-right: 1px solid #DDDCDD; }\n  .converse .list:hover {\n    overflow-y: auto;\n    overflow-y: overlay; }\n  .converse .list .converses-list .converses-tip {\n    margin-top: 40px;\n    font-size: 14px;\n    color: #999999;\n    text-align: center; }\n\n.converse .detail {\n  flex: 1;\n  display: flex; }\n  .converse .detail .nocontent {\n    display: flex;\n    flex: 1;\n    flex-direction: column; }\n    .converse .detail .nocontent .nocontent-img {\n      flex: 1;\n      display: flex;\n      align-items: center;\n      justify-content: center; }\n      .converse .detail .nocontent .nocontent-img img {\n        max-width: 380px;\n        max-height: 380px;\n        opacity: 0.6; }\n    .converse .detail .nocontent .welcome {\n      text-align: center;\n      padding-bottom: 60px; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(7),u=t(5),d=u.showProfileCard,f=u.switchMenuPannel,p=t(607),m=t(274),h=t(610),g=t(614),v=t(646),b=t(674);t(704);var y=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.menus=[{icon:"&#xe63e;",activeIcon:"&#xe63e;",text:"消息",component:a.createElement(m,null)},{icon:"&#xe61b;",activeIcon:"&#xe61b;",text:"人物卡",component:a.createElement(h,null)},{icon:"&#xe958;",activeIcon:"&#xe958;",text:"团",component:a.createElement(g,null)},{icon:"&#xe624;",activeIcon:"&#xe624;",text:"记事本",component:a.createElement(v,null)}],o}return o(t,e),i(t,[{key:"_handleSwitchMenu",value:function(e){this.props.dispatch(f(e,this.menus[e].component))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.avatar,o=t.selectedMenu;return a.createElement("div",{className:n},a.createElement("div",{className:"sidebar"},a.createElement("div",{className:"profile"},a.createElement("div",{className:"avatar",onClick:function(){return e.props.dispatch(d())}},a.createElement("img",{src:r||l.defaultImg.user}))),a.createElement("div",{className:"menus"},this.menus.map(function(t,n){return a.createElement("a",{key:"menu-"+n,className:o===n?"active":"",onClick:function(){return e._handleSwitchMenu(n)}},a.createElement("i",{className:"iconfont",dangerouslySetInnerHTML:{__html:o===n?t.icon:t.activeIcon}}),a.createElement("span",null,t.text))})),a.createElement(b,null)),a.createElement("div",{className:"menu-panel"},this.props.selectedPannel||this.menus[o].component||null,a.createElement(p,null)))}}]),t}(a.Component);e.exports=s(function(e){return{avatar:e.getIn(["user","info","avatar"]),selectedMenu:e.getIn(["ui","menuIndex"]),selectedPannel:e.getIn(["ui","menuPannel"])}})(y)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof("function"==typeof Symbol?Symbol.iterator:"@@iterator")?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==("function"==typeof Symbol?Symbol.prototype:"@@prototype")?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=t(1),s=t(4),l=s.connect,u=t(5),d=u.hideSlidePanel;t(608);var f=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.slideEvent=function(){window.removeEventListener("click",o.slideEvent),o.props.dispatch(d())},o}return o(t,e),a(t,[{key:"componentWillUpdate",value:function(e,t){var n=this;!1===this.props.isSlidePanelShow&&!0===e.isSlidePanelShow&&setTimeout(function(){window.addEventListener("click",n.slideEvent)},500)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.slideEvent)}},{key:"_handleHideSlidePanel",value:function(){this.props.dispatch(d()),window.removeEventListener("click",this.slideEvent)}},{key:"render",value:function(){var e=this;return c.createElement("div",{className:"slide-panel"+(this.props.isSlidePanelShow?"":" hide"),onClick:function(e){e.stopPropagation()}},c.createElement("div",{className:"header"},c.createElement("div",{className:"title"},this.props.slidePanelTitle),c.createElement("div",{className:"close",onClick:function(){return e._handleHideSlidePanel()}},c.createElement("i",{className:"iconfont"},""))),c.createElement("div",{className:"content"},this.props.slidePanelContent))}}]),t}(c.Component);e.exports=l(function(e){var t=e.getIn(["ui","showSlidePanelInfo","content"]);return"object"===(void 0===t?"undefined":i(t))&&(t=t.toJS()),{isSlidePanelShow:e.getIn(["ui","showSlidePanel"]),slidePanelTitle:e.getIn(["ui","showSlidePanelInfo","title"]),slidePanelContent:t}})(f)},function(e,exports,t){var n=t(609);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".slide-panel {\n  box-shadow: 0 7px 21px rgba(0, 0, 0, 0.25);\n  position: absolute;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  width: 360px;\n  height: 100%;\n  background-color: white;\n  transition-duration: 0.5s;\n  display: flex;\n  flex-direction: column !important; }\n  .slide-panel.hide {\n    right: -380px; }\n  .slide-panel .header {\n    height: 50px;\n    border-bottom: 1px solid #DDDCDD;\n    position: relative;\n    line-height: 50px; }\n    .slide-panel .header .title {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      text-align: center; }\n    .slide-panel .header .close {\n      background-color: transparent;\n      border: 0;\n      outline: 0;\n      cursor: pointer;\n      color: #9ea1a2;\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      width: 30px; }\n      .slide-panel .header .close:not(:disabled):hover, .slide-panel .header .close:not(:disabled):active, .slide-panel .header .close:not(:disabled).active {\n        color: #7e3f12; }\n        .slide-panel .header .close:not(:disabled):hover .iconfont, .slide-panel .header .close:not(:disabled):active .iconfont, .slide-panel .header .close:not(:disabled).active .iconfont {\n          color: #7e3f12; }\n      .slide-panel .header .close:disabled {\n        cursor: not-allowed; }\n      .slide-panel .header .close .iconfont {\n        color: #9ea1a2;\n        line-height: 18px;\n        height: 18px;\n        font-size: 18px; }\n      .slide-panel .header .close .iconfont {\n        font-size: 24px;\n        vertical-align: middle; }\n  .slide-panel .content {\n    flex: 1;\n    overflow: hidden; }\n    .slide-panel .content:hover {\n      overflow-y: auto;\n      overflow-y: overlay; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(57),u=t(281),d=t(611),f=t(5),p=f.showModal,m=f.showAlert,h=t(23),g=h.selectActor,v=h.removeActor,b=h.selectTemplate;t(612);var y=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"_handleAddNewActor",value:function(){this.props.selectActor(""),this.props.showModal(a.createElement(l,null))}},{key:"_handleRemoveActor",value:function(e){var t=this;this.props.selectActor(""),this.props.showAlert({content:"你确定要删除该人物卡么？删除后无法找回",onConfirm:function(){return t.props.removeActor(e)}})}},{key:"_handleEditActor",value:function(e,t){var n=this;this.props.selectActor(e),d.getTemplate(t,function(e){n.props.selectTemplate(e),n.props.showModal(a.createElement(u,null))})}},{key:"getActorList",value:function(){var e=this;return this.props.actors.map(function(t,n){var r=t.get("uuid"),o={backgroundImage:"url("+t.get("avatar")+")"},i=t.get("name"),c=t.get("desc"),s=t.get("template_uuid");return a.createElement("div",{className:"actor-card",key:r+"-"+n},a.createElement("div",{className:"avatar",style:o}),a.createElement("div",{className:"profile"},a.createElement("p",null,a.createElement("span",null,"角色:"),a.createElement("span",{title:i},i)),a.createElement("p",null,a.createElement("span",null,"说明:"),a.createElement("span",{title:c},c)),a.createElement("p",{className:"action"},a.createElement("button",{onClick:function(){return e._handleRemoveActor(r)}},"删除"),a.createElement("button",{onClick:function(){return e._handleEditActor(r,s)}},"编辑"),a.createElement("button",{onClick:function(){return e.props.selectActor(r)}},"查看"))))})}},{key:"getActorInfo",value:function(){var e=void 0,t=!0,n=!1,r=void 0;try{for(var o,i=this.props.actors["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(t=(o=i.next()).done);t=!0){var c=o.value;if(c.get("uuid")===this.props.selectedActorUUID){e=c;break}}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}return e?a.createElement("div",null,a.createElement("p",null,a.createElement("span",null,"人物卡:"),a.createElement("span",null,e.get("name"))),a.createElement("p",null,a.createElement("span",null,"背景:"),a.createElement("span",null,e.get("desc"))),e.get("info").entrySeq().map(function(t,n){return a.createElement("p",{key:e.get("uuid")+n},a.createElement("span",null,t[0],":"),a.createElement("span",null,t[1]))})):a.createElement("div",{className:"no-content"},"没有信息")}},{key:"render",value:function(){var e=this,t=a.createElement("div",{className:"actor-card"},a.createElement("div",{className:"actor-card-new",onClick:function(){return e._handleAddNewActor()}},a.createElement("i",{className:"iconfont"},""),a.createElement("span",null,"添加新人物")));return a.createElement("div",{className:"actor"},a.createElement("div",{className:"actor-list"},a.createElement("div",{className:"actor-list-collection"},this.getActorList(),t)),a.createElement("div",{className:"actor-info"},this.getActorInfo()))}}]),t}(a.Component);e.exports=s(function(e){return{actors:e.getIn(["actor","selfActors"]),selectedActorUUID:e.getIn(["actor","selectedActorUUID"])}},function(e){return{showModal:function(t){return e(p(t))},showAlert:function(){return e(m.apply(void 0,arguments))},selectActor:function(t){return e(g(t))},removeActor:function(t){return e(v(t))},selectTemplate:function(t){return e(b(t))}}})(y)},function(e,exports,t){"use strict";var n=t(22),r=n.getInstance();exports.getTemplate=function(e,t){e&&r.emit("actor::getTemplate",{uuid:e},function(e){e.result&&t(e.template)})}},function(e,exports,t){var n=t(613);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".actor {\n  display: flex; }\n  .actor .actor-list {\n    overflow: hidden;\n    flex: 1; }\n    .actor .actor-list:hover {\n      overflow-y: auto;\n      overflow-y: overlay; }\n    .actor .actor-list .actor-list-collection {\n      flex: 1;\n      display: flex;\n      flex-wrap: wrap;\n      width: 100%;\n      justify-content: space-between;\n      align-content: flex-start;\n      padding: 24px 18px; }\n      .actor .actor-list .actor-list-collection .actor-card {\n        display: flex;\n        width: 280px;\n        height: 120px;\n        background-color: white;\n        border-radius: 4px;\n        overflow: hidden;\n        margin-bottom: 14px;\n        box-shadow: rgba(0, 0, 0, 0.15) 0 0 6px;\n        border: 1px solid #DDDCDD;\n        padding: 10px 6px; }\n        .actor .actor-list .actor-list-collection .actor-card:hover {\n          box-shadow: rgba(0, 0, 0, 0.5) 0 0 6px; }\n        .actor .actor-list .actor-list-collection .actor-card .avatar {\n          display: flex;\n          height: 100%;\n          width: 80px;\n          overflow: hidden;\n          align-items: center;\n          justify-content: center;\n          border: 1px solid #DDDCDD;\n          background-position: center;\n          background-size: cover; }\n          .actor .actor-list .actor-list-collection .actor-card .avatar img {\n            width: 100%;\n            height: auto; }\n        .actor .actor-list .actor-list-collection .actor-card .profile {\n          flex: 1;\n          margin-left: 5px;\n          font-size: 12px;\n          display: flex;\n          flex-direction: column; }\n          .actor .actor-list .actor-list-collection .actor-card .profile p {\n            margin: 0;\n            display: flex;\n            height: auto;\n            user-select: none;\n            cursor: default; }\n            .actor .actor-list .actor-list-collection .actor-card .profile p:nth-child(2) {\n              flex: 1; }\n            .actor .actor-list .actor-list-collection .actor-card .profile p span:nth-child(1) {\n              color: #666666;\n              word-break: keep-all;\n              margin-right: 2px; }\n            .actor .actor-list .actor-list-collection .actor-card .profile p span:nth-child(2) {\n              float: left;\n              flex: 1;\n              word-break: break-all;\n              text-align: left;\n              color: #222222;\n              display: -webkit-box;\n              -webkit-box-orient: vertical;\n              -webkit-line-clamp: 3;\n              overflow: hidden;\n              max-height: 4.2em; }\n            .actor .actor-list .actor-list-collection .actor-card .profile p.action {\n              justify-content: flex-end; }\n              .actor .actor-list .actor-list-collection .actor-card .profile p.action button {\n                font-size: 14px;\n                background-color: transparent;\n                border: 0;\n                cursor: pointer;\n                color: #705949;\n                padding: 0 2px;\n                margin: 4px 6px;\n                outline: 0;\n                position: relative;\n                user-select: none;\n                font-size: 12px; }\n                .actor .actor-list .actor-list-collection .actor-card .profile p.action button:disabled {\n                  cursor: not-allowed;\n                  color: #999999; }\n                .actor .actor-list .actor-list-collection .actor-card .profile p.action button:enabled:after {\n                  content: ' ';\n                  position: absolute;\n                  border-top: 1px solid #705949;\n                  bottom: 0;\n                  transition: all 0.2s ease-in-out;\n                  left: 0;\n                  width: 0; }\n                .actor .actor-list .actor-list-collection .actor-card .profile p.action button:enabled:hover:after, .actor .actor-list .actor-list-collection .actor-card .profile p.action button:enabled:active:after, .actor .actor-list .actor-list-collection .actor-card .profile p.action button:enabled.active:after {\n                  border-top: 1px solid #705949;\n                  width: 100%; }\n        .actor .actor-list .actor-list-collection .actor-card .actor-card-new {\n          display: flex;\n          flex: 1;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          color: #999999;\n          transition: all 0.1s ease-in-out;\n          user-select: none; }\n          .actor .actor-list .actor-list-collection .actor-card .actor-card-new:hover {\n            color: #222222; }\n  .actor .actor-info {\n    width: 300px;\n    background-color: #FFFBF8;\n    border-left: 1px solid #DDDCDD;\n    padding: 10px;\n    overflow: hidden; }\n    .actor .actor-info:hover {\n      overflow-y: auto;\n      overflow-y: overlay; }\n    .actor .actor-info p {\n      margin: 0;\n      display: flex;\n      height: auto; }\n      .actor .actor-info p:nth-child(2) {\n        flex: 1; }\n      .actor .actor-info p span:nth-child(1) {\n        color: #666666;\n        word-break: keep-all;\n        margin-right: 2px; }\n      .actor .actor-info p span:nth-child(2) {\n        float: left;\n        flex: 1;\n        word-break: break-all;\n        text-align: left;\n        color: #222222; }\n    .actor .actor-info .no-content {\n      text-align: center;\n      margin-top: 120px;\n      color: #666666;\n      user-select: none; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(7),u=t(283),d=t(56),f=t(11),p=f.switchSelectGroup,m=t(615);t(644);var h=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={inputMsg:"",inputType:"normal",isSlidePanelShow:!1,slidePanelTitle:"",slidePanelContent:null,selectedActorUUID:"uuiduuid"},o}return o(t,e),i(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.sildeEvent),this.sildeEvent=null}},{key:"getGroupList",value:function(){var e=this;return this.props.groups.map(function(t,n){var r=t.get("uuid"),o=e.props.converses.getIn([r,"lastTime"]),i=e.props.converses.getIn([r,"lastMsg"]),c=e.props.converses.getIn([r,"unread"]);return a.createElement(u,{key:r+"#"+n,icon:t.get("avatar")||l.defaultImg.group,title:t.get("name"),content:i,time:o?d.getShortDiff(o):"",uuid:r,unread:c,isSelected:e.props.selectedUUID===r,onClick:function(){return e.props.switchSelectGroup(r)},hideCloseBtn:!0})})}},{key:"render",value:function(){return a.createElement("div",{className:"group"},a.createElement("div",{className:"list"},this.getGroupList()),this.props.selectedUUID?a.createElement(m,null):a.createElement("div",{className:"none-select-group"},a.createElement("i",{className:"iconfont"},""),a.createElement("div",{className:"welcome"},"一直在跑团，从来不咕咕...大概")))}}]),t}(a.Component);e.exports=s(function(e){return{groups:e.getIn(["group","groups"]),selectedUUID:e.getIn(["group","selectedGroupUUID"]),converses:e.getIn(["chat","converses"])}},function(e){return{switchSelectGroup:function(t){return e(p(t))}}})(h)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(7),u=t(15),d=t(26),f=t(5),p=f.showModal,m=f.hideModal,h=f.showAlert,g=f.showSlidePanel,v=t(16),b=v.sendMsg,y=t(11),x=y.changeSelectGroupActor,w=t(74),E=w.sendDiceRequest,_=w.sendDiceInvite,S=t(616),k=t(619),C=t(625),T=t(631),I=t(275),D=t(276),R=t(639),O=t(285),N=t(277),U=t(278),A=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"_handleSelectGroupActor",value:function(e){e.value!==this.props.selectedGroupActorUUID&&this.props.dispatch(x(this.props.selectedUUID,e.value))}},{key:"_handleSendMsg",value:function(e,t){this.props.dispatch(b(null,{converse_uuid:this.props.selectedUUID,message:e,is_public:!0,is_group:!0,type:t}))}},{key:"_handleSendDiceReq",value:function(){var e=this;this.props.dispatch(p(a.createElement(I,{onSendDiceRequest:function(t,n){e.props.dispatch(E(e.props.selectedUUID,!0,n,t)),e.props.dispatch(m())}})))}},{key:"_handleSendDiceInv",value:function(){var e=this,t=this.props.usercache,n=this.props.groupInfo.get("group_members"),r=n.filter(function(t){return t!==e.props.userUUID}).map(function(e){return{name:t.getIn([e,"nickname"])||t.getIn([e,"username"]),uuid:t.getIn([e,"uuid"])}});this.props.dispatch(p(a.createElement(R,{list:r.map(function(e){return e.name}),onListSelect:function(t){var n=r.filter(function(e,n){return t.indexOf(n)>=0}).toJS(),o=n.map(function(e){return e.name}),i=n.map(function(e){return e.uuid});if(0===o.length)return void e.props.dispatch(h("请选择邀请对象"));e.props.dispatch(p(a.createElement(D,{inviteList:o,onSendDiceInvite:function(t,n){var r=e.props.selectedUUID;e.props.dispatch(_(r,!0,n,t,i,o)),e.props.dispatch(m())}})))}})))}},{key:"getHeaderActions",value:function(){var e=this;return[{name:"添加团员",icon:"&#xe61c;",component:a.createElement(S,null)},{name:"查看团员",icon:"&#xe603;",component:a.createElement(C,null)},{name:"游戏地图",icon:"&#xe6d7;",component:a.createElement(O,null)},{name:"游戏规则",icon:"&#xe621;",component:a.createElement(O,null)},{name:"人物卡",icon:"&#xe61b;",component:a.createElement(k,null)},{name:"团信息",icon:"&#xe611;",component:a.createElement(T,null)}].map(function(t,n){return a.createElement("button",{key:"group-action-"+n,"data-tip":t.name,onClick:function(n){n.stopPropagation(),e.props.dispatch(g(t.name,t.component))}},a.createElement("i",{className:"iconfont",dangerouslySetInnerHTML:{__html:t.icon}}))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.selfGroupActors,r=t.selectedGroupActorUUID,o=t.groupInfo,i=[];return n&&n.size>0&&(i=n.map(function(e,t){return{value:e.get("uuid"),label:e.getIn(["actor","name"])}}).toJS()),r&&i.unshift({value:null,label:"取消选择"}),a.createElement("div",{className:"detail"},a.createElement(d,{effect:"solid"}),a.createElement("div",{className:"group-header"},a.createElement("div",{className:"avatar"},a.createElement("img",{src:o.get("avatar")||l.defaultImg.group})),a.createElement("div",{className:"title"},a.createElement("div",{className:"main-title"},o.get("name"),o.get("status")&&"(开团中...)"),a.createElement("div",{className:"sub-title"},o.get("sub_name"))),a.createElement(u,{name:"actor-select",className:"group-actor-select",value:r,options:i,clearable:!1,searchable:!1,placeholder:"请选择身份卡",noResultsText:"暂无身份卡...",onChange:function(t){return e._handleSelectGroupActor(t)}}),a.createElement("div",{className:"actions"},this.getHeaderActions())),a.createElement(N,{className:"group-content",converseUUID:this.props.selectedUUID,isGroup:!0}),a.createElement(U,{converseUUID:this.props.selectedUUID,isGroup:!0,onSendMsg:function(t,n){return e._handleSendMsg(t,n)},onSendDiceReq:function(){return e._handleSendDiceReq()},onSendDiceInv:function(){return e._handleSendDiceInv()}}))}}]),t}(a.Component);e.exports=s(function(e){var t=e.getIn(["group","selectedGroupUUID"]),n=e.getIn(["group","groups"]).find(function(e){return e.get("uuid")===t}),r=e.getIn(["actor","selfActors"]).map(function(e){return e.get("uuid")});return{selectedUUID:t,groupInfo:n,msgList:e.getIn(["chat","converses",t,"msgList"]).sortBy(function(e){return e.get("date")}),userUUID:e.getIn(["user","info","uuid"]),usercache:e.getIn(["cache","user"]),selfGroupActors:n.get("group_actors").filter(function(e){return e.get("enabled")&&r.indexOf(e.get("actor_uuid"))>=0}),selectedGroupActorUUID:n.getIn(["extra","selected_group_actor_uuid"])}})(A)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(7),u=t(26),d=t(11),f=d.sendGroupInvite,p=t(27),m=p.getUserInfoCache;t(617);var h=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={selectedUUIDs:[]},o}return o(t,e),i(t,[{key:"_handleSelect",value:function(e){var t=this.state.selectedUUIDs,n=t.indexOf(e);n>=0?(t.splice(n,1),this.setState({selectedUUIDs:t})):(t.push(e),this.setState({selectedUUIDs:t}))}},{key:"_handleSendGroupInvite",value:function(){var e=this.props.selectedGroupUUID,t=!0,n=!1,r=void 0;try{for(var o,i=this.state.selectedUUIDs["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.props.sendGroupInvite(e,a)}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"group-invite"},a.createElement(u,{effect:"solid"}),a.createElement("div",{className:"friend-list"},this.props.friendList.map(function(t){if(!(e.props.groupMembers.indexOf(t)>=0)){var n=m(t);return a.createElement("div",{key:"group-invite#friend#"+t,className:"item"+(e.state.selectedUUIDs.indexOf(t)>=0?" active":""),onClick:function(){return e._handleSelect(t)},"data-tip":n.get("nickname")||n.get("username")},a.createElement("div",{className:"avatar"},a.createElement("img",{src:n.get("avatar")||l.defaultImg.user})),a.createElement("div",{className:"mask"}))}})),a.createElement("i",{className:"iconfont"},""),a.createElement("div",{className:"invite-list"},this.props.groupMembers.map(function(e){var t=m(e);return a.createElement("div",{key:"group-invite#groupMembers#"+e,className:"item-solid",onClick:function(){},"data-tip":t.get("nickname")||t.get("username")},a.createElement("div",{className:"avatar"},a.createElement("img",{src:t.get("avatar")||l.defaultImg.user})),a.createElement("div",{className:"mask"}))})),a.createElement("button",{onClick:function(){return e._handleSendGroupInvite()}},"发送邀请"))}}]),t}(a.Component);e.exports=s(function(e){var t=e.getIn(["group","selectedGroupUUID"]),n=e.getIn(["group","groups"]).find(function(e){return e.get("uuid")===t});return{usercache:e.getIn(["cache","user"]),friendList:e.getIn(["user","friendList"]),selectedGroupUUID:t,groupInfo:n,groupMembers:n.get("group_members")}},function(e){return{sendGroupInvite:function(t,n){return e(f(t,n))}}})(h)},function(e,exports,t){var n=t(618);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,"@charset \"UTF-8\";\n.group-invite {\n  padding: 20px;\n  text-align: center; }\n  .group-invite .friend-list, .group-invite .invite-list {\n    border: 1px solid #DDDCDD;\n    border-radius: 3px;\n    width: 100%;\n    height: 180px;\n    margin: 6px 0;\n    overflow: hidden;\n    padding: 10px;\n    display: flex;\n    align-items: flex-start;\n    justify-content: flex-start; }\n    .group-invite .friend-list:hover, .group-invite .invite-list:hover {\n      overflow-y: auto;\n      overflow-y: overlay; }\n    .group-invite .friend-list .item, .group-invite .friend-list .item-solid, .group-invite .invite-list .item, .group-invite .invite-list .item-solid {\n      position: relative;\n      width: 44px;\n      height: 44px;\n      overflow: hidden;\n      border-radius: 50%;\n      cursor: pointer;\n      border: 3px solid transparent;\n      margin: 4px;\n      user-select: none; }\n      .group-invite .friend-list .item .avatar img, .group-invite .friend-list .item-solid .avatar img, .group-invite .invite-list .item .avatar img, .group-invite .invite-list .item-solid .avatar img {\n        width: 100%;\n        height: 100%;\n        display: block; }\n      .group-invite .friend-list .item .mask, .group-invite .friend-list .item-solid .mask, .group-invite .invite-list .item .mask, .group-invite .invite-list .item-solid .mask {\n        opacity: 0;\n        background-color: rgba(0, 0, 0, 0.4);\n        position: absolute;\n        left: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center; }\n        .group-invite .friend-list .item .mask:before, .group-invite .friend-list .item-solid .mask:before, .group-invite .invite-list .item .mask:before, .group-invite .invite-list .item-solid .mask:before {\n          content: \"\\6DFB\\52A0\";\n          color: white;\n          font-size: 12px; }\n    .group-invite .friend-list .item:not(.active):hover .mask, .group-invite .invite-list .item:not(.active):hover .mask {\n      opacity: 1; }\n    .group-invite .friend-list .item.active, .group-invite .invite-list .item.active {\n      border-color: #8C6244;\n      display: flex;\n      justify-content: center;\n      align-items: center; }\n      .group-invite .friend-list .item.active:before, .group-invite .invite-list .item.active:before {\n        content: '\\E620';\n        font-family: 'iconfont';\n        position: absolute;\n        z-index: 2;\n        color: #8C6244;\n        font-size: 26px;\n        -webkit-text-stroke: 1px #1b1b1b; }\n  .group-invite .iconfont {\n    color: #666666; }\n  .group-invite button {\n    font-size: 16px;\n    border: 0;\n    cursor: pointer;\n    color: white;\n    border-radius: 3px;\n    background-color: #999;\n    padding: 6px 12px;\n    outline: 0;\n    user-select: none; }\n    .group-invite button:hover, .group-invite button:active, .group-invite button.active {\n      background-color: #705949; }\n    .group-invite button:disabled {\n      cursor: not-allowed;\n      background-color: #999999; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(23),u=l.selectActor,d=t(5),f=d.showAlert,p=d.showModal,m=t(11),h=m.addGroupActor,g=m.removeGroupActor,v=t(26),b=t(44),y=t(282),x=y.TabsController,w=y.Tab,E=t(12),_=t(76),S=t(279),k=t(620);t(623);var C=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"_handleSendGroupActorCheck",value:function(){var e=this;this.props.selectedGroupUUID||f("请选择一个团来提交您的人物"),this.props.showModal(a.createElement(S,{onSelect:function(t){e.props.addGroupActor(e.props.selectedGroupUUID,t)}}))}},{key:"_handleShowActorProfile",value:function(e,t){e&&this.props.showModal(a.createElement(E,{title:"人物属性"},a.createElement(_,{actor:e,overwritedActorData:t})))}},{key:"_handleApprove",value:function(e){e&&this.props.showModal(a.createElement(k,{groupActor:e}))}},{key:"_handleRemoveGroupActor",value:function(e){var t=this;this.props.showAlert({content:"你确定要删除该人物卡么？删除后无法找回",onConfirm:function(){return t.props.removeGroupActor(t.props.selectedGroupUUID,e)}})}},{key:"getGroupActorsList",value:function(){var e=this,t=this.props.groupInfo.get("group_actors");return t&&t.size>0?t.filter(function(e){return!0===e.get("passed")}).map(function(t){var n=t.get("actor"),r=n.get("info").merge(t.get("actor_info")),o=e.props.templateCache.get(n.get("template_uuid")),i=[];if(o){var c=b.parse(o.get("info"));c.setData(r),i=c.getCells()}var s=i.map(function(e){return e.visibility?"<p>"+e.name+": "+e.value+"</p>":null});return s=s.join(""),a.createElement("div",{key:"group-actor#"+t.get("uuid"),className:"group-actor-item","data-html":"true","data-tip":s,"data-for":"group-actor-info-tip"},a.createElement("div",{className:"avatar",style:{backgroundImage:"url("+(t.get("avatar")||n.get("avatar"))+")"}}),a.createElement("div",{className:"info"},t.get("uuid")===e.props.groupInfo.getIn(["extra","selected_group_actor_uuid"])?a.createElement("div",{className:"label"},"使用中"):null,a.createElement("div",{className:"name"},n.get("name")),a.createElement("div",{className:"desc"},n.get("desc")),a.createElement("div",{className:"action"},a.createElement("button",{"data-tip":"查询","data-for":"group-actor-action-tip",onClick:function(){return e._handleShowActorProfile(n.toJS())}},a.createElement("i",{className:"iconfont"},"")),a.createElement("button",{"data-tip":"删除","data-for":"group-actor-action-tip",onClick:function(){return e._handleRemoveGroupActor(t.get("uuid"))}},a.createElement("i",{className:"iconfont"},"")))))}):a.createElement("div",{className:"no-content"},"暂无卡片")}},{key:"getGroupActorChecksList",value:function(){var e=this,t=this.props.groupInfo.get("group_actors");return t&&t.size>0?t.filter(function(e){return!1===e.get("passed")}).map(function(t){var n=t.get("actor"),r=t.get("actor_info");return a.createElement("div",{key:"group-actor-check#"+t.get("uuid"),className:"group-actor-check-item"},a.createElement("div",{className:"avatar",style:{backgroundImage:"url("+n.get("avatar")+")"}}),a.createElement("div",{className:"info"},a.createElement("div",{className:"name"},n.get("name")),a.createElement("div",{className:"desc"},n.get("desc")),a.createElement("div",{className:"action"},a.createElement("button",{"data-tip":"查询","data-for":"group-actor-action-tip",onClick:function(){return e._handleShowActorProfile(n.toJS(),r.toJS())}},a.createElement("i",{className:"iconfont"},"")),a.createElement("button",{"data-tip":"审批","data-for":"group-actor-action-tip",onClick:function(){return e._handleApprove(t.toJS())}},a.createElement("i",{className:"iconfont"},"")))))}):a.createElement("div",{className:"no-content"},"暂无卡片")}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"group-actor"},a.createElement(v,{effect:"solid",place:"top",id:"group-actor-action-tip",class:"group-actor-info"}),a.createElement(x,null,a.createElement(w,{name:"正式人物卡"},a.createElement("div",{className:"formal-actor"},a.createElement("div",{className:"group-actor-action"},a.createElement("button",{onClick:function(){return e._handleSendGroupActorCheck()}},a.createElement("i",{className:"iconfont"},""),"申请审核")),a.createElement(v,{effect:"solid",place:"left",id:"group-actor-info-tip",class:"group-actor-info"}),a.createElement("div",{className:"group-actor-items"},this.getGroupActorsList()))),a.createElement(w,{name:"待审人物卡"},a.createElement("div",{className:"reserve-actor"},a.createElement("div",{className:"group-actor-check-items"},this.getGroupActorChecksList())))))}}]),t}(a.Component);e.exports=s(function(e){var t=e.getIn(["group","selectedGroupUUID"]);return{selectedGroupUUID:t,groupInfo:e.getIn(["group","groups"]).find(function(e){return e.get("uuid")===t}),templateCache:e.getIn(["cache","template"])}},function(e){return{showAlert:function(){return e(f.apply(void 0,arguments))},showModal:function(){return e(p.apply(void 0,arguments))},selectActor:function(t){return e(u(t))},addGroupActor:function(t,n){return e(h(t,n))},removeGroupActor:function(t,n){return e(g(t,n))}}})(C)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=t(1),s=t(4),l=s.connect,u=t(6),d=t(12),f=t(76),p=t(11),m=p.agreeGroupActor,h=p.refuseGroupActor,g=p.updateGroupActorInfo;t(621);var v=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={editingData:e.groupActor.actor_info||{}},o}return o(t,e),a(t,[{key:"_handleAgree",value:function(){this.props.agreeGroupActor(this.props.selectedGroupUUID,this.props.groupActor.uuid)}},{key:"_handleRefuse",value:function(){this.props.refuseGroupActor(this.props.selectedGroupUUID,this.props.groupActor.uuid)}},{key:"_handleEditData",value:function(e,t){var n=i({},this.state.editingData);n[e]=t,this.setState({editingData:n})}},{key:"_handleSaveActorData",value:function(){var e={};for(var t in this.state.editingData)this.state.editingData[t]&&(e[t]=this.state.editingData[t]);this.props.updateGroupActorInfo(this.props.selectedGroupUUID,this.props.groupActor.uuid,e)}},{key:"render",value:function(){var e=this,t=this.props.groupActor,n=c.createElement("div",{className:"actions"},c.createElement("button",{onClick:function(){return e._handleSaveActorData()}},c.createElement("i",{className:"iconfont"},""),"保存"),c.createElement("button",{onClick:function(){return e._handleRefuse()}},c.createElement("i",{className:"iconfont"},""),"拒绝"),c.createElement("button",{onClick:function(){return e._handleAgree()}},c.createElement("i",{className:"iconfont"},""),"通过"));return c.createElement(d,{title:"人物审核",actions:n,className:"group-actor-check"},c.createElement(f,{actor:t.actor,canEdit:!0,editingData:this.state.editingData,onEditData:function(t,n){return e._handleEditData(t,n)}}))}}]),t}(c.Component);v.propTypes={groupActor:u.object.isRequired},e.exports=l(function(e){return{selectedGroupUUID:e.getIn(["group","selectedGroupUUID"])}},function(e){return{agreeGroupActor:function(){return e(m.apply(void 0,arguments))},refuseGroupActor:function(){return e(h.apply(void 0,arguments))},updateGroupActorInfo:function(){return e(g.apply(void 0,arguments))}}})(v)},function(e,exports,t){var n=t(622);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".group-actor-check .actions {\n  display: flex;\n  justify-content: center; }\n  .group-actor-check .actions button {\n    font-size: 16px;\n    border: 0;\n    cursor: pointer;\n    color: white;\n    border-radius: 3px;\n    background-color: #999;\n    padding: 6px 12px;\n    outline: 0;\n    user-select: none;\n    margin: 0 10px;\n    width: 120px; }\n    .group-actor-check .actions button:hover, .group-actor-check .actions button:active, .group-actor-check .actions button.active {\n      background-color: #705949; }\n    .group-actor-check .actions button:disabled {\n      cursor: not-allowed;\n      background-color: #999999; }\n    .group-actor-check .actions button .iconfont {\n      margin-right: 2px; }\n",""])},function(e,exports,t){var n=t(624);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".group-actor {\n  display: flex;\n  flex-direction: column;\n  flex: 1; }\n  .group-actor button {\n    font-size: 16px;\n    border: 0;\n    cursor: pointer;\n    color: white;\n    border-radius: 3px;\n    background-color: #999;\n    padding: 6px 12px;\n    outline: 0;\n    user-select: none; }\n    .group-actor button:hover, .group-actor button:active, .group-actor button.active {\n      background-color: #705949; }\n    .group-actor button:disabled {\n      cursor: not-allowed;\n      background-color: #999999; }\n  .group-actor .group-actor-action {\n    padding: 4px 10px; }\n  .group-actor .group-actor-items {\n    flex: 1;\n    padding: 0 10px;\n    overflow: hidden; }\n    .group-actor .group-actor-items:hover {\n      overflow-y: auto;\n      overflow-y: overlay; }\n    .group-actor .group-actor-items .group-actor-item {\n      height: 120px;\n      display: flex;\n      margin: 6px 0;\n      border-radius: 3px;\n      box-shadow: rgba(0, 0, 0, 0.15) 0 0 6px;\n      height: 120px;\n      padding: 10px;\n      position: relative;\n      overflow: hidden; }\n      .group-actor .group-actor-items .group-actor-item:hover {\n        box-shadow: rgba(0, 0, 0, 0.5) 0 0 6px; }\n      .group-actor .group-actor-items .group-actor-item .avatar {\n        width: 80px;\n        height: 100px;\n        margin-right: 8px;\n        background-size: cover;\n        background-position: center; }\n      .group-actor .group-actor-items .group-actor-item .info {\n        flex: 1;\n        overflow: hidden; }\n        .group-actor .group-actor-items .group-actor-item .info .label {\n          position: absolute;\n          top: 0;\n          right: 0;\n          font-size: 12px;\n          transform: rotate(45deg);\n          text-align: center;\n          background-color: #EC2121;\n          width: 200px;\n          margin-right: -85px;\n          margin-top: 8px;\n          color: white; }\n        .group-actor .group-actor-items .group-actor-item .info .name {\n          color: #222222; }\n        .group-actor .group-actor-items .group-actor-item .info .desc {\n          color: #999999; }\n        .group-actor .group-actor-items .group-actor-item .info .action {\n          position: absolute;\n          right: 0;\n          bottom: 0; }\n          .group-actor .group-actor-items .group-actor-item .info .action button {\n            background-color: transparent;\n            border: 0;\n            outline: 0;\n            cursor: pointer;\n            color: #9ea1a2; }\n            .group-actor .group-actor-items .group-actor-item .info .action button:not(:disabled):hover, .group-actor .group-actor-items .group-actor-item .info .action button:not(:disabled):active, .group-actor .group-actor-items .group-actor-item .info .action button:not(:disabled).active {\n              color: #7e3f12; }\n              .group-actor .group-actor-items .group-actor-item .info .action button:not(:disabled):hover .iconfont, .group-actor .group-actor-items .group-actor-item .info .action button:not(:disabled):active .iconfont, .group-actor .group-actor-items .group-actor-item .info .action button:not(:disabled).active .iconfont {\n                color: #7e3f12; }\n            .group-actor .group-actor-items .group-actor-item .info .action button:disabled {\n              cursor: not-allowed; }\n            .group-actor .group-actor-items .group-actor-item .info .action button .iconfont {\n              color: #9ea1a2;\n              line-height: 18px;\n              height: 18px;\n              font-size: 18px; }\n  .group-actor .group-actor-check-items {\n    flex: 1;\n    padding: 0 10px;\n    overflow: hidden; }\n    .group-actor .group-actor-check-items:hover {\n      overflow-y: auto;\n      overflow-y: overlay; }\n    .group-actor .group-actor-check-items .group-actor-check-item {\n      height: 120px;\n      display: flex;\n      margin: 6px 0;\n      border-radius: 3px;\n      box-shadow: rgba(0, 0, 0, 0.15) 0 0 6px;\n      height: 120px;\n      padding: 10px;\n      position: relative;\n      overflow: hidden; }\n      .group-actor .group-actor-check-items .group-actor-check-item:hover {\n        box-shadow: rgba(0, 0, 0, 0.5) 0 0 6px; }\n      .group-actor .group-actor-check-items .group-actor-check-item .avatar {\n        width: 80px;\n        height: 100px;\n        margin-right: 8px;\n        background-size: cover;\n        background-position: center; }\n      .group-actor .group-actor-check-items .group-actor-check-item .info {\n        flex: 1;\n        overflow: hidden; }\n        .group-actor .group-actor-check-items .group-actor-check-item .info .label {\n          position: absolute;\n          top: 0;\n          right: 0;\n          font-size: 12px;\n          transform: rotate(45deg);\n          text-align: center;\n          background-color: #EC2121;\n          width: 200px;\n          margin-right: -85px;\n          margin-top: 8px;\n          color: white; }\n        .group-actor .group-actor-check-items .group-actor-check-item .info .name {\n          color: #222222; }\n        .group-actor .group-actor-check-items .group-actor-check-item .info .desc {\n          color: #999999; }\n        .group-actor .group-actor-check-items .group-actor-check-item .info .action {\n          position: absolute;\n          right: 0;\n          bottom: 0; }\n          .group-actor .group-actor-check-items .group-actor-check-item .info .action button {\n            background-color: transparent;\n            border: 0;\n            outline: 0;\n            cursor: pointer;\n            color: #9ea1a2; }\n            .group-actor .group-actor-check-items .group-actor-check-item .info .action button:not(:disabled):hover, .group-actor .group-actor-check-items .group-actor-check-item .info .action button:not(:disabled):active, .group-actor .group-actor-check-items .group-actor-check-item .info .action button:not(:disabled).active {\n              color: #7e3f12; }\n              .group-actor .group-actor-check-items .group-actor-check-item .info .action button:not(:disabled):hover .iconfont, .group-actor .group-actor-check-items .group-actor-check-item .info .action button:not(:disabled):active .iconfont, .group-actor .group-actor-check-items .group-actor-check-item .info .action button:not(:disabled).active .iconfont {\n                color: #7e3f12; }\n            .group-actor .group-actor-check-items .group-actor-check-item .info .action button:disabled {\n              cursor: not-allowed; }\n            .group-actor .group-actor-check-items .group-actor-check-item .info .action button .iconfont {\n              color: #9ea1a2;\n              line-height: 18px;\n              height: 18px;\n              font-size: 18px; }\n  .group-actor .group-actor-info p {\n    margin: 6px 0; }\n  .group-actor .no-content {\n    text-align: center;\n    color: #666666;\n    margin-top: 50px; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(7),u=t(0),d=t(5),f=d.showModal,p=d.showProfileCard,m=t(626),h=t(27),g=h.getUserInfoCache;t(629);var v=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"_handleManageMember",value:function(e){this.props.showModal(a.createElement(m,{uuid:e}))}},{key:"getMemberList",value:function(){var e=this,t=this.props.groupInfo,n=t.get("managers_uuid").indexOf(this.props.userUUID)>=0;if(t.get("group_members"))return t.get("group_members").map(function(r){var o=g(r),i=o.get("last_login")?u(o.get("last_login")).format("YYYY-M-D HH:mm:ss"):"从未登录",c=t.get("managers_uuid").indexOf(r)>=0,s=t.get("owner_uuid")===r,d=s?"owner":c?"manager":"none";return a.createElement("tr",{key:"group-member#"+e.props.selectedGroupUUID+"#"+r,className:"group-member-item"},a.createElement("td",{className:"auth "+d},a.createElement("i",{className:"iconfont"},"")),a.createElement("td",{className:"avatar"},a.createElement("img",{src:o.get("avatar")||l.defaultImg.user})),a.createElement("td",{className:"name"},o.get("nickname")||o.get("username")),a.createElement("td",{className:"last-login"},i),a.createElement("td",{className:"actions"},n?a.createElement("button",{onClick:function(){return e._handleManageMember(r)}},a.createElement("i",{className:"iconfont"},"")):null,a.createElement("button",{onClick:function(){return e.props.showProfileCard(r)}},a.createElement("i",{className:"iconfont"},""))))})}},{key:"render",value:function(){return a.createElement("table",{className:"group-members",cellSpacing:"0",cellPadding:"0"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("td",null),a.createElement("td",null,"头像"),a.createElement("td",null,"名字"),a.createElement("td",null,"上次登录"),a.createElement("td",null,"操作"))),a.createElement("tbody",null,this.getMemberList()))}}]),t}(a.Component);e.exports=s(function(e){return{userUUID:e.getIn(["user","info","uuid"]),selectedGroupUUID:e.getIn(["group","selectedGroupUUID"]),groupInfo:e.getIn(["group","groups"]).find(function(t){return t.get("uuid")===e.getIn(["group","selectedGroupUUID"])}),usercache:e.getIn(["cache","user"])}},function(e){return{showModal:function(t){return e(f(t))},showProfileCard:function(t){return e(p(t))}}})(v)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(11),u=l.tickMember,d=l.setMemberToManager,f=t(12),p=t(7),m=t(27),h=m.getUserInfoCache;t(627);var g=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"_handleRaiseManager",value:function(){this.props.dispatch(d(this.props.selectedGroupUUID,this.props.uuid))}},{key:"_handleTickGroup",value:function(){this.props.dispatch(u(this.props.selectedGroupUUID,this.props.uuid))}},{key:"render",value:function(){var e=this,t=h(this.props.uuid),n=a.createElement("div",null,a.createElement("button",{onClick:function(){return e._handleRaiseManager()}},"提升为管理"),a.createElement("button",{onClick:function(){return e._handleTickGroup()}},"踢出本团"));return a.createElement(f,{title:"管理成员",actions:n},a.createElement("div",{className:"group-member-manage"},a.createElement("div",{className:"avatar"},a.createElement("img",{src:t.get("avatar")||p.defaultImg.user})),a.createElement("div",{className:"uuid"},t.get("uuid")),a.createElement("p",{className:"name"},t.get("nickname")||t.get("username")),a.createElement("p",{className:"sign"},t.get("sign"))))}}]),t}(a.Component);e.exports=s(function(e){return{usercache:e.getIn(["cache","user"]),selectedGroupUUID:e.getIn(["group","selectedGroupUUID"])}})(g)},function(e,exports,t){var n=t(628);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".group-member-manage {\n  display: flex;\n  flex-direction: column;\n  padding: 10px; }\n  .group-member-manage .avatar {\n    width: 100px;\n    height: 100px;\n    border-radius: 50%;\n    overflow: hidden;\n    margin: auto;\n    border: 3px solid white;\n    box-shadow: 0 0 10px 0px rgba(0, 0, 0, 0.2); }\n    .group-member-manage .avatar img {\n      width: 100%;\n      height: 100%; }\n  .group-member-manage .uuid {\n    color: #CCCCCC;\n    font-size: 12px;\n    margin: 10px 0; }\n  .group-member-manage .name {\n    font-size: 18px;\n    margin: 0 10px; }\n  .group-member-manage .sign {\n    margin-top: 6px;\n    font-size: 14px;\n    color: #666666; }\n",""])},function(e,exports,t){var n=t(630);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".group-members {\n  width: 100%;\n  padding: 10px; }\n  .group-members thead td {\n    text-align: center;\n    font-size: 12px; }\n  .group-members tbody .group-member-item {\n    cursor: pointer; }\n    .group-members tbody .group-member-item:hover {\n      background-color: rgba(0, 0, 0, 0.1); }\n    .group-members tbody .group-member-item .auth {\n      padding-left: 4px;\n      opacity: 0; }\n      .group-members tbody .group-member-item .auth.manager {\n        color: #65CAB0;\n        opacity: 1; }\n      .group-members tbody .group-member-item .auth.owner {\n        color: #FFD700;\n        opacity: 1; }\n      .group-members tbody .group-member-item .auth .iconfont {\n        font-size: 20px; }\n    .group-members tbody .group-member-item .avatar {\n      padding-left: 4px; }\n      .group-members tbody .group-member-item .avatar img {\n        width: 32px;\n        height: 32px;\n        border-radius: 50%;\n        vertical-align: middle; }\n    .group-members tbody .group-member-item .name {\n      padding: 10px;\n      font-size: 14px; }\n    .group-members tbody .group-member-item .last-login {\n      color: #999999;\n      font-size: 12px; }\n    .group-members tbody .group-member-item .actions button {\n      font-size: 14px;\n      background-color: transparent;\n      border: 0;\n      cursor: pointer;\n      color: #705949;\n      padding: 0 2px;\n      margin: 4px 6px;\n      outline: 0;\n      position: relative;\n      user-select: none; }\n      .group-members tbody .group-member-item .actions button:disabled {\n        cursor: not-allowed;\n        color: #999999; }\n      .group-members tbody .group-member-item .actions button:enabled:after {\n        content: ' ';\n        position: absolute;\n        border-top: 1px solid #705949;\n        bottom: 0;\n        transition: all 0.2s ease-in-out;\n        left: 0;\n        width: 0; }\n      .group-members tbody .group-member-item .actions button:enabled:hover:after, .group-members tbody .group-member-item .actions button:enabled:active:after, .group-members tbody .group-member-item .actions button:enabled.active:after {\n        border-top: 1px solid #705949;\n        width: 100%; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(7),u=t(5),d=u.showAlert,f=u.hideAlert,p=u.showModal,m=t(11),h=m.switchSelectGroup,g=m.quitGroup,v=m.dismissGroup,b=m.setGroupStatus,y=t(284),x=t(634);t(637);var w=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"_handleEditGroup",value:function(){this.props.showModal(a.createElement(x,null))}},{key:"_handleDismissGroup",value:function(){var e=this;this.props.showAlert({title:"是否要解散群",content:"一旦确定无法撤销",onConfirm:function(){e.props.hideAlert();var t=e.props.groupInfo.get("uuid");e.props.switchSelectGroup(""),e.props.dismissGroup(t)}})}},{key:"_handleQuitGroup",value:function(){var e=this;this.props.showAlert({title:"是否要退出群",content:"一旦确定无法撤销",onConfirm:function(){e.props.hideAlert();var t=e.props.groupInfo.get("uuid");e.props.switchSelectGroup(""),e.props.quitGroup(t)}})}},{key:"_handleSwitchGroupStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.props.setGroupStatus(this.props.groupInfo.get("uuid"),e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.groupInfo,r=t.usercache,o=n.get("avatar").replace("/thumbnail","");return a.createElement("div",{className:"group-info"},a.createElement("div",{className:"group-props"},a.createElement("div",null,a.createElement(y,{originImageUrl:o},a.createElement("img",{src:n.get("avatar")||l.defaultImg.group}))),a.createElement("div",null,a.createElement("span",null,"团唯一标识: "),a.createElement("span",{className:"uuid"},n.get("uuid"))),a.createElement("div",null,a.createElement("span",null,"团名:"),a.createElement("span",null,n.get("name"))),a.createElement("div",null,a.createElement("span",null,"团副名:"),a.createElement("span",null,n.get("sub_name"))),a.createElement("div",null,a.createElement("span",null,"团状态:"),a.createElement("span",null,n.get("status")?"开团中":"闭团中")),a.createElement("div",null,a.createElement("span",null,"团主:"),a.createElement("span",null,r.getIn([n.get("owner_uuid"),"nickname"]))),a.createElement("div",null,a.createElement("span",null,"团人物卡数:"),a.createElement("span",null,n.get("group_actors").size," 张")),a.createElement("div",null,a.createElement("span",null,"团成员数:"),a.createElement("span",null,n.get("group_members").size," 人")),a.createElement("div",null,a.createElement("span",null,"团管理数:"),a.createElement("span",null,n.get("managers_uuid").size," 人")),a.createElement("div",null,a.createElement("span",null,"团地图数:"),a.createElement("span",null,n.get("maps_uuid").size," 张")),a.createElement("div",null,a.createElement("span",null,"团简介:"),a.createElement("span",{className:"desc"},a.createElement("pre",null,n.get("desc"))))),this.props.userUUID===n.get("owner_uuid")?a.createElement("div",{className:"group-actions"},n.get("status")?a.createElement("button",{onClick:function(){return e._handleSwitchGroupStatus(!1)}},"闭团"):a.createElement("button",{onClick:function(){return e._handleSwitchGroupStatus(!0)}},"开团"),a.createElement("button",{onClick:function(){return e._handleEditGroup()}},"编辑团"),a.createElement("button",{onClick:function(){return e._handleDismissGroup()}},"解散团")):a.createElement("div",{className:"group-actions"},a.createElement("button",{onClick:function(){return e._handleQuitGroup()}},"退出团")))}}]),t}(a.Component);e.exports=s(function(e){return{userUUID:e.getIn(["user","info","uuid"]),usercache:e.getIn(["cache","user"]),selectedGroupUUID:e.getIn(["group","selectedGroupUUID"]),groupInfo:e.getIn(["group","groups"]).find(function(t){return t.get("uuid")===e.getIn(["group","selectedGroupUUID"])})}},function(e){return{showAlert:function(){return e(d.apply(void 0,arguments))},hideAlert:function(){return e(f())},showModal:function(){return e(p.apply(void 0,arguments))},switchSelectGroup:function(t){return e(h(t))},quitGroup:function(t){return e(g(t))},dismissGroup:function(t){return e(v(t))},setGroupStatus:function(t,n){return e(b(t,n))}}})(w)},function(e,exports,t){var n=t(633);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".image-viewer {\n  cursor: pointer; }\n\n.ReactModalPortal .ReactModal__Overlay .ril-toolbar .ril-toolbar__item > button {\n  outline: 0; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=t(1),s=t(4),l=s.connect,u=t(7),d=t(12),f=t(77),p=t(5),m=p.hideModal,h=t(11),g=h.updateGroupInfo;t(635);var v=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={avatar:e.selectedGroupInfo.get("avatar")||"",name:e.selectedGroupInfo.get("name")||"",sub_name:e.selectedGroupInfo.get("sub_name")||"",desc:e.selectedGroupInfo.get("desc")||""},o}return o(t,e),a(t,[{key:"_handleSaveGroupInfo",value:function(){var e=i({},this.state);delete e.avatar,this.props.dispatch(g(this.props.selectedGroupUUID,e))}},{key:"_handleUpdateAvatar",value:function(e){this.props.dispatch(g(this.props.selectedGroupUUID,{avatar:e}))}},{key:"render",value:function(){var e=this,t=c.createElement("div",{className:"actions"},c.createElement("button",{onClick:function(){return e.props.dispatch(m())}},c.createElement("i",{className:"iconfont"},""),"取消"),c.createElement("button",{onClick:function(){return e._handleSaveGroupInfo()}},c.createElement("i",{className:"iconfont"},""),"保存"));return c.createElement(d,{title:"编辑团信息",actions:t,className:"group-info-edit"},c.createElement(f,{width:"57",height:"57",type:"group",attachUUID:this.props.selectedGroupUUID,onUploadSuccess:function(t){return e._handleUpdateAvatar(t.url)}},c.createElement("img",{src:this.state.avatar||u.defaultImg.group})),c.createElement("div",null,c.createElement("span",null,"团名称"),c.createElement("input",{value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),c.createElement("div",null,c.createElement("span",null,"团副名"),c.createElement("input",{value:this.state.sub_name,onChange:function(t){return e.setState({sub_name:t.target.value})}})),c.createElement("div",null,c.createElement("span",null,"团简介"),c.createElement("textarea",{value:this.state.desc,onChange:function(t){return e.setState({desc:t.target.value})}})))}}]),t}(c.Component);e.exports=l(function(e){var t=e.getIn(["group","selectedGroupUUID"]),n=e.getIn(["group","groups"]).findIndex(function(e){return e.get("uuid")===t});return{selectedGroupUUID:t,selectedGroupInfo:e.getIn(["group","groups",n])}})(v)},function(e,exports,t){var n=t(636);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,'.group-info-edit .body .image-uploader {\n  width: 60px;\n  height: 60px;\n  margin: auto;\n  margin-bottom: 10px;\n  border-radius: 50%;\n  overflow: hidden;\n  border: 3px solid white; }\n  .group-info-edit .body .image-uploader > .mask {\n    font-size: 14px; }\n  .group-info-edit .body .image-uploader > img {\n    width: 60px;\n    height: 60px; }\n\n.group-info-edit .body > div {\n  display: flex;\n  margin-bottom: 10px; }\n  .group-info-edit .body > div > span {\n    flex: 1;\n    vertical-align: top;\n    text-align: left; }\n    .group-info-edit .body > div > span:after {\n      content: \':\';\n      vertical-align: top; }\n  .group-info-edit .body > div > input, .group-info-edit .body > div > textarea {\n    background-color: transparent;\n    font-size: 16px;\n    border: 1px solid #DDDCDD;\n    outline: 0;\n    padding: 4px 6px;\n    border-radius: 3px;\n    resize: none;\n    flex: 2; }\n    .group-info-edit .body > div > input:focus, .group-info-edit .body > div > textarea:focus {\n      border-color: #705949; }\n    .group-info-edit .body > div > input:disabled, .group-info-edit .body > div > textarea:disabled {\n      cursor: not-allowed;\n      background-color: rgba(0, 0, 0, 0.1);\n      color: #999999; }\n    .group-info-edit .body > div > input[type="checkbox"], .group-info-edit .body > div > textarea[type="checkbox"] {\n      -webkit-appearance: none;\n      background-color: white;\n      background-image: url("/src/assets/img/checkbox.png");\n      height: 22px;\n      vertical-align: middle;\n      width: 22px;\n      outline: none;\n      border: 0;\n      transition: initial;\n      padding: 0; }\n      .group-info-edit .body > div > input[type="checkbox"]:focus, .group-info-edit .body > div > input[type="checkbox"]:hover, .group-info-edit .body > div > textarea[type="checkbox"]:focus, .group-info-edit .body > div > textarea[type="checkbox"]:hover {\n        background-position: -24px 0; }\n      .group-info-edit .body > div > input[type="checkbox"]:checked, .group-info-edit .body > div > textarea[type="checkbox"]:checked {\n        background-position: -48px 0; }\n      .group-info-edit .body > div > input[type="checkbox"][disabled], .group-info-edit .body > div > textarea[type="checkbox"][disabled] {\n        background-position: -72px 0; }\n      .group-info-edit .body > div > input[type="checkbox"][disabled]:checked, .group-info-edit .body > div > textarea[type="checkbox"][disabled]:checked {\n        background-position: -96px 0; }\n',""])},function(e,exports,t){var n=t(638);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".group-info {\n  padding: 20px;\n  padding-top: 0;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  position: relative;\n  padding-bottom: 20px; }\n  .group-info .group-props {\n    flex: 1;\n    padding-top: 20px;\n    overflow: hidden; }\n    .group-info .group-props:hover {\n      overflow-y: auto;\n      overflow-y: overlay; }\n    .group-info .group-props > div {\n      margin-bottom: 4px;\n      display: flex; }\n      .group-info .group-props > div span:nth-child(1) {\n        flex: 1; }\n      .group-info .group-props > div span:nth-child(2) {\n        flex: 2;\n        flex-wrap: wrap;\n        word-wrap: break-word; }\n      .group-info .group-props > div span.uuid {\n        font-size: 12px;\n        color: #999999; }\n      .group-info .group-props > div span.desc {\n        font-size: 12px; }\n      .group-info .group-props > div .image-viewer {\n        margin: auto; }\n        .group-info .group-props > div .image-viewer > img {\n          border-radius: 50%;\n          max-height: 60px;\n          max-width: 60px;\n          margin-bottom: 10px; }\n  .group-info .group-actions {\n    margin: 0;\n    display: flex;\n    flex-direction: column; }\n    .group-info .group-actions button {\n      font-size: 16px;\n      border: 0;\n      cursor: pointer;\n      color: white;\n      border-radius: 3px;\n      background-color: #999;\n      padding: 6px 12px;\n      outline: 0;\n      user-select: none;\n      width: 100%;\n      padding: 12px;\n      margin-top: 10px; }\n      .group-info .group-actions button:hover, .group-info .group-actions button:active, .group-info .group-actions button.active {\n        background-color: #705949; }\n      .group-info .group-actions button:disabled {\n        cursor: not-allowed;\n        background-color: #999999; }\n      .group-info .group-actions button:hover, .group-info .group-actions button:active, .group-info .group-actions button.active {\n        background-color: #e74c3c; }\n",""])},function(e,exports,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=t(1),s=t(12);t(640);var l=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selected:[]},n}return i(t,e),a(t,[{key:"_handleSelect",value:function(e){this.state.selected.indexOf(e)>=0?this.setState({selected:this.state.selected.filter(function(t){return t!==e})}):this.setState({selected:[].concat(n(this.state.selected),[e])})}},{key:"_handleSubmit",value:function(){this.props.onListSelect&&this.props.onListSelect(this.state.selected.sort())}},{key:"render",value:function(){var e=this,t=c.createElement("button",{onClick:function(){return e._handleSubmit()}},"确认");return c.createElement(s,{title:"请选择...",actions:t},c.createElement("div",{className:"list-select"},this.props.list.map(function(t,n){return c.createElement("div",{key:"list-select#"+n,className:"list-select-cell"+(e.state.selected.indexOf(n)>=0?" active":""),onClick:function(){return e._handleSelect(n)}},t)})))}}]),t}(c.Component);l.defaultProps={list:[]},e.exports=l},function(e,exports,t){var n=t(641);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".list-select {\n  max-height: 360px;\n  overflow: hidden; }\n  .list-select:hover {\n    overflow-y: auto;\n    overflow-y: overlay; }\n  .list-select .list-select-cell {\n    margin-bottom: 6px;\n    padding: 6px 20px;\n    border-radius: 3px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    max-width: 351px; }\n    .list-select .list-select-cell:hover {\n      background-color: rgba(0, 0, 0, 0.2); }\n    .list-select .list-select-cell.active:before {\n      content: '\\E620';\n      font-family: iconfont;\n      position: absolute;\n      left: 2px; }\n",""])},function(e,exports,t){var n=t(643);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".is-developing {\n  display: flex;\n  flex-direction: column !important;\n  text-align: center;\n  color: #CCCCCC;\n  padding-top: 40px; }\n  .is-developing i.iconfont {\n    font-size: 100px;\n    color: inherit; }\n",""])},function(e,exports,t){var n=t(645);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".group .list {\n  overflow: hidden;\n  user-select: none;\n  width: 240px;\n  background-color: #FFFBF8;\n  border-right: 1px solid #DDDCDD; }\n  .group .list:hover {\n    overflow-y: auto;\n    overflow-y: overlay; }\n\n.group .detail {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  position: relative; }\n  .group .detail .group-header {\n    height: 50px;\n    border-bottom: 1px solid #DDDCDD;\n    display: flex;\n    align-items: center;\n    padding: 0 16px; }\n    .group .detail .group-header .avatar {\n      height: 38px;\n      width: 38px;\n      border-radius: 50%;\n      margin-right: 18px;\n      overflow: hidden; }\n      .group .detail .group-header .avatar img {\n        width: 100%;\n        height: 100%; }\n    .group .detail .group-header .title {\n      flex: 2; }\n      .group .detail .group-header .title .main-title {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        font-size: 14px; }\n      .group .detail .group-header .title .sub-title {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        color: #999999;\n        font-size: 12px; }\n    .group .detail .group-header .group-actor-select {\n      width: 140px;\n      margin-right: 20px; }\n    .group .detail .group-header .actions button {\n      background-color: transparent;\n      border: 0;\n      outline: 0;\n      cursor: pointer;\n      color: #9ea1a2; }\n      .group .detail .group-header .actions button:not(:disabled):hover, .group .detail .group-header .actions button:not(:disabled):active, .group .detail .group-header .actions button:not(:disabled).active {\n        color: #7e3f12; }\n        .group .detail .group-header .actions button:not(:disabled):hover .iconfont, .group .detail .group-header .actions button:not(:disabled):active .iconfont, .group .detail .group-header .actions button:not(:disabled).active .iconfont {\n          color: #7e3f12; }\n      .group .detail .group-header .actions button:disabled {\n        cursor: not-allowed; }\n      .group .detail .group-header .actions button .iconfont {\n        color: #9ea1a2;\n        line-height: 18px;\n        height: 18px;\n        font-size: 18px; }\n      .group .detail .group-header .actions button .iconfont {\n        font-size: 20px; }\n  .group .detail .group-content {\n    flex: 1;\n    overflow: hidden; }\n    .group .detail .group-content:hover {\n      overflow-y: auto;\n      overflow-y: overlay; }\n    .group .detail .group-content .get-more-log-btn {\n      font-size: 14px;\n      background-color: transparent;\n      border: 0;\n      cursor: pointer;\n      color: #705949;\n      padding: 0 2px;\n      margin: 4px 6px;\n      outline: 0;\n      position: relative;\n      user-select: none;\n      display: block;\n      text-align: center;\n      width: 100%;\n      padding: 0;\n      margin: 10px 0;\n      font-size: 12px; }\n      .group .detail .group-content .get-more-log-btn:disabled {\n        cursor: not-allowed;\n        color: #999999; }\n      .group .detail .group-content .get-more-log-btn:enabled:after {\n        content: ' ';\n        position: absolute;\n        border-top: 1px solid #705949;\n        bottom: 0;\n        transition: all 0.2s ease-in-out;\n        left: 0;\n        width: 0; }\n      .group .detail .group-content .get-more-log-btn:enabled:hover:after, .group .detail .group-content .get-more-log-btn:enabled:active:after, .group .detail .group-content .get-more-log-btn:enabled.active:after {\n        border-top: 1px solid #705949;\n        width: 100%; }\n      .group .detail .group-content .get-more-log-btn:after {\n        width: 0 !important; }\n    .group .detail .group-content .msg-items {\n      padding: 4px 16px 16px 16px; }\n\n.group .none-select-group {\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  text-align: center;\n  padding-top: 60px; }\n  .group .none-select-group .iconfont {\n    font-size: 320px;\n    opacity: 0.7;\n    color: #CCCCCC;\n    user-select: none; }\n  .group .none-select-group .welcome {\n    color: #CCCCCC; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(45),u=l.addNote,d=l.switchNote,f=t(0),p=t(26),m=t(647);t(672);var h=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={selectedUUID:""},o}return o(t,e),i(t,[{key:"_handleClick",value:function(e){this.props.dispatch(d(e))}},{key:"getNoteList",value:function(){var e=this,t=this.props.noteList,n=this.props.selectedNoteUUID;return t?t.toArray().map(function(t,r){t=t.toJS();var o=t.content.replace(/<\/?.+?>/g,"").replace(/ /g,"");o.length>70&&(o=o.slice(0,70)+"...");var i=t.uuid;return a.createElement("div",{key:i,className:"note-item"+(n===i?" active":""),onClick:function(){return e._handleClick(i)}},a.createElement("div",{className:"note-title"},t.title),a.createElement("div",{className:"note-update-time"},f(t.updatedAt).fromNow()),a.createElement("div",{className:"note-summary"},o))}):""}},{key:"getNoteDetail",value:function(){var e=this,t=this.props.selectedNoteUUID;if(t){var n=this.props.noteList.get(t);if(n)return a.createElement(m,{key:t,uuid:t,note:n.toJS()})}return a.createElement("div",{className:"nocontent"},a.createElement("button",{className:"addNote",onClick:function(){return e.props.dispatch(u())}},"添加笔记"))}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"note"},a.createElement("div",{className:"list"},a.createElement("div",{className:"add-note","data-tip":"添加笔记",onClick:function(){return e.props.dispatch(u())}},a.createElement(p,{effect:"solid"}),a.createElement("i",{className:"iconfont"},"")),a.createElement("div",{className:"items"},this.getNoteList())),a.createElement("div",{className:"detail"},this.getNoteDetail()))}}]),t}(a.Component);e.exports=s(function(e){return{selectedNoteUUID:e.getIn(["note","selectedNoteUUID"]),noteList:e.getIn(["note","noteList"])}})(h)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(648),u=t(45),d=u.saveNote;t(670);var f=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={title:"",content:""},o}return o(t,e),i(t,[{key:"componentDidMount",value:function(){this.setState({title:this.props.note.title,content:this.props.note.content})}},{key:"_handleSave",value:function(){var e=this.props.uuid,t=this.state.title,n=this.state.content;this.props.dispatch(d(e,t,n))}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"note-detail"},a.createElement("div",{className:"title"},a.createElement("input",{type:"text",placeholder:"笔记标题",value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),a.createElement(l,{id:"note-editor",content:this.props.note.content,onEditorChange:function(t){return e.setState({content:t})},onEditorSave:function(t){return e._handleSave()}}))}}]),t}(a.Component);e.exports=s()(f)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(270);t(649),t(651),t(653),t(655),t(657),t(659),t(661),t(663),t(665),t(667),t(668);var s=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.editor=null,e}return o(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;c.init({selector:"#"+this.props.id,skin_url:"src/assets/lib/tinymce/skins/lightgray",plugins:"wordcount table save link image imagetools textcolor hr",toolbar:"undo redo | styleselect forecolor backcolor | bold italic | alignleft aligncenter alignright alignjustify | link image | blockquote | save",imagetools_toolbar:"rotateleft rotateright | flipv fliph | editimage imageoptions",height:425,branding:!1,statusbar:!1,menu:{file:{title:"File",items:"newdocument trpgsavetocloud trpgsharenote"},edit:{title:"Edit",items:"undo redo | cut copy paste | selectall"},insert:{title:"Insert",items:"link image | hr"},view:{title:"View",items:"visualaid"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table",items:"inserttable tableprops deletetable | cell row column"}},setup:function(t){e.editor=t,t.on("keyup change",function(){var n=t.getContent();e.props.onEditorChange(n)}),t.addMenuItem("trpgsavetocloud",{text:"保存到云端",context:"tools",onclick:function(){}}),t.addMenuItem("trpgsharenote",{text:"分享笔记",context:"tools",onclick:function(){}})},save_onsavecallback:function(){return e.props.onEditorSave(e.editor.getContent())}})}},{key:"componentWillUnmount",value:function(){c.remove(this.editor)}},{key:"render",value:function(){return a.createElement("textarea",{id:this.props.id,value:this.props.content,onChange:function(e){}})}}]),t}(a.Component);e.exports=s},function(e,exports,t){"use strict";t(650)},function(e,exports,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof("function"==typeof Symbol?Symbol.iterator:"@@iterator")?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==("function"==typeof Symbol?Symbol.prototype:"@@prototype")?"symbol":typeof e};!function(){!function(){function e(e,t,n){var r,o,i,a,c,s,l,u,d,f;return d=Xt(),o=Vt.getPos(t,Ae.getUiContainer(e)),i=o.x,a=o.y,Yt(e)&&Jt(document.body)&&(i-=d.x,a-=d.y),r=e.getEl(),f=Vt.getSize(r),c=f.width,s=f.height,f=Vt.getSize(t),l=f.width,u=f.height,n=(n||"").split(""),"b"===n[0]&&(a+=u),"r"===n[1]&&(i+=l),"c"===n[0]&&(a+=Math.round(u/2)),"c"===n[1]&&(i+=Math.round(l/2)),"b"===n[3]&&(a-=s),"r"===n[4]&&(i-=c),"c"===n[3]&&(a-=Math.round(s/2)),"c"===n[4]&&(i-=Math.round(c/2)),{x:i,y:a,w:c,h:s}}function t(){}function r(e){this.cls=[],this.cls._map={},this.onchange=e||t,this.prefix=""}function o(e){for(var t,n=[],r=e.length;r--;)t=e[r],t.__checked||(n.push(t),t.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}function i(e){return e.nodeType>0}function a(e,t){var r,o;if(e===t)return!0;if(null===e||null===t)return e===t;if("object"!==(void 0===e?"undefined":n(e))||"object"!==(void 0===t?"undefined":n(t)))return e===t;if(L.isArray(t)){if(e.length!==t.length)return!1;for(r=e.length;r--;)if(!a(e[r],t[r]))return!1}if(i(e)||i(t))return e===t;o={};for(r in t){if(!a(e[r],t[r]))return!1;o[r]=!0}for(r in e)if(!o[r]&&!a(e[r],t[r]))return!1;return!0}function c(e){return e._eventDispatcher||(e._eventDispatcher=new en({scope:e,toggleEvent:function(t,n){n&&en.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&s(e))}})),e._eventDispatcher}function s(e){function t(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function n(){var e=s._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),s._lastHoverCtrl=null)}function r(t){var n,r,o,i=e.getParentCtrl(t.target),a=s._lastHoverCtrl,c=0;if(i!==a){if(s._lastHoverCtrl=i,r=i.parents().toArray().reverse(),r.push(i),a){for(o=a.parents().toArray().reverse(),o.push(a),c=0;c<o.length&&r[c]===o[c];c++);for(n=o.length-1;n>=c;n--)a=o[n],a.fire("mouseleave",{target:a.getEl()})}for(n=c;n<r.length;n++)i=r[n],i.fire("mouseenter",{target:i.getEl()})}}function o(t){t.preventDefault(),"mousewheel"===t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}var i,a,c,s,l,u;if(l=e._nativeEvents){for(c=e.parents().toArray(),c.unshift(e),i=0,a=c.length;!s&&i<a;i++)s=c[i]._eventsRoot;for(s||(s=c[c.length-1]||e),e._eventsRoot=s,a=i,i=0;i<a;i++)c[i]._eventsRoot=s;var d=s._delegates;d||(d=s._delegates={});for(u in l){if(!l)return!1;"wheel"!==u||wn?("mouseenter"===u||"mouseleave"===u?s._hasMouseEnter||(Wt(s.getEl()).on("mouseleave",n).on("mouseover",r),s._hasMouseEnter=1):d[u]||(Wt(s.getEl()).on(u,t),d[u]=!0),l[u]=!1):xn?Wt(e.getEl()).on("mousewheel",o):Wt(e.getEl()).on("DOMMouseScroll",o)}}}function l(e){function t(e){return e&&1===e.nodeType}function n(e){return e=e||y,t(e)?e.getAttribute("role"):null}function r(e){for(var t,r=e||y;r=r.parentNode;)if(t=n(r))return t}function o(e){var n=y;if(t(n))return n.getAttribute("aria-"+e)}function i(e){var t=e.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function a(e){return!(!i(e)||e.hidden)||(!!Dn(e)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(n(e)))}function c(e){function t(e){if(1===e.nodeType&&"none"!==e.style.display&&!e.disabled){a(e)&&n.push(e);for(var r=0;r<e.childNodes.length;r++)t(e.childNodes[r])}}var n=[];return t(e||w.getEl()),n}function s(e){var t,n;e=e||x,n=e.parents().toArray(),n.unshift(e);for(var r=0;r<n.length&&(t=n[r],!t.settings.ariaRoot);r++);return t}function l(e){var t=s(e),n=c(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?u(t.lastAriaIndex,n):u(0,n)}function u(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function d(e,t){var n=-1,r=s();t=t||c(r.getEl());for(var o=0;o<t.length;o++)t[o]===y&&(n=o);n+=e,r.lastAriaIndex=u(n,t)}function f(){"tablist"===r()?d(-1,c(y.parentNode)):x.parent().submenu?v():d(-1)}function p(){var e=n(),t=r();"tablist"===t?d(1,c(y.parentNode)):"menuitem"===e&&"menu"===t&&o("haspopup")?b():d(1)}function m(){d(-1)}function h(){var e=n(),t=r();"menuitem"===e&&"menubar"===t?b():"button"===e&&o("haspopup")?b({key:"down"}):d(1)}function g(e){if("tablist"===r()){var t=c(x.getEl("body"))[0];t&&t.focus()}else d(e.shiftKey?-1:1)}function v(){x.fire("cancel")}function b(e){e=e||{},x.fire("click",{target:y,aria:e})}var y,x,w=e.root;try{y=document.activeElement}catch(e){y=document.body}return x=w.getParentCtrl(y),w.on("keydown",function(e){function t(e,t){i(y)||Dn(y)||"slider"!==n(y)&&!1!==t(e)&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,f);break;case 39:t(e,p);break;case 38:t(e,m);break;case 40:t(e,h);break;case 27:v();break;case 14:case 13:case 32:t(e,b);break;case 9:g(e),e.preventDefault()}}),w.on("focusin",function(e){y=e.target,x=e.control}),{focusFirst:l}}function u(e){var t,n,r,o,i,a,c,s,l=Math.max;return t=e.documentElement,n=e.body,r=l(t.scrollWidth,n.scrollWidth),o=l(t.clientWidth,n.clientWidth),i=l(t.offsetWidth,n.offsetWidth),a=l(t.scrollHeight,n.scrollHeight),c=l(t.clientHeight,n.clientHeight),s=l(t.offsetHeight,n.offsetHeight),{width:r<i?o:r,height:a<s?c:a}}function d(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function f(e,t){var n,r,o,i,a,c,s,l=t.document||document;t=t||{};var f=l.getElementById(t.handle||e);o=function(e){var o,p,m=u(l);d(e),e.preventDefault(),r=e.button,o=f,c=e.screenX,s=e.screenY,p=window.getComputedStyle?window.getComputedStyle(o,null).getPropertyValue("cursor"):o.runtimeStyle.cursor,n=Wt("<div></div>").css({position:"absolute",top:0,left:0,width:m.width,height:m.height,zIndex:2147483647,opacity:1e-4,cursor:p}).appendTo(l.body),Wt(l).on("mousemove touchmove",a).on("mouseup touchend",i),t.start(e)},a=function(e){if(d(e),e.button!==r)return i(e);e.deltaX=e.screenX-c,e.deltaY=e.screenY-s,e.preventDefault(),t.drag(e)},i=function(e){d(e),Wt(l).off("mousemove touchmove",a).off("mouseup touchend",i),n.remove(),t.stop&&t.stop(e)},this.destroy=function(){Wt(f).off()},Wt(f).on("mousedown touchstart",o)}function p(e,t){for(;e;){if(e===t)return!0;e=e.parent()}}function m(e){for(var t=Pn.length;t--;){var n=Pn[t],r=n.getParentCtrl(e.target);if(n.settings.autohide){if(r&&(p(r,n)||n.parent()===r))continue;e=n.fire("autohide",{target:e.target}),e.isDefaultPrevented()||n.hide()}}}function h(){Sn||(Sn=function(e){2!==e.button&&m(e)},Wt(document).on("click touchstart",Sn))}function g(){kn||(kn=function(){var e;for(e=Pn.length;e--;)b(Pn[e])},Wt(window).on("scroll",kn))}function v(){if(!Cn){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;Cn=function(){document.all&&t===e.clientWidth&&n===e.clientHeight||(t=e.clientWidth,n=e.clientHeight,Ln.hideAll())},Wt(window).on("resize",Cn)}}function b(e){function t(t,n){for(var r,o=0;o<Pn.length;o++)if(Pn[o]!==e)for(r=Pn[o].parent();r&&(r=r.parent());)r===e&&Pn[o].fixed(t).moveBy(0,n).repaint()}var n=Vt.getViewPort().y;e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}function y(e,t){var n,r,o=Ln.zIndex||65535;if(e)Mn.push(t);else for(n=Mn.length;n--;)Mn[n]===t&&Mn.splice(n,1);if(Mn.length)for(n=0;n<Mn.length;n++)Mn[n].modal&&(o++,r=Mn[n]),Mn[n].getEl().style.zIndex=o,Mn[n].zIndex=o,o++;var i=Wt("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];r?Wt(i).css("z-index",r.zIndex-1):i&&(i.parentNode.removeChild(i),Tn=!1),Ln.currentZIndex=o}function x(e){var t;for(t=Pn.length;t--;)Pn[t]===e&&Pn.splice(t,1);for(t=Mn.length;t--;)Mn[t]===e&&Mn.splice(t,1)}function w(e,t){var n,r,o=this,i=In.classPrefix;o.show=function(a,c){function s(){n&&(Wt(e).append('<div class="'+i+"throbber"+(t?" "+i+"throbber-inline":"")+'"></div>'),c&&c())}return o.hide(),n=!0,a?r=ge.setTimeout(s,a):s(),o},o.hide=function(){var t=e.lastChild;return ge.clearTimeout(r),t&&-1!==t.className.indexOf("throbber")&&t.parentNode.removeChild(t),n=!1,o}}function E(e){var t=function(e){return e.inline?e.getElement():e.getContentAreaContainer()},n=function(){var n=t(e);return Vt.getSize(n).width},r=function(e){et(e,function(e){e.moveTo(0,0)})},o=function(n){if(n.length>0){var r=n.slice(0,1)[0],o=t(e);r.moveRel(o,"tc-tc"),et(n,function(e,t){t>0&&e.moveRel(n[t-1].getEl(),"bc-tc")})}},i=function(e){r(e),o(e)};return{open:function(e,t){var r=L.extend(e,{maxWidth:n()}),o=new Kn(r);return o.args=r,r.timeout>0&&(o.timer=setTimeout(function(){o.close(),t()},r.timeout)),o.on("close",function(){t()}),o.renderTo(),o},close:function(e){e.close()},reposition:i,getArgs:function(e){return e.args}}}function _(e){var t,n=Wt("meta[name=viewport]")[0];!1!==kt.overrideViewPort&&(n||(n=document.createElement("meta"),n.setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),t=n.getAttribute("content"),t&&void 0!==Qn&&(Qn=t),n.setAttribute("content",e?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Qn))}function S(e,t){k()&&!1===t&&Wt([document.documentElement,document.body]).removeClass(e+"fullscreen")}function k(){for(var e=0;e<Xn.length;e++)if(Xn[e]._fullscreen)return!0;return!1}function C(e){return{open:function(e,t,n){var r;return e.title=e.title||" ",e.url=e.url||e.file,e.url&&(e.width=parseInt(e.width||320,10),e.height=parseInt(e.height||240,10)),e.body&&(e.items={defaults:e.defaults,type:e.bodyType||"form",items:e.body,data:e.data,callbacks:e.commands}),e.url||e.buttons||(e.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]),r=new $n(e),r.on("close",function(){n(r)}),e.data&&r.on("postRender",function(){this.find("*").each(function(t){var n=t.name();n in e.data&&t.value(e.data[n])})}),r.features=e||{},r.params=t||{},r=r.renderTo(document.body).reflow()},alert:function(e,t,n){var r;return r=Zn.alert(e,function(){t()}),r.on("close",function(){n(r)}),r},confirm:function(e,t,n){var r;return r=Zn.confirm(e,function(e){t(e)}),r.on("close",function(){n(r)}),r},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}}function T(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,c=r||i||a&&!0===/mobile/i.test(n),s=e.isiOS()||e.isAndroid(),l=s&&!c,u=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:ye(r),isiPhone:ye(o),isTablet:ye(c),isPhone:ye(l),isTouch:ye(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:ye(u)}}function I(e,t,n,r,o){return e(n,r)?De.some(n):Ye(o)&&o(n)?De.none():t(n,r,o)}function D(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}function R(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}function O(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function N(e,t,n){e.setAttribute("aria-"+t,n)}function U(e,t){var n,r,o,i,a,c;"v"===e.settings.orientation?(i="top",o="height",r="h"):(i="left",o="width",r="w"),c=e.getEl("handle"),n=(e.layoutRect()[r]||100)-Vt.getSize(c)[o],a=n*((t-e._minValue)/(e._maxValue-e._minValue))+"px",c.style[i]=a,c.style.height=e.layoutRect().h+"px",N(c,"valuenow",t),N(c,"valuetext",""+e.settings.previewFilter(t)),N(c,"valuemin",e._minValue),N(c,"valuemax",e._maxValue)}function A(){}var P=tinymce.util.Tools.resolve("tinymce.ThemeManager"),M=tinymce.util.Tools.resolve("tinymce.EditorManager"),L=tinymce.util.Tools.resolve("tinymce.util.Tools"),j=function(e){return e.getParam("branding",!0,"boolean")},F=function(e){return!1!==G(e)},G=function(e){return e.getParam("menubar")},B=function(e){return e.getParam("statusbar",!0,"boolean")},H=function(e){return e.getParam("toolbar_items_size")},z=function(e){return e.getParam("readonly",!1,"boolean")},W=function(e){return e.getParam("fixed_toolbar_container")},q=function(e){return e.getParam("inline_toolbar_position_handler")},V=function(e){return e.getParam("menu")},J=function(e){return e.getParam("removed_menuitems","")},Y=function(e){return e.getParam("min_width",100,"number")},K=function(e){return e.getParam("min_height",100,"number")},X=function(e){return e.getParam("max_width",65535,"number")},Q=function(e){return e.getParam("max_height",65535,"number")},Z=function(e){return!1===e.settings.skin},ee=function(e){return e.getParam("inline",!1,"boolean")},te=function(e){var t=e.getParam("resize","vertical");return!1===t?"none":"both"===t?"both":"vertical"},ne=function(e){var t=e.settings,n=t.skin,r=t.skin_url;if(!1!==n){var o=n||"lightgray";r=r?e.documentBaseURI.toAbsolute(r):M.baseURL+"/skins/"+o}return r},re=function(e,t){for(var n=[],r=1;r<10;r++){var o=e["toolbar"+r];if(!o)break;n.push(o)}var i=e.toolbar?[e.toolbar]:[t];return n.length>0?n:i},oe=function(e){var t=e.getParam("toolbar");return!1===t?[]:L.isArray(t)?L.grep(t,function(e){return e.length>0}):re(e.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image")},ie=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ae=tinymce.util.Tools.resolve("tinymce.ui.Factory"),ce=tinymce.util.Tools.resolve("tinymce.util.I18n"),se=function(e){return e.fire("SkinLoaded")},le=function(e){return e.fire("ResizeEditor")},ue=function(e){return e.fire("BeforeRenderUI")},de={fireSkinLoaded:se,fireResizeEditor:le,fireBeforeRenderUI:ue},fe=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}},pe=function(e,t){e.shortcuts.add("Alt+F9","",fe(t,"menubar")),e.shortcuts.add("Alt+F10,F10","",fe(t,"toolbar")),e.shortcuts.add("Alt+F11","",fe(t,"elementpath")),t.on("cancel",function(){e.focus()})},me={addKeys:pe},he=tinymce.util.Tools.resolve("tinymce.geom.Rect"),ge=tinymce.util.Tools.resolve("tinymce.util.Delay"),ve=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},be=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},ye=function(e){return function(){return e}},xe=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var a=r.concat(o);return e.apply(null,a)}},we=ye(!1),Ee=ye(!0),_e=we,Se=Ee,ke=function(){return Ce},Ce=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r=function(){},o=function(){return null},i=function(){},a={fold:function(e,t){return e()},is:_e,isSome:_e,isNone:Se,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:o,getOrUndefined:i,or:n,orThunk:t,map:ke,ap:ke,each:r,bind:ke,flatten:ke,exists:_e,forall:Se,filter:ke,equals:e,equals_:e,toArray:function(){return[]},toString:ye("none()")};return Object.freeze&&Object.freeze(a),a}(),Te=function e(t){var n=function(){return t},r=function(){return a},o=function(n){return e(n(t))},i=function(e){return e(t)},a={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:Se,isNone:_e,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:r,orThunk:r,map:o,ap:function(n){return n.fold(ke,function(n){return e(n(t))})},each:function(e){e(t)},bind:i,flatten:n,exists:i,forall:i,filter:function(e){return e(t)?a:Ce},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(_e,function(e){return n(t,e)})},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return a},Ie=function(e){return null===e||void 0===e?Ce:Te(e)},De={some:Te,none:ke,from:Ie},Re=function(e){var t=Ne(e);if(t&&"static"!==ie.DOM.getStyle(t,"position",!0)){var n=ie.DOM.getPos(t),r=t.scrollLeft-n.x,o=t.scrollTop-n.y;return De.some({x:r,y:o})}return De.none()},Oe=function(e,t){var n=ie.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=n},Ne=function(e){return e?e.getRoot().uiContainer:null},Ue=function(e,t){return t.uiContainer=Ne(e)},Ae={getUiContainerDelta:Re,setUiContainer:Oe,getUiContainer:Ne,inheritUiContainer:Ue},Pe=function(e,t,n){var r,o=[];if(t)return L.each(t.split(/[ ,]/),function(t){var i,a=function(){var n=e.selection;t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})};"|"===t?r=null:(r||(r={type:"buttongroup",items:[]},o.push(r)),e.buttons[t]&&(i=t,t=e.buttons[i],"function"==typeof t&&(t=t()),t.type=t.type||"button",t.size=n,t=ae.create(t),r.items.push(t),e.initialized?a():e.on("init",a)))}),{type:"toolbar",layout:"flow",items:o}},Me=function(e,t){var n=[],r=function(r){r&&n.push(Pe(e,r,t))};if(L.each(oe(e),function(e){r(e)}),n.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}},Le={createToolbar:Pe,createToolbars:Me},je=ie.DOM,Fe=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},Ge=function(e){L.each(e.contextToolbars,function(e){e.panel&&e.panel.hide()})},Be=function(e,t){e.moveTo(t.left,t.top)},He=function(e,t,n){t=t?t.substr(0,2):"",L.each({t:"down",b:"up"},function(r,o){e.classes.toggle("arrow-"+r,n(o,t.substr(0,1)))}),L.each({l:"left",r:"right"},function(r,o){e.classes.toggle("arrow-"+r,n(o,t.substr(1,1)))})},ze=function(e,t,n,r,o,i){return i=Fe({x:t,y:n,w:i.w,h:i.h}),e&&(i=e({elementRect:Fe(r),contentAreaRect:Fe(o),panelRect:i})),i},We=function(e){var t,n=function(){return e.contextToolbars||[]},r=function(t){var n,r,o;return n=je.getPos(e.getContentAreaContainer()),r=e.dom.getRect(t),o=e.dom.getRoot(),"BODY"===o.nodeName&&(r.x-=o.ownerDocument.documentElement.scrollLeft||o.scrollLeft,r.y-=o.ownerDocument.documentElement.scrollTop||o.scrollTop),r.x+=n.x,r.y+=n.y,r},o=function(t,n){var o,i,a,c,s,l,u,d,f=q(e);if(!e.removed){if(!t||!t.toolbar.panel)return void Ge(e);u=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],s=t.toolbar.panel,n&&s.show(),a=r(t.element),i=je.getRect(s.getEl()),c=je.getRect(e.getContentAreaContainer()||e.getBody());var p=Ae.getUiContainerDelta(s).getOr({x:0,y:0});if(a.x+=p.x,a.y+=p.y,i.x+=p.x,i.y+=p.y,c.x+=p.x,c.y+=p.y,d=25,"inline"!==je.getStyle(t.element,"display",!0)){var m=t.element.getBoundingClientRect();a.w=m.width,a.h=m.height}e.inline||(c.w=e.getDoc().documentElement.offsetWidth),e.selection.controlSelection.isResizable(t.element)&&a.w<d&&(a=he.inflate(a,0,8)),o=he.findBestRelativePosition(i,a,c,u),a=he.clamp(a,c),o?(l=he.relativePosition(i,a,o),Be(s,ze(f,l.x,l.y,a,c,i))):(c.h+=i.h,a=he.intersect(c,a),a?(o=he.findBestRelativePosition(i,a,c,["bc-tc","bl-tl","br-tr"]),o?(l=he.relativePosition(i,a,o),Be(s,ze(f,l.x,l.y,a,c,i))):Be(s,ze(f,a.x,a.y,a,c,i))):s.hide()),He(s,o,function(e,t){return e===t})}},i=function(t){return function(){var n=function(){e.selection&&o(l(e.selection.getNode()),t)};ge.requestAnimationFrame(n)}},a=function(n){if(!t){var r=i(!0),o=Ae.getUiContainer(n);t=e.selection.getScrollContainer()||e.getWin(),je.bind(t,"scroll",r),je.bind(o,"scroll",r),e.on("remove",function(){je.unbind(t,"scroll",r),je.unbind(o,"scroll",r)})}},c=function(t){var n;if(t.toolbar.panel)return t.toolbar.panel.show(),void o(t);n=ae.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:Le.createToolbar(e,t.toolbar.items),oncancel:function(){e.focus()}}),Ae.setUiContainer(e,n),a(n),t.toolbar.panel=n,n.renderTo().reflow(),o(t)},s=function(){L.each(n(),function(e){e.panel&&e.panel.hide()})},l=function(t){var r,o,i,a=n();for(i=e.$(t).parents().add(t),r=i.length-1;r>=0;r--)for(o=a.length-1;o>=0;o--)if(a[o].predicate(i[r]))return{toolbar:a[o],element:i[r]};return null};e.on("click keyup setContent ObjectResized",function(t){("setcontent"!==t.type||t.selection)&&ge.setEditorTimeout(e,function(){var t;t=l(e.selection.getNode()),t?(s(),c(t)):s()})}),e.on("blur hide contextmenu",s),e.on("ObjectResizeStart",function(){var t=l(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()}),e.on("ResizeEditor ResizeWindow",i(!0)),e.on("nodeChange",i(!1)),e.on("remove",function(){L.each(n(),function(e){e.panel&&e.panel.remove()}),e.contextToolbars={}}),e.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var t=l(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()})},qe={addContextualToolbars:We},Ve=function(e){if(null===e)return"null";var t=void 0===e?"undefined":n(e);return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},Je=function(e){return function(t){return Ve(t)===e}},Ye=Je("function"),Ke=Je("number"),Xe=function(){var e=Array.prototype.indexOf,t=function(t,n){return e.call(t,n)},n=function(e,t){return it(e,t)};return void 0===e?n:t}(),Qe=function(e,t){var n=Xe(e,t);return-1===n?De.none():De.some(n)},$e=function(e,t){return ot(e,t).isSome()},Ze=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o,e)}return r},et=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},tt=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},nt=function(e,t,n){return et(e,function(e){n=t(n,e)}),n},rt=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n,e))return De.some(o)}return De.none()},ot=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n,e))return De.some(n)}return De.none()},it=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},at=Array.prototype.push,ct=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);at.apply(t,e[n])}return t},st=Array.prototype.slice,lt=function(e){var t=st.call(e,0);return t.reverse(),t},ut=(Ye(Array.from)&&Array.from,{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),dt=function(){return{name:"|",item:{text:"|"}}},ft=function(e,t){var n=t?{name:e,item:t}:null;return"|"===e?dt():n},pt=function(e,t){return ot(e,function(e){return e.name===t}).isSome()},mt=function(e){return e&&"|"===e.item.text},ht=function(e,t){var n=tt(e,function(e){return!1===t.hasOwnProperty(e.name)}),r=tt(n,function(e,t,n){return!mt(e)||!mt(n[t-1])});return tt(r,function(e,t,n){return!mt(e)||t>0&&t<n.length-1})},gt=function(e,t,n,r){var o,i,a,c;return t?(i=t[r],c=!0):i=ut[r],i&&(o={text:i.title},a=[],L.each((i.items||"").split(/[ ,]/),function(t){var n=ft(t,e[t]);n&&a.push(n)}),c||L.each(e,function(e,t){e.context!==r||pt(a,t)||("before"===e.separator&&a.push(dt()),e.prependToContext?a.unshift(ft(t,e)):a.push(ft(t,e)),"after"===e.separator&&a.push(dt()))}),o.menu=Ze(ht(a,n),function(e){return e.item}),!o.menu.length)?null:o},vt=function(e){var t,n=[],r=V(e);if(r)for(t in r)n.push(t);else for(t in ut)n.push(t);return n},bt=function(e){for(var t=[],n=vt(e),r=L.makeMap(J(e).split(/[ ,]/)),o=G(e),i="string"==typeof o?o.split(/[ ,]/):n,a=0;a<i.length;a++){var c=i[a],s=gt(e.menuItems,V(e),r,c);s&&t.push(s)}return t},yt={createMenuButtons:bt},xt=ie.DOM,wt=function(e){return{width:e.clientWidth,height:e.clientHeight}},Et=function(e,t,n){var r,o,i,a;r=e.getContainer(),o=e.getContentAreaContainer().firstChild,i=wt(r),a=wt(o),null!==t&&(t=Math.max(Y(e),t),t=Math.min(X(e),t),xt.setStyle(r,"width",t+(i.width-a.width)),xt.setStyle(o,"width",t)),n=Math.max(K(e),n),n=Math.min(Q(e),n),xt.setStyle(o,"height",n),de.fireResizeEditor(e)},_t=function(e,t,n){var r=e.getContentAreaContainer();Et(e,r.clientWidth+t,r.clientHeight+n)},St={resizeTo:Et,resizeBy:_t},kt=tinymce.util.Tools.resolve("tinymce.Env"),Ct=function(e){return{element:function(){return e}}},Tt=function(e,t,n){var r=e.settings[n];r&&r(Ct(t.getEl("body")))},It=function(e,t,n){L.each(n,function(n){var r=t.items().filter("#"+n.name)[0];r&&r.visible()&&n.name!==e&&(Tt(n,r,"onhide"),r.visible(!1))})},Dt=function(e){e.items().each(function(e){e.active(!1)})},Rt=function(e,t){return L.grep(e,function(e){return e.name===t})[0]},Ot=function(e,t,n){return function(r){var o=r.control,i=o.parents().filter("panel")[0],a=i.find("#"+t)[0],c=Rt(n,t);It(t,i,n),Dt(o.parent()),a&&a.visible()?(Tt(c,a,"onhide"),a.hide(),o.active(!1)):(a?(a.show(),Tt(c,a,"onshow")):(a=ae.create({type:"container",name:t,layout:"stack",classes:"sidebar-panel",html:""}),i.prepend(a),Tt(c,a,"onrender"),Tt(c,a,"onshow")),o.active(!0)),de.fireResizeEditor(e)}},Nt=function(){return!kt.ie||kt.ie>=11},Ut=function(e){return!(!Nt()||!e.sidebars)&&e.sidebars.length>0},At=function(e){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:L.map(e.sidebars,function(t){var n=t.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:Ot(e,t.name,e.sidebars)}})}]}},Pt={hasSidebar:Ut,createSidebar:At},Mt=function(e){var t=function(){e._skinLoaded=!0,de.fireSkinLoaded(e)};return function(){e.initialized?t():e.on("init",t)}},Lt={fireSkinLoaded:Mt},jt=ie.DOM,Ft=function(e){return function(t){e.find("*").disabled("readonly"===t.mode)}},Gt=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},Bt=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[Gt("0"),Pt.createSidebar(e)]}},Ht=function(e,t,n){var r,o,i;if(!1===Z(e)&&n.skinUiCss?jt.styleSheetLoader.load(n.skinUiCss,Lt.fireSkinLoaded(e)):Lt.fireSkinLoaded(e)(),r=t.panel=ae.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===F(e)?null:{type:"menubar",border:"0 0 1 0",items:yt.createMenuButtons(e)},Le.createToolbars(e,H(e))]},Pt.hasSidebar(e)?Bt(e):Gt("1 0 0 0")]}),Ae.setUiContainer(e,r),"none"!==te(e)&&(o={type:"resizehandle",direction:te(e),onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;i={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===te(e)?St.resizeTo(e,i.width+t.deltaX,i.height+t.deltaY):St.resizeTo(e,null,i.height+t.deltaY)}}),B(e)){var a=ce.translate(["Powered by {0}",'<a href="https://www.tinymce.com/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>']),c=j(e)?{type:"label",classes:"branding",html:" "+a}:null;r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},o,c]})}return de.fireBeforeRenderUI(e),e.on("SwitchMode",Ft(r)),r.renderBefore(n.targetNode).reflow(),z(e)&&e.setMode("readonly"),n.width&&jt.setStyle(r.getEl(),"width",n.width),e.on("remove",function(){r.remove(),r=null}),me.addKeys(e,r),qe.addContextualToolbars(e),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},zt={render:Ht},Wt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),qt=0,Vt={id:function(){return"mceu_"+qt++},create:function(e,t,n){var r=document.createElement(e);return ie.DOM.setAttribs(r,t),"string"==typeof n?r.innerHTML=n:L.each(n,function(e){e.nodeType&&r.appendChild(e)}),r},createFragment:function(e){return ie.DOM.createFragment(e)},getWindowSize:function(){return ie.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return ie.DOM.getPos(e,t||Vt.getContainer())},getContainer:function(){return kt.container?kt.container:document.body},getViewPort:function(e){return ie.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,t){return ie.DOM.addClass(e,t)},removeClass:function(e,t){return ie.DOM.removeClass(e,t)},hasClass:function(e,t){return ie.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return ie.DOM.toggleClass(e,t,n)},css:function(e,t,n){return ie.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return ie.DOM.getStyle(e,t,!0)},on:function(e,t,n,r){return ie.DOM.bind(e,t,n,r)},off:function(e,t,n){return ie.DOM.unbind(e,t,n)},fire:function(e,t,n){return ie.DOM.fire(e,t,n)},innerHtml:function(e,t){ie.DOM.setHTML(e,t)}},Jt=function(e){return"static"===Vt.getRuntimeStyle(e,"position")},Yt=function(e){return e.state.get("fixed")},Kt=function(e){return{x:0,y:0,w:e.scrollWidth-1,h:e.scrollHeight-1}},Xt=function(){var e=window,t=Math.max(e.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),n=Math.max(e.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop);return{x:t,y:n,w:t+(e.innerWidth||document.documentElement.clientWidth),h:n+(e.innerHeight||document.documentElement.clientHeight)}},Qt=function(e){var t=Ae.getUiContainer(e);return t&&!Yt(e)?Kt(t):Xt()},$t={testMoveRel:function(t,n){for(var r=Qt(this),o=0;o<n.length;o++){var i=e(this,t,n[o]);if(Yt(this)){if(i.x>0&&i.x+i.w<r.w&&i.y>0&&i.y+i.h<r.h)return n[o]}else if(i.x>r.x&&i.x+i.w<r.w&&i.y>r.y&&i.y+i.h<r.h)return n[o]}return n[0]},moveRel:function(t,n){"string"!=typeof n&&(n=this.testMoveRel(t,n));var r=e(this,t,n);return this.moveTo(r.x,r.y)},moveBy:function(e,t){var n=this,r=n.layoutRect();return n.moveTo(r.x+e,r.y+t),n},moveTo:function(e,t){function n(e,t,n){return e<0?0:e+n>t?(e=t-n,e<0?0:e):e}var r=this;if(r.settings.constrainToViewport){var o=Qt(this),i=r.layoutRect();e=n(e,o.w,i.w),t=n(t,o.h,i.h)}var a=Ae.getUiContainer(r);return a&&Jt(a)&&!Yt(r)&&(e-=a.scrollLeft,t-=a.scrollTop),a&&(e+=1,t+=1),r.state.get("rendered")?r.layoutRect({x:e,y:t}).repaint():(r.settings.x=e,r.settings.y=t),r.fire("move",{x:e,y:t}),r}},Zt=tinymce.util.Tools.resolve("tinymce.util.Class"),en=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),tn={parseBox:function(e){var t;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},measureBox:function(e,t){function n(t){var n=e.ownerDocument.defaultView;if(n){var r=n.getComputedStyle(e,null);return r?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),r.getPropertyValue(t)):null}return e.currentStyle[t]}function r(e){var t=parseFloat(n(e));return isNaN(t)?0:t}return{top:r(t+"TopWidth"),right:r(t+"RightWidth"),bottom:r(t+"BottomWidth"),left:r(t+"LeftWidth")}}};L.extend(r.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){var t=void 0;for(t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),r.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)t>0&&(e+=" "),e+=this.prefix+this.cls[t];return e};var nn,rn,on,an=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,cn=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,sn=/^\s*|\s*$/g,ln=Zt.extend({init:function(e){function t(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}function n(e){if(e)return function(t){return t._name===e}}function r(e){if(e)return e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}}function o(e,t,n){if(e)return function(r){var o=r[e]?r[e]():"";return t?"="===t?o===n:"*="===t?o.indexOf(n)>=0:"~="===t?(" "+o+" ").indexOf(" "+n+" ")>=0:"!="===t?o!==n:"^="===t?0===o.indexOf(n):"$="===t&&o.substr(o.length-n.length)===n:!!n}}function i(e){var t;if(e)return e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=c(e[1],[]),function(e){return!s(e,t)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?n%2==0:"odd"===e?n%2==1:!!t[e]&&t[e]()})}function a(e,a,c){function s(e){e&&a.push(e)}var l;return l=an.exec(e.replace(sn,"")),s(t(l[1])),s(n(l[2])),s(r(l[3])),s(o(l[4],l[5],l[6])),s(i(l[7])),a.pseudo=!!l[7],a.direct=c,a}function c(e,t){var n,r,o,i=[];do{if(cn.exec(""),(r=cn.exec(e))&&(e=r[3],i.push(r[1]),r[2])){n=r[3];break}}while(r);for(n&&c(n,t),e=[],o=0;o<i.length;o++)">"!==i[o]&&e.push(a(i[o],[],">"===i[o-1]));return t.push(e),t}var s=this.match;this._selectors=c(e,[])},match:function(e,t){var n,r,o,i,a,c,s,l,u,d,f,p,m;for(t=t||this._selectors,n=0,r=t.length;n<r;n++){for(a=t[n],i=a.length,m=e,p=0,o=i-1;o>=0;o--)for(l=a[o];m;){if(l.pseudo)for(f=m.parent().items(),u=d=f.length;u--&&f[u]!==m;);for(c=0,s=l.length;c<s;c++)if(!l[c](m,u,d)){c=s+1;break}if(c===s){p++;break}if(o===i-1)break;m=m.parent()}if(p===i)return!0}return!1},find:function(e){function t(e,n,r){var o,a,c,s,l,u=n[r];for(o=0,a=e.length;o<a;o++){for(l=e[o],c=0,s=u.length;c<s;c++)if(!u[c](l,o,a)){c=s+1;break}if(c===s)r===n.length-1?i.push(l):l.items&&t(l.items(),n,r+1);else if(u.direct)return;l.items&&t(l.items(),n,r)}}var n,r,i=[],a=this._selectors;if(e.items){for(n=0,r=a.length;n<r;n++)t(e.items(),a[n],0);r>1&&(i=o(i))}return nn||(nn=ln.Collection),new nn(i)}}),un=Array.prototype.push,dn=Array.prototype.slice;on={length:0,init:function(e){e&&this.add(e)},add:function(e){var t=this;return L.isArray(e)?un.apply(t,e):e instanceof rn?t.add(e.toArray()):un.call(t,e),t},set:function(e){var t,n=this,r=n.length;for(n.length=0,n.add(e),t=n.length;t<r;t++)delete n[t];return n},filter:function(e){var t,n,r,o,i=this,a=[];for("string"==typeof e?(e=new ln(e),o=function(t){return e.match(t)}):o=e,t=0,n=i.length;t<n;t++)r=i[t],o(r)&&a.push(r);return new rn(a)},slice:function(){return new rn(dn.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return L.each(this,e),this},toArray:function(){return L.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new rn(L.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n,r=this;return void 0!==t?(r.each(function(n){n[e]&&n[e](t)}),r):(n=r[0],n&&n[e]?n[e]():void 0)},exec:function(e){var t=this,n=L.toArray(arguments).slice(1);return t.each(function(t){t[e]&&t[e].apply(t,n)}),t},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}},L.each("fire on off show hide append prepend before after reflow".split(" "),function(e){on[e]=function(){var t=L.toArray(arguments);return this.each(function(n){e in n&&n[e].apply(n,t)}),this}}),L.each("text name disabled active selected checked visible parent value data".split(" "),function(e){on[e]=function(t){return this.prop(e,t)}}),rn=Zt.extend(on),ln.Collection=rn;var fn=rn,pn=function(e){this.create=e.create};pn.create=function(e,t){return new pn({create:function(n,r){var o,i=function(e){n.set(r,e.value)},a=function(n){e.set(t,n.value)};return n.on("change:"+r,a),e.on("change:"+t,i),o=n._bindings,o||(o=n._bindings=[],n.on("destroy",function(){for(var e=o.length;e--;)o[e]()})),o.push(function(){e.off("change:"+t,i)}),e.get(t)}})};var mn,hn,gn=tinymce.util.Tools.resolve("tinymce.util.Observable"),vn=Zt.extend({Mixins:[gn],init:function(e){var t,n;e=e||{};for(t in e)(n=e[t])instanceof pn&&(e[t]=n.create(this,t));this.data=e},set:function(e,t){var r,o,i=this.data[e];if(t instanceof pn&&(t=t.create(this,e)),"object"===(void 0===e?"undefined":n(e))){for(r in e)this.set(r,e[r]);return this}return a(i,t)||(this.data[e]=t,o={target:this,name:e,value:t,oldValue:i},this.fire("change:"+e,o),this.fire("change",o)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return pn.create(this,e)},destroy:function(){this.fire("destroy")}}),bn={},yn={add:function(e){var t=e.parent();if(t){if(!t._layout||t._layout.isNative())return;bn[t._id]||(bn[t._id]=t),mn||(mn=!0,ge.requestAnimationFrame(function(){var e,t;mn=!1;for(e in bn)t=bn[e],t.state.get("rendered")&&t.reflow();bn={}},document.body))}},remove:function(e){bn[e._id]&&delete bn[e._id]}},xn="onmousewheel"in document,wn=!1,En=0,_n={Statics:{classPrefix:"mce-"},isRtl:function(){return hn.rtl},classPrefix:"mce-",init:function(e){function t(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)i.classes.add(e[t])}var n,o,i=this;i.settings=e=L.extend({},i.Defaults,e),i._id=e.id||"mceu_"+En++,i._aria={role:e.role},i._elmCache={},i.$=Wt,i.state=new vn({visible:!0,active:!1,disabled:!1,value:""}),i.data=new vn(e.data),i.classes=new r(function(){i.state.get("rendered")&&(i.getEl().className=this.toString())}),i.classes.prefix=i.classPrefix,n=e.classes,n&&(i.Defaults&&(o=i.Defaults.classes)&&n!==o&&t(o),t(n)),L.each("title text name visible disabled active value".split(" "),function(t){t in e&&i[t](e[t])}),i.on("click",function(){if(i.disabled())return!1}),i.settings=e,i.borderBox=tn.parseBox(e.border),i.paddingBox=tn.parseBox(e.padding),i.marginBox=tn.parseBox(e.margin),e.hidden&&i.hide()},Properties:"parent,name",getContainerElm:function(){var e=Ae.getUiContainer(this);return e||Vt.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,r,o,i,a,c,s,l,u=this,d=u.settings,f=u.getEl();e=u.borderBox=u.borderBox||tn.measureBox(f,"border"),u.paddingBox=u.paddingBox||tn.measureBox(f,"padding"),u.marginBox=u.marginBox||tn.measureBox(f,"margin"),l=Vt.getSize(f),c=d.minWidth,s=d.minHeight,o=c||l.width,i=s||l.height,n=d.width,r=d.height,a=d.autoResize,a=void 0!==a?a:!n&&!r,n=n||o,r=r||i;var p=e.left+e.right,m=e.top+e.bottom,h=d.maxWidth||65535,g=d.maxHeight||65535;return u._layoutRect=t={x:d.x||0,y:d.y||0,w:n,h:r,deltaW:p,deltaH:m,contentW:n-p,contentH:r-m,innerW:n-p,innerH:r-m,startMinWidth:c||0,startMinHeight:s||0,minW:Math.min(o,h),minH:Math.min(i,g),maxW:h,maxH:g,autoResize:a,scrollW:0},u._lastLayoutRect={},t},layoutRect:function(e){var t,n,r,o,i,a=this,c=a._layoutRect;return c||(c=a.initLayoutRect()),e?(r=c.deltaW,o=c.deltaH,void 0!==e.x&&(c.x=e.x),void 0!==e.y&&(c.y=e.y),void 0!==e.minW&&(c.minW=e.minW),void 0!==e.minH&&(c.minH=e.minH),n=e.w,void 0!==n&&(n=n<c.minW?c.minW:n,n=n>c.maxW?c.maxW:n,c.w=n,c.innerW=n-r),n=e.h,void 0!==n&&(n=n<c.minH?c.minH:n,n=n>c.maxH?c.maxH:n,c.h=n,c.innerH=n-o),n=e.innerW,void 0!==n&&(n=n<c.minW-r?c.minW-r:n,n=n>c.maxW-r?c.maxW-r:n,c.innerW=n,c.w=n+r),n=e.innerH,void 0!==n&&(n=n<c.minH-o?c.minH-o:n,n=n>c.maxH-o?c.maxH-o:n,c.innerH=n,c.h=n+o),void 0!==e.contentW&&(c.contentW=e.contentW),void 0!==e.contentH&&(c.contentH=e.contentH),t=a._lastLayoutRect,t.x===c.x&&t.y===c.y&&t.w===c.w&&t.h===c.h||(i=hn.repaintControls,i&&i.map&&!i.map[a._id]&&(i.push(a),i.map[a._id]=!0),t.x=c.x,t.y=c.y,t.w=c.w,t.h=c.h),a):c},repaint:function(){var e,t,n,r,o,i,a,c,s,l,u=this;s=document.createRange?function(e){return e}:Math.round,e=u.getEl().style,r=u._layoutRect,c=u._lastRepaintRect||{},o=u.borderBox,i=o.left+o.right,a=o.top+o.bottom,r.x!==c.x&&(e.left=s(r.x)+"px",c.x=r.x),r.y!==c.y&&(e.top=s(r.y)+"px",c.y=r.y),r.w!==c.w&&(l=s(r.w-i),e.width=(l>=0?l:0)+"px",c.w=r.w),r.h!==c.h&&(l=s(r.h-a),e.height=(l>=0?l:0)+"px",c.h=r.h),u._hasBody&&r.innerW!==c.innerW&&(l=s(r.innerW),n=u.getEl("body"),n&&(t=n.style,t.width=(l>=0?l:0)+"px"),c.innerW=r.innerW),u._hasBody&&r.innerH!==c.innerH&&(l=s(r.innerH),n=n||u.getEl("body"),n&&(t=t||n.style,t.height=(l>=0?l:0)+"px"),c.innerH=r.innerH),u._lastRepaintRect=c,u.fire("repaint",{},!1)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,Vt.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){var n=this;return c(n).on(e,function(e){var t,r;return"string"!=typeof e?e:function(o){return t||n.parentsAndSelf().each(function(n){var o=n.settings.callbacks;if(o&&(t=o[e]))return r=n,!1}),t?t.call(r,o):(o.action=e,void this.fire("execute",o))}}(t)),n},off:function(e,t){return c(this).off(e,t),this},fire:function(e,t,n){var r=this;if(t=t||{},t.control||(t.control=r),t=c(r).fire(e,t),!1!==n&&r.parent)for(var o=r.parent();o&&!t.isPropagationStopped();)o.fire(e,t,!1),o=o.parent();return t},hasEventListeners:function(e){return c(this).has(e)},parents:function(e){var t,n=this,r=new fn;for(t=n.parent();t;t=t.parent())r.add(t);return e&&(r=r.filter(e)),r},parentsAndSelf:function(e){return new fn(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=Wt("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,r=n.getEl(n.ariaTarget);return void 0===t?n._aria[e]:(n._aria[e]=t,n.state.get("rendered")&&r.setAttribute("role"===e?e:"aria-"+e,t),n)},encode:function(e,t){return!1!==t&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return hn.translate?hn.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e,t,n=this,r=n.getEl(),o=n.parent();if(n.items){var i=n.items().toArray();for(t=i.length;t--;)i[t].remove()}o&&o.items&&(e=[],o.items().each(function(t){t!==n&&e.push(t)}),o.items().set(e),o._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&Wt(r).off();var a=n.getRoot().controlIdLookup;return a&&delete a[n._id],r&&r.parentNode&&r.parentNode.removeChild(r),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return Wt(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return Wt(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,r,o,i=this,a=i.settings;i.$el=Wt(i.getEl()),i.state.set("rendered",!0);for(r in a)0===r.indexOf("on")&&i.on(r.substr(2),a[r]);if(i._eventsRoot){for(n=i.parent();!o&&n;n=n.parent())o=n._eventsRoot;if(o)for(r in o._nativeEvents)i._nativeEvents[r]=!0}s(i),a.style&&(e=i.getEl())&&(e.setAttribute("style",a.style),e.style.cssText=a.style),i.settings.border&&(t=i.borderBox,i.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var c=i.getRoot();c.controlIdLookup||(c.controlIdLookup={}),c.controlIdLookup[i._id]=i;for(var l in i._aria)i.aria(l,i._aria[l]);!1===i.state.get("visible")&&(i.getEl().style.display="none"),i.bindStates(),i.state.on("change:visible",function(e){var t,n=e.value;i.state.get("rendered")&&(i.getEl().style.display=!1===n?"none":"",i.getEl().getBoundingClientRect()),t=i.parent(),t&&(t._lastRect=null),i.fire(n?"show":"hide"),yn.add(i)}),i.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t,n,r,o,i,a,c=this.getEl(),s=c.parentNode,l=function(e,t){var n,r,o=e;for(n=r=0;o&&o!==t&&o.nodeType;)n+=o.offsetLeft||0,r+=o.offsetTop||0,o=o.offsetParent;return{x:n,y:r}}(c,s);return t=l.x,n=l.y,r=c.offsetWidth,o=c.offsetHeight,i=s.clientWidth,a=s.clientHeight,"end"===e?(t-=i-r,n-=a-o):"center"===e&&(t-=i/2-r/2,n-=a/2-o/2),s.scrollLeft=t,s.scrollTop=n,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var r=n.length;r--;)n[r].rootControl=e;return e},reflow:function(){yn.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};L.each("text title visible disabled active value".split(" "),function(e){_n[e]=function(t){return 0===arguments.length?this.state.get(e):(void 0!==t&&this.state.set(e,t),this)}}),hn=Zt.extend(_n);var Sn,kn,Cn,Tn,In=hn,Dn=function(e){return!!e.getAttribute("data-mce-tabstop")},Rn={},On=In.extend({init:function(e){var t=this;t._super(e),e=t.settings,e.fixed&&t.state.set("fixed",!0),t._items=new fn,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new r(function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())}),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=ae.create((e.layout||"")+"layout"),t.settings.items?t.add(t.settings.items):t.add(t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return e=Rn[e]=Rn[e]||new ln(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t,n,r,o=this;return e&&(n=o.keyboardNav||o.parents().eq(-1)[0].keyboardNav)?void n.focusFirst(o):(r=o.find("*"),o.statusbar&&r.add(o.statusbar.items()),r.each(function(e){if(e.settings.autofocus)return t=null,!1;e.canFocus&&(t=t||e)}),t&&t.focus(),o)},replace:function(e,t){for(var n,r=this.items(),o=r.length;o--;)if(r[o]===e){r[o]=t;break}o>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(e){var t,n=this,r=[];return L.isArray(e)||(e=[e]),L.each(e,function(e){e&&(e instanceof In||("string"==typeof e&&(e={type:e}),t=L.extend({},n.settings.defaults,e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=ae.create(t)),r.push(e))}),r},renderNew:function(){var e=this;return e.items().each(function(t,n){var r;t.parent(e),t.state.get("rendered")||(r=e.getEl("body"),r.hasChildNodes()&&n<=r.childNodes.length-1?Wt(r.childNodes[n]).before(t.renderHtml()):Wt(r).append(t.renderHtml()),t.postRender(),yn.add(t))}),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var r,o,i,a=this;return e=a.create(e),r=a.items(),!n&&t<r.length-1&&(t+=1),t>=0&&t<r.length&&(o=r.slice(0,t).toArray(),i=r.slice(t).toArray(),r.set(o.concat(e,i))),a.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),r=e.value();n&&void 0!==r&&(t[n]=r)}),t},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&(e=t.borderBox,t.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=l({root:t})),t},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!==t.w||n.h!==t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var e;if(yn.remove(this),this.visible()){for(In.repaintControls=[],In.repaintControls.map={},this.recalc(),e=In.repaintControls.length;e--;)In.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),In.repaintControls=[]}return this}}),Nn={init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function e(){function e(e,i,a,c,s,l){var u,d,f,p,m,h,g,v,b;if(d=t.getEl("scroll"+e)){if(v=i.toLowerCase(),b=a.toLowerCase(),Wt(t.getEl("absend")).css(v,t.layoutRect()[c]-1),!s)return void Wt(d).css("display","none");Wt(d).css("display","block"),u=t.getEl("body"),f=t.getEl("scroll"+e+"t"),p=u["client"+a]-2*n,p-=r&&o?d["client"+l]:0,m=u["scroll"+a],h=p/m,g={},g[v]=u["offset"+i]+n,g[b]=p,Wt(d).css(g),g={},g[v]=u["scroll"+i]*h,g[b]=p*h,Wt(f).css(g)}}var r,o,i;i=t.getEl("body"),r=i.scrollWidth>i.clientWidth,o=i.scrollHeight>i.clientHeight,e("h","Left","Width","contentW",r,"Height"),e("v","Top","Height","contentH",o,"Width")}var t=this,n=2;t.settings.autoScroll&&(t._hasScroll||(t._hasScroll=!0,function(){function e(e,r,o,i,a){var c,s=t._id+"-scroll"+e,l=t.classPrefix;Wt(t.getEl()).append('<div id="'+s+'" class="'+l+"scrollbar "+l+"scrollbar-"+e+'"><div id="'+s+'t" class="'+l+'scrollbar-thumb"></div></div>'),t.draghelper=new f(s+"t",{start:function(){c=t.getEl("body")["scroll"+r],Wt("#"+s).addClass(l+"active")},drag:function(s){var l,u,d,f,p=t.layoutRect();u=p.contentW>p.innerW,d=p.contentH>p.innerH,f=t.getEl("body")["client"+o]-2*n,f-=u&&d?t.getEl("scroll"+e)["client"+a]:0,l=f/t.getEl("body")["scroll"+o],t.getEl("body")["scroll"+r]=c+s["delta"+i]/l},stop:function(){Wt("#"+s).removeClass(l+"active")}})}t.classes.add("scroll"),e("v","Top","Height","Y","Width"),e("h","Left","Width","X","Height")}(),t.on("wheel",function(n){var r=t.getEl("body");r.scrollLeft+=10*(n.deltaX||0),r.scrollTop+=10*n.deltaY,e()}),Wt(t.getEl("body")).on("scroll",e)),e())}},Un=On.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[Nn],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),void 0===n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}}),An={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){if(e<=1||t<=1){var n=Vt.getWindowSize();e=e<=1?e*n.w:e,t=t<=1?t*n.h:t}return this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this,r=n.layoutRect();return n.resizeTo(r.w+e,r.h+t)}},Pn=[],Mn=[],Ln=Un.extend({Mixins:[$t,An],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.classes.add("floatpanel"),e.autohide&&(h(),v(),Pn.push(t)),e.autofix&&(g(),t.on("move",function(){b(this)})),t.on("postrender show",function(e){if(e.control===t){var n,r=t.classPrefix;t.modal&&!Tn&&(n=Wt("#"+r+"modal-block",t.getContainerElm()),n[0]||(n=Wt('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>').appendTo(t.getContainerElm())),ge.setTimeout(function(){n.addClass(r+"in"),Wt(t.getEl()).addClass(r+"in")}),Tn=!0),y(!0,t)}}),t.on("show",function(){t.parents().each(function(e){if(e.state.get("fixed"))return t.fixed(!0),!1})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.classes.add("popover").add("bottom").add(t.isRtl()?"end":"start")),t.aria("label",e.ariaLabel),t.aria("labelledby",t._id),t.aria("describedby",t.describedBy||t._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!==e){if(t.state.get("rendered")){var n=Vt.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var e,t=this,n=t._super();for(e=Pn.length;e--&&Pn[e]!==t;);return-1===e&&Pn.push(t),n},hide:function(){return x(this),y(!1,this),this._super()},hideAll:function(){Ln.hideAll()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||(e.remove(),y(!1,e)),e},remove:function(){x(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});Ln.hideAll=function(){for(var e=Pn.length;e--;){var t=Pn[e];t&&t.settings.autohide&&(t.hide(),Pn.splice(e,1))}};var jn=function(e,t){return!(!e||t.settings.ui_container)},Fn=function(e,t,n){var r,o,i=ie.DOM,a=W(e);a&&(o=i.select(a)[0]);var c=function(){if(r&&r.moveRel&&r.visible()&&!r._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),o=0,a=0;if(t){var c=i.getPos(n),s=i.getPos(t);o=Math.max(0,s.x-c.x),a=Math.max(0,s.y-c.y)}r.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(o,a)}},s=function(){r&&(r.show(),c(),i.addClass(e.getBody(),"mce-edit-focus"))},l=function(){r&&(r.hide(),Ln.hideAll(),i.removeClass(e.getBody(),"mce-edit-focus"))},u=function(){if(r)return void(r.visible()||s());r=t.panel=ae.create({type:o?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:jn(o,e),fixed:jn(o,e),border:1,items:[!1===F(e)?null:{type:"menubar",border:"0 0 1 0",items:yt.createMenuButtons(e)},Le.createToolbars(e,H(e))]}),Ae.setUiContainer(e,r),de.fireBeforeRenderUI(e),o?r.renderTo(o).reflow():r.renderTo().reflow(),me.addKeys(e,r),s(),qe.addContextualToolbars(e),e.on("nodeChange",c),e.on("ResizeWindow",c),e.on("activate",s),e.on("deactivate",l),e.nodeChanged()};return e.settings.content_editable=!0,e.on("focus",function(){!1===Z(e)&&n.skinUiCss?i.styleSheetLoader.load(n.skinUiCss,u,u):u()}),e.on("blur hide",l),e.on("remove",function(){r&&(r.remove(),r=null)}),!1===Z(e)&&n.skinUiCss?i.styleSheetLoader.load(n.skinUiCss,Lt.fireSkinLoaded(e)):Lt.fireSkinLoaded(e)(),{}},Gn={render:Fn},Bn=function(e,t){var n;e.on("ProgressState",function(e){n=n||new w(t.panel.getEl("body")),e.state?n.show(e.time):n.hide()})},Hn={setup:Bn},zn=function(e,t,n){var r=ne(e);return r&&(n.skinUiCss=r+"/skin.min.css",e.contentCSS.push(r+"/content"+(e.inline?".inline":"")+".min.css")),Hn.setup(e,t),ee(e)?Gn.render(e,t,n):zt.render(e,t,n)},Wn={renderUI:zn},qn=In.extend({Mixins:[$t],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}}),Vn=In.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&!1!==Vn.tooltips&&(t.on("mouseenter",function(n){var r=t.tooltip().moveTo(-65535);if(n.control===t){var o=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n","bc-tc"===o),r.classes.toggle("tooltip-nw","bc-tl"===o),r.classes.toggle("tooltip-ne","bc-tr"===o),r.moveRel(t.getEl(),o)}else r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().remove(),t._tooltip=null})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new qn({type:"tooltip"}),Ae.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var e=this,t=e.settings;e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},bindStates:function(){function e(e){n.aria("disabled",e),n.classes.toggle("disabled",e)}function t(e){n.aria("pressed",e),n.classes.toggle("active",e)}var n=this;return n.state.on("change:disabled",function(t){e(t.value)}),n.state.on("change:active",function(e){t(e.value)}),n.state.get("disabled")&&e(!0),n.state.get("active")&&t(!0),n._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),Jn=Vn.extend({Defaults:{value:0},init:function(e){var t=this;t._super(e),t.classes.add("progress"),t.settings.filter||(t.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this,t=e._id,n=this.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div class="'+n+'bar-container"><div class="'+n+'bar"></div></div><div class="'+n+'text">0%</div></div>'},postRender:function(){var e=this;return e._super(),e.value(e.settings.value),e},bindStates:function(){function e(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}var t=this;return t.state.on("change:value",function(t){e(t.value)}),e(t.state.get("value")),t._super()}}),Yn=function(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")},Kn=In.extend({Mixins:[$t],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new Jn),t.on("click",function(e){-1!==e.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var e=this,t=e.classPrefix,n="",r="",o="",i="";return e.icon&&(n='<i class="'+t+"ico "+t+"i-"+e.icon+'"></i>'),i=' style="max-width: '+e.maxWidth+"px;"+(e.color?"background-color: "+e.color+';"':'"'),e.closeButton&&(r='<button type="button" class="'+t+'close" aria-hidden="true">×</button>'),e.progressBar&&(o=e.progressBar.renderHtml()),'<div id="'+e._id+'" class="'+e.classes+'"'+i+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+e.state.get("text")+"</div>"+o+r+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return ge.setTimeout(function(){e.$el.addClass(e.classPrefix+"in"),Yn(e,e.state.get("text"))},100),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().firstChild.innerHTML=t.value,Yn(e,t.value)}),e.progressBar&&(e.progressBar.bindStates(),e.progressBar.state.on("change:value",function(t){Yn(e,e.state.get("text"))})),e._super()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||e.remove(),e},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=65534}}),Xn=[],Qn="",$n=Ln.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var t=this;t._super(e),t.isRtl()&&t.classes.add("rtl"),t.classes.add("window"),t.bodyClasses.add("window-body"),t.state.set("fixed",!0),e.buttons&&(t.statusbar=new Un({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),t.statusbar.classes.add("foot"),t.statusbar.parent(t)),t.on("click",function(e){var n=t.classPrefix+"close";(Vt.hasClass(e.target,n)||Vt.hasClass(e.target.parentNode,n))&&t.close()}),t.on("cancel",function(){t.close()}),t.on("move",function(e){e.control===t&&Ln.hideAll()}),t.aria("describedby",t.describedBy||t._id+"-none"),t.aria("label",e.title),t._fullscreen=!1},recalc:function(){var e,t,n,r,o=this,i=o.statusbar;o._fullscreen&&(o.layoutRect(Vt.getWindowSize()),o.layoutRect().contentH=o.layoutRect().innerH),o._super(),e=o.layoutRect(),o.settings.title&&!o._fullscreen&&(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),o.layoutRect({w:t,x:n}),r=!0),i&&(i.layoutRect({w:o.layoutRect().innerW}).recalc(),(t=i.layoutRect().minW+e.deltaW)>e.w&&(n=e.x-Math.max(0,t-e.w),o.layoutRect({w:t,x:n}),r=!0)),r&&o.recalc()},initLayoutRect:function(){var e,t=this,n=t._super(),r=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var o=Vt.getSize(e);n.headerW=o.width,n.headerH=o.height,r+=n.headerH}t.statusbar&&(r+=t.statusbar.layoutRect().h),n.deltaH+=r,n.minH+=r,n.h+=r;var i=Vt.getWindowSize();return n.x=t.settings.x||Math.max(0,i.w/2-n.w/2),n.y=t.settings.y||Math.max(0,i.h/2-n.h/2),n},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,o=e.settings,i="",a="",c=o.html;return e.preRender(),t.preRender(e),o.title&&(i='<div id="'+n+'-head" class="'+r+'window-head"><div id="'+n+'-title" class="'+r+'title">'+e.encode(o.title)+'</div><div id="'+n+'-dragh" class="'+r+'dragh"></div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),o.url&&(c='<iframe src="'+o.url+'" tabindex="-1"></iframe>'),void 0===c&&(c=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+i+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+c+"</div>"+a+"</div></div>"},fullscreen:function(e){var t,n,r=this,o=document.documentElement,i=r.classPrefix;if(e!==r._fullscreen)if(Wt(window).on("resize",function(){var e;if(r._fullscreen)if(t)r._timer||(r._timer=ge.setTimeout(function(){var e=Vt.getWindowSize();r.moveTo(0,0).resizeTo(e.w,e.h),r._timer=0},50));else{e=(new Date).getTime();var n=Vt.getWindowSize();r.moveTo(0,0).resizeTo(n.w,n.h),(new Date).getTime()-e>50&&(t=!0)}}),n=r.layoutRect(),r._fullscreen=e,e){r._initial={x:n.x,y:n.y,w:n.w,h:n.h},r.borderBox=tn.parseBox("0"),r.getEl("head").style.display="none",n.deltaH-=n.headerH+2,Wt([o,document.body]).addClass(i+"fullscreen"),r.classes.add("fullscreen");var a=Vt.getWindowSize();r.moveTo(0,0).resizeTo(a.w,a.h)}else r.borderBox=tn.parseBox(r.settings.border),r.getEl("head").style.display="",n.deltaH+=n.headerH,Wt([o,document.body]).removeClass(i+"fullscreen"),r.classes.remove("fullscreen"),r.moveTo(r._initial.x,r._initial.y).resizeTo(r._initial.w,r._initial.h);return r.reflow()},postRender:function(){var e,t=this;setTimeout(function(){t.classes.add("in"),t.fire("open")},0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new f(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",function(e){e.isDefaultPrevented()||t.close()}),Xn.push(t),_(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e,t=this;for(t.dragHelper.destroy(),t._super(),t.statusbar&&this.statusbar.remove(),S(t.classPrefix,!1),e=Xn.length;e--;)Xn[e]===t&&Xn.splice(e,1);_(Xn.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});!function(){function e(){var e,t,n=Vt.getWindowSize();for(e=0;e<Xn.length;e++)t=Xn[e].layoutRect(),Xn[e].moveTo(Xn[e].settings.x||Math.max(0,n.w/2-t.w/2),Xn[e].settings.y||Math.max(0,n.h/2-t.h/2))}if(!kt.desktop){var t={w:window.innerWidth,h:window.innerHeight};ge.setInterval(function(){var e=window.innerWidth,n=window.innerHeight;t.w===e&&t.h===n||(t={w:e,h:n},Wt(window).trigger("resize"))},100)}Wt(window).on("resize",e)}();var Zn=$n.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(e){function t(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),r(t)}}}var n,r=e.callback||function(){};switch(e.buttons){case Zn.OK_CANCEL:n=[t("Ok",!0,!0),t("Cancel",!1)];break;case Zn.YES_NO:case Zn.YES_NO_CANCEL:n=[t("Yes",1,!0),t("No",0)],e.buttons===Zn.YES_NO_CANCEL&&n.push(t("Cancel",-1));break;default:n=[t("Ok",!0,!0)]}return new $n({padding:20,x:e.x,y:e.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:n,title:e.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:e.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:e.onClose,onCancel:function(){r(!1)}}).renderTo(document.body).reflow()},alert:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,Zn.msgBox(e)},confirm:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,e.buttons=Zn.OK_CANCEL,Zn.msgBox(e)}}}),er=function(e){return{renderUI:function(t){return Wn.renderUI(e,this,t)},resizeTo:function(t,n){return St.resizeTo(e,t,n)},resizeBy:function(t,n){return St.resizeBy(e,t,n)},getNotificationManagerImpl:function(){return E(e)},getWindowManagerImpl:function(){return C(e)}}},tr={get:er},nr=Zt.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=L.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,r,o,i=this,a=i.settings;t=a.firstControlClass,n=a.lastControlClass,e.each(function(e){e.classes.remove(t).remove(n).add(a.controlClass),e.visible()&&(r||(r=e),o=e)}),r&&r.classes.add(t),o&&o.classes.add(n)},renderHtml:function(e){var t=this,n="";return t.applyClasses(e.items()),e.items().each(function(e){n+=e.renderHtml()}),n},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),rr=nr.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),or=Vn.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){n.fire("click",e),e.preventDefault()}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&(e=t.style,e.width=e.height="100%"),this._super()},renderHtml:function(){var e,t,n=this,r=n._id,o=n.classPrefix,i=n.state.get("icon"),a=n.state.get("text"),c="",s=n.settings;return e=s.image,e?(i="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",a&&(n.classes.add("btn-has-text"),c='<span class="'+o+'txt">'+n.encode(a)+"</span>"),i=i?o+"ico "+o+"i-"+i:"",t="boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"",'<div id="'+r+'" class="'+n.classes+'" tabindex="-1"'+t+'><button id="'+r+'-button" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+e+"></i>":"")+c+"</button></div>"},bindStates:function(){function e(e){var r=$("span."+n,t.getEl());e?(r[0]||($("button:first",t.getEl()).append('<span class="'+n+'"></span>'),r=$("span."+n,t.getEl())),r.html(t.encode(e))):r.remove(),t.classes.toggle("btn-has-text",!!e)}var t=this,$=t.$,n=t.classPrefix+"txt";return t.state.on("change:text",function(t){e(t.value)}),t.state.on("change:icon",function(n){var r=n.value,o=t.classPrefix;t.settings.icon=r,r=r?o+"ico "+o+"i-"+t.settings.icon:"";var i=t.getEl().firstChild,a=i.getElementsByTagName("i")[0];r?(a&&a===i.firstChild||(a=document.createElement("i"),i.insertBefore(a,i.firstChild)),a.className=r):a&&i.removeChild(a),e(t.state.get("text"))}),t._super()}}),ir=or.extend({init:function(e){var t=this;e=L.extend({text:"Browse...",multiple:!1,accept:null},e),t._super(e),t.classes.add("browsebutton"),e.multiple&&t.classes.add("multiple")},postRender:function(){var e=this,t=Vt.create("input",{type:"file",id:e._id+"-browse",accept:e.settings.accept});e._super(),Wt(t).on("change",function(t){var n=t.target.files;e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},t.preventDefault(),n.length&&e.fire("change",t)}),Wt(t).on("click",function(e){e.stopPropagation()}),Wt(e.getEl("button")).on("click",function(e){e.stopPropagation(),t.click()}),e.getEl().appendChild(t)},remove:function(){Wt(this.getEl("button")).off(),Wt(this.getEl("input")).off(),this._super()}}),ar=On.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),cr=Vn.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span></div>"},bindStates:function(){function e(e){t.classes.toggle("checked",e),t.aria("checked",e)}var t=this;return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(n){t.fire("change"),e(n.value)}),t.state.on("change:icon",function(e){var n=e.value,r=t.classPrefix;if(void 0===n)return t.settings.icon;t.settings.icon=n,n=n?r+"ico "+r+"i-"+t.settings.icon:"";var o=t.getEl().firstChild,i=o.getElementsByTagName("i")[0];n?(i&&i===o.firstChild||(i=document.createElement("i"),o.insertBefore(i,o.firstChild)),i.className=n):i&&o.removeChild(i)}),t.state.get("checked")&&e(!0),t._super()}}),sr=tinymce.util.Tools.resolve("tinymce.util.VK"),lr=Vn.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){var r=n.target,o=t.getEl();if(Wt.contains(o,r)||r===o)for(;r&&r!==o;)r.id&&-1!==r.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),r=r.parentNode}),t.on("keydown",function(e){var n;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){if("INPUT"===e.target.nodeName){var n=t.state.get("value"),r=e.target.value;r!==n&&(t.state.set("value",r),t.fire("autocomplete",e))}}),t.on("mouseover",function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&-1!==e.target.className.indexOf(t.classPrefix+"status")){var r=t.statusMessage()||"Ok",o=n.text(r).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===o),n.classes.toggle("tooltip-nw","bc-tl"===o),n.classes.toggle("tooltip-ne","bc-tr"===o),n.moveRel(e.target,o)}})},statusLevel:function(e){return arguments.length>0&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return arguments.length>0&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e,t=this,n=t.settings;t.menu||(e=n.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=ae.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control===t.menu&&t.focus()}),t.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()===t.value())})}).fire("show"),t.menu.on("select",function(e){t.value(e.control.value())}),t.on("focusin",function(e){"INPUT"===e.target.tagName.toUpperCase()&&t.menu.hide()}),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,n=this,r=n.getEl(),o=n.getEl("open"),i=n.layoutRect(),a=0,c=r.firstChild;n.statusLevel()&&"none"!==n.statusLevel()&&(a=parseInt(Vt.getRuntimeStyle(c,"padding-right"),10)-parseInt(Vt.getRuntimeStyle(c,"padding-left"),10)),e=o?i.w-Vt.getSize(o).width-10:i.w-10;var s=document;return s.all&&(!s.documentMode||s.documentMode<=8)&&(t=n.layoutRect().h-2+"px"),Wt(c).css({width:e-a,lineHeight:t}),n._super(),n},postRender:function(){var e=this;return Wt(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var e,t,n=this,r=n._id,o=n.settings,i=n.classPrefix,a=n.state.get("value")||"",c="",s="",l="";return"spellcheck"in o&&(s+=' spellcheck="'+o.spellcheck+'"'),o.maxLength&&(s+=' maxlength="'+o.maxLength+'"'),o.size&&(s+=' size="'+o.size+'"'),o.subtype&&(s+=' type="'+o.subtype+'"'),l='<i id="'+r+'-status" class="mce-status mce-ico" style="display: none"></i>',n.disabled()&&(s+=' disabled="disabled"'),e=o.icon,e&&"caret"!==e&&(e=i+"ico "+i+"i-"+o.icon),t=n.state.get("text"),(e||t)&&(c='<div id="'+r+'-open" class="'+i+"btn "+i+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==e?'<i class="'+e+'"></i>':'<i class="'+i+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",n.classes.add("has-open")),'<div id="'+r+'" class="'+n.classes+'"><input id="'+r+'-inp" class="'+i+'textbox" value="'+n.encode(a,!1)+'" hidefocus="1"'+s+' placeholder="'+n.encode(o.placeholder)+'" />'+l+c+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,t){var n=this;if(0===e.length)return void n.hideMenu();var r=function(e,t){return function(){n.fire("selectitem",{title:t,value:e})}};n.menu?n.menu.items().remove():n.menu=ae.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),L.each(e,function(e){n.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:r(e.value,e.title)})}),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()});var o=n.layoutRect().w;n.menu.layoutRect({w:o,minW:0,maxW:o}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",function(t){e.getEl("inp").value!==t.value&&(e.getEl("inp").value=t.value)}),e.state.on("change:disabled",function(t){e.getEl("inp").disabled=t.value}),e.state.on("change:statusLevel",function(t){var n=e.getEl("status"),r=e.classPrefix,o=t.value;Vt.css(n,"display","none"===o?"none":""),Vt.toggleClass(n,r+"i-checkmark","ok"===o),Vt.toggleClass(n,r+"i-warning","warn"===o),Vt.toggleClass(n,r+"i-error","error"===o),e.classes.toggle("has-status","none"!==o),e.repaint()}),Vt.on(e.getEl("status"),"mouseleave",function(){e.tooltip().hide()}),e.on("cancel",function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())});var t=function(e,t){t&&t.items().length>0&&t.items().eq(e)[0].focus()};return e.on("keydown",function(n){var r=n.keyCode;"INPUT"===n.target.nodeName&&(r===sr.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):r===sr.UP&&(n.preventDefault(),t(-1,e.menu)))}),e._super()},remove:function(){Wt(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),ur=lr.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.state.get("rendered")&&e.repaintColor(t.value)}),e._super()}}),dr=or.extend({showPanel:function(){var e=this,t=e.settings;if(e.classes.add("opened"),e.panel)e.panel.show();else{var n=t.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,e.panel=new Ln(n).on("hide",function(){e.classes.remove("opened")}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}var r=["bc-tc","bc-tl","bc-tr"],o=["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"],i=e.panel.testMoveRel(e.getEl(),t.popoverAlign||(e.isRtl()?r:o));e.panel.classes.toggle("start","l"===i.substr(-1)),e.panel.classes.toggle("end","r"===i.substr(-1));var a="t"===i.substr(0,1);e.panel.classes.toggle("bottom",!a),e.panel.classes.toggle("top",a),e.panel.moveRel(e.getEl(),i)},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),fr=ie.DOM,pr=dr.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("text"),o=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";return r&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(r)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(n){n.aria&&"down"===n.aria.key||n.control!==e||fr.getParent(n.target,"."+e.classPrefix+"open")||(n.stopImmediatePropagation(),t.call(e,n))}),delete e.settings.onclick,e._super()}}),mr=tinymce.util.Tools.resolve("tinymce.util.Color"),hr=Vn.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function e(e,t){var n,r,o=Vt.getPos(e);return n=t.pageX-o.x,r=t.pageY-o.y,n=Math.max(0,Math.min(n/e.clientWidth,1)),r=Math.max(0,Math.min(r/e.clientHeight,1)),{x:n,y:r}}function t(e,t){var n=(360-e.h)/360;Vt.css(a,{top:100*n+"%"}),t||Vt.css(s,{left:e.s+"%",top:100-e.v+"%"}),c.style.background=mr({s:100,v:100,h:e.h}).toHex(),l.color().parse({s:e.s,v:e.v,h:e.h})}function n(n){var r;r=e(c,n),o.s=100*r.x,o.v=100*(1-r.y),t(o),l.fire("change")}function r(n){var r;r=e(i,n),o=u.toHsv(),o.h=360*(1-r.y),t(o,!0),l.fire("change")}var o,i,a,c,s,l=this,u=l.color();i=l.getEl("h"),a=l.getEl("hp"),c=l.getEl("sv"),s=l.getEl("svp"),l._repaint=function(){o=u.toHsv(),t(o)},l._super(),l._svdraghelper=new f(l._id+"-sv",{start:n,drag:n}),l._hdraghelper=new f(l._id+"-h",{start:r,drag:r}),l._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;if(!arguments.length)return t.color().toHex();t.color().parse(e),t._rendered&&t._repaint()},color:function(){return this._color||(this._color=mr()),this._color},renderHtml:function(){var e,t=this,n=t._id,r=t.classPrefix,o="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return e='<div id="'+n+'-h" class="'+r+'colorpicker-h" style="background: -ms-linear-gradient(top,'+o+");background: linear-gradient(to bottom,"+o+');">'+function(){var e,t,n,i,a="";for(n="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",i=o.split(","),e=0,t=i.length-1;e<t;e++)a+='<div class="'+r+'colorpicker-h-chunk" style="height:'+100/t+"%;"+n+i[e]+",endColorstr="+i[e+1]+");-ms-"+n+i[e]+",endColorstr="+i[e+1]+')"></div>';return a}()+'<div id="'+n+'-hp" class="'+r+'colorpicker-h-marker"></div></div>','<div id="'+n+'" class="'+t.classes+'"><div id="'+n+'-sv" class="'+r+'colorpicker-sv"><div class="'+r+'colorpicker-overlay1"><div class="'+r+'colorpicker-overlay2"><div id="'+n+'-svp" class="'+r+'colorpicker-selector1"><div class="'+r+'colorpicker-selector2"></div></div></div></div></div>'+e+"</div>"}}),gr=Vn.extend({init:function(e){var t=this;e=L.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),t._super(e),t.classes.add("dropzone"),e.multiple&&t.classes.add("multiple")},renderHtml:function(){var e,t,n=this,r=n.settings;return e={id:n._id,hidefocus:"1"},t=Vt.create("div",e,"<span>"+this.translate(r.text)+"</span>"),r.height&&Vt.css(t,"height",r.height+"px"),r.width&&Vt.css(t,"width",r.width+"px"),t.className=n.classes,t.outerHTML},postRender:function(){var e=this,t=function(t){t.preventDefault(),e.classes.toggle("dragenter"),e.getEl().className=e.classes},n=function(t){var n=e.settings.accept;if("string"!=typeof n)return t;var r=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return L.grep(t,function(e){return r.test(e.name)})};e._super(),e.$el.on("dragover",function(e){e.preventDefault()}),e.$el.on("dragenter",t),e.$el.on("dragleave",t),e.$el.on("drop",function(t){if(t.preventDefault(),!e.state.get("disabled")){var r=n(t.dataTransfer.files);e.value=function(){return r.length?e.settings.multiple?r:r[0]:null},r.length&&e.fire("change",t)}})},remove:function(){this.$el.off(),this._super()}}),vr=Vn.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){var n;(n=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})}),t.row(t.settings.row)},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes+'">'+e._getDataPathHtml(e.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(e){var t,n,r=this,o=e||[],i="",a=r.classPrefix;for(t=0,n=o.length;t<n;t++)i+=(t>0?'<div class="'+a+'divider" aria-hidden="true"> '+r.settings.delimiter+" </div>":"")+'<div role="button" class="'+a+"path-item"+(t===n-1?" "+a+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+r._id+"-"+t+'" aria-level="'+(t+1)+'">'+o[t].name+"</div>";return i||(i='<div class="'+a+'path-item"> </div>'),i}}),br=vr.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var t=this,n=t.settings.editor;return!1!==n.settings.elementpath&&(t.on("select",function(e){n.focus(),n.selection.select(this.row()[e.index].element),n.nodeChanged()}),n.on("nodeChange",function(r){for(var o=[],i=r.parents,a=i.length;a--;)if(1===i[a].nodeType&&!e(i[a])){var c=n.fire("ResolveName",{name:i[a].nodeName.toLowerCase(),target:i[a]});if(c.isDefaultPrevented()||o.push({name:c.name,element:i[a]}),c.isPropagationStopped())break}t.row(o)})),t._super()}}),yr=On.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),xr=On.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,t=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),t.each(function(t){var n,r=t.settings.label;r&&(n=new yr(L.extend({items:{type:"label",id:t._id+"-l",text:r,flex:0,forId:t._id,disabled:t.disabled()}},e.settings.formItemDefaults)),n.type="formitem",t.aria("labelledby",t._id+"-l"),void 0===t.settings.flex&&(t.settings.flex=1),e.replace(t,n),n.add(t))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.fromJSON(e.settings.data)},bindStates:function(){function e(){var e,n,r,o=0,i=[];if(!1!==t.settings.labelGapCalc)for(r="children"===t.settings.labelGapCalc?t.find("formitem"):t.items(),r.filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;o=n>o?n:o,i.push(t)}),n=t.settings.labelGap||0,e=i.length;e--;)i[e].settings.minWidth=o+n}var t=this;t._super(),t.on("show",e),e()}}),wr=xr.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}}),Er=0,_r=function(e){var t=new Date,n=t.getTime(),r=Math.floor(1e9*Math.random());return Er++,e+"_"+r+Er+String(n)},Sr=function(e,t){var n=t||document,r=n.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw"HTML must have a single root node";return Tr(r.childNodes[0])},kr=function(e,t){var n=t||document,r=n.createElement(e);return Tr(r)},Cr=function(e,t){var n=t||document,r=n.createTextNode(e);return Tr(r)},Tr=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:ye(e)}},Ir=function(e,t,n){var r=e.dom();return De.from(r.elementFromPoint(t,n)).map(Tr)},Dr={fromHtml:Sr,fromTag:kr,fromText:Cr,fromDom:Tr,fromPoint:Ir},Rr=function(e){var t,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,t=e.apply(null,r)),t}},Or={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},Nr=function(e){return e.dom().nodeName.toLowerCase()},Ur=function(e){return e.dom().nodeType},Ar=function(e){return e.dom().nodeValue},Pr=function(e){return function(t){return Ur(t)===e}},Mr=function(e){return Ur(e)===Or.COMMENT||"#comment"===Nr(e)},Lr=Pr(Or.ELEMENT),jr=Pr(Or.TEXT),Fr=Pr(Or.DOCUMENT),Gr={name:Nr,type:Ur,value:Ar,isElement:Lr,isText:jr,isDocument:Fr,isComment:Mr},Br=function(e){var t=Gr.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},Hr=Rr(function(){return zr(Dr.fromDom(document))}),zr=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return Dr.fromDom(t)},Wr={body:Hr,getBody:zr,inBody:Br},qr=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n},Vr={toArray:qr},Jr="undefined"!=typeof window?window:Function("return this;")(),Yr=function(e,t){for(var n=void 0!==t&&null!==t?t:Jr,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},Kr=function(e,t){var n=e.split(".");return Yr(n,t)},Xr=function(e,t){return Kr(e,t)},Qr=function(e,t){var n=Xr(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},$r={getOrDie:Qr},Zr=function(){return $r.getOrDie("Node")},eo=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},to=function(e,t){return eo(e,t,Zr().DOCUMENT_POSITION_PRECEDING)},no=function(e,t){return eo(e,t,Zr().DOCUMENT_POSITION_CONTAINED_BY)},ro={documentPositionPreceding:to,documentPositionContainedBy:no},oo=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},io=function(e,t){var n=oo(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return so(r(1),r(2))},ao=function(e,t){var n=String(t).toLowerCase();return 0===e.length?co():io(e,n)},co=function(){return so(0,0)},so=function(e,t){return{major:e,minor:t}},lo={nu:so,detect:ao,unknown:co},uo=function(e,t){return function(){return t===e}},fo=function(){return po({current:void 0,version:lo.unknown()})},po=function(e){var t=e.current;return{current:t,version:e.version,isEdge:uo("Edge",t),isChrome:uo("Chrome",t),isIE:uo("IE",t),isOpera:uo("Opera",t),isFirefox:uo("Firefox",t),isSafari:uo("Safari",t)}},mo={unknown:fo,nu:po,edge:ye("Edge"),chrome:ye("Chrome"),ie:ye("IE"),opera:ye("Opera"),firefox:ye("Firefox"),safari:ye("Safari")},ho=function(e,t){return function(){return t===e}},go=function(){return vo({current:void 0,version:lo.unknown()})},vo=function(e){var t=e.current;return{current:t,version:e.version,isWindows:ho("Windows",t),isiOS:ho("iOS",t),isAndroid:ho("Android",t),isOSX:ho("OSX",t),isLinux:ho("Linux",t),isSolaris:ho("Solaris",t),isFreeBSD:ho("FreeBSD",t)}},bo={unknown:go,nu:vo,windows:ye("Windows"),ios:ye("iOS"),android:ye("Android"),linux:ye("Linux"),osx:ye("OSX"),solaris:ye("Solaris"),freebsd:ye("FreeBSD")},yo=function(e,t){var n=String(t).toLowerCase();return rt(e,function(e){return e.search(n)})},xo=function(e,t){return yo(e,t).map(function(e){var n=lo.detect(e.versionRegexes,t);return{current:e.name,version:n}})},wo=function(e,t){return yo(e,t).map(function(e){var n=lo.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Eo={detectBrowser:xo,detectOs:wo},_o=function(e,t){return-1!==e.indexOf(t)},So=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ko=function(e){return function(t){return _o(t,e)}},Co=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return _o(e,"edge/")&&_o(e,"chrome")&&_o(e,"safari")&&_o(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,So],search:function(e){return _o(e,"chrome")&&!_o(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return _o(e,"msie")||_o(e,"trident")}},{name:"Opera",versionRegexes:[So,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ko("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ko("firefox")},{name:"Safari",versionRegexes:[So,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(_o(e,"safari")||_o(e,"mobile/"))&&_o(e,"applewebkit")}}],To=[{name:"Windows",search:ko("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return _o(e,"iphone")||_o(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ko("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ko("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ko("linux"),versionRegexes:[]},{name:"Solaris",search:ko("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ko("freebsd"),versionRegexes:[]}],Io={browsers:ye(Co),oses:ye(To)},Do=function(e){var t=Io.browsers(),n=Io.oses(),r=Eo.detectBrowser(t,e).fold(mo.unknown,mo.nu),o=Eo.detectOs(n,e).fold(bo.unknown,bo.nu);return{browser:r,os:o,deviceType:T(o,r,e)}},Ro={detect:Do},Oo=Rr(function(){var e=navigator.userAgent;return Ro.detect(e)}),No={detect:Oo},Uo=Or.ELEMENT,Ao=Or.DOCUMENT,Po=function(e,t){var n=e.dom();if(n.nodeType!==Uo)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Mo=function(e){return e.nodeType!==Uo&&e.nodeType!==Ao||0===e.childElementCount},Lo=function(e,t){var n=void 0===t?document:t.dom();return Mo(n)?[]:Ze(n.querySelectorAll(e),Dr.fromDom)},jo=function(e,t){var n=void 0===t?document:t.dom();return Mo(n)?De.none():De.from(n.querySelector(e)).map(Dr.fromDom)},Fo={all:Lo,is:Po,one:jo},Go=function(e,t){return e.dom()===t.dom()},Bo=function(e,t){return e.dom().isEqualNode(t.dom())},Ho=function(e,t){return $e(t,xe(Go,e))},zo=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Wo=function(e,t){return ro.documentPositionContainedBy(e.dom(),t.dom())},qo=No.detect().browser,Vo=qo.isIE()?Wo:zo,Jo={eq:Go,isEqualNode:Bo,member:Ho,contains:Vo,is:Fo.is},Yo=function(e){return Dr.fromDom(e.dom().ownerDocument)},Ko=function(e){return Dr.fromDom(e.dom().ownerDocument.documentElement)},Xo=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return Dr.fromDom(n)},Qo=function(e){var t=e.dom();return De.from(t.parentNode).map(Dr.fromDom)},$o=function(e){return Qo(e).bind(function(t){var n=ai(t);return ot(n,function(t){return Jo.eq(e,t)})})},Zo=function(e,t){for(var n=Ye(t)?t:ye(!1),r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=Dr.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o},ei=function(e){var t=function(t){return tt(t,function(t){return!Jo.eq(e,t)})};return Qo(e).map(ai).map(t).getOr([])},ti=function(e){var t=e.dom();return De.from(t.offsetParent).map(Dr.fromDom)},ni=function(e){var t=e.dom();return De.from(t.previousSibling).map(Dr.fromDom)},ri=function(e){var t=e.dom();return De.from(t.nextSibling).map(Dr.fromDom)},oi=function(e){return lt(Vr.toArray(e,ni))},ii=function(e){return Vr.toArray(e,ri)},ai=function(e){var t=e.dom();return Ze(t.childNodes,Dr.fromDom)},ci=function(e,t){var n=e.dom().childNodes;return De.from(n[t]).map(Dr.fromDom)},si=function(e){return ci(e,0)},li=function(e){return ci(e,e.dom().childNodes.length-1)},ui=function(e){return e.dom().childNodes.length},di=function(e){return e.dom().hasChildNodes()},fi=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return et(e,function(e,n){r[e]=ye(t[n])}),r}}("element","offset"),pi=function(e,t){var n=ai(e);return n.length>0&&t<n.length?fi(n[t],0):fi(e,t)},mi={owner:Yo,defaultView:Xo,documentElement:Ko,parent:Qo,findIndex:$o,parents:Zo,siblings:ei,prevSibling:ni,offsetParent:ti,prevSiblings:oi,nextSibling:ri,nextSiblings:ii,children:ai,child:ci,firstChild:si,lastChild:li,childNodesCount:ui,hasChildNodes:di,leaf:pi},hi=function(e){return yi(Wr.body(),e)},gi=function(e,t,n){return tt(mi.parents(e,n),t)},vi=function(e,t){return tt(mi.siblings(e),t)},bi=function(e,t){return tt(mi.children(e),t)},yi=function e(t,n){var r=[];return et(mi.children(t),function(t){n(t)&&(r=r.concat([t])),r=r.concat(e(t,n))}),r},xi={all:hi,ancestors:gi,siblings:vi,children:bi,descendants:yi},wi=function(e){return Fo.all(e)},Ei=function(e,t,n){return xi.ancestors(e,function(e){return Fo.is(e,t)},n)},_i=function(e,t){return xi.siblings(e,function(e){return Fo.is(e,t)})},Si=function(e,t){return xi.children(e,function(e){return Fo.is(e,t)})},ki=function(e,t){return Fo.all(t,e)},Ci={all:wi,ancestors:Ei,siblings:_i,children:Si,descendants:ki},Ti=L.trim,Ii=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Di=Ii("true"),Ri=Ii("false"),Oi=function(e,t,n,r,o){return{type:e,title:t,url:n,level:r,attach:o}},Ni=function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return Di(e)}return!1},Ui=function(e,t){return Ze(Ci.descendants(Dr.fromDom(t),e),function(e){return e.dom()})},Ai=function(e){return e.innerText||e.textContent},Pi=function(e){return e.id?e.id:_r("h")},Mi=function(e){return e&&"A"===e.nodeName&&(e.id||e.name)},Li=function(e){return Mi(e)&&Fi(e)},ji=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},Fi=function(e){return Ni(e)&&!Ri(e)},Gi=function(e){return ji(e)&&Fi(e)},Bi=function(e){return ji(e)?parseInt(e.nodeName.substr(1),10):0},Hi=function(e){var t=Pi(e),n=function(){e.id=t};return Oi("header",Ai(e),"#"+t,Bi(e),n)},zi=function(e){var t=e.id||e.name,n=Ai(e);return Oi("anchor",n||"#"+t,"#"+t,0,ve)},Wi=function(e){return Ze(tt(e,Gi),Hi)},qi=function(e){return Ze(tt(e,Li),zi)},Vi=function(e){return Ui("h1,h2,h3,h4,h5,h6,a:not([href])",e)},Ji=function(e){return Ti(e.title).length>0},Yi=function(e){var t=Vi(e);return tt(Wi(t).concat(qi(t)),Ji)},Ki={find:Yi},Xi=function(){return window.tinymce?window.tinymce.activeEditor:M.activeEditor},Qi={},$i=function(){Qi={}},Zi=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},ea=function(e){return L.map(e,Zi)},ta=function(e,t){return{title:e,value:{title:e,url:t,attach:ve}}},na=function(e,t){return!$e(t,function(t){return t.url===e})},ra=function(e,t,n){var r=t in e?e[t]:n;return!1===r?null:r},oa=function(e,t,n,r){var o={title:"-"},i=function(e){var r=e.hasOwnProperty(n)?e[n]:[],o=tt(r,function(e){return na(e,t)});return L.map(o,function(e){return{title:e,value:{title:e,url:e,attach:ve}}})},a=function(e){var n=tt(t,function(t){return t.type===e});return ea(n)};return!1===r.typeahead_urls?[]:"file"===n?function(e){return nt(e,function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(o,t)},[])}([aa(e,i(Qi)),aa(e,a("header")),aa(e,function(){var e=a("anchor"),t=ra(r,"anchor_top","#top"),n=ra(r,"anchor_bottom","#bottom");return null!==t&&e.unshift(ta("<top>",t)),null!==n&&e.push(ta("<bottom>",n)),e}())]):aa(e,i(Qi))},ia=function(e,t){var n=Qi[t];/^https?/.test(e)&&(n?Qe(n,e).isNone()&&(Qi[t]=n.slice(0,5).concat(e)):Qi[t]=[e])},aa=function(e,t){var n=e.toLowerCase(),r=L.grep(t,function(e){return-1!==e.title.toLowerCase().indexOf(n)});return 1===r.length&&r[0].title===e?[]:r},ca=function(e){var t=e.title;return t.raw?t.raw:t},sa=function(e,t,n,r){var o=function(o){var i=Ki.find(n),a=oa(o,i,r,t);e.showAutoComplete(a,o)};e.on("autocomplete",function(){o(e.value())}),e.on("selectitem",function(t){var n=t.value;e.value(n.url);var o=ca(n);"image"===r?e.fire("change",{meta:{alt:o,attach:n.attach}}):e.fire("change",{meta:{text:o,attach:n.attach}}),e.focus()}),e.on("click",function(t){0===e.value().length&&"INPUT"===t.target.nodeName&&o("")}),e.on("PostRender",function(){e.getRoot().on("submit",function(t){t.isDefaultPrevented()||ia(e.value(),r)})})},la=function(e){var t=e.status,n=e.message;return"valid"===t?{status:"ok",message:n}:"unknown"===t?{status:"warn",message:n}:"invalid"===t?{status:"warn",message:n}:{status:"none",message:""}},ua=function(e,t,n){var r=t.filepicker_validator_handler;if(r){var o=function(t){if(0===t.length)return void e.statusLevel("none");r({url:t,type:n},function(t){var n=la(t);e.statusMessage(n.message),e.statusLevel(n.status)})};e.state.on("change:value",function(e){o(e.value)})}},da=lr.extend({Statics:{clearHistory:$i},init:function(e){var t,n,r,o=this,i=Xi(),a=i.settings,c=e.filetype;e.spellcheck=!1,r=a.file_picker_types||a.file_browser_callback_types,r&&(r=L.makeMap(r,/[, ]/)),r&&!r[c]||(n=a.file_picker_callback,!n||r&&!r[c]?!(n=a.file_browser_callback)||r&&!r[c]||(t=function(){n(o.getEl("inp").id,o.value(),c,window)}):t=function(){var e=o.fire("beforecall").meta;e=L.extend({filetype:c},e),n.call(i,function(e,t){o.value(e).fire("change",{meta:t})},o.value(),e)}),t&&(e.icon="browse",e.onaction=t),o._super(e),o.classes.add("filepicker"),sa(o,a,i.getBody(),c),ua(o,a,c)}}),fa=rr.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}}),pa=rr.extend({recalc:function(e){var t,n,r,o,i,a,c,s,l,u,d,f,p,m,h,g,v,b,y,x,w,E,_,S,k,C,T,I,D,R,O,N,U,A,P,M,L,j,F=[],G=Math.max,B=Math.min;for(r=e.items().filter(":visible"),o=e.layoutRect(),i=e.paddingBox,a=e.settings,f=e.isRtl()?a.direction||"row-reversed":a.direction,c=a.align,s=e.isRtl()?a.pack||"end":a.pack,l=a.spacing||0,"row-reversed"!==f&&"column-reverse"!==f||(r=r.set(r.toArray().reverse()),f=f.split("-")[0]),"column"===f?(k="y",_="h",S="minH",C="maxH",I="innerH",T="top",D="deltaH",R="contentH",P="left",U="w",O="x",N="innerW",A="minW",M="right",L="deltaW",j="contentW"):(k="x",_="w",S="minW",C="maxW",I="innerW",T="left",D="deltaW",R="contentW",P="top",U="h",O="y",N="innerH",A="minH",M="bottom",L="deltaH",j="contentH"),d=o[I]-i[T]-i[T],E=u=0,t=0,n=r.length;t<n;t++)p=r[t],m=p.layoutRect(),h=p.settings,g=h.flex,d-=t<n-1?l:0,g>0&&(u+=g,m[C]&&F.push(p),m.flex=g),d-=m[S],(v=i[P]+m[A]+i[M])>E&&(E=v);if(x={},x[S]=d<0?o[S]-d+o[D]:o[I]-d+o[D],x[A]=E+o[L],x[R]=o[I]-d,x[j]=E,x.minW=B(x.minW,o.maxW),x.minH=B(x.minH,o.maxH),x.minW=G(x.minW,o.startMinWidth),x.minH=G(x.minH,o.startMinHeight),!o.autoResize||x.minW===o.minW&&x.minH===o.minH){for(y=d/u,t=0,n=F.length;t<n;t++)p=F[t],m=p.layoutRect(),b=m[C],v=m[S]+m.flex*y,v>b?(d-=m[C]-m[S],u-=m.flex,m.flex=0,m.maxFlexSize=b):m.maxFlexSize=0;for(y=d/u,w=i[T],x={},0===u&&("end"===s?w=d+i[T]:"center"===s?(w=Math.round(o[I]/2-(o[I]-d)/2)+i[T])<0&&(w=i[T]):"justify"===s&&(w=i[T],l=Math.floor(d/(r.length-1)))),x[O]=i[P],t=0,n=r.length;t<n;t++)p=r[t],m=p.layoutRect(),v=m.maxFlexSize||m[S],"center"===c?x[O]=Math.round(o[N]/2-m[U]/2):"stretch"===c?(x[U]=G(m[A]||0,o[N]-i[P]-i[M]),x[O]=i[P]):"end"===c&&(x[O]=o[N]-m[U]-i.top),m.flex>0&&(v+=m.flex*y),x[_]=v,x[k]=w,p.layoutRect(x),p.recalc&&p.recalc(),w+=v+l}else if(x.w=x.minW,x.h=x.minH,e.layoutRect(x),this.recalc(e),null===e._lastRect){var H=e.parent();H&&(H._lastRect=null,H.recalc())}}}),ma=nr.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}}),ha=function(e){return xa(Wr.body(),e)},ga=function(e,t,n){for(var r=e.dom(),o=Ye(n)?n:ye(!1);r.parentNode;){r=r.parentNode;var i=Dr.fromDom(r);if(t(i))return De.some(i);if(o(i))break}return De.none()},va=function(e,t,n){return I(function(e){return t(e)},ga,e,t,n)},ba=function(e,t){var n=e.dom();return n.parentNode?ya(Dr.fromDom(n.parentNode),function(n){return!Jo.eq(e,n)&&t(n)}):De.none()},ya=function(e,t){return rt(e.dom().childNodes,be(t,Dr.fromDom)).map(Dr.fromDom)},xa=function(e,t){return function e(n){for(var r=0;r<n.childNodes.length;r++){if(t(Dr.fromDom(n.childNodes[r])))return De.some(Dr.fromDom(n.childNodes[r]));var o=e(n.childNodes[r]);if(o.isSome())return o}return De.none()}(e.dom())},wa={first:ha,ancestor:ga,closest:va,sibling:ba,child:ya,descendant:xa},Ea=function(e){return Fo.one(e)},_a=function(e,t,n){return wa.ancestor(e,function(e){return Fo.is(e,t)},n)},Sa=function(e,t){return wa.sibling(e,function(e){return Fo.is(e,t)})},ka=function(e,t){return wa.child(e,function(e){return Fo.is(e,t)})},Ca=function(e,t){return Fo.one(t,e)},Ta=function(e,t,n){return I(Fo.is,_a,e,t,n)},Ia={first:Ea,ancestor:_a,sibling:Sa,child:ka,descendant:Ca,closest:Ta},Da=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},Ra=function(e,t,n){var r=function(e){n(e,t)};e.formatter?e.formatter.formatChanged(t,r):e.on("init",function(){e.formatter.formatChanged(t,r)})},Oa=function(e,t){return function(n){Ra(e,t,function(e){n.control.active(e)})}},Na=function(e){var t=["alignleft","aligncenter","alignright","alignjustify"],n=[{text:"Left",icon:"alignleft",onclick:Da(e,"alignleft")},{text:"Center",icon:"aligncenter",onclick:Da(e,"aligncenter")},{text:"Right",icon:"alignright",onclick:Da(e,"alignright")},{text:"Justify",icon:"alignjustify",onclick:Da(e,"alignjustify")}];e.addMenuItem("align",{text:"Align",menu:n}),e.addButton("align",{type:"menubutton",icon:"alignleft",menu:n,onShowMenu:function(n){var r=n.control.menu;L.each(t,function(t,n){r.items().eq(n).each(function(n){return n.active(e.formatter.match(t))})})},onPostRender:function(n){var r=n.control;L.each(t,function(t,n){Ra(e,t,function(e){r.icon("alignleft"),e&&r.icon(t)})})}}),L.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:Oa(e,n)})})},Ua={register:Na},Aa=function(e){return e?e.split(",")[0]:""},Pa=function(e,t){var n,r=t?t.toLowerCase():"";return L.each(e,function(e){e.value.toLowerCase()===r&&(n=e.value)}),L.each(e,function(e){n||Aa(e.value).toLowerCase()!==Aa(r).toLowerCase()||(n=e.value)}),n},Ma=function(e,t){return function(){var n=this;n.state.set("value",null),e.on("init nodeChange",function(r){var o=e.queryCommandValue("FontName"),i=Pa(t,o);n.value(i||null),!i&&o&&n.text(Aa(o))})}},La=function(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e},ja=function(e){var t=La(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return L.map(t,function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}})},Fa=function(e){e.addButton("fontselect",function(){var t=ja(e);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:!0,onPostRender:Ma(e,t),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}})},Ga=function(e){Fa(e)},Ba={register:Ga},Ha=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},za=function(e,t){return/[0-9.]+px$/.test(e)?Ha(72*parseInt(e,10)/96,t||0)+"pt":e},Wa=function(e,t,n){var r;return L.each(e,function(e){e.value===n?r=n:e.value===t&&(r=t)}),r},qa=function(e,t){return function(){var n=this;e.on("init nodeChange",function(r){var o,i,a,c;if(o=e.queryCommandValue("FontSize"))for(a=3;!c&&a>=0;a--)i=za(o,a),c=Wa(t,i,o);n.value(c||null),c||n.text(i)})}},Va=function(e){var t=e.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return L.map(t.split(" "),function(e){var t=e,n=e,r=e.split("=");return r.length>1&&(t=r[0],n=r[1]),{text:t,value:n}})},Ja=function(e){e.addButton("fontsizeselect",function(){var t=Va(e);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:qa(e,t),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}})},Ya=function(e){Ja(e)},Ka={register:Ya},Xa=function e(t,n){var r=n.length;return L.each(n,function(n){n.menu&&(n.hidden=0===e(t,n.menu));var o=n.format;o&&(n.hidden=!t.formatter.canApply(o)),n.hidden&&r--}),r},Qa=function e(t,n){var r=n.items().length;return n.items().each(function(n){n.menu&&n.visible(e(t,n.menu)>0),!n.menu&&n.settings.menu&&n.visible(Xa(t,n.settings.menu)>0);var o=n.settings.format;o&&n.visible(t.formatter.canApply(o)),n.visible()||r--}),r},$a=function(e){var t=0,n=[],r=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],o=function e(r){var o=[];if(r)return L.each(r,function(r){var i={text:r.title,icon:r.icon};if(r.items)i.menu=e(r.items);else{var a=r.format||"custom"+t++;r.format||(r.name=a,n.push(r)),i.format=a,i.cmd=r.cmd}o.push(i)}),o};return e.on("init",function(){L.each(n,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:function(){return o(e.settings.style_formats_merge?e.settings.style_formats?r.concat(e.settings.style_formats):r:e.settings.style_formats||r)}(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return e.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,r;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),(r=t.settings.cmd)&&t.active(e.queryCommandState(r))})},onclick:function(){this.settings.format&&Da(e,this.settings.format)(),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}},Za=function(e,t){e.addMenuItem("formats",{text:"Formats",menu:t})},ec=function(e,t){e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t,onShowMenu:function(){e.settings.style_formats_autohide&&Qa(e,this.menu)}})},tc=function(e){var t=$a(e);Za(e,t),ec(e,t)},nc={register:tc},rc=function(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e},oc=function(e,t,n){return function(){var r=this;e.on("nodeChange",function(o){var i=e.formatter,a=null;L.each(o.parents,function(e){if(L.each(t,function(t){if(n?i.matchNode(e,n,{value:t.value})&&(a=t.value):i.matchNode(e,t.value)&&(a=t.value),a)return!1}),a)return!1}),r.value(a)})}},ic=function(e,t){return function(){var n=[];return L.each(t,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:t[0][0],values:n,fixedWidth:!0,onselect:function(t){if(t.control){var n=t.control.value();Da(e,n)()}},onPostRender:oc(e,n)}}},ac=function(e,t){return L.map(t,function(t){return{text:t[0],onclick:Da(e,t[1]),textStyle:function(){return e.formatter.getCssText(t[1])}}})},cc=function(e){var t=rc(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");e.addMenuItem("blockformats",{text:"Blocks",menu:ac(e,t)}),e.addButton("formatselect",ic(e,t))},sc={register:cc},lc=function e(t,n){var r,o;if("string"==typeof n)o=n.split(" ");else if(L.isArray(n))return ct(L.map(n,function(n){return e(t,n)}));return r=L.grep(o,function(e){return"|"===e||e in t.menuItems}),L.map(r,function(e){return"|"===e?{text:"-"}:t.menuItems[e]})},uc=function(e){return e&&"-"===e.text},dc=function(e){var t=tt(e,function(e,t,n){return!uc(e)||!uc(n[t-1])});return tt(t,function(e,t,n){return!uc(e)||t>0&&t<n.length-1})},fc=function(e,t){var n=[{text:"-"}],r=L.grep(e.menuItems,function(e){return e.context===t});return L.each(r,function(e){"before"===e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"===e.separator&&n.push({text:"|"})}),n},pc=function(e){var t=e.settings.insert_button_items;return dc(t?lc(e,t):fc(e,"insert"))},mc=function(e){e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(pc(e)),this.menu.renderNew()}})},hc=function(e){mc(e)},gc={register:hc},vc=function(e){L.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{active:!1,tooltip:t,onPostRender:Oa(e,n),onclick:Da(e,n)})})},bc=function(e){L.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})})},yc=function(e){L.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:Oa(e,n)})})},xc=function(e){vc(e),bc(e),yc(e)},wc=function(e){L.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:Da(e,"code")})},Ec=function(e){xc(e),wc(e)},_c={register:Ec},Sc=function(e,t){return function(){var n=this,r=function(){var n="redo"===t?"hasRedo":"hasUndo";return!!e.undoManager&&e.undoManager[n]()};n.disabled(!r()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){n.disabled(e.readonly||!r())})}},kc=function(e){e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:Sc(e,"undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:Sc(e,"redo"),cmd:"redo"})},Cc=function(e){e.addButton("undo",{tooltip:"Undo",onPostRender:Sc(e,"undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:Sc(e,"redo"),cmd:"redo"})},Tc=function(e){kc(e),Cc(e)},Ic={register:Tc},Dc=function(e){return function(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}},Rc=function(e){e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:Dc(e),cmd:"mceToggleVisualAid"})},Oc=function(e){Rc(e)},Nc={register:Oc},Uc=function(){Vn.tooltips=!kt.iOS,In.translate=function(e){return M.translate(e)}},Ac=function(e){e.settings.ui_container&&(kt.container=Ia.descendant(Dr.fromDom(document.body),e.settings.ui_container).fold(ye(null),function(e){return e.dom()}))},Pc=function(e){e.rtl&&(In.rtl=!0)},Mc=function(e){e.on("mousedown",function(){Ln.hideAll()})},Lc=function(e){Pc(e),Mc(e),Ac(e),Uc(),sc.register(e),Ua.register(e),_c.register(e),Ic.register(e),Ka.register(e),Ba.register(e),nc.register(e),Nc.register(e),gc.register(e)},jc={setup:Lc},Fc=rr.extend({recalc:function(e){var t,n,r,o,i,a,c,s,l,u,d,f,p,m,h,g,v,b,y,x,w,E,_,S,k,C,T,I,D,R=[],O=[];t=e.settings,o=e.items().filter(":visible"),i=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(o.length)),n=Math.ceil(o.length/r),b=t.spacingH||t.spacing||0,y=t.spacingV||t.spacing||0,x=t.alignH||t.align,w=t.alignV||t.align,g=e.paddingBox,I="reverseRows"in t?t.reverseRows:e.isRtl(),x&&"string"==typeof x&&(x=[x]),w&&"string"==typeof w&&(w=[w]);for(d=0;d<r;d++)R.push(0);for(f=0;f<n;f++)O.push(0);for(f=0;f<n;f++)for(d=0;d<r&&(u=o[f*r+d]);d++)l=u.layoutRect(),S=l.minW,k=l.minH,R[d]=S>R[d]?S:R[d],O[f]=k>O[f]?k:O[f];for(C=i.innerW-g.left-g.right,E=0,d=0;d<r;d++)E+=R[d]+(d>0?b:0),C-=(d>0?b:0)+R[d];for(T=i.innerH-g.top-g.bottom,_=0,f=0;f<n;f++)_+=O[f]+(f>0?y:0),T-=(f>0?y:0)+O[f];if(E+=g.left+g.right,_+=g.top+g.bottom,s={},s.minW=E+(i.w-i.innerW),s.minH=_+(i.h-i.innerH),s.contentW=s.minW-i.deltaW,s.contentH=s.minH-i.deltaH,s.minW=Math.min(s.minW,i.maxW),s.minH=Math.min(s.minH,i.maxH),s.minW=Math.max(s.minW,i.startMinWidth),s.minH=Math.max(s.minH,i.startMinHeight),!i.autoResize||s.minW===i.minW&&s.minH===i.minH){i.autoResize&&(s=e.layoutRect(s),s.contentW=s.minW-i.deltaW,s.contentH=s.minH-i.deltaH);var N;N="start"===t.packV?0:T>0?Math.floor(T/n):0;var U=0,A=t.flexWidths;if(A)for(d=0;d<A.length;d++)U+=A[d];else U=r;var P=C/U;for(d=0;d<r;d++)R[d]+=A?A[d]*P:P;for(m=g.top,f=0;f<n;f++){for(p=g.left,c=O[f]+N,d=0;d<r&&(D=I?f*r+r-1-d:f*r+d,u=o[D]);d++)h=u.settings,l=u.layoutRect(),a=Math.max(R[d],l.startMinWidth),l.x=p,l.y=m,v=h.alignH||(x?x[d]||x[0]:null),"center"===v?l.x=p+a/2-l.w/2:"right"===v?l.x=p+a-l.w:"stretch"===v&&(l.w=a),v=h.alignV||(w?w[d]||w[0]:null),"center"===v?l.y=m+c/2-l.h/2:"bottom"===v?l.y=m+c-l.h:"stretch"===v&&(l.h=c),u.layoutRect(l),p+=a+b,u.recalc&&u.recalc();m+=c+y}}else if(s.w=s.minW,s.h=s.minH,e.layoutRect(s),this.recalc(e),null===e._lastRect){var M=e.parent();M&&(M._lastRect=null,M.recalc())}}}),Gc=Vn.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,t&&t()):ge.setTimeout(function(){n.html(e)}),this}}),Bc=Vn.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("infobox"),t.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e.state.on("change:help",function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),Hc=Vn.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("label"),t.canFocus=!1,e.multiline&&t.classes.add("autoscroll"),e.strong&&t.classes.add("strong")},initLayoutRect:function(){var e=this,t=e._super();if(e.settings.multiline){Vt.getSize(e.getEl()).width>t.maxW&&(t.minW=t.maxW,e.classes.add("multiline")),e.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,Vt.getSize(e.getEl()).height)}return t},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this,r=n.settings.forId,o=n.settings.html?n.settings.html:n.encode(n.state.get("text"));return!r&&(t=n.settings.forName)&&(e=n.getRoot().find("#"+t)[0])&&(r=e._id),r?'<label id="'+n._id+'" class="'+n.classes+'"'+(r?' for="'+r+'"':"")+">"+o+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+o+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),zc=On.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.classes.add("toolbar")},postRender:function(){var e=this;return e.items().each(function(e){e.classes.add("toolbar-item")}),e._super()}}),Wc=zc.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),qc=or.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth&&t.classes.add("fixed-width"),t.aria("haspopup",!0),t.state.set("menu",e.menu||t.render())},showMenu:function(e){var t,n=this;if(n.menu&&n.menu.visible()&&!1!==e)return n.hideMenu();n.menu||(t=n.state.get("menu")||[],n.classes.add("opened"),t.length?t={type:"menu",animate:!0,items:t}:(t.type=t.type||"menu",t.animate=!0),t.renderTo?n.menu=t.parent(n).show().renderTo():n.menu=ae.create(t).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){e.control===n.menu&&(n.activeMenu("show"===e.type),n.classes.toggle("opened","show"===e.type)),n.aria("expanded","show"===e.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),n.fire("showmenu")},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e,t=this,n=t._id,r=t.classPrefix,o=t.settings.icon,i=t.state.get("text"),a="";return e=t.settings.image,e?(o="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",i&&(t.classes.add("btn-has-text"),a='<span class="'+r+'txt">'+t.encode(i)+"</span>"),o=t.settings.icon?r+"ico "+r+"i-"+o:"",t.aria("role",t.parent()instanceof Wc?"menuitem":"button"),'<div id="'+n+'" class="'+t.classes+'" tabindex="-1" aria-labelledby="'+n+'"><button id="'+n+'-open" role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+a+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&D(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())}),e.on("mouseenter",function(t){var n,r=t.control,o=e.parent();r&&o&&r instanceof qc&&r.parent()===o&&(o.items().filter("MenuButton").each(function(e){e.hideMenu&&e!==r&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(r.focus(),r.showMenu()))}),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Vc=Ln.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var n=e.items,r=n.length;r--;)n[r]=L.extend({},e.itemDefaults,n[r]);t._super(e),t.classes.add("menu"),e.animate&&11!==kt.ie&&t.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},load:function(){function e(){r.throbber&&(r.throbber.hide(),r.throbber=null)}var t,n,r=this;(n=r.settings.itemsFactory)&&(r.throbber||(r.throbber=new w(r.getEl("body"),!0),0===r.items().length?(r.throbber.show(),r.fire("loading")):r.throbber.show(100,function(){r.items().remove(),r.fire("loading")}),r.on("hide close",e)),r.requestTime=t=(new Date).getTime(),r.settings.itemsFactory(function(n){if(0===n.length)return void r.hide();r.requestTime===t&&(r.getEl().style.width="",r.getEl("body").style.width="",e(),r.items().remove(),r.getEl("body").innerHTML="",r.add(n),r.renderNew(),r.fire("loaded"))}))},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return e._hasIcons=!0,!1}),e.settings.itemsFactory&&e.on("postrender",function(){e.settings.itemsFactory&&e.load()}),e.on("show hide",function(t){t.control===e&&("show"===t.type?ge.setTimeout(function(){e.classes.add("in")},0):e.classes.remove("in"))}),e._super()}}),Jc=qc.extend({init:function(e){function t(n){for(var i=0;i<n.length;i++){if(r=n[i].selected||e.value===n[i].value)return o=o||n[i].text,a.state.set("value",n[i].value),!0;if(n[i].menu&&t(n[i].menu))return!0}}var n,r,o,i,a=this;a._super(e),e=a.settings,a._values=n=e.values,n&&(void 0!==e.value&&t(n),!r&&n.length>0&&(o=n[0].text,a.state.set("value",n[0].value)),a.state.set("menu",n)),a.state.set("text",e.text||o),a.classes.add("listbox"),a.on("select",function(t){var n=t.control;i&&(t.lastControl=i),e.multiple?n.active(!n.active()):a.value(t.control.value()),i=n})},value:function(e){if(0===arguments.length)return this.state.get("value");if(void 0===e)return this;if(this.settings.values){L.grep(this.settings.values,function(t){return t.value===e}).length>0?this.state.set("value",e):null===e&&this.state.set("value",null)}else this.state.set("value",e);return this},bindStates:function(){function e(e,t){e instanceof Vc&&e.items().each(function(e){e.hasMenus()||e.active(e.value()===t)})}function t(e,n){var r;if(e)for(var o=0;o<e.length;o++){if(e[o].value===n)return e[o];if(e[o].menu&&(r=t(e[o].menu,n)))return r}}var n=this;return n.on("show",function(t){e(t.control,n.value())}),n.state.on("change:value",function(e){var r=t(n.state.get("menu"),e.value);r?n.text(r.text):n.text(n.settings.text)}),n._super()}}),Yc=function(e,t){var n=e._textStyle;if(n){var r=e.getEl("text");r.setAttribute("style",n),t&&(r.style.color="",r.style.backgroundColor="")}},Kc=Vn.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),t=n.state.get("text"),"-"!==t&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,t=this,n=t.settings,r=t.parent();if(r.items().each(function(e){e!==t&&e.hideMenu()}),n.menu){e=t.menu,e?e.show():(e=n.menu,e.length?e={type:"menu",items:e}:e.type=e.type||"menu",r.settings.itemDefaults&&(e.itemDefaults=r.settings.itemDefaults),e=t.menu=ae.create(e).parent(t).renderTo(),e.reflow(),e.on("cancel",function(n){n.stopPropagation(),t.focus(),e.hide()}),e.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(n){n.control===e&&t.classes.remove("selected")}),e.submenu=!0),e._parentMenu=r,e.classes.add("menu-sub");var o=e.testMoveRel(t.getEl(),t.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(t.getEl(),o),e.rel=o,o="menu-sub-"+o,e.classes.remove(e._lastRel).add(o),e._lastRel=o,t.classes.add("selected"),t.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){function e(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(t){var n=i.match||"";return n?t.replace(new RegExp(e(n),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):t}function n(t){return t.replace(new RegExp(e("!mce~match["),"g"),"<b>").replace(new RegExp(e("]mce~match!"),"g"),"</b>")}var r=this,o=r._id,i=r.settings,a=r.classPrefix,c=r.state.get("text"),s=r.settings.icon,l="",u=i.shortcut,d=r.encode(i.url),f="";return s&&r.parent().classes.add("menu-has-icons"),i.image&&(l=" style=\"background-image: url('"+i.image+"')\""),u&&(u=function(e){var t,n,r={};for(r=kt.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)(n=r[e[t].toLowerCase()])&&(e[t]=n);return e.join("+")}(u)),s=a+"ico "+a+"i-"+(r.settings.icon||"none"),f="-"!==c?'<i class="'+s+'"'+l+"></i> ":"",c=n(r.encode(t(c))),d=n(r.encode(t(d))),'<div id="'+o+'" class="'+r.classes+'" tabindex="-1">'+f+("-"!==c?'<span id="'+o+'-text" class="'+a+'text">'+c+"</span>":"")+(u?'<div id="'+o+'-shortcut" class="'+a+'menu-shortcut">'+u+"</div>":"")+(i.menu?'<div class="'+a+'caret"></div>':"")+(d?'<div class="'+a+'menu-item-link">'+d+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=e.getEl("text");r&&(r.setAttribute("style",n),e._textStyle=n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),ge.requestAnimationFrame(function(){e.parent().hideAll()})))}),e._super(),e},hover:function(){var e=this;return e.parent().items().each(function(e){e.classes.remove("selected")}),e.classes.toggle("selected",!0),e},active:function(e){return Yc(this,e),void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Xc=cr.extend({Defaults:{classes:"radio",role:"radio"}}),Qc=Vn.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.classes.add("resizehandle"),"both"===e.settings.direction&&e.classes.add("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new f(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!==e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}}),$c=Vn.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e,t=this,n="";return e=R(t._options),t.size&&(n=' size = "'+t.size+'"'),'<select id="'+t._id+'" class="'+t.classes+'"'+n+">"+e+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(t){e.getEl().innerHTML=R(t.value)}),e._super()}}),Zc=Vn.extend({init:function(e){var t=this;e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),t._super(e),t.classes.add("slider"),"v"===e.orientation&&t.classes.add("vertical"),t._minValue=Ke(e.minValue)?e.minValue:0,t._maxValue=Ke(e.maxValue)?e.maxValue:100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div id="'+t+'-handle" class="'+n+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){function e(e,t,n){return(n+e)/(t-e)}function t(e,t,n){return n*(t-e)-e}var n,r,o,i,a,c,s=this;n=s._minValue,r=s._maxValue,"v"===s.settings.orientation?(o="screenY",i="top",a="height",c="h"):(o="screenX",i="left",a="width",c="w"),s._super(),function(n,r){function o(o){var i;i=s.value(),i=t(n,r,e(n,r,i)+.05*o),i=O(i,n,r),s.value(i),s.fire("dragstart",{value:i}),s.fire("drag",{value:i}),s.fire("dragend",{value:i})}s.on("keydown",function(e){switch(e.keyCode){case 37:case 38:o(-1);break;case 39:case 40:o(1)}})}(n,r),function(e,t,n){var r,l,u,d,p;s._dragHelper=new f(s._id,{handle:s._id+"-handle",start:function(e){r=e[o],l=parseInt(s.getEl("handle").style[i],10),u=(s.layoutRect()[c]||100)-Vt.getSize(n)[a],s.fire("dragstart",{value:p})},drag:function(a){var c=a[o]-r;d=O(l+c,0,u),n.style[i]=d+"px",p=e+d/u*(t-e),s.value(p),s.tooltip().text(""+s.settings.previewFilter(p)).show().moveRel(n,"bc tc"),s.fire("drag",{value:p})},stop:function(){s.tooltip().hide(),s.fire("dragend",{value:p})}})}(n,r,s.getEl("handle"))},repaint:function(){this._super(),U(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){U(e,t.value)}),e._super()}}),es=Vn.extend({renderHtml:function(){var e=this;return e.classes.add("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"></div>'}}),ts=qc.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t,n=this,r=n.getEl(),o=n.layoutRect();return n._super(),e=r.firstChild,t=r.lastChild,Wt(e).css({width:o.w-Vt.getSize(t).width,height:o.h-2}),Wt(t).css({height:o.h-2}),n},activeMenu:function(e){var t=this;Wt(t.getEl().lastChild).toggleClass(t.classPrefix+"active",e)},renderHtml:function(){var e,t,n=this,r=n._id,o=n.classPrefix,i=n.state.get("icon"),a=n.state.get("text"),c=n.settings,s="";return e=c.image,e?(i="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",i=c.icon?o+"ico "+o+"i-"+i:"",a&&(n.classes.add("btn-has-text"),s='<span class="'+o+'txt">'+n.encode(a)+"</span>"),t="boolean"==typeof c.active?' aria-pressed="'+c.active+'"':"",'<div id="'+r+'" class="'+n.classes+'" role="button"'+t+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+e+"></i>":"")+s+'</button><button type="button" class="'+o+'open" hidefocus="1" tabindex="-1">'+(n._menuBtnText?(i?" ":"")+n._menuBtnText:"")+' <i class="'+o+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control===this)for(;n;){if(e.aria&&"down"!==e.aria.key||"BUTTON"===n.nodeName&&-1===n.className.indexOf("open"))return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}}),delete e.settings.onclick,e._super()}}),ns=ma.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),rs=Un.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var t;this.activeTabId&&(t=this.getEl(this.activeTabId),Wt(t).removeClass(this.classPrefix+"active"),t.setAttribute("aria-selected","false")),this.activeTabId="t"+e,t=this.getEl("t"+e),t.setAttribute("aria-selected","true"),Wt(t).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!==n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,o){var i=e._id+"-t"+o;t.aria("role","tabpanel"),t.aria("labelledby",i),n+='<div id="'+i+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(n&&n.id===e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]===t.target&&e.activateTab(r)})},initLayoutRect:function(){var e,t,n,r=this;t=Vt.getSize(r.getEl("head")).width,t=t<0?0:t,n=0,r.items().each(function(e){t=Math.max(t,e.layoutRect().minW),n=Math.max(n,e.layoutRect().minH)}),r.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=t,e.settings.h=n,e.layoutRect({x:0,y:0,w:t,h:n})});var o=Vt.getSize(r.getEl("head")).height;return r.settings.minWidth=t,r.settings.minHeight=n+o,e=r._super(),e.deltaH+=o,e.innerH=e.h-e.deltaH,e}}),os=Vn.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){t.state.set("value",e.target.value)}))},repaint:function(){var e,t,n,r,o,i=this,a=0;e=i.getEl().style,t=i._layoutRect,o=i._lastRepaintRect||{};var c=document;return!i.settings.multiline&&c.all&&(!c.documentMode||c.documentMode<=8)&&(e.lineHeight=t.h-a+"px"),n=i.borderBox,r=n.left+n.right+8,a=n.top+n.bottom+(i.settings.multiline?8:0),t.x!==o.x&&(e.left=t.x+"px",o.x=t.x),t.y!==o.y&&(e.top=t.y+"px",o.y=t.y),t.w!==o.w&&(e.width=t.w-r+"px",o.w=t.w),t.h!==o.h&&(e.height=t.h-a+"px",o.h=t.h),i._lastRepaintRect=o,i.fire("repaint",{},!1),i},renderHtml:function(){var e,t,n=this,r=n.settings;return e={id:n._id,hidefocus:"1"},L.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(t){e[t]=r[t]}),n.disabled()&&(e.disabled="disabled"),r.subtype&&(e.type=r.subtype),t=Vt.create(r.multiline?"textarea":"input",e),t.value=n.state.get("value"),t.className=n.classes.toString(),t.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl().value!==t.value&&(e.getEl().value=t.value)}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}}),is=function(){return{Selector:ln,Collection:fn,ReflowQueue:yn,Control:In,Factory:ae,KeyboardNavigation:l,Container:On,DragHelper:f,Scrollable:Nn,Panel:Un,Movable:$t,Resizable:An,FloatPanel:Ln,Window:$n,MessageBox:Zn,Tooltip:qn,Widget:Vn,Progress:Jn,Notification:Kn,Layout:nr,AbsoluteLayout:rr,Button:or,ButtonGroup:ar,Checkbox:cr,ComboBox:lr,ColorBox:ur,PanelButton:dr,ColorButton:pr,ColorPicker:hr,Path:vr,ElementPath:br,FormItem:yr,Form:xr,FieldSet:wr,FilePicker:da,FitLayout:fa,FlexLayout:pa,FlowLayout:ma,FormatControls:jc,GridLayout:Fc,Iframe:Gc,InfoBox:Bc,Label:Hc,Toolbar:zc,MenuBar:Wc,MenuButton:qc,MenuItem:Kc,Throbber:w,Menu:Vc,ListBox:Jc,Radio:Xc,ResizeHandle:Qc,SelectBox:$c,Slider:Zc,Spacer:es,SplitButton:ts,StackLayout:ns,TabPanel:rs,TextBox:os,DropZone:gr,BrowseButton:ir}},as=function(e){e.ui?L.each(is(),function(t,n){e.ui[n]=t}):e.ui=is()},cs=function(){L.each(is(),function(e,t){ae.add(t,e)})},ss={appendTo:as,registerToFactory:cs};ss.registerToFactory(),ss.appendTo(window.tinymce?window.tinymce:{}),P.add("modern",function(e){return jc.setup(e),tr.get(e)})}()}()},function(e,exports,t){"use strict";t(652)},function(e,exports,t){"use strict";!function(){!function(){function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\ufeff￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},r={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},o=[new RegExp(n.aletter),new RegExp(n.midnumlet),new RegExp(n.midletter),new RegExp(n.midnum),new RegExp(n.numeric),new RegExp(n.cr),new RegExp(n.lf),new RegExp(n.newline),new RegExp(n.extend),new RegExp(n.format),new RegExp(n.katakana),new RegExp(n.extendnumlet),new RegExp("@")],i=new RegExp("^"+n.punctuation+"$"),a=/^\s+$/,c={characterIndices:r,SETS:o,EMPTY_STRING:"",PUNCTUATION:i,WHITESPACE:a},s=function(e,t,n){var r,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1},l=function(e,t){var n=[];return s(e,function(r,o){n.push(t(r,o,e))}),n},u={each:s,map:l},d=c.SETS,f=c.characterIndices.OTHER,p=function(e){var t,n,r=f,o=d.length;for(t=0;t<o;++t)if((n=d[t])&&n.test(e)){r=t;break}return r},m=function(e){var t={};return function(n){if(t[n])return t[n];var r=e(n);return t[n]=r,r}},h=function(e){var t=m(p);return u.map(e.split(""),t)},g={classify:h},v=c.characterIndices,b=function(e,t){var n,r,o=e[t],i=e[t+1];return!(t<0||t>e.length-1&&0!==t)&&((o!==v.ALETTER||i!==v.ALETTER)&&(r=e[t+2],(o!==v.ALETTER||i!==v.MIDLETTER&&i!==v.MIDNUMLET&&i!==v.AT||r!==v.ALETTER)&&(n=e[t-1],(o!==v.MIDLETTER&&o!==v.MIDNUMLET&&i!==v.AT||i!==v.ALETTER||n!==v.ALETTER)&&((o!==v.NUMERIC&&o!==v.ALETTER||i!==v.NUMERIC&&i!==v.ALETTER)&&((o!==v.MIDNUM&&o!==v.MIDNUMLET||i!==v.NUMERIC||n!==v.NUMERIC)&&((o!==v.NUMERIC||i!==v.MIDNUM&&i!==v.MIDNUMLET||r!==v.NUMERIC)&&(o!==v.EXTEND&&o!==v.FORMAT&&n!==v.EXTEND&&n!==v.FORMAT&&i!==v.EXTEND&&i!==v.FORMAT&&((o!==v.CR||i!==v.LF)&&(o===v.NEWLINE||o===v.CR||o===v.LF||(i===v.NEWLINE||i===v.CR||i===v.LF||(o!==v.KATAKANA||i!==v.KATAKANA)&&((i!==v.EXTENDNUMLET||o!==v.ALETTER&&o!==v.NUMERIC&&o!==v.KATAKANA&&o!==v.EXTENDNUMLET)&&((o!==v.EXTENDNUMLET||i!==v.ALETTER&&i!==v.NUMERIC&&i!==v.KATAKANA)&&o!==v.AT))))))))))))},y={isWordBoundary:b},x=c.EMPTY_STRING,w=c.WHITESPACE,E=c.PUNCTUATION,_=function(e){return"http"===e||"https"===e},S=function(e,t){var n;for(n=t;n<e.length;++n){var r=e.charAt(n);if(w.test(r))break}return n},k=function(e,t,n){var r=S(t,n+1),o=t.substring(n+1,r);return"://"===o.substr(0,3)?{word:e+o,index:r}:{word:e,index:n}},C=function(e,t){var n,r,o,i=0,a=g.classify(e),c=a.length,s=[],l=[];for(t||(t={}),t.ignoreCase&&(e=e.toLowerCase()),r=t.includePunctuation,o=t.includeWhitespace;i<c;++i)if(n=e.charAt(i),s.push(n),y.isWordBoundary(a,i)){if((s=s.join(x))&&(o||!w.test(s))&&(r||!E.test(s)))if(_(s)){var u=k(s,e,i);l.push(u.word),i=u.index}else l.push(s);s=[]}return l},T=function(e,t){return C(e.replace(/\ufeff/g,""),t)},I={getWords:T},D=function(e){return e.removed?"":e.getBody().innerText},R=function(e){return I.getWords(D(e)).length},O={getCount:R},N=function(e){return{getCount:function(){return O.getCount(e)}}},U={get:N},A=tinymce.util.Tools.resolve("tinymce.util.Delay"),P=tinymce.util.Tools.resolve("tinymce.util.I18n"),M=function(e){var t=function(e){return P.translate(["{0} words",O.getCount(e)])},n=function(){e.theme.panel.find("#wordcount").text(t(e))};e.on("init",function(){var r=e.theme.panel&&e.theme.panel.find("#statusbar")[0],o=A.debounce(n,300);r&&A.setEditorTimeout(e,function(){r.insert({type:"label",name:"wordcount",text:t(e),classes:"wordcount",disabled:e.settings.readonly},0),e.on("setcontent beforeaddundo undo redo keyup",o)},0)})},L={setup:M};t.add("wordcount",function(e){return L.setup(e),U.get(e)})}()}()},function(e,exports,t){"use strict";t(654)},function(e,exports,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof("function"==typeof Symbol?Symbol.iterator:"@@iterator")?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==("function"==typeof Symbol?Symbol.prototype:"@@prototype")?"symbol":typeof e};!function(){!function(){function e(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,c=r||i||a&&!0===/mobile/i.test(n),s=e.isiOS()||e.isAndroid(),l=s&&!c,u=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:T(r),isiPhone:T(o),isTablet:T(c),isPhone:T(l),isTouch:T(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:T(u)}}function t(e,t,n,r,o){return e(n,r)?B.some(n):J(o)&&o(n)?B.none():t(n,r,o)}function r(){var e=function(e){return Ve.fromDom(e.dom().cloneNode(!1))},t=function(e){return!!Un.isElement(e)&&("body"===Un.name(e)||X(gi,Un.name(e)))},n=function(e){return!!Un.isElement(e)&&X(["br","img","hr","input"],Un.name(e))},r=function(e,t){return e.dom().compareDocumentPosition(t.dom())},o=function(e,t){var n=Wn.clone(e);Wn.setAll(t,n)};return{up:T({selector:xr.ancestor,closest:xr.closest,predicate:pr.ancestor,all:wn.parents}),down:T({selector:ar.descendants,predicate:er.descendants}),styles:T({get:lo.get,getRaw:lo.getRaw,set:lo.set,remove:lo.remove}),attrs:T({get:Wn.get,set:Wn.set,remove:Wn.remove,copyTo:o}),insert:T({before:vo.before,after:vo.after,afterAll:Eo.after,append:vo.append,appendAll:Eo.append,prepend:vo.prepend,wrap:vo.wrap}),remove:T({unwrap:Co.unwrap,remove:Co.remove}),create:T({nu:Ve.fromTag,clone:e,text:Ve.fromText}),query:T({comparePosition:r,prevSibling:wn.prevSibling,nextSibling:wn.nextSibling}),property:T({children:wn.children,name:Un.name,parent:wn.parent,isText:Un.isText,isComment:Un.isComment,isElement:Un.isElement,getText:qo.get,setText:qo.set,isBoundary:t,isEmptyTag:n}),eq:Zt.eq,is:Zt.is}}function o(e,t){var n=function(t,n){if(!Y(n)&&!n.match(/^[0-9]+$/))throw e+".set accepts only positive integer values. Value was "+n;var r=t.dom();Vr.isSupported(r)&&(r.style[e]=n+"px")},r=function(n){var r=t(n);if(r<=0||null===r){var o=lo.get(n,e);return parseFloat(o)||0}return r},o=r,i=function(e,t){return oe(t,function(t,n){var r=lo.get(e,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o},0)};return{set:n,get:r,getOuter:o,aggregate:i,max:function(e,t,n){var r=i(e,n);return t>r?t-r:0}}}function i(e){var t=function(t){return e(t).isRtl()?ss.rtl:ss.ltr},n=function(e,n){return t(n).delta(e,n)},r=function(e,n){return t(n).positions(e,n)};return{delta:n,edge:function(e){return t(e).edge(e)},positions:r}}function a(e,t,n){var r=n||!1,o=function(){t(),r=!0},i=function(){e(),r=!1};return{on:o,off:i,toggle:function(){(r?i:o)()},isOn:function(){return r}}}function c(e){return e.control.rootControl.find("#style")[0].getEl().isEqualNode(document.activeElement)}function s(e,t,n,r){function o(e,n,r){(1===t.length||r)&&a.setAttrib(e,n,r)}function i(e,n,r){(1===t.length||r)&&a.setStyle(e,n,r)}var a=e.dom;zf(e)&&Ep.syncAdvancedStyleFields(e,r);var c=r.control.rootControl.toJSON();e.undoManager.transact(function(){lp.each(t,function(t){o(t,"scope",c.scope),o(t,"style",c.style),o(t,"class",c.class),i(t,"height",Cf(c.height)),c.type!==t.parentNode.nodeName.toLowerCase()&&Dp(e.dom,t,c.type),c.align!==n.align&&(hp.unApplyAlign(e,t),hp.applyAlign(e,t,c.align))}),e.focus()})}function l(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)e.setStyle(t,n,r);else if(t.children)for(var o=0;o<t.children.length;o++)l(e,t.children[o],n,r)}function u(e){var t=ye.apply(null,e),n=[];return{bind:function(e){if(void 0===e)throw"Event bind error: undefined handler";n.push(e)},unbind:function(e){n=ne(n,function(t){return t!==e})},trigger:function(){var e=t.apply(null,arguments);ee(n,function(t){t(e)})}}}function d(e){var t=Vs({layerClass:hm.resolve("blocker")},e),n=Ve.fromTag("div");return Wn.set(n,"role","presentation"),lo.setAll(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Vl.add(n,hm.resolve("blocker")),Vl.add(n,t.layerClass),{element:function(){return n},destroy:function(){Co.remove(n)}}}function f(){var e=B.none(),t=function(){e=B.none()},n=function(t,n){var r=e.map(function(e){return t.compare(e,n)});return e=B.some(n),r},r=function(e,t){t.extract(e).each(function(e){n(t,e).each(function(e){o.trigger.move(e)})})},o=lm.create({move:u(["info"])});return{onEvent:r,reset:t,events:o.registry}}function p(e){return{onEvent:function(e,t){},reset:k}}function m(){var e=p(),t=f(),n=e,r=function(){n.reset(),n=t},o=function(){n.reset(),n=e},i=function(e,t){n.onEvent(e,t)};return{on:r,off:o,isOn:function(){return n===t},onEvent:i,events:t.events}}function h(){var e=lm.create({drag:u(["xDelta","yDelta"])});return{mutate:function(t,n){e.trigger.drag(t,n)},events:e.registry}}function g(){var e=lm.create({drag:u(["xDelta","yDelta","target"])}),t=B.none(),n=h();return n.events.drag.bind(function(n){t.each(function(t){e.trigger.drag(n.xDelta(),n.yDelta(),t)})}),{assign:function(e){t=B.some(e)},get:function(){return t},mutate:n.mutate,events:e.registry}}function v(e,t,n){var r=g(),o=Mm.transform(r,{}),i=B.none(),a=function(e,t){return B.from(Wn.get(e,t))};r.events.drag.bind(function(e){a(e.target(),"data-row").each(function(t){var n=pd.getInt(e.target(),"top");lo.set(e.target(),"top",n+e.yDelta()+"px")}),a(e.target(),"data-column").each(function(t){var n=pd.getInt(e.target(),"left");lo.set(e.target(),"left",n+e.xDelta()+"px")})});var c=function(e,t){return pd.getInt(e,t)-parseInt(Wn.get(e,"data-initial-"+t),10)};o.events.stop.bind(function(){r.get().each(function(r){i.each(function(o){a(r,"data-row").each(function(e){var t=c(r,"top");Wn.remove(r,"data-initial-top"),h.trigger.adjustHeight(o,t,parseInt(e,10))}),a(r,"data-column").each(function(e){var t=c(r,"left");Wn.remove(r,"data-initial-left"),h.trigger.adjustWidth(o,t,parseInt(e,10))}),cu.refresh(e,o,n,t)})})});var s=function(t,n){h.trigger.startAdjust(),r.assign(t),Wn.set(t,"data-initial-"+n,parseInt(lo.get(t,n),10)),Vl.add(t,Wm),lo.set(t,"opacity","0.2"),o.go(e.parent())},l=Cm.bind(e.parent(),"mousedown",function(e){cu.isRowBar(e.target())&&s(e.target(),"top"),cu.isColBar(e.target())&&s(e.target(),"left")}),d=function(t){return Zt.eq(t,e.view())},f=Cm.bind(e.view(),"mouseover",function(r){"table"===Un.name(r.target())||zm.closest(r.target(),"table",d)?(i="table"===Un.name(r.target())?B.some(r.target()):xr.ancestor(r.target(),"table",d),i.each(function(r){cu.refresh(e,r,n,t)})):Yn.inBody(r.target())&&cu.destroy(e)}),p=function(){l.unbind(),f.unbind(),o.destroy(),cu.destroy(e)},m=function(r){cu.refresh(e,r,n,t)},h=lm.create({adjustHeight:u(["table","delta","row"]),adjustWidth:u(["table","delta","column"]),startAdjust:u([])});return{destroy:p,refresh:m,on:o.on,off:o.off,hideBars:D(cu.hide,e),showBars:D(cu.show,e),events:h.registry}}function b(e,t){var n=cs.height,r=v(e,t,n),o=lm.create({beforeResize:u(["table"]),afterResize:u(["table"]),startDrag:u([])});return r.events.adjustHeight.bind(function(e){o.trigger.beforeResize(e.table());var t=n.delta(e.delta(),e.table());Hd.adjustHeight(e.table(),t,e.row(),n),o.trigger.afterResize(e.table())}),r.events.startAdjust.bind(function(e){o.trigger.startDrag()}),r.events.adjustWidth.bind(function(e){o.trigger.beforeResize(e.table());var n=t.delta(e.delta(),e.table());Hd.adjustWidth(e.table(),n,e.column(),t),o.trigger.afterResize(e.table())}),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}}function y(e){var t=function(t,n){return Ve.fromPoint(Ve.fromDom(e.document),t,n)},n=function(e){return e.dom().getBoundingClientRect()},r=function(t,n,r,o){var i=hh.exact(t,n,r,o);return qg.getFirstRect(e,i).map(function(e){return ve(e,N)})},o=function(){return qg.get(e).map(function(t){return uv.convertToRange(e,t)})},i=function(t){var n=hh.relative(t.start(),t.finish());return uv.convertToRange(e,n)},a=function(t,n){return qg.getAtPoint(e,t,n).map(function(e){return{start:T(lh.on(e.start(),e.soffset())),finish:T(lh.on(e.finish(),e.foffset()))}})},c=function(){qg.clear(e)},s=function(t){qg.setToElement(e,t)};return{elementFromPoint:t,getRect:n,getRangedRect:r,getSelection:o,fromSitus:i,situsFromPoint:a,clearSelection:c,setSelection:function(t){qg.setExact(e,t.start(),t.soffset(),t.finish(),t.foffset())},setRelativeSelection:function(t,n){qg.setRelative(e,t,n)},selectContents:s,getInnerHeight:function(){return e.innerHeight},getScrollY:function(){return wv.get(Ve.fromDom(e.document)).top()},scrollBy:function(t,n){wv.by(t,n,Ve.fromDom(e.document))}}}function x(e,t,n,r){var o=B.none(),i=function(){o=B.none()};return{mousedown:function(e){r.clear(t),o=Oy(e.target(),n)},mouseover:function(i){o.each(function(o){r.clear(t),Oy(i.target(),n).each(function(i){xa.identify(o,i,n).each(function(n){var a=n.boxes().getOr([]);(a.length>1||1===a.length&&!Zt.eq(o,i))&&(r.selectRange(t,a,n.start(),n.finish()),e.selectContents(i))})})})},mouseup:function(){o.each(i)}}}function w(e,t){var n=Ce(["mousedown","mouseover","mouseup","keyup","keydown"],[]),r=B.none(),o=$y.byAttr(ka);e.on("init",function(i){var a=e.getWin(),c=wf(e),s=Sf(e),l=function(){var t=e.selection,n=Ve.fromDom(t.getStart()),r=Ve.fromDom(t.getEnd());Ji.sharedOne(Ar.table,[n,r]).fold(function(){o.clear(c)},k)},u=My.mouse(a,c,s,o),d=My.keyboard(a,c,s,o),f=function(e){return!0===e.raw().shiftKey},p=function(t,n){f(t)&&(n.kill()&&t.kill(),n.selection().each(function(t){var n=hh.relative(t.start(),t.finish()),r=Wh.asLtrRange(a,n);e.selection.setRng(r)}))},m=function(t){var n=v(t);if(n.raw().shiftKey&&cv.isNavigation(n.raw().which)){var r=e.selection.getRng(),o=Ve.fromDom(r.startContainer),i=Ve.fromDom(r.endContainer);d.keyup(n,o,r.startOffset,i,r.endOffset).each(function(e){p(n,e)})}},h=function(n){var r=v(n);t().each(function(e){e.hideBars()});var o=e.selection.getRng(),i=Ve.fromDom(e.selection.getStart()),a=Ve.fromDom(o.startContainer),c=Ve.fromDom(o.endContainer),s=Af.directionAt(i).isRtl()?cv.rtl:cv.ltr;d.keydown(r,a,o.startOffset,c,o.endOffset,s).each(function(e){p(r,e)}),t().each(function(e){e.showBars()})},g=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},v=function(e){var t=Ve.fromDom(e.target),n=function(){e.stopPropagation()},r=function(){e.preventDefault()},o=C(r,n);return{target:T(t),x:T(g(e)?e.x:null),y:T(g(e)?e.y:null),stop:n,prevent:r,kill:o,raw:T(e)}},b=function(e){return 0===e.button},y=function(e){return void 0===e.buttons||0!=(1&e.buttons)},x=function(e){b(e)&&Zy(e)&&u.mousedown(v(e))},w=function(e){y(e)&&Zy(e)&&u.mouseover(v(e))},E=function(e){b(e)&&Zy(e)&&u.mouseup(v(e))};e.on("mousedown",x),e.on("mouseover",w),e.on("mouseup",E),e.on("keyup",m),e.on("keydown",h),e.on("nodechange",l),r=B.some(n({mousedown:x,mouseover:w,mouseup:E,keyup:m,keydown:h}))});var i=function(){r.each(function(e){})};return{clear:o.clear,destroy:i}}function E(e){var t=Km(e),n=w(e,t.lazyResize),r=ap(e,t.lazyWire),o=ex(e),i=ds(B.none());return rm.registerCommands(e,r,n,o,i),Wa.registerEvents(e,o,r,n),ax.addMenuItems(e,o),ox.addButtons(e),ox.addToolbars(e),e.on("PreInit",function(){e.serializer.addTempAttr(ka.firstSelected()),e.serializer.addTempAttr(ka.lastSelected())}),Bf(e)&&e.on("keydown",function(n){ev.handle(n,e,r,t.lazyWire)}),e.on("remove",function(){t.destroy(),n.destroy()}),lx(e,i)}function _(){}var S=tinymce.util.Tools.resolve("tinymce.PluginManager"),k=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},C=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},T=function(e){return function(){return e}},I=function(e){return e},D=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var a=r.concat(o);return e.apply(null,a)}},R=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,arguments)}},O=function(e){return function(){throw new Error(e)}},N=function(e){return e()},U=T(!1),A=T(!0),P=U,M=A,L=function(){return j},j=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r=function(){},o=function(){return null},i=function(){},a={fold:function(e,t){return e()},is:P,isSome:P,isNone:M,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:o,getOrUndefined:i,or:n,orThunk:t,map:L,ap:L,each:r,bind:L,flatten:L,exists:P,forall:M,filter:L,equals:e,equals_:e,toArray:function(){return[]},toString:T("none()")};return Object.freeze&&Object.freeze(a),a}(),F=function e(t){var n=function(){return t},r=function(){return a},o=function(n){return e(n(t))},i=function(e){return e(t)},a={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:M,isNone:P,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:r,orThunk:r,map:o,ap:function(n){return n.fold(L,function(n){return e(n(t))})},each:function(e){e(t)},bind:i,flatten:n,exists:i,forall:i,filter:function(e){return e(t)?a:j},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(P,function(e){return n(t,e)})},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return a},G=function(e){return null===e||void 0===e?j:F(e)},B={some:F,none:L,from:G},H=function(e){if(null===e)return"null";var t=void 0===e?"undefined":n(e);return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},z=function(e){return function(t){return H(t)===e}},W=z("string"),q=z("array"),V=z("boolean"),J=z("function"),Y=z("number"),K=function(){var e=Array.prototype.indexOf,t=function(t,n){return e.call(t,n)},n=function(e,t){return ce(e,t)};return void 0===e?n:t}(),X=function(e,t){return K(e,t)>-1},Q=function(e,t){return ae(e,t).isSome()},Z=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o,e)}return r},ee=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},te=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},ne=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},re=function(e,t,n){return te(e,function(e){n=t(n,e)}),n},oe=function(e,t,n){return ee(e,function(e){n=t(n,e)}),n},ie=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n,e))return B.some(o)}return B.none()},ae=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n,e))return B.some(n)}return B.none()},ce=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},se=Array.prototype.push,le=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);se.apply(t,e[n])}return t},ue=function(e,t){var n=Z(e,t);return le(n)},de=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},fe=Array.prototype.slice,pe=function(e){var t=fe.call(e,0);return t.reverse(),t},me=function(e){return 0===e.length?B.none():B.some(e[e.length-1])},he=(J(Array.from)&&Array.from,Object.keys),ge=function(e,t){for(var n=he(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i,e)}},ve=function(e,t){return be(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},be=function(e,t){var n={};return ge(e,function(r,o){var i=t(r,o,e);n[i.k]=i.v}),n},ye=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return ee(e,function(e,n){r[e]=T(t[n])}),r}},xe=function(e){return e.slice(0).sort()},we=function(e,t){throw new Error("All required keys ("+xe(e).join(", ")+") were not specified. Specified keys were: "+xe(t).join(", ")+".")},Ee=function(e){throw new Error("Unsupported keys for object: "+xe(e).join(", "))},_e=function(e,t){if(!q(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");ee(t,function(t){if(!W(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")})},Se=function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+xe(e).join(", ")+") were not.")},ke=function(e){var t=xe(e);ie(t,function(e,n){return n<t.length-1&&e===t[n+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})},Ce=function(e,t){var n=e.concat(t);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return _e("required",e),_e("optional",t),ke(n),function(r){var o=he(r);de(e,function(e){return X(o,e)})||we(e,o);var i=ne(o,function(e){return!X(n,e)});i.length>0&&Ee(i);var a={};return ee(e,function(e){a[e]=T(r[e])}),ee(t,function(e){a[e]=T(Object.prototype.hasOwnProperty.call(r,e)?B.some(r[e]):B.none())}),a}},Te=ye("width","height"),Ie=ye("rows","columns"),De=ye("row","column"),Re=ye("x","y"),Oe=ye("element","rowspan","colspan"),Ne=ye("element","rowspan","colspan","isNew"),Ue=ye("element","rowspan","colspan","row","column"),Ae=ye("element","cells","section"),Pe=ye("element","isNew"),Me=ye("element","cells","section","isNew"),Le=ye("cells","section"),je=ye("details","section"),Fe=ye("startRow","startCol","finishRow","finishCol"),Ge={dimensions:Te,grid:Ie,address:De,coords:Re,extended:Ue,detail:Oe,detailnew:Ne,rowdata:Ae,elementnew:Pe,rowdatanew:Me,rowcells:Le,rowdetails:je,bounds:Fe},Be=function(e,t){var n=t||document,r=n.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw"HTML must have a single root node";return We(r.childNodes[0])},He=function(e,t){var n=t||document,r=n.createElement(e);return We(r)},ze=function(e,t){var n=t||document,r=n.createTextNode(e);return We(r)},We=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:T(e)}},qe=function(e,t,n){var r=e.dom();return B.from(r.elementFromPoint(t,n)).map(We)},Ve={fromHtml:Be,fromTag:He,fromText:ze,fromDom:We,fromPoint:qe},Je={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},Ye=Je.ELEMENT,Ke=Je.DOCUMENT,Xe=function(e,t){var n=e.dom();if(n.nodeType!==Ye)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Qe=function(e){return e.nodeType!==Ye&&e.nodeType!==Ke||0===e.childElementCount},$e=function(e,t){var n=void 0===t?document:t.dom();return Qe(n)?[]:Z(n.querySelectorAll(e),Ve.fromDom)},Ze=function(e,t){var n=void 0===t?document:t.dom();return Qe(n)?B.none():B.from(n.querySelector(e)).map(Ve.fromDom)},et={all:$e,is:Xe,one:Ze},tt=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n},nt={toArray:tt},rt="undefined"!=typeof window?window:Function("return this;")(),ot=function(e,t){for(var n=void 0!==t&&null!==t?t:rt,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},it=function(e,t){var n=e.split(".");return ot(n,t)},at=function(e,t){return it(e,t)},ct=function(e,t){var n=at(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},st={getOrDie:ct},lt=function(){return st.getOrDie("Node")},ut=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},dt=function(e,t){return ut(e,t,lt().DOCUMENT_POSITION_PRECEDING)},ft=function(e,t){return ut(e,t,lt().DOCUMENT_POSITION_CONTAINED_BY)},pt={documentPositionPreceding:dt,documentPositionContainedBy:ft},mt=function(e){var t,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,t=e.apply(null,r)),t}},ht=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},gt=function(e,t){var n=ht(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return yt(r(1),r(2))},vt=function(e,t){var n=String(t).toLowerCase();return 0===e.length?bt():gt(e,n)},bt=function(){return yt(0,0)},yt=function(e,t){return{major:e,minor:t}},xt={nu:yt,detect:vt,unknown:bt},wt=function(e,t){return function(){return t===e}},Et=function(){return _t({current:void 0,version:xt.unknown()})},_t=function(e){var t=e.current;return{current:t,version:e.version,isEdge:wt("Edge",t),isChrome:wt("Chrome",t),isIE:wt("IE",t),isOpera:wt("Opera",t),isFirefox:wt("Firefox",t),isSafari:wt("Safari",t)}},St={unknown:Et,nu:_t,edge:T("Edge"),chrome:T("Chrome"),ie:T("IE"),opera:T("Opera"),firefox:T("Firefox"),safari:T("Safari")},kt=function(e,t){return function(){return t===e}},Ct=function(){return Tt({current:void 0,version:xt.unknown()})},Tt=function(e){var t=e.current;return{current:t,version:e.version,isWindows:kt("Windows",t),isiOS:kt("iOS",t),isAndroid:kt("Android",t),isOSX:kt("OSX",t),isLinux:kt("Linux",t),isSolaris:kt("Solaris",t),isFreeBSD:kt("FreeBSD",t)}},It={unknown:Ct,nu:Tt,windows:T("Windows"),ios:T("iOS"),android:T("Android"),linux:T("Linux"),osx:T("OSX"),solaris:T("Solaris"),freebsd:T("FreeBSD")},Dt=function(e,t){var n=String(t).toLowerCase();return ie(e,function(e){return e.search(n)})},Rt=function(e,t){return Dt(e,t).map(function(e){var n=xt.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Ot=function(e,t){return Dt(e,t).map(function(e){var n=xt.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Nt={detectBrowser:Rt,detectOs:Ot},Ut=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},At=function(e,t){return-1!==e.indexOf(t)},Pt=function(e,t){return Ut(e,t,e.length-t.length)},Mt=function(e){return e.replace(/^\s+|\s+$/g,"")},Lt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,jt=function(e){return function(t){return At(t,e)}},Ft=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return At(e,"edge/")&&At(e,"chrome")&&At(e,"safari")&&At(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Lt],search:function(e){return At(e,"chrome")&&!At(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return At(e,"msie")||At(e,"trident")}},{name:"Opera",versionRegexes:[Lt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:jt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:jt("firefox")},{name:"Safari",versionRegexes:[Lt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(At(e,"safari")||At(e,"mobile/"))&&At(e,"applewebkit")}}],Gt=[{name:"Windows",search:jt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return At(e,"iphone")||At(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:jt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:jt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:jt("linux"),versionRegexes:[]},{name:"Solaris",search:jt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:jt("freebsd"),versionRegexes:[]}],Bt={browsers:T(Ft),oses:T(Gt)},Ht=function(t){var n=Bt.browsers(),r=Bt.oses(),o=Nt.detectBrowser(n,t).fold(St.unknown,St.nu),i=Nt.detectOs(r,t).fold(It.unknown,It.nu);return{browser:o,os:i,deviceType:e(i,o,t)}},zt={detect:Ht},Wt=mt(function(){var e=navigator.userAgent;return zt.detect(e)}),qt={detect:Wt},Vt=function(e,t){return e.dom()===t.dom()},Jt=function(e,t){return e.dom().isEqualNode(t.dom())},Yt=function(e,t){return Q(t,D(Vt,e))},Kt=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Xt=function(e,t){return pt.documentPositionContainedBy(e.dom(),t.dom())},Qt=qt.detect().browser,$t=Qt.isIE()?Xt:Kt,Zt={eq:Vt,isEqualNode:Jt,member:Yt,contains:$t,is:et.is},en=function(e){return Ve.fromDom(e.dom().ownerDocument)},tn=function(e){return Ve.fromDom(e.dom().ownerDocument.documentElement)},nn=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return Ve.fromDom(n)},rn=function(e){var t=e.dom();return B.from(t.parentNode).map(Ve.fromDom)},on=function(e){return rn(e).bind(function(t){var n=pn(t);return ae(n,function(t){return Zt.eq(e,t)})})},an=function(e,t){for(var n=J(t)?t:T(!1),r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=Ve.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o},cn=function(e){var t=function(t){return ne(t,function(t){return!Zt.eq(e,t)})};return rn(e).map(pn).map(t).getOr([])},sn=function(e){var t=e.dom();return B.from(t.offsetParent).map(Ve.fromDom)},ln=function(e){var t=e.dom();return B.from(t.previousSibling).map(Ve.fromDom)},un=function(e){var t=e.dom();return B.from(t.nextSibling).map(Ve.fromDom)},dn=function(e){return pe(nt.toArray(e,ln))},fn=function(e){return nt.toArray(e,un)},pn=function(e){var t=e.dom();return Z(t.childNodes,Ve.fromDom)},mn=function(e,t){var n=e.dom().childNodes;return B.from(n[t]).map(Ve.fromDom)},hn=function(e){return mn(e,0)},gn=function(e){return mn(e,e.dom().childNodes.length-1)},vn=function(e){return e.dom().childNodes.length},bn=function(e){return e.dom().hasChildNodes()},yn=ye("element","offset"),xn=function(e,t){var n=pn(e);return n.length>0&&t<n.length?yn(n[t],0):yn(e,t)},wn={owner:en,defaultView:nn,documentElement:tn,parent:rn,findIndex:on,parents:an,siblings:cn,prevSibling:ln,offsetParent:sn,prevSiblings:dn,nextSibling:un,nextSiblings:fn,children:pn,child:mn,firstChild:hn,lastChild:gn,childNodesCount:vn,hasChildNodes:bn,leaf:xn},En=function(e,t){return _n(e,t,T(!0))},_n=function e(t,n,r){return ue(wn.children(t),function(t){return et.is(t,n)?r(t)?[t]:[]:e(t,n,r)})},Sn={firstLayer:En,filterFirstLayer:_n},kn=function(e){return e.dom().nodeName.toLowerCase()},Cn=function(e){return e.dom().nodeType},Tn=function(e){return e.dom().nodeValue},In=function(e){return function(t){return Cn(t)===e}},Dn=function(e){return Cn(e)===Je.COMMENT||"#comment"===kn(e)},Rn=In(Je.ELEMENT),On=In(Je.TEXT),Nn=In(Je.DOCUMENT),Un={name:kn,type:Cn,value:Tn,isElement:Rn,isText:On,isDocument:Nn,isComment:Dn},An=function(e,t,n){if(!(W(n)||V(n)||Y(n)))throw new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Pn=function(e,t,n){An(e.dom(),t,n)},Mn=function(e,t){var n=e.dom();ge(t,function(e,t){An(n,t,e)})},Ln=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},jn=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Fn=function(e,t){e.dom().removeAttribute(t)},Gn=function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},Bn=function(e){return oe(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},Hn=function(e,t,n){jn(e,n)&&!jn(t,n)&&Pn(t,n,Ln(e,n))},zn=function(e,t,n){Un.isElement(e)&&Un.isElement(t)&&ee(n,function(n){Hn(e,t,n)})},Wn={clone:Bn,set:Pn,setAll:Mn,get:Ln,has:jn,remove:Fn,hasNone:Gn,transfer:zn},qn=function(e){var t=Un.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},Vn=mt(function(){return Jn(Ve.fromDom(document))}),Jn=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return Ve.fromDom(t)},Yn={body:Vn,getBody:Jn,inBody:qn},Kn=function(e){return Zn(Yn.body(),e)},Xn=function(e,t,n){return ne(wn.parents(e,n),t)},Qn=function(e,t){return ne(wn.siblings(e),t)},$n=function(e,t){return ne(wn.children(e),t)},Zn=function e(t,n){var r=[];return ee(wn.children(t),function(t){n(t)&&(r=r.concat([t])),r=r.concat(e(t,n))}),r},er={all:Kn,ancestors:Xn,siblings:Qn,children:$n,descendants:Zn},tr=function(e){return et.all(e)},nr=function(e,t,n){return er.ancestors(e,function(e){return et.is(e,t)},n)},rr=function(e,t){return er.siblings(e,function(e){return et.is(e,t)})},or=function(e,t){return er.children(e,function(e){return et.is(e,t)})},ir=function(e,t){return et.all(t,e)},ar={all:tr,ancestors:nr,siblings:rr,children:or,descendants:ir},cr=function(e){return fr(Yn.body(),e)},sr=function(e,t,n){for(var r=e.dom(),o=J(n)?n:T(!1);r.parentNode;){r=r.parentNode;var i=Ve.fromDom(r);if(t(i))return B.some(i);if(o(i))break}return B.none()},lr=function(e,n,r){return t(function(e){return n(e)},sr,e,n,r)},ur=function(e,t){var n=e.dom();return n.parentNode?dr(Ve.fromDom(n.parentNode),function(n){return!Zt.eq(e,n)&&t(n)}):B.none()},dr=function(e,t){return ie(e.dom().childNodes,C(t,Ve.fromDom)).map(Ve.fromDom)},fr=function(e,t){return function e(n){for(var r=0;r<n.childNodes.length;r++){if(t(Ve.fromDom(n.childNodes[r])))return B.some(Ve.fromDom(n.childNodes[r]));var o=e(n.childNodes[r]);if(o.isSome())return o}return B.none()}(e.dom())},pr={first:cr,ancestor:sr,closest:lr,sibling:ur,child:dr,descendant:fr},mr=function(e){return et.one(e)},hr=function(e,t,n){return pr.ancestor(e,function(e){return et.is(e,t)},n)},gr=function(e,t){return pr.sibling(e,function(e){return et.is(e,t)})},vr=function(e,t){return pr.child(e,function(e){return et.is(e,t)})},br=function(e,t){return et.one(t,e)},yr=function(e,n,r){return t(et.is,hr,e,n,r)},xr={first:mr,ancestor:hr,sibling:gr,child:vr,descendant:br,closest:yr},wr=function(e,t,n){var r=void 0!==n?n:T(!1);if(r(t))return B.none();if(X(e,Un.name(t)))return B.some(t);var o=function(e){return et.is(e,"table")||r(e)};return xr.ancestor(t,e.join(","),o)},Er=function(e,t){return wr(["td","th"],e,t)},_r=function(e){return Sn.firstLayer(e,"th,td")},Sr=function(e,t){return wr(["caption","tr","tbody","tfoot","thead"],e,t)},kr=function(e,t){return wn.parent(t).map(function(t){return ar.children(t,e)})},Cr=D(kr,"th,td"),Tr=D(kr,"tr"),Ir=function(e){return xr.descendant(e,"th,td")},Dr=function(e,t){return xr.closest(e,"table",t)},Rr=function(e,t){return wr(["tr"],e,t)},Or=function(e){return Sn.firstLayer(e,"tr")},Nr=function(e,t){return parseInt(Wn.get(e,t),10)},Ur=function(e,t,n){var r=Nr(e,t),o=Nr(e,n);return Ge.grid(r,o)},Ar={cell:Er,firstCell:Ir,cells:_r,neighbourCells:Cr,table:Dr,row:Rr,rows:Or,notCell:Sr,neighbourRows:Tr,attr:Nr,grid:Ur},Pr=function(e){var t=Ar.rows(e);return Z(t,function(e){var t=e,n=wn.parent(t),r=n.map(function(e){var t=Un.name(e);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"}).getOr("tbody"),o=Z(Ar.cells(e),function(e){var t=Wn.has(e,"rowspan")?parseInt(Wn.get(e,"rowspan"),10):1,n=Wn.has(e,"colspan")?parseInt(Wn.get(e,"colspan"),10):1;return Ge.detail(e,t,n)});return Ge.rowdata(t,o,r)})},Mr=function(e,t){return Z(e,function(e){var n=Z(Ar.cells(e),function(e){var t=Wn.has(e,"rowspan")?parseInt(Wn.get(e,"rowspan"),10):1,n=Wn.has(e,"colspan")?parseInt(Wn.get(e,"colspan"),10):1;return Ge.detail(e,t,n)});return Ge.rowdata(e,n,t.section())})},Lr={fromTable:Pr,fromPastedRows:Mr},jr=function(e,t){return e+","+t},Fr=function(e,t,n){var r=e.access()[jr(t,n)];return void 0!==r?B.some(r):B.none()},Gr=function(e,t,n){var r=Br(e,function(e){return n(t,e.element())});return r.length>0?B.some(r[0]):B.none()},Br=function(e,t){var n=ue(e.all(),function(e){return e.cells()});return ne(n,t)},Hr=function(e){var t={},n=[],r=e.length,o=0;ee(e,function(e,r){var i=[];ee(e.cells(),function(e,n){for(var a=0;void 0!==t[jr(r,a)];)a++;for(var c=Ge.extended(e.element(),e.rowspan(),e.colspan(),r,a),s=0;s<e.colspan();s++)for(var l=0;l<e.rowspan();l++){var u=r+l,d=a+s,f=jr(u,d);t[f]=c,o=Math.max(o,d+1)}i.push(c)}),n.push(Ge.rowdata(e.element(),i,e.section()))});var i=Ge.grid(r,o);return{grid:T(i),access:T(t),all:T(n)}},zr=function(e){var t=Z(e.all(),function(e){return e.cells()});return le(t)},Wr={generate:Hr,getAt:Fr,findItem:Gr,filterItems:Br,justCells:zr},qr=function(e){return void 0!==e.style},Vr={isSupported:qr},Jr=function(e,t,n){if(!W(n))throw new Error("CSS value must be a string: "+n);Vr.isSupported(e)&&e.style.setProperty(t,n)},Yr=function(e,t){Vr.isSupported(e)&&e.style.removeProperty(t)},Kr=function(e,t,n){var r=e.dom();Jr(r,t,n)},Xr=function(e,t){var n=e.dom();ge(t,function(e,t){Jr(n,t,e)})},Qr=function(e,t){var n=e.dom();ge(t,function(e,t){e.fold(function(){Yr(n,t)},function(e){Jr(n,t,e)})})},$r=function(e,t){var n=e.dom(),r=window.getComputedStyle(n),o=r.getPropertyValue(t),i=""!==o||Yn.inBody(e)?o:Zr(n,t);return null===i?void 0:i},Zr=function(e,t){return Vr.isSupported(e)?e.style.getPropertyValue(t):""},eo=function(e,t){var n=e.dom(),r=Zr(n,t);return B.from(r).filter(function(e){return e.length>0})},to=function(e){var t={},n=e.dom();if(Vr.isSupported(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t},no=function(e,t,n){var r=Ve.fromTag(e);return Kr(r,t,n),eo(r,t).isSome()},ro=function(e,t){var n=e.dom();Yr(n,t),Wn.has(e,"style")&&""===Mt(Wn.get(e,"style"))&&Wn.remove(e,"style")},oo=function(e,t){var n=Wn.get(e,"style"),r=t(e);return(void 0===n?Wn.remove:Wn.set)(e,"style",n),r},io=function(e,t){var n=e.dom(),r=t.dom();Vr.isSupported(n)&&Vr.isSupported(r)&&(r.style.cssText=n.style.cssText)},ao=function(e){return e.dom().offsetWidth},co=function(e,t,n){eo(e,n).each(function(e){eo(t,n).isNone()&&Kr(t,n,e)})},so=function(e,t,n){Un.isElement(e)&&Un.isElement(t)&&ee(n,function(n){co(e,t,n)})},lo={copy:io,set:Kr,preserve:oo,setAll:Xr,setOptions:Qr,remove:ro,get:$r,getRaw:eo,getAllRaw:to,isValidValue:no,reflow:ao,transfer:so},uo=function(e,t){wn.parent(e).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})},fo=function(e,t){wn.nextSibling(e).fold(function(){wn.parent(e).each(function(e){mo(e,t)})},function(e){uo(e,t)})},po=function(e,t){wn.firstChild(e).fold(function(){mo(e,t)},function(n){e.dom().insertBefore(t.dom(),n.dom())})},mo=function(e,t){e.dom().appendChild(t.dom())},ho=function(e,t,n){wn.child(e,n).fold(function(){mo(e,t)},function(e){uo(e,t)})},go=function(e,t){uo(e,t),mo(t,e)},vo={before:uo,after:fo,prepend:po,append:mo,appendAt:ho,wrap:go},bo=function(e,t){ee(t,function(t){vo.before(e,t)})},yo=function(e,t){ee(t,function(n,r){var o=0===r?e:t[r-1];vo.after(o,n)})},xo=function(e,t){ee(t.slice().reverse(),function(t){vo.prepend(e,t)})},wo=function(e,t){ee(t,function(t){vo.append(e,t)})},Eo={before:bo,after:yo,prepend:xo,append:wo},_o=function(e){e.dom().textContent="",ee(wn.children(e),function(e){So(e)})},So=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},ko=function(e){var t=wn.children(e);t.length>0&&Eo.before(e,t),So(e)},Co={empty:_o,remove:So,unwrap:ko},To=ye("minRow","minCol","maxRow","maxCol"),Io=function(e,t){var n=e.grid().columns(),r=e.grid().rows(),o=r,i=n,a=0,c=0;return ge(e.access(),function(e){if(t(e)){var n=e.row(),r=n+e.rowspan()-1,s=e.column(),l=s+e.colspan()-1;n<o?o=n:r>a&&(a=r),s<i?i=s:l>c&&(c=l)}}),To(o,i,a,c)},Do=function(e,t,n){var r=e[n].element(),o=Ve.fromTag("td");vo.append(o,Ve.fromTag("br")),(t?vo.append:vo.prepend)(r,o)},Ro=function(e,t,n,r){for(var o=t.grid().columns(),i=t.grid().rows(),a=0;a<i;a++)for(var c=!1,s=0;s<o;s++)if(!(a<n.minRow()||a>n.maxRow()||s<n.minCol()||s>n.maxCol())){var l=Wr.getAt(t,a,s).filter(r).isNone();l?Do(e,c,a):c=!0}},Oo=function(e,t){var n=ne(Sn.firstLayer(e,"tr"),function(e){return 0===e.dom().childElementCount});ee(n,Co.remove),t.minCol()!==t.maxCol()&&t.minRow()!==t.maxRow()||ee(Sn.firstLayer(e,"th,td"),function(e){Wn.remove(e,"rowspan"),Wn.remove(e,"colspan")}),Wn.remove(e,"width"),Wn.remove(e,"height"),lo.remove(e,"width"),lo.remove(e,"height")},No=function(e,t){var n=function(e){return et.is(e.element(),t)},r=Lr.fromTable(e),o=Wr.generate(r),i=Io(o,n),a="th:not("+t+"),td:not("+t+")",c=Sn.filterFirstLayer(e,"th,td",function(e){return et.is(e,a)});return ee(c,Co.remove),Ro(r,o,i,n),Oo(e,i),e},Uo={extract:No},Ao=function(e,t){return Ve.fromDom(e.dom().cloneNode(t))},Po=function(e){return Ao(e,!1)},Mo=function(e){return Ao(e,!0)},Lo=function(e,t){var n=Ve.fromTag(t),r=Wn.clone(e);return Wn.setAll(n,r),n},jo=function(e,t){var n=Lo(e,t),r=wn.children(Mo(e));return Eo.append(n,r),n},Fo=function(e,t){var n=Lo(e,t);vo.before(e,n);var r=wn.children(e);return Eo.append(n,r),Co.remove(e),n},Go={shallow:Po,shallowAs:Lo,deep:Mo,copy:jo,mutate:Fo},Bo=function(e,t){var n=function(n){if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return a(n).getOr("")},r=function(e){try{return o(e)}catch(e){return B.none()}},o=function(t){return e(t)?B.from(t.dom().nodeValue):B.none()},i=qt.detect().browser,a=i.isIE()&&10===i.version.major?r:o;return{get:n,getOption:a,set:function(n,r){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom().nodeValue=r}}}(Un.isText,"text"),Ho=function(e){return Bo.get(e)},zo=function(e){return Bo.getOption(e)},Wo=function(e,t){Bo.set(e,t)},qo={get:Ho,getOption:zo,set:Wo},Vo=function(e){return"img"===Un.name(e)?1:qo.getOption(e).fold(function(){return wn.children(e).length},function(e){return e.length})},Jo=function(e,t){return Vo(e)===t},Yo=function(e,t){return 0===t},Ko=function(e){return qo.getOption(e).filter(function(e){return 0!==e.trim().length||e.indexOf(" ")>-1}).isSome()},Xo=["img","br"],Qo=function(e){return Ko(e)||X(Xo,Un.name(e))},$o={getEnd:Vo,isEnd:Jo,isStart:Yo,isCursorPosition:Qo},Zo=function(e){return pr.descendant(e,$o.isCursorPosition)},ei=function(e){return ti(e,$o.isCursorPosition)},ti=function(e,t){return function e(n){for(var r=wn.children(n),o=r.length-1;o>=0;o--){var i=r[o];if(t(i))return B.some(i);var a=e(i);if(a.isSome())return a}return B.none()}(e)},ni={first:Zo,last:ei},ri=function(){var e=Ve.fromTag("td");return vo.append(e,Ve.fromTag("br")),e},oi=function(e,t,n){var r=Go.copy(e,t);return ge(n,function(e,t){null===e?Wn.remove(r,t):Wn.set(r,t,e)}),r},ii=function(e){return e},ai=function(e){return function(){return Ve.fromTag("tr",e.dom())}},ci=function(e,t,n){return ni.first(e).map(function(r){var o=n.join(","),i=ar.ancestors(r,o,function(t){return Zt.eq(t,e)});return re(i,function(e,t){var n=Go.shallow(t);return Wn.remove(n,"contenteditable"),vo.append(e,n),n},t)}).getOr(t)},si=function(e,t,n){var r=function(t){var r=wn.owner(t.element()),o=Ve.fromTag(Un.name(t.element()),r.dom()),i=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=i.length>0?ci(t.element(),o,i):o;return vo.append(a,Ve.fromTag("br")),lo.copy(t.element(),o),lo.remove(o,"height"),1!==t.colspan()&&lo.remove(t.element(),"width"),e(t.element(),o),o};return{row:ai(t),cell:r,replace:oi,gap:ri}},li=function(e){return{row:ai(e),cell:ri,replace:ii,gap:ri}},ui={cellOperations:si,paste:li},di=function(e,t){var n=t||document,r=n.createElement("div");return r.innerHTML=e,wn.children(Ve.fromDom(r))},fi=function(e,t){return Z(e,function(e){return Ve.fromTag(e,t)})},pi=function(e,t){return Z(e,function(e){return Ve.fromText(e,t)})},mi=function(e){return Z(e,Ve.fromDom)},hi={fromHtml:di,fromTags:fi,fromText:pi,fromDom:mi},gi=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],vi=ye("left","right"),bi=function(e,t,n){var r=e.property().children(t);return ae(r,D(e.eq,n)).map(function(e){return{before:T(r.slice(0,e)),after:T(r.slice(e+1))}})},yi=function(e,t,n){return bi(e,t,n).map(function(n){var r=e.create().clone(t);return e.insert().appendAll(r,n.after()),e.insert().after(t,r),vi(t,r)})},xi=function(e,t,n){return bi(e,t,n).map(function(r){var o=e.create().clone(t);return e.insert().appendAll(o,r.before().concat([n])),e.insert().appendAll(t,r.after()),e.insert().before(t,o),vi(o,t)})},wi=function(e,t,n,r){var o=ye("first","second","splits");return function t(i,a,c){var s=o(i,B.none(),c);return n(i)?o(i,a,c):e.property().parent(i).bind(function(o){return r(e,o,i).map(function(e){var r=[{first:e.left,second:e.right}],i=n(o)?o:e.left();return t(i,B.some(e.right()),c.concat(r))}).getOr(s)})}(t,B.none(),[])},Ei={breakToLeft:xi,breakToRight:yi,breakPath:wi},_i=function(e,t,n,r){return r(e,t,n[0],n.slice(1))},Si=function(e,t,n){return n.length>0?_i(e,t,n,ki):B.none()},ki=function(e,t,n,r){var o=t(e,n);return re(r,function(n,r){var o=t(e,r);return Ci(e,n,o)},o)},Ci=function(e,t,n){return t.bind(function(t){return n.filter(D(e.eq,t))})},Ti={oneAll:Si},Ii=function(e,t){return D(e.eq,t)},Di=function(e,t,n,r){var o=e.property().children(t);if(e.eq(t,n[0]))return B.some([n[0]]);if(e.eq(t,r[0]))return B.some([r[0]]);var i=function(n){var r=pe(n),i=ae(r,Ii(e,t)).getOr(-1),a=i<r.length-1?r[i+1]:r[i];return ae(o,Ii(e,a))},a=i(n),c=i(r);return a.bind(function(e){return c.map(function(t){var n=Math.min(e,t),r=Math.max(e,t);return o.slice(n,r+1)})})},Ri=function(e,t,n,r){var o=void 0!==r?r:T(!1),i=[t].concat(e.up().all(t)),a=[n].concat(e.up().all(n)),c=function(e){return ae(e,o).fold(function(){return e},function(t){return e.slice(0,t+1)})},s=c(i),l=c(a),u=ie(s,function(t){return Q(l,Ii(e,t))});return{firstpath:T(s),secondpath:T(l),shared:T(u)}},Oi=function(e,t,n){var r=Ri(e,t,n);return r.shared().bind(function(t){return Di(e,t,r.firstpath(),r.secondpath())})},Ni={subset:Oi,ancestors:Ri},Ui=function(e,t,n){return Ti.oneAll(e,t,n)},Ai=function(e,t,n){return Ni.subset(e,t,n)},Pi=function(e,t,n,r){return Ni.ancestors(e,t,n,r)},Mi=function(e,t,n){return Ei.breakToLeft(e,t,n)},Li=function(e,t,n){return Ei.breakToRight(e,t,n)},ji=function(e,t,n,r){return Ei.breakPath(e,t,n,r)},Fi={sharedOne:Ui,subset:Ai,ancestors:Pi,breakToLeft:Mi,breakToRight:Li,breakPath:ji},Gi=r(),Bi=function(e,t){return Fi.sharedOne(Gi,function(t,n){return e(n)},t)},Hi=function(e,t){return Fi.subset(Gi,e,t)},zi=function(e,t,n){return Fi.ancestors(Gi,e,t,n)},Wi=function(e,t){return Fi.breakToLeft(Gi,e,t)},qi=function(e,t){return Fi.breakToRight(Gi,e,t)},Vi=function(e,t,n){return Fi.breakPath(Gi,e,t,function(e,t,r){return n(t,r)})},Ji={sharedOne:Bi,subset:Hi,ancestors:zi,breakToLeft:Wi,breakToRight:qi,breakPath:Vi},Yi=function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,o=t.row(),i=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&o<=e.finishRow()&&i>=e.startRow()},Ki=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()},Xi=function(e,t){for(var n=!0,r=D(Ki,t),o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)n=n&&Wr.getAt(e,o,i).exists(r);return n?B.some(t):B.none()},Qi={inSelection:Yi,isWithin:Ki,isRectangular:Xi},$i=function(e,t){return Ge.bounds(Math.min(e.row(),t.row()),Math.min(e.column(),t.column()),Math.max(e.row()+e.rowspan()-1,t.row()+t.rowspan()-1),Math.max(e.column()+e.colspan()-1,t.column()+t.colspan()-1))},Zi=function(e,t,n){var r=Wr.findItem(e,t,Zt.eq),o=Wr.findItem(e,n,Zt.eq);return r.bind(function(e){return o.map(function(t){return $i(e,t)})})},ea=function(e,t,n){return Zi(e,t,n).bind(function(t){return Qi.isRectangular(e,t)})},ta={getAnyBox:Zi,getBox:ea},na=function(e,t,n,r){return Wr.findItem(e,t,Zt.eq).bind(function(t){var o=n>0?t.row()+t.rowspan()-1:t.row(),i=r>0?t.column()+t.colspan()-1:t.column();return Wr.getAt(e,o+n,i+r).map(function(e){return e.element()})})},ra=function(e,t,n){return ta.getAnyBox(e,t,n).map(function(t){var n=Wr.filterItems(e,D(Qi.inSelection,t));return Z(n,function(e){return e.element()})})},oa=function(e,t){var n=function(e,t){return Zt.contains(t,e)};return Wr.findItem(e,t,n).bind(function(e){return e.element()})},ia={moveBy:na,intercepts:ra,parentCell:oa},aa=function(e,t,n){return Ar.table(e).bind(function(r){var o=ua(r);return ia.moveBy(o,e,t,n)})},ca=function(e,t,n){var r=ua(e);return ia.intercepts(r,t,n)},sa=function(e,t,n,r,o){var i=ua(e),a=Zt.eq(e,n)?t:ia.parentCell(i,t),c=Zt.eq(e,o)?r:ia.parentCell(i,r);return ia.intercepts(i,a,c)},la=function(e,t,n){var r=ua(e);return ta.getBox(r,t,n)},ua=function(e){var t=Lr.fromTable(e);return Wr.generate(t)},da={moveBy:aa,intercepts:ca,nestedIntercepts:sa,getBox:la},fa=function(e,t){return xr.ancestor(e,"table")},pa=Ce(["boxes","start","finish"],[]),ma=function(e,t,n){var r=function(e){return function(t){return n(t)||Zt.eq(t,e)}};return Zt.eq(e,t)?B.some(pa({boxes:B.some([e]),start:e,finish:t})):fa(e).bind(function(o){return fa(t).bind(function(i){if(Zt.eq(o,i))return B.some(pa({boxes:da.intercepts(o,e,t),start:e,finish:t}));if(Zt.contains(o,i)){var a=ar.ancestors(t,"td,th",r(o)),c=a.length>0?a[a.length-1]:t;return B.some(pa({boxes:da.nestedIntercepts(o,e,o,t,i),start:e,finish:c}))}if(Zt.contains(i,o)){var a=ar.ancestors(e,"td,th",r(i)),s=a.length>0?a[a.length-1]:e;return B.some(pa({boxes:da.nestedIntercepts(i,e,o,t,i),start:e,finish:s}))}return Ji.ancestors(e,t).shared().bind(function(a){return xr.closest(a,"table",n).bind(function(n){var a=ar.ancestors(t,"td,th",r(n)),c=a.length>0?a[a.length-1]:t,s=ar.ancestors(e,"td,th",r(n)),l=s.length>0?s[s.length-1]:e;return B.some(pa({boxes:da.nestedIntercepts(n,e,o,t,i),start:l,finish:c}))})})})})},ha=function(e,t){var n=ar.descendants(e,t);return n.length>0?B.some(n):B.none()},ga=function(e,t){return ie(e,function(e){return et.is(e,t)})},va=function(e,t,n){return xr.descendant(e,t).bind(function(t){return xr.descendant(e,n).bind(function(e){return Ji.sharedOne(fa,[t,e]).map(function(n){return{first:T(t),last:T(e),table:T(n)}})})})},ba=function(e,t){return xr.ancestor(e,"table").bind(function(n){return xr.descendant(n,t).bind(function(t){return ma(t,e).bind(function(e){return e.boxes().map(function(t){return{boxes:T(t),start:T(e.start()),finish:T(e.finish())}})})})})},ya=function(e,t,n,r,o){return ga(e,o).bind(function(e){return da.moveBy(e,t,n).bind(function(e){return ba(e,r)})})},xa={identify:ma,retrieve:ha,shiftSelection:ya,getEdges:va},wa=function(e,t){return xa.retrieve(e,t)},Ea=function(e,t,n){return xa.getEdges(e,t,n).bind(function(t){var n=function(t){return Zt.eq(e,t)},r=xr.ancestor(t.first(),"thead,tfoot,tbody,table",n),o=xr.ancestor(t.last(),"thead,tfoot,tbody,table",n);return r.bind(function(e){return o.bind(function(n){return Zt.eq(e,n)?da.getBox(t.table(),t.first(),t.last()):B.none()})})})},_a={retrieve:wa,retrieveBox:Ea},Sa="data-mce-selected",ka={selected:T(Sa),selectedSelector:T("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:T("[data-mce-selected]"),firstSelected:T("data-mce-first-selected"),firstSelectedSelector:T("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:T("data-mce-last-selected"),lastSelectedSelector:T("td[data-mce-last-selected],th[data-mce-last-selected]")},Ca=function(e){if(!q(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return ee(e,function(r,o){var i=he(r);if(1!==i.length)throw new Error("one and only one name per case");var a=i[0],c=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!q(c))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){var n=arguments.length;if(n!==c.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+c.length+" ("+c+"), got "+n);for(var r=new Array(n),i=0;i<r.length;i++)r[i]=arguments[i];var s=function(e){var n=he(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!de(t,function(e){return X(n,e)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)};return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[o].apply(null,r)},match:s,log:function(e){}}}}),n},Ta={generate:Ca},Ia=Ta.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]),Da=function(e,t,n,r){return e.fold(t,n,r)},Ra={cata:Da,none:Ia.none,multiple:Ia.multiple,single:Ia.single},Oa=function(e,t){return Ra.cata(t.get(),T([]),I,T([e]))},Na=function(e,t){var n=function(e){return Wn.has(e,"rowspan")&&parseInt(Wn.get(e,"rowspan"),10)>1||Wn.has(e,"colspan")&&parseInt(Wn.get(e,"colspan"),10)>1},r=Oa(e,t);return r.length>0&&de(r,n)?B.some(r):B.none()},Ua=function(e,t){return Ra.cata(t.get(),B.none,function(t,n){return 0===t.length?B.none():_a.retrieveBox(e,ka.firstSelectedSelector(),ka.lastSelectedSelector()).bind(function(e){return t.length>1?B.some({bounds:T(e),cells:T(t)}):B.none()})},B.none)},Aa={mergable:Ua,unmergable:Na,selection:Oa},Pa=function(e){return{element:T(e),mergable:B.none,unmergable:B.none,selection:T([e])}},Ma=function(e,t,n){return{element:T(n),mergable:T(Aa.mergable(t,e)),unmergable:T(Aa.unmergable(n,e)),selection:T(Aa.selection(n,e))}},La=function(e){return Pa(e)},ja=ye("element","clipboard","generators"),Fa=function(e,t,n,r,o){return{element:T(n),mergable:B.none,unmergable:B.none,selection:T(Aa.selection(n,e)),clipboard:T(r),generators:T(o)}},Ga={noMenu:Pa,forMenu:Ma,notCell:La,paste:ja,pasteRows:Fa},Ba=function(e){return Ar.table(e[0]).map(Go.deep).map(function(e){return[Uo.extract(e,ka.attributeSelector())]})},Ha=function(e,t){return e.selection.serializer.serialize(t.dom(),{})},za=function(e,t,n,r){e.on("BeforeGetContent",function(n){var r=function(t){n.preventDefault(),Ba(t).each(function(t){n.content=Z(t,function(t){return Ha(e,t)}).join("")})};!0===n.selection&&Ra.cata(t.get(),k,r,k)}),e.on("BeforeSetContent",function(t){if(!0===t.selection&&!0===t.paste){B.from(e.dom.getParent(e.selection.getStart(),"th,td")).each(function(o){var i=Ve.fromDom(o);Ar.table(i).bind(function(o){var a=ne(hi.fromHtml(t.content),function(e){return"meta"!==Un.name(e)});if(1===a.length&&"table"===Un.name(a[0])){t.preventDefault();var c=Ve.fromDom(e.getDoc()),s=ui.paste(c),l=Ga.paste(i,a[0],s);n.pasteCells(o,l).each(function(t){e.selection.setRng(t),e.focus(),r.clear(o)})}})})}})},Wa={registerEvents:za},qa=o("height",function(e){var t=e.dom();return Yn.inBody(e)?t.getBoundingClientRect().height:t.offsetHeight}),Va=function(e,t){qa.set(e,t)},Ja=function(e){return qa.get(e)},Ya=function(e){return qa.getOuter(e)},Ka=function(e,t){var n=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],r=qa.max(e,t,n);lo.set(e,"max-height",r+"px")},Xa={set:Va,get:Ja,getOuter:Ya,setMax:Ka},Qa=o("width",function(e){return e.dom().offsetWidth}),$a=function(e,t){Qa.set(e,t)},Za=function(e){return Qa.get(e)},ec=function(e){return Qa.getOuter(e)},tc=function(e,t){var n=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],r=Qa.max(e,t,n);lo.set(e,"max-width",r+"px")},nc={set:$a,get:Za,getOuter:ec,setMax:tc},rc=qt.detect(),oc=function(){return rc.browser.isIE()||rc.browser.isEdge()},ic=function(e,t){var n=parseFloat(e);return isNaN(n)?t:n},ac=function(e,t,n){return ic(lo.get(e,t),n)},cc=function(e){var t=ac(e,"padding-top",0),n=ac(e,"padding-bottom",0),r=ac(e,"border-top-width",0),o=ac(e,"border-bottom-width",0),i=e.dom().getBoundingClientRect().height,a=lo.get(e,"box-sizing"),c=r+o;return"border-box"===a?i:i-t-n-c},sc=function(e){return ac(e,"width",nc.get(e))},lc=function(e){return oc()?cc(e):ac(e,"height",Xa.get(e))},uc={getWidth:sc,getHeight:lc},dc=/(\d+(\.\d+)?)(\w|%)*/,fc=/(\d+(\.\d+)?)%/,pc=/(\d+(\.\d+)?)px|em/,mc=function(e,t){lo.set(e,"width",t+"px")},hc=function(e,t){lo.set(e,"width",t+"%")},gc=function(e,t){lo.set(e,"height",t+"px")},vc=function(e){return lo.getRaw(e,"height").getOrThunk(function(){return uc.getHeight(e)+"px"})},bc=function(e,t,n,r){var o=Ar.table(e).map(function(e){var r=n(e);return Math.floor(t/100*r)}).getOr(t);return r(e,o),o},yc=function(e,t,n,r){var o=parseInt(e,10);return Pt(e,"%")&&"table"!==Un.name(t)?bc(t,o,n,r):o},xc=function(e){var t=vc(e);return t?yc(t,e,Xa.get,gc):Xa.get(e)},wc=function(e,t,n){return n(e)/Ec(e,t)},Ec=function(e,t){return Wn.has(e,t)?parseInt(Wn.get(e,t),10):1},_c=function(e){return lo.getRaw(e,"width").fold(function(){return B.from(Wn.get(e,"width"))},function(e){return B.some(e)})},Sc=function(e,t){return e/t.pixelWidth()*100},kc=function(e,t,n){if(fc.test(t)){var r=fc.exec(t);return parseFloat(r[1])}var o=nc.get(e);return Sc(o,n)},Cc=function(e,t){return _c(e).fold(function(){var n=nc.get(e);return Sc(n,t)},function(n){return kc(e,n,t)})},Tc=function(e,t){return e/100*t.pixelWidth()},Ic=function(e,t,n){if(pc.test(t)){var r=pc.exec(t);return parseInt(r[1],10)}if(fc.test(t)){var o=fc.exec(t),i=parseFloat(o[1]);return Tc(i,n)}return nc.get(e)},Dc=function(e,t){return _c(e).fold(function(){return nc.get(e)},function(n){return Ic(e,n,t)})},Rc=function(e){return wc(e,"rowspan",xc)},Oc=function(e){return _c(e).bind(function(e){if(dc.test(e)){var t=dc.exec(e);return B.some({width:T(t[1]),unit:T(t[3])})}return B.none()})},Nc=function(e,t,n){lo.set(e,"width",t+n)},Uc={percentageBasedSizeRegex:T(fc),pixelBasedSizeRegex:T(pc),setPixelWidth:mc,setPercentageWidth:hc,setHeight:gc,getPixelWidth:Dc,getPercentageWidth:Cc,getGenericWidth:Oc,setGenericWidth:Nc,getHeight:Rc,getRawWidth:_c},Ac=function(e,t){Uc.getGenericWidth(e).each(function(n){var r=n.width()/2;Uc.setGenericWidth(e,r,n.unit()),Uc.setGenericWidth(t,r,n.unit())})},Pc={halve:Ac},Mc=function(e,t){var n=t||Ve.fromDom(document.documentElement);return pr.ancestor(e,D(Zt.eq,n)).isSome()},Lc=function(e){var t=e.dom();return t===t.window&&e instanceof Window?e:Un.isDocument(e)?t.defaultView||t.parentWindow:null},jc={attached:Mc,windowOf:Lc},Fc=function e(t,n){var r=function(r,o){return e(t+r,n+o)};return{left:T(t),top:T(n),translate:r}},Gc=Fc,Bc=function(e){var t=e.getBoundingClientRect();return Gc(t.left,t.top)},Hc=function(e,t){return void 0!==e?e:void 0!==t?t:0},zc=function(e){var t=e.dom().ownerDocument,n=t.body,r=jc.windowOf(Ve.fromDom(t)),o=t.documentElement,i=Hc(r.pageYOffset,o.scrollTop),a=Hc(r.pageXOffset,o.scrollLeft),c=Hc(o.clientTop,n.clientTop),s=Hc(o.clientLeft,n.clientLeft);return qc(e).translate(a-s,i-c)},Wc=function(e){var t=e.dom();return Gc(t.offsetLeft,t.offsetTop)},qc=function(e){var t=e.dom(),n=t.ownerDocument,r=n.body,o=Ve.fromDom(n.documentElement);return r===t?Gc(r.offsetLeft,r.offsetTop):jc.attached(e,o)?Bc(t):Gc(0,0)},Vc={absolute:zc,relative:Wc,viewport:qc},Jc=ye("row","y"),Yc=ye("col","x"),Kc=function(e){return Vc.absolute(e).left()+nc.getOuter(e)},Xc=function(e){return Vc.absolute(e).left()},Qc=function(e,t){return Yc(e,Xc(t))},$c=function(e,t){return Yc(e,Kc(t))},Zc=function(e){return Vc.absolute(e).top()},es=function(e,t){return Jc(e,Zc(t))},ts=function(e,t){return Jc(e,Zc(t)+Xa.getOuter(t))},ns=function(e,t,n){if(0===n.length)return[];var r=Z(n.slice(1),function(t,n){return t.map(function(t){return e(n,t)})}),o=n[n.length-1].map(function(e){return t(n.length-1,e)});return r.concat([o])},rs=function(e,t){return-e},os={delta:I,positions:D(ns,es,ts),edge:Zc},is={delta:I,edge:Xc,positions:D(ns,Qc,$c)},as={delta:rs,edge:Kc,positions:D(ns,$c,Qc)},cs={height:os,rtl:as,ltr:is},ss={ltr:cs.ltr,rtl:cs.rtl},ls=function(e){var t=Lr.fromTable(e);return Wr.generate(t).grid()},us={getGridSize:ls},ds=function e(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},fs=function(e,t){return ps(e,t,{validate:J,label:"function"})},ps=function(e,t,n){if(0===t.length)throw new Error("You must specify at least one required field.");return _e("required",t),ke(t),function(r){var o=he(r);de(t,function(e){return X(o,e)})||we(t,o),e(t,o);var i=ne(t,function(e){return!n.validate(r[e],e)});return i.length>0&&Se(i,n.label),r}},ms=function(e,t){var n=ne(t,function(t){return!X(e,t)});n.length>0&&Ee(n)},hs=function(e){return fs(ms,e)},gs=function(e){var t=Wn.has(e,"colspan")?parseInt(Wn.get(e,"colspan"),10):1,n=Wn.has(e,"rowspan")?parseInt(Wn.get(e,"rowspan"),10):1;return{element:T(e),colspan:T(t),rowspan:T(n)}},vs=function(e,t){xs(e);var n=ds(B.none()),r=void 0!==t?t:gs,o=function(t){return e.cell(t)},i=function(e){var t=r(e);return o(t)},a=function(e){var t=i(e);return n.get().isNone()&&n.set(B.some(t)),c=B.some({item:e,replacement:t}),t},c=B.none();return{getOrInit:function(e,t){return c.fold(function(){return a(e)},function(n){return t(e,n.item)?n.replacement:a(e)})},cursor:n.get}},bs=function(e,t){return function(n){var r=ds(B.none());xs(n);var o=[],i=function(e,t){return ie(o,function(n){return t(n.item,e)})},a=function(i){var a=n.replace(i,t,{scope:e});return o.push({item:i,sub:a}),r.get().isNone()&&r.set(B.some(a)),a};return{replaceOrInit:function(e,t){return i(e,t).fold(function(){return a(e)},function(n){return t(e,n.item)?n.sub:a(e)})},cursor:r.get}}},ys=function(e){xs(e);var t=ds(B.none());return{combine:function(n){return t.get().isNone()&&t.set(B.some(n)),function(){var t=e.cell({element:T(n),colspan:T(1),rowspan:T(1)});return lo.remove(t,"width"),lo.remove(n,"width"),t}},cursor:t.get}},xs=hs(["cell","row","replace","gap"]),ws={modification:vs,transform:bs,merging:ys},Es=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],_s=function(e,t){var n=e.property().name(t);return X(["ol","ul"],n)},Ss=function(e,t){var n=e.property().name(t);return X(Es,n)},ks=function(e,t){var n=e.property().name(t);return X(["address","pre","p","h1","h2","h3","h4","h5","h6"],n)},Cs=function(e,t){var n=e.property().name(t);return X(["h1","h2","h3","h4","h5","h6"],n)},Ts=function(e,t){return X(["div","li","td","th","blockquote","body","caption"],e.property().name(t))},Is=function(e,t){return X(["br","img","hr","input"],e.property().name(t))},Ds=function(e,t){return"iframe"===e.property().name(t)},Rs=function(e,t){return!(Ss(e,t)||Is(e,t))&&"li"!==e.property().name(t)},Os={isBlock:Ss,isList:_s,isFormatting:ks,isHeading:Cs,isContainer:Ts,isEmptyTag:Is,isFrame:Ds,isInline:Rs},Ns=r(),Us=function(e){return Os.isBlock(Ns,e)},As=function(e){return Os.isList(Ns,e)},Ps=function(e){return Os.isFormatting(Ns,e)},Ms=function(e){return Os.isHeading(Ns,e)},Ls=function(e){return Os.isContainer(Ns,e)},js=function(e){return Os.isEmptyTag(Ns,e)},Fs=function(e){return Os.isFrame(Ns,e)},Gs=function(e){return Os.isInline(Ns,e)},Bs={isBlock:Us,isList:As,isFormatting:Ps,isHeading:Ms,isContainer:Ls,isEmptyTag:js,isFrame:Fs,isInline:Gs},Hs=function(e){var t=function(e){return"br"===Un.name(e)},n=function(e){return de(e,function(e){return t(e)||Un.isText(e)&&0===qo.get(e).trim().length})},r=function(e){return"li"===Un.name(e)||pr.ancestor(e,Bs.isList).isSome()},o=function(e){return wn.nextSibling(e).map(function(e){return!!Bs.isBlock(e)||(Bs.isEmptyTag(e)?"img"!==Un.name(e):void 0)}).getOr(!1)},i=function(e){return ni.last(e).bind(function(n){var i=o(n);return wn.parent(n).map(function(o){return!0===i||r(o)||t(n)||Bs.isBlock(o)&&!Zt.eq(e,o)?[]:[Ve.fromTag("br")]})}).getOr([])},a=function(){var t=ue(e,function(e){var t=wn.children(e);return n(t)?[]:t.concat(i(e))});return 0===t.length?[Ve.fromTag("br")]:t}();Co.empty(e[0]),Eo.append(e[0],a)},zs={merge:Hs},Ws=Object.prototype.hasOwnProperty,qs=function(e,t){return t},Vs=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<t.length;o++){var i=t[o];for(var a in i)Ws.call(i,a)&&(r[a]=e(r[a],i[a]))}return r}}(qs),Js=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},Ys=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return B.none()},Ks=function(e,t,n){var r=e.cells(),o=r.slice(0,t),i=r.slice(t),a=o.concat([n]).concat(i);return Qs(e,a)},Xs=function(e,t,n){e.cells()[t]=n},Qs=function(e,t){return Ge.rowcells(t,e.section())},$s=function(e,t){var n=e.cells(),r=Z(n,t);return Ge.rowcells(r,e.section())},Zs=function(e,t){return e.cells()[t]},el=function(e,t){return Zs(e,t).element()},tl=function(e){return e.cells().length},nl={addCell:Ks,setCells:Qs,mutateCell:Xs,getCell:Zs,getCellElement:el,mapCells:$s,cellLength:tl},rl=function(e,t){return Z(e,function(e){return nl.getCell(e,t)})},ol=function(e,t){return e[t]},il=function(e,t){if(0===e.length)return 0;var n=e[0];return ae(e,function(e){return!t(n.element(),e.element())}).fold(function(){return e.length},function(e){return e})},al=function(e,t,n,r){var o=ol(e,t).cells().slice(n),i=il(o,r),a=rl(e,n).slice(t),c=il(a,r);return{colspan:T(i),rowspan:T(c)}},cl={subgrid:al},sl=function(e,t){var n=Z(e,function(e,t){return Z(e.cells(),function(e,t){return!1})}),r=function(e,t,r,o){for(var i=e;i<e+r;i++)for(var a=t;a<t+o;a++)n[i][a]=!0};return Z(e,function(o,i){var a=ue(o.cells(),function(o,a){if(!1===n[i][a]){var c=cl.subgrid(e,i,a,t);return r(i,a,c.rowspan(),c.colspan()),[Ge.detailnew(o.element(),c.rowspan(),c.colspan(),o.isNew())]}return[]});return Ge.rowdetails(a,o.section())})},ll=function(e,t,n){for(var r=[],o=0;o<e.grid().rows();o++){for(var i=[],a=0;a<e.grid().columns();a++){var c=Wr.getAt(e,o,a).map(function(e){return Ge.elementnew(e.element(),n)}).getOrThunk(function(){return Ge.elementnew(t.gap(),!0)});i.push(c)}var s=Ge.rowcells(i,e.all()[o].section());r.push(s)}return r},ul={toDetails:sl,toGrid:ll},dl=function(e,t,n,r){n===r?Wn.remove(e,t):Wn.set(e,t,n)},fl=function(e,t){var n=[],r=[],o=function(t,o){var i=xr.child(e,o).getOrThunk(function(){var t=Ve.fromTag(o,wn.owner(e).dom());return vo.append(e,t),t});Co.empty(i);var a=Z(t,function(e){e.isNew()&&n.push(e.element());var t=e.element();return Co.empty(t),ee(e.cells(),function(e){e.isNew()&&r.push(e.element()),dl(e.element(),"colspan",e.colspan(),1),dl(e.element(),"rowspan",e.rowspan(),1),vo.append(t,e.element())}),t});Eo.append(i,a)},i=function(t){xr.child(e,t).each(Co.remove)},a=function(e,t){e.length>0?o(e,t):i(t)},c=[],s=[],l=[];return ee(t,function(e){switch(e.section()){case"thead":c.push(e);break;case"tbody":s.push(e);break;case"tfoot":l.push(e)}}),a(c,"thead"),a(s,"tbody"),a(l,"tfoot"),{newRows:T(n),newCells:T(r)}},pl=function(e){return Z(e,function(e){var t=Go.shallow(e.element());return ee(e.cells(),function(e){var n=Go.deep(e.element());dl(n,"colspan",e.colspan(),1),dl(n,"rowspan",e.rowspan(),1),vo.append(t,n)}),t})},ml={render:fl,copy:pl},hl=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},gl=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},vl=function(e,t){var n=[];return ee(e,function(r,o){o<e.length-1&&!t(r,e[o+1])?n.push(r):o===e.length-1&&n.push(r)}),n},bl=function(e,t){if(t<0||t>=e.length-1)return B.none();var n=e[t].fold(function(){var n=pe(e.slice(0,t));return Ys(n,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return B.some({value:e,delta:0})}),r=e[t+1].fold(function(){var n=e.slice(t+1);return Ys(n,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return B.some({value:e,delta:1})});return n.bind(function(e){return r.map(function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n})})},yl={repeat:hl,range:gl,unique:vl,deduce:bl},xl=function(e){var t=e.grid(),n=yl.range(0,t.columns()),r=yl.range(0,t.rows());return Z(n,function(t){return wl(function(){return ue(r,function(n){return Wr.getAt(e,n,t).filter(function(e){return e.column()===t}).fold(T([]),function(e){return[e]})})},function(e){return 1===e.colspan()},function(){return Wr.getAt(e,0,t)})})},wl=function(e,t,n){var r=e();return ie(r,t).orThunk(function(){return B.from(r[0]).orThunk(n)}).map(function(e){return e.element()})},El=function(e){var t=e.grid(),n=yl.range(0,t.rows()),r=yl.range(0,t.columns());return Z(n,function(t){return wl(function(){return ue(r,function(n){return Wr.getAt(e,t,n).filter(function(e){return e.row()===t}).fold(T([]),function(e){return[e]})})},function(e){return 1===e.rowspan()},function(){return Wr.getAt(e,t,0)})})},_l={columns:xl,rows:El},Sl=function(e,t,n,r,o){var i=Ve.fromTag("div");return lo.setAll(i,{position:"absolute",left:t-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),Wn.setAll(i,{"data-column":e,role:"presentation"}),i},kl=function(e,t,n,r,o){var i=Ve.fromTag("div");return lo.setAll(i,{position:"absolute",left:t+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),Wn.setAll(i,{"data-row":e,role:"presentation"}),i},Cl={col:Sl,row:kl},Tl=function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}},Il=Tl("ephox-snooker"),Dl={resolve:Il.resolve},Rl=function(e,t){var n=Wn.get(e,t);return void 0===n||""===n?[]:n.split(" ")},Ol=function(e,t,n){var r=Rl(e,t),o=r.concat([n]);return Wn.set(e,t,o.join(" ")),!0},Nl=function(e,t,n){var r=ne(Rl(e,t),function(e){return e!==n});return r.length>0?Wn.set(e,t,r.join(" ")):Wn.remove(e,t),!1},Ul={read:Rl,add:Ol,remove:Nl},Al=function(e){return void 0!==e.dom().classList},Pl=function(e){return Ul.read(e,"class")},Ml=function(e,t){return Ul.add(e,"class",t)},Ll=function(e,t){return Ul.remove(e,"class",t)},jl=function(e,t){return X(Pl(e),t)?Ll(e,t):Ml(e,t)},Fl={get:Pl,add:Ml,remove:Ll,toggle:jl,supports:Al},Gl=function(e,t){Fl.supports(e)?e.dom().classList.add(t):Fl.add(e,t)},Bl=function(e){0===(Fl.supports(e)?e.dom().classList:Fl.get(e)).length&&Wn.remove(e,"class")},Hl=function(e,t){if(Fl.supports(e)){e.dom().classList.remove(t)}else Fl.remove(e,t);Bl(e)},zl=function(e,t){return Fl.supports(e)?e.dom().classList.toggle(t):Fl.toggle(e,t)},Wl=function(e,t){var n=Fl.supports(e),r=e.dom().classList;return a(function(){n?r.remove(t):Fl.remove(e,t)},function(){n?r.add(t):Fl.add(e,t)},ql(e,t))},ql=function(e,t){return Fl.supports(e)&&e.dom().classList.contains(t)},Vl={add:Gl,remove:Hl,toggle:zl,toggler:Wl,has:ql},Jl=Dl.resolve("resizer-bar"),Yl=Dl.resolve("resizer-rows"),Kl=Dl.resolve("resizer-cols"),Xl=function(e){var t=ar.descendants(e.parent(),"."+Jl);ee(t,Co.remove)},Ql=function(e,t,n){var r=e.origin();ee(t,function(t,o){t.each(function(t){var o=n(r,t);Vl.add(o,Jl),vo.append(e.parent(),o)})})},$l=function(e,t,n,r){Ql(e,t,function(e,t){var o=Cl.col(t.col(),t.x()-e.left(),n.top()-e.top(),7,r);return Vl.add(o,Kl),o})},Zl=function(e,t,n,r){Ql(e,t,function(e,t){var o=Cl.row(t.row(),n.left()-e.left(),t.y()-e.top(),r,7);return Vl.add(o,Yl),o})},eu=function(e,t,n,r,o,i){var a=Vc.absolute(t),c=n.length>0?o.positions(n,t):[];Zl(e,c,a,nc.getOuter(t));var s=r.length>0?i.positions(r,t):[];$l(e,s,a,Xa.getOuter(t))},tu=function(e,t,n,r){Xl(e);var o=Lr.fromTable(t),i=Wr.generate(o),a=_l.rows(i),c=_l.columns(i);eu(e,t,a,c,n,r)},nu=function(e,t){var n=ar.descendants(e.parent(),"."+Jl);ee(n,t)},ru=function(e){nu(e,function(e){lo.set(e,"display","none")})},ou=function(e){nu(e,function(e){lo.set(e,"display","block")})},iu=function(e){return Vl.has(e,Yl)},au=function(e){return Vl.has(e,Kl)},cu={refresh:tu,hide:ru,show:ou,destroy:Xl,isRowBar:iu,isColBar:au},su=function(e,t){return ul.toGrid(e,t,!1)},lu=function(e,t){var n=function(e){return Ys(e,function(e){return wn.parent(e.element()).map(function(e){var t=wn.parent(e).isNone();return Ge.elementnew(e,t)})}).getOrThunk(function(){return Ge.elementnew(t.row(),!0)})};return Z(e,function(e){var t=n(e.details());return Ge.rowdatanew(t.element(),e.details(),e.section(),t.isNew())})},uu=function(e,t){var n=ul.toDetails(e,Zt.eq);return lu(n,t)},du=function(e,t){var n=le(Z(e.all(),function(e){return e.cells()}));return ie(n,function(e){return Zt.eq(t,e.element())})},fu=function(e,t,n,r,o){return function(i,a,c,s,l){var u=Lr.fromTable(a),d=Wr.generate(u);return t(d,c).map(function(t){var n=su(d,s),r=e(n,t,Zt.eq,o(s)),i=uu(r.grid(),s);return{grid:T(i),cursor:r.cursor}}).fold(function(){return B.none()},function(e){var t=ml.render(a,e.grid());return n(a,e.grid(),l),r(a),cu.refresh(i,a,cs.height,l),B.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}},pu=function(e,t){return Ar.cell(t.element()).bind(function(t){return du(e,t)})},mu=function(e,t){return Ar.cell(t.element()).bind(function(n){return du(e,n).map(function(e){return Vs(e,{generators:t.generators,clipboard:t.clipboard})})})},hu=function(e,t){var n=Z(t.selection(),function(t){return Ar.cell(t).bind(function(t){return du(e,t)})}),r=Js(n);return r.length>0?B.some(Vs({cells:r},{generators:t.generators,clipboard:t.clipboard})):B.none()},gu=function(e,t){return t.mergable()},vu=function(e,t){return t.unmergable()},bu=function(e,t){var n=Z(t.selection(),function(t){return Ar.cell(t).bind(function(t){return du(e,t)})}),r=Js(n);return r.length>0?B.some(r):B.none()},yu={run:fu,toDetailList:uu,onCell:pu,onCells:bu,onPaste:mu,onPasteRows:hu,onMergable:gu,onUnmergable:vu},xu=function e(t){var n=function(e){return t===e},r=function(n){return e(t)},o=function(n){return e(t)},i=function(n){return e(n(t))},a=function(e){e(t)},c=function(e){return e(t)},s=function(e,n){return n(t)},l=function(e){return e(t)},u=function(e){return e(t)},d=function(){return B.some(t)};return{is:n,isValue:A,isError:U,getOr:T(t),getOrThunk:T(t),getOrDie:T(t),or:r,orThunk:o,fold:s,map:i,each:a,bind:c,exists:l,forall:u,toOption:d}},wu=function e(t){var n=function(e){return e()},r=function(){return O(String(t))()},o=function(e){return e},i=function(e){return e()},a=function(n){return e(t)},c=function(n){return e(t)};return{is:U,isValue:U,isError:A,getOr:I,getOrThunk:n,getOrDie:r,or:o,orThunk:i,fold:function(e,n){return e(t)},map:a,each:k,bind:c,exists:U,forall:A,toOption:B.none}},Eu={value:xu,error:wu},_u=function(e,t,n){if(e.row()>=t.length||e.column()>nl.cellLength(t[0]))return Eu.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var r=t.slice(e.row()),o=r[0].cells().slice(e.column()),i=nl.cellLength(n[0]),a=n.length;return Eu.value({rowDelta:T(r.length-a),colDelta:T(o.length-i)})},Su=function(e,t){var n=nl.cellLength(e[0]),r=nl.cellLength(t[0]);return{rowDelta:T(0),colDelta:T(n-r)}},ku=function(e,t){return Z(e,function(){return Ge.elementnew(t.cell(),!0)})},Cu=function(e,t,n){return e.concat(yl.repeat(t,function(t){return nl.setCells(e[e.length-1],ku(e[e.length-1].cells(),n))}))},Tu=function(e,t,n){return Z(e,function(e){return nl.setCells(e,e.cells().concat(ku(yl.range(0,t),n)))})},Iu=function(e,t,n){var r=t.colDelta()<0?Tu:I;return(t.rowDelta()<0?Cu:I)(r(e,Math.abs(t.colDelta()),n),Math.abs(t.rowDelta()),n)},Du={measure:_u,measureWidth:Su,tailor:Iu},Ru=function(e,t,n,r){if(0===e.length)return e;for(var o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)nl.mutateCell(e[o],i,Ge.elementnew(r(),!1));return e},Ou=function(e,t,n,r){for(var o=!0,i=0;i<e.length;i++)for(var a=0;a<nl.cellLength(e[0]);a++){var c=nl.getCellElement(e[i],a),s=n(c,t);!0===s&&!1===o?nl.mutateCell(e[i],a,Ge.elementnew(r(),!0)):!0===s&&(o=!1)}return e},Nu=function(e,t){return oe(e,function(e,n){return Q(e,function(e){return t(e.element(),n.element())})?e:e.concat([n])},[])},Uu=function(e,t,n,r){if(t>0&&t<e.length){var o=e[t-1].cells(),i=Nu(o,n);ee(i,function(o){for(var i=B.none(),a=t;a<e.length;a++)for(var c=0;c<nl.cellLength(e[0]);c++){var s=e[a].cells()[c],l=n(s.element(),o.element());l&&(i.isNone()&&(i=B.some(r())),i.each(function(t){nl.mutateCell(e[a],c,Ge.elementnew(t,!0))}))}})}return e},Au={merge:Ru,unmerge:Ou,splitRows:Uu},Pu=function(e,t,n,r){var o=nl.getCell(e[t],n),i=D(r,o.element()),a=e[t];return e.length>1&&nl.cellLength(a)>1&&(n>0&&i(nl.getCellElement(a,n-1))||n<a.length-1&&i(nl.getCellElement(a,n+1))||t>0&&i(nl.getCellElement(e[t-1],n))||t<e.length-1&&i(nl.getCellElement(e[t+1],n)))},Mu=function(e,t,n,r,o){for(var i=e.row(),a=e.column(),c=n.length,s=nl.cellLength(n[0]),l=i+c,u=a+s,d=i;d<l;d++)for(var f=a;f<u;f++){Pu(t,d,f,o)&&Au.unmerge(t,nl.getCellElement(t[d],f),o,r.cell);var p=nl.getCellElement(n[d-i],f-a),m=r.replace(p);nl.mutateCell(t[d],f,Ge.elementnew(m,!0))}return t},Lu=function(e,t,n,r,o){return Du.measure(e,t,n).map(function(i){var a=Du.tailor(t,i,r);return Mu(e,a,n,r,o)})},ju=function(e,t,n,r,o){Au.splitRows(t,e,o,r.cell);var i=Du.measureWidth(n,t),a=Du.tailor(n,i,r),c=Du.measureWidth(t,a),s=Du.tailor(t,c,r);return s.slice(0,e).concat(a).concat(s.slice(e,s.length))},Fu={merge:Lu,insert:ju},Gu=function(e,t,n,r,o){var i=e.slice(0,t),a=e.slice(t),c=nl.mapCells(e[n],function(n,i){return t>0&&t<e.length&&r(nl.getCellElement(e[t-1],i),nl.getCellElement(e[t],i))?nl.getCell(e[t],i):Ge.elementnew(o(n.element(),r),!0)});return i.concat([c]).concat(a)},Bu=function(e,t,n,r,o){return Z(e,function(e){var i=t>0&&t<nl.cellLength(e)&&r(nl.getCellElement(e,t-1),nl.getCellElement(e,t)),a=i?nl.getCell(e,t):Ge.elementnew(o(nl.getCellElement(e,n),r),!0);return nl.addCell(e,t,a)})},Hu=function(e,t,n,r,o){var i=n+1;return Z(e,function(e,a){var c=a===t,s=c?Ge.elementnew(o(nl.getCellElement(e,n),r),!0):nl.getCell(e,n);return nl.addCell(e,i,s)})},zu=function(e,t,n,r,o){var i=t+1,a=e.slice(0,i),c=e.slice(i),s=nl.mapCells(e[t],function(e,t){return t===n?Ge.elementnew(o(e.element(),r),!0):e});return a.concat([s]).concat(c)},Wu=function(e,t,n){var r=Z(e,function(e){var r=e.cells().slice(0,t).concat(e.cells().slice(n+1));return Ge.rowcells(r,e.section())});return ne(r,function(e){return e.cells().length>0})},qu=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))},Vu={insertRowAt:Gu,insertColumnAt:Bu,splitCellIntoColumns:Hu,splitCellIntoRows:zu,deleteRowsAt:qu,deleteColumnsAt:Wu},Ju=function(e,t,n,r){var o=function(e){return Q(t,function(t){return n(e.element(),t.element())})};return Z(e,function(e){return nl.mapCells(e,function(e){return o(e)?Ge.elementnew(r(e.element(),n),!0):e})})},Yu=function(e,t,n,r){return void 0!==nl.getCellElement(e[t],n)&&t>0&&r(nl.getCellElement(e[t-1],n),nl.getCellElement(e[t],n))},Ku=function(e,t,n){return t>0&&n(nl.getCellElement(e,t-1),nl.getCellElement(e,t))},Xu=function(e,t,n,r){var o=ue(e,function(r,o){return Yu(e,o,t,n)||Ku(r,t,n)?[]:[nl.getCell(r,t)]});return Ju(e,o,n,r)},Qu=function(e,t,n,r){var o=e[t],i=ue(o.cells(),function(r,i){return Yu(e,t,i,n)||Ku(o,i,n)?[]:[r]});return Ju(e,i,n,r)},$u={replaceColumn:Xu,replaceRow:Qu},Zu=function(){return od(function(e,t,n,r,o){return e()})},ed=function(e){return od(function(t,n,r,o,i){return n(e)})},td=function(e,t){return od(function(n,r,o,i,a){return o(e,t)})},nd=function(e,t,n){return od(function(r,o,i,a,c){return a(e,t,n)})},rd=function(e,t){return od(function(n,r,o,i,a){return a(e,t)})},od=function(e){return{fold:e}},id={none:Zu,only:ed,left:td,middle:nd,right:rd},ad=function(e,t){return 0===e.length?id.none():1===e.length?id.only(0):0===t?id.left(0,1):t===e.length-1?id.right(t-1,t):t>0&&t<e.length-1?id.middle(t-1,t,t+1):id.none()},cd=function(e,t,n,r){var o=e.slice(0),i=ad(e,t),a=function(e){return Z(e,T(0))},c=T(a(o)),s=function(e){return r.singleColumnWidth(o[e],n)},l=function(e,t){if(n>=0){var i=Math.max(r.minCellWidth(),o[t]-n);return a(o.slice(0,e)).concat([n,i-o[t]]).concat(a(o.slice(t+1)))}var c=Math.max(r.minCellWidth(),o[e]+n),s=o[e]-c;return a(o.slice(0,e)).concat([c-o[e],s]).concat(a(o.slice(t+1)))},u=l,d=function(e,t,n){return l(t,n)},f=function(e,t){if(n>=0)return a(o.slice(0,t)).concat([n]);var i=Math.max(r.minCellWidth(),o[t]+n);return a(o.slice(0,t)).concat([i-o[t]])};return i.fold(c,s,u,d,f)},sd={determine:cd},ld=function(e,t){return Wn.has(e,t)&&parseInt(Wn.get(e,t),10)>1},ud=function(e){return ld(e,"colspan")},dd=function(e){return ld(e,"rowspan")},fd=function(e,t){return parseInt(lo.get(e,t),10)},pd={hasColspan:ud,hasRowspan:dd,minWidth:T(10),minHeight:T(10),getInt:fd},md=function(e,t,n){return lo.getRaw(e,t).fold(function(){return n(e)+"px"},function(e){return e})},hd=function(e){return md(e,"width",Uc.getPixelWidth)},gd=function(e){return md(e,"height",Uc.getHeight)},vd=function(e,t,n,r,o){var i=_l.columns(e),a=Z(i,function(e){return e.map(t.edge)});return Z(i,function(e,t){return e.filter(R(pd.hasColspan)).fold(function(){var e=yl.deduce(a,t);return r(e)},function(e){return n(e,o)})})},bd=function(e){return e.map(function(e){return e+"px"}).getOr("")},yd=function(e,t){return vd(e,t,hd,bd)},xd=function(e,t,n){return vd(e,t,Uc.getPercentageWidth,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)},wd=function(e,t,n){return vd(e,t,Uc.getPixelWidth,function(e){return e.getOrThunk(n.minCellWidth)},n)},Ed=function(e,t,n,r){var o=_l.rows(e),i=Z(o,function(e){return e.map(t.edge)});return Z(o,function(e,t){return e.filter(R(pd.hasRowspan)).fold(function(){var e=yl.deduce(i,t);return r(e)},function(e){return n(e)})})},_d=function(e,t){return Ed(e,t,Uc.getHeight,function(e){return e.getOrThunk(pd.minHeight)})},Sd=function(e,t){return Ed(e,t,gd,bd)},kd={getRawWidths:yd,getPixelWidths:wd,getPercentageWidths:xd,getPixelHeights:_d,getRawHeights:Sd},Cd=function(e,t,n){for(var r=0,o=e;o<t;o++)r+=void 0!==n[o]?n[o]:0;return r},Td=function(e,t){var n=Wr.justCells(e);return Z(n,function(e){var n=Cd(e.column(),e.column()+e.colspan(),t);return{element:e.element,width:T(n),colspan:e.colspan}})},Id=function(e,t){var n=Wr.justCells(e);return Z(n,function(e){var n=Cd(e.row(),e.row()+e.rowspan(),t);return{element:e.element,height:T(n),rowspan:e.rowspan}})},Dd=function(e,t){return Z(e.all(),function(e,n){return{element:e.element,height:T(t[n])}})},Rd={recalculateWidth:Td,recalculateHeight:Id,matchRowHeight:Dd},Od=function(e,t){var n=parseFloat(e),r=nc.get(t),o=function(e){return e/r*100},i=function(e,t){return[100-e]},a=function(){return pd.minWidth()/r*100},c=function(e,t,r){var o=n+r;Uc.setPercentageWidth(e,o)};return{width:T(n),pixelWidth:T(r),getWidths:kd.getPercentageWidths,getCellDelta:o,singleColumnWidth:i,minCellWidth:a,setElementWidth:Uc.setPercentageWidth,setTableWidth:c}},Nd=function(e){var t=parseInt(e,10),n=I,r=function(e,t){return[Math.max(pd.minWidth(),e+t)-e]},o=function(e,t,n){var r=re(t,function(e,t){return e+t},0);Uc.setPixelWidth(e,r)};return{width:T(t),pixelWidth:T(t),getWidths:kd.getPixelWidths,getCellDelta:n,singleColumnWidth:r,minCellWidth:pd.minWidth,setElementWidth:Uc.setPixelWidth,setTableWidth:o}},Ud=function(e,t){if(Uc.percentageBasedSizeRegex().test(t)){var n=Uc.percentageBasedSizeRegex().exec(t);return Od(n[1],e)}if(Uc.pixelBasedSizeRegex().test(t)){var r=Uc.pixelBasedSizeRegex().exec(t);return Nd(r[1])}var o=nc.get(e);return Nd(o)},Ad=function(e){return Uc.getRawWidth(e).fold(function(){var t=nc.get(e);return Nd(t)},function(t){return Ud(e,t)})},Pd={getTableSize:Ad},Md=function(e){return Wr.generate(e)},Ld=function(e){return re(e,function(e,t){return e+t},0)},jd=function(e){var t=Lr.fromTable(e);return Md(t)},Fd=function(e,t,n,r){var o=Pd.getTableSize(e),i=o.getCellDelta(t),a=jd(e),c=o.getWidths(a,r,o),s=sd.determine(c,n,i,o),l=Z(s,function(e,t){return e+c[t]}),u=Rd.recalculateWidth(a,l);ee(u,function(e){o.setElementWidth(e.element(),e.width())}),n===a.grid().columns()-1&&o.setTableWidth(e,l,i)},Gd=function(e,t,n,r){var o=jd(e),i=kd.getPixelHeights(o,r),a=Z(i,function(e,r){return n===r?Math.max(t+e,pd.minHeight()):e}),c=Rd.recalculateHeight(o,a),s=Rd.matchRowHeight(o,a);ee(s,function(e){Uc.setHeight(e.element(),e.height())}),ee(c,function(e){Uc.setHeight(e.element(),e.height())});var l=Ld(a);Uc.setHeight(e,l)},Bd=function(e,t,n){var r=Pd.getTableSize(e),o=Md(t),i=r.getWidths(o,n,r),a=Rd.recalculateWidth(o,i);ee(a,function(e){r.setElementWidth(e.element(),e.width())});var c=re(i,function(e,t){return t+e},0);a.length>0&&r.setElementWidth(e,c)},Hd={adjustWidth:Fd,adjustHeight:Gd,adjustWidthTo:Bd},zd=function(e){0===Ar.cells(e).length&&Co.remove(e)},Wd=ye("grid","cursor"),qd=function(e,t,n){return Vd(e,t,n).orThunk(function(){return Vd(e,0,0)})},Vd=function(e,t,n){return B.from(e[t]).bind(function(e){return B.from(e.cells()[n]).bind(function(e){return B.from(e.element())})})},Jd=function(e,t,n){return Wd(e,Vd(e,t,n))},Yd=function(e){return oe(e,function(e,t){return Q(e,function(e){return e.row()===t.row()})?e:e.concat([t])},[]).sort(function(e,t){return e.row()-t.row()})},Kd=function(e){return oe(e,function(e,t){return Q(e,function(e){return e.column()===t.column()})?e:e.concat([t])},[]).sort(function(e,t){return e.column()-t.column()})},Xd=function(e,t,n,r){var o=t.row(),i=t.row(),a=Vu.insertRowAt(e,i,o,n,r.getOrInit);return Jd(a,i,t.column())},Qd=function(e,t,n,r){var o=t[0].row(),i=t[0].row(),a=Yd(t),c=oe(a,function(e,t){return Vu.insertRowAt(e,i,o,n,r.getOrInit)},e);return Jd(c,i,t[0].column())},$d=function(e,t,n,r){var o=t.row(),i=t.row()+t.rowspan(),a=Vu.insertRowAt(e,i,o,n,r.getOrInit);return Jd(a,i,t.column())},Zd=function(e,t,n,r){var o=Yd(t),i=o[o.length-1].row(),a=o[o.length-1].row()+o[o.length-1].rowspan(),c=oe(o,function(e,t){return Vu.insertRowAt(e,a,i,n,r.getOrInit)},e);return Jd(c,a,t[0].column())},ef=function(e,t,n,r){var o=t.column(),i=t.column(),a=Vu.insertColumnAt(e,i,o,n,r.getOrInit);return Jd(a,t.row(),i)},tf=function(e,t,n,r){var o=Kd(t),i=o[0].column(),a=o[0].column(),c=oe(o,function(e,t){return Vu.insertColumnAt(e,a,i,n,r.getOrInit)},e);return Jd(c,t[0].row(),a)},nf=function(e,t,n,r){var o=t.column(),i=t.column()+t.colspan(),a=Vu.insertColumnAt(e,i,o,n,r.getOrInit);return Jd(a,t.row(),i)},rf=function(e,t,n,r){var o=t[t.length-1].column(),i=t[t.length-1].column()+t[t.length-1].colspan(),a=Kd(t),c=oe(a,function(e,t){return Vu.insertColumnAt(e,i,o,n,r.getOrInit)},e);return Jd(c,t[0].row(),i)},of=function(e,t,n,r){var o=$u.replaceRow(e,t.row(),n,r.replaceOrInit);return Jd(o,t.row(),t.column())},af=function(e,t,n,r){var o=$u.replaceColumn(e,t.column(),n,r.replaceOrInit);return Jd(o,t.row(),t.column())},cf=function(e,t,n,r){var o=$u.replaceRow(e,t.row(),n,r.replaceOrInit);return Jd(o,t.row(),t.column())},sf=function(e,t,n,r){var o=$u.replaceColumn(e,t.column(),n,r.replaceOrInit);return Jd(o,t.row(),t.column())},lf=function(e,t,n,r){var o=Vu.splitCellIntoColumns(e,t.row(),t.column(),n,r.getOrInit);return Jd(o,t.row(),t.column())},uf=function(e,t,n,r){var o=Vu.splitCellIntoRows(e,t.row(),t.column(),n,r.getOrInit);return Jd(o,t.row(),t.column())},df=function(e,t,n,r){var o=Kd(t),i=Vu.deleteColumnsAt(e,o[0].column(),o[o.length-1].column()),a=qd(i,t[0].row(),t[0].column());return Wd(i,a)},ff=function(e,t,n,r){var o=Yd(t),i=Vu.deleteRowsAt(e,o[0].row(),o[o.length-1].row()),a=qd(i,t[0].row(),t[0].column());return Wd(i,a)},pf=function(e,t,n,r){var o=t.cells();zs.merge(o);var i=Au.merge(e,t.bounds(),n,T(o[0]));return Wd(i,B.from(o[0]))},mf=function(e,t,n,r){var o=re(t,function(e,t){return Au.unmerge(e,t,n,r.combine(t))},e);return Wd(o,B.from(t[0]))},hf=function(e,t,n,r){var o=function(e,t){var n=Lr.fromTable(e),r=Wr.generate(n);return ul.toGrid(r,t,!0)}(t.clipboard(),t.generators()),i=Ge.address(t.row(),t.column());return Fu.merge(i,e,o,t.generators(),n).fold(function(){return Wd(e,B.some(t.element()))},function(e){var n=qd(e,t.row(),t.column());return Wd(e,n)})},gf=function(e,t,n){var r=Lr.fromPastedRows(e,n),o=Wr.generate(r);return ul.toGrid(o,t,!0)},vf=function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[0].row(),a=gf(t.clipboard(),t.generators(),o),c=Fu.insert(i,e,a,t.generators(),n),s=qd(c,t.cells[0].row(),t.cells[0].column());return Wd(c,s)},bf=function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),a=gf(t.clipboard(),t.generators(),o),c=Fu.insert(i,e,a,t.generators(),n),s=qd(c,t.cells[0].row(),t.cells[0].column());return Wd(c,s)},yf=Hd.adjustWidthTo,xf={insertRowBefore:yu.run(Xd,yu.onCell,k,k,ws.modification),insertRowsBefore:yu.run(Qd,yu.onCells,k,k,ws.modification),insertRowAfter:yu.run($d,yu.onCell,k,k,ws.modification),insertRowsAfter:yu.run(Zd,yu.onCells,k,k,ws.modification),insertColumnBefore:yu.run(ef,yu.onCell,yf,k,ws.modification),insertColumnsBefore:yu.run(tf,yu.onCells,yf,k,ws.modification),insertColumnAfter:yu.run(nf,yu.onCell,yf,k,ws.modification),insertColumnsAfter:yu.run(rf,yu.onCells,yf,k,ws.modification),splitCellIntoColumns:yu.run(lf,yu.onCell,yf,k,ws.modification),splitCellIntoRows:yu.run(uf,yu.onCell,k,k,ws.modification),eraseColumns:yu.run(df,yu.onCells,yf,zd,ws.modification),eraseRows:yu.run(ff,yu.onCells,k,zd,ws.modification),makeColumnHeader:yu.run(af,yu.onCell,k,k,ws.transform("row","th")),unmakeColumnHeader:yu.run(sf,yu.onCell,k,k,ws.transform(null,"td")),makeRowHeader:yu.run(of,yu.onCell,k,k,ws.transform("col","th")),unmakeRowHeader:yu.run(cf,yu.onCell,k,k,ws.transform(null,"td")),mergeCells:yu.run(pf,yu.onMergable,k,k,ws.merging),unmergeCells:yu.run(mf,yu.onUnmergable,yf,k,ws.merging),pasteCells:yu.run(hf,yu.onPaste,yf,k,ws.modification),pasteRowsBefore:yu.run(vf,yu.onPasteRows,k,k,ws.modification),pasteRowsAfter:yu.run(bf,yu.onPasteRows,k,k,ws.modification)},wf=function(e){return Ve.fromDom(e.getBody())},Ef=function(e){return e.getBoundingClientRect().width},_f=function(e){return e.getBoundingClientRect().height},Sf=function(e){return function(t){return Zt.eq(t,wf(e))}},kf=function(e){return e?e.replace(/px$/,""):""},Cf=function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},Tf=function(e){var t=ar.descendants(e,"td[data-mce-style],th[data-mce-style]");Wn.remove(e,"data-mce-style"),ee(t,function(e){Wn.remove(e,"data-mce-style")})},If=function(e,t){return function(n){return"rtl"===Df(n)?t:e}},Df=function(e){return"rtl"===lo.get(e,"direction")?"rtl":"ltr"},Rf={onDirection:If,getDirection:Df},Of={isRtl:T(!1)},Nf={isRtl:T(!0)},Uf=function(e){return"rtl"===Rf.getDirection(e)?Nf:Of},Af={directionAt:Uf},Pf=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],Mf={"border-collapse":"collapse",width:"100%"},Lf={border:"1"},jf=function(e){return e.getParam("table_default_attributes",Lf,"object")},Ff=function(e){return e.getParam("table_default_styles",Mf,"object")},Gf=function(e){return e.getParam("table_resize_bars",!0,"boolean")},Bf=function(e){return e.getParam("table_tab_navigation",!0,"boolean")},Hf=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},zf=function(e){return e.getParam("table_row_advtab",!0,"boolean")},Wf=function(e){return e.getParam("table_advtab",!0,"boolean")},qf=function(e){return e.getParam("table_appearance_options",!0,"boolean")},Vf=function(e){return e.getParam("table_grid",!0,"boolean")},Jf=function(e){return e.getParam("table_style_by_css",!1,"boolean")},Yf=function(e){return e.getParam("table_cell_class_list",[],"array")},Kf=function(e){return e.getParam("table_row_class_list",[],"array")},Xf=function(e){return e.getParam("table_class_list",[],"array")},Qf=function(e){return e.getParam("color_picker_callback")},$f=function(e){return!1===e.getParam("table_responsive_width")},Zf=function(e){var t=e.getParam("table_clone_elements");return W(t)?B.some(t.split(/[ ,]/)):Array.isArray(t)?B.some(t):B.none()},ep=function(e){var t=e.getParam("object_resizing",!0);return"table"===t||t},tp=function(e){var t=e.getParam("table_toolbar",Pf);return""===t||!1===t?[]:W(t)?t.split(/[ ,]/):q(t)?t:[]},np=function(e,t){return e.fire("newrow",{node:t})},rp=function(e,t){return e.fire("newcell",{node:t})},op=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},ip=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},ap=function(e,t){var n=function(e){return"table"===Un.name(wf(e))},r=function(t){var r=us.getGridSize(t);return!1===n(e)||r.rows()>1},o=function(t){var r=us.getGridSize(t);return!1===n(e)||r.columns()>1},a=Zf(e),c=function(t,n,r,o){return function(c,s){Tf(c);var l=o(),u=Ve.fromDom(e.getDoc()),d=i(Af.directionAt),f=ui.cellOperations(r,u,a);return n(c)?t(l,c,s,f,d).bind(function(t){return ee(t.newRows(),function(t){np(e,t.dom())}),ee(t.newCells(),function(t){rp(e,t.dom())}),t.cursor().map(function(t){var n=e.dom.createRng();return n.setStart(t.dom(),0),n.setEnd(t.dom(),0),n})}):B.none()}};return{deleteRow:c(xf.eraseRows,r,k,t),deleteColumn:c(xf.eraseColumns,o,k,t),insertRowsBefore:c(xf.insertRowsBefore,A,k,t),insertRowsAfter:c(xf.insertRowsAfter,A,k,t),insertColumnsBefore:c(xf.insertColumnsBefore,A,Pc.halve,t),insertColumnsAfter:c(xf.insertColumnsAfter,A,Pc.halve,t),mergeCells:c(xf.mergeCells,A,k,t),unmergeCells:c(xf.unmergeCells,A,k,t),pasteRowsBefore:c(xf.pasteRowsBefore,A,k,t),pasteRowsAfter:c(xf.pasteRowsAfter,A,k,t),pasteCells:c(xf.pasteCells,A,k,t)}},cp=function(e,t,n){var r=Lr.fromTable(e),o=Wr.generate(r);return yu.onCells(o,t).map(function(e){var t=ul.toGrid(o,n,!1),r=t.slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan()),i=yu.toDetailList(r,n);return ml.copy(i)})},sp={copyRows:cp},lp=tinymce.util.Tools.resolve("tinymce.util.Tools"),up=function(e,t,n){var r,o=e.select("td,th",t);return r=function(t,r){for(var o=0;o<r.length;o++){var i=e.getStyle(r[o],n);if(void 0===t&&(t=i),t!==i)return""}return t}(r,o)},dp=function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},fp=function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},pp=function(e,t){lp.each("left center right".split(" "),function(n){e.formatter.remove("align"+n,{},t)})},mp=function(e,t){lp.each("top middle bottom".split(" "),function(n){e.formatter.remove("valign"+n,{},t)})},hp={applyAlign:dp,applyVAlign:fp,unApplyAlign:pp,unApplyVAlign:mp,getTDTHOverallStyle:up},gp=function(e,t,n){return function e(n,r){return r=r||[],lp.each(n,function(n){var o={text:n.text||n.title};n.menu?o.menu=e(n.menu):(o.value=n.value,t&&t(o)),r.push(o)}),r}(e,n||[])},vp=function(e,t){c(t)?yp(e,t):bp(e,t)},bp=function(e,t){var n=e.dom,r=t.control.rootControl,o=r.toJSON(),i=n.parseStyle(o.style);i["border-style"]=o.borderStyle,i["border-color"]=o.borderColor,i["background-color"]=o.backgroundColor,i.width=o.width?Cf(o.width):"",i.height=o.height?Cf(o.height):"",r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(i))))},yp=function(e,t){var n=e.dom,r=t.control.rootControl,o=r.toJSON(),i=n.parseStyle(o.style);r.find("#borderStyle").value(i["border-style"]||""),r.find("#borderColor").value(i["border-color"]||""),r.find("#backgroundColor").value(i["background-color"]||""),r.find("#width").value(i.width||""),r.find("#height").value(i.height||"")},xp=function(e,t){var n=e.parseStyle(e.getAttrib(t,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=e.serializeStyle(n),r},wp=function(e){var t=function(){var t=Qf(e);if(t)return function(n){return t.call(e,function(e){n.control.value(e).fire("change")},n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:D(bp,e)},items:[{label:"Style",name:"style",type:"textbox",onchange:D(yp,e)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:D(bp,e),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:t()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:t()}]}]}},Ep={createStyleForm:wp,buildListItems:gp,updateStyleField:bp,extractAdvancedStyles:xp,updateAdvancedFields:yp,syncAdvancedStyleFields:vp},_p=function(e,t){delete e.dataset.mceStyle,e.style.cssText+=";"+t},Sp=function(e,t){var n=e.dom,r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),type:t.nodeName.toLowerCase(),style:"",align:"",valign:""};return lp.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)}),lp.each("top middle bottom".split(" "),function(n){e.formatter.matchNode(t,"valign"+n)&&(r.valign=n)}),Hf(e)&&lp.extend(r,Ep.extractAdvancedStyles(n,t)),r},kp=function(e,t,n){function r(e,n,r){(1===t.length||r)&&a.setAttrib(e,n,r)}function o(e,n,r){(1===t.length||r)&&a.setStyle(e,n,r)}var i,a=e.dom;Hf(e)&&Ep.syncAdvancedStyleFields(e,n),i=n.control.rootControl.toJSON(),e.undoManager.transact(function(){lp.each(t,function(n){r(n,"scope",i.scope),1===t.length?r(n,"style",i.style):_p(n,i.style),r(n,"class",i.class),o(n,"width",Cf(i.width)),o(n,"height",Cf(i.height)),i.type&&n.nodeName.toLowerCase()!==i.type&&(n=a.rename(n,i.type)),1===t.length&&(hp.unApplyAlign(e,n),hp.unApplyVAlign(e,n)),i.align&&hp.applyAlign(e,n,i.align),i.valign&&hp.applyVAlign(e,n,i.valign)}),e.focus()})},Cp=function(e){var t,n,r,o=[];if(o=e.dom.select("td[data-mce-selected],th[data-mce-selected]"),t=e.dom.getParent(e.selection.getStart(),"td,th"),!o.length&&t&&o.push(t),t=t||o[0]){n=o.length>1?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:t.nodeName.toLowerCase()}:Sp(e,t),Yf(e).length>0&&(r={name:"class",type:"listbox",label:"Class",values:Ep.buildListItems(Yf(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"td",classes:[t.value]})})})});var i={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:D(Ep.updateStyleField,e)},{label:"Height",name:"height",onchange:D(Ep.updateStyleField,e)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};Hf(e)?e.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:i},Ep.createStyleForm(e)],onsubmit:D(kp,e,o)}):e.windowManager.open({title:"Cell properties",data:n,body:i,onsubmit:D(kp,e,o)})}},Tp={open:Cp},Ip=function(e,t){var n=e.dom,r={height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),align:"",style:"",type:t.parentNode.nodeName.toLowerCase()};return lp.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)}),zf(e)&&lp.extend(r,Ep.extractAdvancedStyles(n,t)),r},Dp=function(e,t,n){var r=e.getParent(t,"table"),o=t.parentNode,i=e.select(n,r)[0];i||(i=e.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?e.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),i.appendChild(t),o.hasChildNodes()||e.remove(o)},Rp=function(e){var t,n,r,o,i,a,c=e.dom,l=[];t=c.getParent(e.selection.getStart(),"table"),n=c.getParent(e.selection.getStart(),"td,th"),lp.each(t.rows,function(e){lp.each(e.cells,function(t){if(c.getAttrib(t,"data-mce-selected")||t===n)return l.push(e),!1})}),(r=l[0])&&(i=l.length>1?{height:"",scope:"",style:"",class:"",align:"",type:r.parentNode.nodeName.toLowerCase()}:Ip(e,r),Kf(e).length>0&&(o={name:"class",type:"listbox",label:"Class",values:Ep.buildListItems(Kf(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[t.value]})})})}),a={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},o]},zf(e)?e.windowManager.open({title:"Row properties",data:i,bodyType:"tabpanel",body:[{title:"General",type:"form",items:a},Ep.createStyleForm(e)],onsubmit:D(s,e,l,i)}):e.windowManager.open({title:"Row properties",data:i,body:a,onsubmit:D(s,e,l,i)}))},Op={open:Rp},Np=tinymce.util.Tools.resolve("tinymce.Env"),Up={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},Ap=function(){return Ve.fromTag("table")},Pp=function(){return Ve.fromTag("tbody")},Mp=function(){return Ve.fromTag("tr")},Lp=function(){return Ve.fromTag("th")},jp=function(){return Ve.fromTag("td")},Fp=function(e,t,n,r,o){void 0===o&&(o=Up);var i=Ap();lo.setAll(i,o.styles),Wn.setAll(i,o.attributes);var a=Pp();vo.append(i,a);for(var c=[],s=0;s<e;s++){for(var l=Mp(),u=0;u<t;u++){var d=s<n||u<r?Lp():jp();u<r&&Wn.set(d,"scope","row"),s<n&&Wn.set(d,"scope","col"),vo.append(d,Ve.fromTag("br")),o.percentages&&lo.set(d,"width",100/t+"%"),vo.append(l,d)}c.push(l)}return Eo.append(a,c),i},Gp=function(e){return e.dom().innerHTML},Bp=function(e,t){var n=wn.owner(e),r=n.dom(),o=Ve.fromDom(r.createDocumentFragment()),i=hi.fromHtml(t,r);Eo.append(o,i),Co.empty(e),vo.append(e,o)},Hp=function(e){var t=Ve.fromTag("div"),n=Ve.fromDom(e.dom().cloneNode(!0));return vo.append(t,n),Gp(t)},zp={get:Gp,set:Bp,getOuter:Hp},Wp=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)},qp=function(e,t){xr.descendant(t,"td,th").each(D(Wp,e))},Vp=function(e,t){ee(ar.descendants(t,"tr"),function(t){np(e,t.dom()),ee(ar.descendants(t,"th,td"),function(t){rp(e,t.dom())})})},Jp=function(e){return W(e)&&-1!==e.indexOf("%")},Yp=function(e,t,n){var r=Ff(e),o={styles:r,attributes:jf(e),percentages:Jp(r.width)&&!$f(e)},i=Fp(n,t,0,0,o);Wn.set(i,"data-mce-id","__mce");var a=zp.getOuter(i);return e.insertContent(a),xr.descendant(wf(e),'table[data-mce-id="__mce"]').map(function(t){return $f(e)&&lo.set(t,"width",lo.get(t,"width")),Wn.remove(t,"data-mce-id"),Vp(e,t),qp(e,t),t.dom()}).getOr(null)},Kp={insert:Yp},Xp=function(e,t){var n=e.dom,r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),cellspacing:n.getStyle(t,"border-spacing")||n.getAttrib(t,"cellspacing"),cellpadding:n.getAttrib(t,"data-mce-cell-padding")||n.getAttrib(t,"cellpadding")||hp.getTDTHOverallStyle(e.dom,t,"padding"),border:n.getAttrib(t,"data-mce-border")||n.getAttrib(t,"border")||hp.getTDTHOverallStyle(e.dom,t,"border"),borderColor:n.getAttrib(t,"data-mce-border-color"),caption:!!n.select("caption",t)[0],class:n.getAttrib(t,"class")};return lp.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)}),Wf(e)&&lp.extend(r,Ep.extractAdvancedStyles(n,t)),r},Qp=function(e,t,n){var r=e.dom,o={},i={};if(o.class=n.class,i.height=Cf(n.height),r.getAttrib(t,"width")&&!Jf(e)?o.width=kf(n.width):i.width=Cf(n.width),Jf(e)?(i["border-width"]=Cf(n.border),i["border-spacing"]=Cf(n.cellspacing),lp.extend(o,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):lp.extend(o,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),Jf(e)&&t.children)for(var a=0;a<t.children.length;a++)l(r,t.children[a],{"border-width":Cf(n.border),"border-color":n.borderColor,padding:Cf(n.cellpadding)});n.style?lp.extend(i,r.parseStyle(n.style)):i=lp.extend({},r.parseStyle(r.getAttrib(t,"style")),i),o.style=r.serializeStyle(i),r.setAttribs(t,o)},$p=function(e,t,n){var r,o,i=e.dom;Wf(e)&&Ep.syncAdvancedStyleFields(e,n),o=n.control.rootControl.toJSON(),!1===o.class&&delete o.class,e.undoManager.transact(function(){t||(t=Kp.insert(e,o.cols||1,o.rows||1)),Qp(e,t,o),r=i.select("caption",t)[0],r&&!o.caption&&i.remove(r),!r&&o.caption&&(r=i.create("caption"),r.innerHTML=Np.ie?" ":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),hp.unApplyAlign(e,t),o.align&&hp.applyAlign(e,t,o.align),e.focus(),e.addVisual()})},Zp=function(e,t){var n,r,o,i,a,c=e.dom,s={};!0===t?(n=c.getParent(e.selection.getStart(),"table"))&&(s=Xp(e,n)):(r={label:"Cols",name:"cols"},o={label:"Rows",name:"rows"}),Xf(e).length>0&&(s.class&&(s.class=s.class.replace(/\s*mce\-item\-table\s*/g,"")),i={name:"class",type:"listbox",label:"Class",values:Ep.buildListItems(Xf(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[t.value]})})})}),a={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:qf(e)?[r,o,{label:"Width",name:"width",onchange:D(Ep.updateStyleField,e)},{label:"Height",name:"height",onchange:D(Ep.updateStyleField,e)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,o,{label:"Width",name:"width",onchange:D(Ep.updateStyleField,e)},{label:"Height",name:"height",onchange:D(Ep.updateStyleField,e)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},i]},Wf(e)?e.windowManager.open({title:"Table properties",data:s,bodyType:"tabpanel",body:[{title:"General",type:"form",items:a},Ep.createStyleForm(e)],onsubmit:D($p,e,n)}):e.windowManager.open({title:"Table properties",data:s,body:a,onsubmit:D($p,e,n)})},em={open:Zp},tm=lp.each,nm=function(e,t,n,r,o){var i=Sf(e),a=function(){var t=Ve.fromDom(e.dom.getParent(e.selection.getStart(),"th,td"));Ar.table(t,i).filter(R(i)).each(function(t){var n=Ve.fromText("");vo.after(t,n),Co.remove(t);var r=e.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),e.selection.setRng(r)})},c=function(){return Ve.fromDom(e.dom.getParent(e.selection.getStart(),"th,td"))},s=function(e){return Ar.table(e,i)},l=function(e){return{width:Ef(e.dom()),height:Ef(e.dom())}},u=function(e,t,n){var r=l(n);t.width===r.width&&t.height===r.height||(op(e,n.dom(),t.width,t.height),ip(e,n.dom(),r.width,r.height))},d=function(t){var o=c();s(o).each(function(i){var a=Ga.forMenu(r,i,o),c=l(i);t(i,a).each(function(t){u(e,c,i),e.selection.setRng(t),e.focus(),n.clear(i),Tf(i)})})},f=function(t){var n=c();return s(n).bind(function(t){var o=Ve.fromDom(e.getDoc()),i=Ga.forMenu(r,t,n),a=ui.cellOperations(k,o,B.none());return sp.copyRows(t,i,a)})},p=function(t){o.get().each(function(o){var i=Z(o,function(e){return Go.deep(e)}),a=c();s(a).bind(function(o){var c=Ve.fromDom(e.getDoc()),s=ui.paste(c),l=Ga.pasteRows(r,o,a,i,s);t(o,l).each(function(t){e.selection.setRng(t),e.focus(),n.clear(o)})})})};tm({mceTableSplitCells:function(){d(t.unmergeCells)},mceTableMergeCells:function(){d(t.mergeCells)},mceTableInsertRowBefore:function(){d(t.insertRowsBefore)},mceTableInsertRowAfter:function(){d(t.insertRowsAfter)},mceTableInsertColBefore:function(){d(t.insertColumnsBefore)},mceTableInsertColAfter:function(){d(t.insertColumnsAfter)},mceTableDeleteCol:function(){d(t.deleteColumn)},mceTableDeleteRow:function(){d(t.deleteRow)},mceTableCutRow:function(e){o.set(f()),d(t.deleteRow)},mceTableCopyRow:function(e){o.set(f())},mceTablePasteRowBefore:function(e){p(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){p(t.pasteRowsAfter)},mceTableDelete:a},function(t,n){e.addCommand(n,t)}),tm({mceInsertTable:D(em.open,e),mceTableProps:D(em.open,e,!0),mceTableRowProps:D(Op.open,e),mceTableCellProps:D(Tp.open,e)},function(t,n){e.addCommand(n,function(e,n){t(n)})})},rm={registerCommands:nm},om=function(e){var t=B.from(e.dom().documentElement).map(Ve.fromDom).getOr(e);return{parent:T(t),view:T(e),origin:T(Gc(0,0))}},im=function(e,t){var n=D(Vc.absolute,t);return{parent:T(t),view:T(e),origin:n}},am=function(e,t){return{parent:T(t),view:T(e),origin:T(Gc(0,0))}},cm={only:om,detached:im,body:am},sm=function(e){return{registry:ve(e,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:ve(e,function(e){return e.trigger})}},lm={create:sm},um=hs(["compare","extract","mutate","sink"]),dm=hs(["element","start","stop","destroy"]),fm=hs(["forceDrop","drop","move","delayDrop"]),pm={mode:um,sink:dm,api:fm},mm=Tl("ephox-dragster"),hm={resolve:mm.resolve},gm=function(e,t,n,r,o,i,a){return{target:T(e),x:T(t),y:T(n),stop:r,prevent:o,kill:i,raw:T(a)}},vm=function(e,t){return function(n){if(e(n)){var r=Ve.fromDom(n.target),o=function(){n.stopPropagation()},i=function(){n.preventDefault()},a=C(i,o),c=gm(r,n.clientX,n.clientY,o,i,a,n);t(c)}}},bm=function(e,t,n,r,o){var i=vm(n,r);return e.dom().addEventListener(t,i,o),{unbind:D(wm,e,t,i,o)}},ym=function(e,t,n,r){return bm(e,t,n,r,!1)},xm=function(e,t,n,r){return bm(e,t,n,r,!0)},wm=function(e,t,n,r){e.dom().removeEventListener(t,n,r)},Em={bind:ym,capture:xm},_m=T(!0),Sm=function(e,t,n){return Em.bind(e,t,_m,n)},km=function(e,t,n){return Em.capture(e,t,_m,n)},Cm={bind:Sm,capture:km},Tm=function(e,t){return Gc(t.left()-e.left(),t.top()-e.top())},Im=function(e){return B.some(Gc(e.x(),e.y()))},Dm=function(e,t){e.mutate(t.left(),t.top())},Rm=function(e,t){var n=d(t),r=Cm.bind(n.element(),"mousedown",e.forceDrop),o=Cm.bind(n.element(),"mouseup",e.drop),i=Cm.bind(n.element(),"mousemove",e.move),a=Cm.bind(n.element(),"mouseout",e.delayDrop),c=function(){n.destroy(),o.unbind(),i.unbind(),a.unbind(),r.unbind()},s=function(e){vo.append(e,n.element())},l=function(){Co.remove(n.element())};return pm.sink({element:n.element,start:s,stop:l,destroy:c})},Om=pm.mode({compare:Tm,extract:Im,sink:Rm,mutate:Dm}),Nm=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];null!==n&&clearTimeout(n),n=setTimeout(function(){e.apply(null,r),n=null},t)}}},Um=function(e,t,n){var r=!1,o=lm.create({start:u([]),stop:u([])}),i=m(),a=function(){h.stop(),i.isOn()&&(i.off(),o.trigger.stop())},c=Nm(a,200),s=function(e){h.start(e),i.on(),o.trigger.start()},l=function(e,n){c.cancel(),i.onEvent(e,t)};i.events.move.bind(function(n){t.mutate(e,n.info())});var d=function(){r=!0},f=function(){r=!1},p=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);if(r)return e.apply(null,t)}},h=t.sink(pm.api({forceDrop:a,drop:p(a),move:p(l),delayDrop:p(c.throttle)}),n),g=function(){h.destroy()};return{element:h.element,go:s,on:d,off:f,destroy:g,events:o.registry}},Am={setup:Um},Pm=function(e,t){var n=void 0!==t?t:{},r=void 0!==n.mode?n.mode:Om;return Am.setup(e,r,t)},Mm={transform:Pm},Lm=function(e){return xr.first(e).isSome()},jm=function(e,t,n){return xr.ancestor(e,t,n).isSome()},Fm=function(e,t){return xr.sibling(e,t).isSome()},Gm=function(e,t){return xr.child(e,t).isSome()},Bm=function(e,t){return xr.descendant(e,t).isSome()},Hm=function(e,t,n){return xr.closest(e,t,n).isSome()},zm={any:Lm,ancestor:jm,sibling:Fm,child:Gm,descendant:Bm,closest:Hm},Wm=Dl.resolve("resizer-bar-dragging"),qm=function(){var e=Ve.fromTag("div");return lo.setAll(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),vo.append(Yn.body(),e),e},Vm=function(e,t){return e.inline?cm.body(wf(e),qm()):cm.only(Ve.fromDom(e.getDoc()))},Jm=function(e,t){e.inline&&Co.remove(t.parent())},Ym={get:Vm,remove:Jm},Km=function(e){var t,n,r=B.none(),o=B.none(),a=B.none(),c=/(\d+(\.\d+)?)%/,s=function(e){return"TABLE"===e.nodeName},l=function(t){return e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width")},u=function(){return o},d=function(){return a.getOr(cm.only(Ve.fromDom(e.getBody())))},f=function(){o.each(function(e){e.destroy()}),a.each(function(t){Ym.remove(e,t)})};return e.on("init",function(){var t=i(Af.directionAt),n=Ym.get(e);if(a=B.some(n),ep(e)&&Gf(e)){var c=b(n,t);c.on(),c.events.startDrag.bind(function(t){r=B.some(e.selection.getRng())}),c.events.beforeResize.bind(function(t){var n=t.table().dom();op(e,n,Ef(n),_f(n))}),c.events.afterResize.bind(function(t){var n=t.table(),o=n.dom();Tf(n),r.each(function(t){e.selection.setRng(t),e.focus()}),ip(e,o,Ef(o),_f(o)),e.undoManager.add()}),o=B.some(c)}}),e.on("ObjectResizeStart",function(e){var r=e.target;s(r)&&(t=e.width,n=l(r))}),e.on("ObjectResized",function(r){var o=r.target;if(s(o)){var i=o;if(c.test(n)){var a=parseFloat(c.exec(n)[1]),l=r.width*a/t;e.dom.setStyle(i,"width",l+"%")}else{var u=[];lp.each(i.rows,function(t){lp.each(t.cells,function(t){var n=e.dom.getStyle(t,"width",!0);u.push({cell:t,width:n})})}),lp.each(u,function(t){e.dom.setStyle(t.cell,"width",t.width),e.dom.setAttrib(t.cell,"width",null)})}}}),{lazyResize:u,lazyWire:d,destroy:f}},Xm=function(e){return eh(function(t,n,r,o){return t(e)})},Qm=function(e){return eh(function(t,n,r,o){return n(e)})},$m=function(e,t){return eh(function(n,r,o,i){return o(e,t)})},Zm=function(e){return eh(function(t,n,r,o){return o(e)})},eh=function(e){return{fold:e}},th={none:Xm,first:Qm,middle:$m,last:Zm},nh=function(e,t){return Ar.table(e,t).bind(function(t){var n=Ar.cells(t);return ae(n,function(t){return Zt.eq(e,t)}).map(function(e){return{index:T(e),all:T(n)}})})},rh=function(e,t){return nh(e,t).fold(function(){return th.none(e)},function(t){return t.index()+1<t.all().length?th.middle(e,t.all()[t.index()+1]):th.last(e)})},oh=function(e,t){return nh(e,t).fold(function(){return th.none()},function(t){return t.index()-1>=0?th.middle(e,t.all()[t.index()-1]):th.first(e)})},ih={next:rh,prev:oh},ah=Ta.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ch=function(e,t,n,r){return e.fold(t,n,r)},sh=function(e){return e.fold(I,I,I)},lh={before:ah.before,on:ah.on,after:ah.after,cata:ch,getStart:sh},uh=Ta.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),dh=ye("start","soffset","finish","foffset"),fh=function(e){return uh.exact(e.start(),e.soffset(),e.finish(),e.foffset())},ph=function(e){return e.match({domRange:function(e){return Ve.fromDom(e.startContainer)},relative:function(e,t){return lh.getStart(e)},exact:function(e,t,n,r){return e}})},mh=function(e){var t=ph(e);return wn.defaultView(t)},hh={domRange:uh.domRange,relative:uh.relative,exact:uh.exact,exactFromRange:fh,range:dh,getWin:mh},gh=function(e,t,n,r){var o=wn.owner(e),i=o.dom().createRange();return i.setStart(e.dom(),t),i.setEnd(n.dom(),r),i},vh=function(e,t,n,r){var o=gh(e,t,n,r);return Ve.fromDom(o.commonAncestorContainer)},bh=function(e,t,n,r){var o=gh(e,t,n,r),i=Zt.eq(e,n)&&t===r;return o.collapsed&&!i},yh={after:bh,commonAncestorContainer:vh},xh=function(e,t){var n=t||document,r=n.createDocumentFragment();return ee(e,function(e){r.appendChild(e.dom())}),Ve.fromDom(r)},wh={fromElements:xh},Eh=function(e,t){var n=e.document.createRange();return _h(n,t),n},_h=function(e,t){e.selectNodeContents(t.dom())},Sh=function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&t.compareBoundaryPoints(e.START_TO_END,e)>-1},kh=function(e){return e.document.createRange()},Ch=function(e,t){t.fold(function(t){e.setStartBefore(t.dom())},function(t,n){e.setStart(t.dom(),n)},function(t){e.setStartAfter(t.dom())})},Th=function(e,t){t.fold(function(t){e.setEndBefore(t.dom())},function(t,n){e.setEnd(t.dom(),n)},function(t){e.setEndAfter(t.dom())})},Ih=function(e,t){Oh(e),e.insertNode(t.dom())},Dh=function(e,t,n){var r=e.document.createRange();return Ch(r,t),Th(r,n),r},Rh=function(e,t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},Oh=function(e){e.deleteContents()},Nh=function(e){var t=e.cloneContents();return Ve.fromDom(t)},Uh=function(e){return{left:T(e.left),top:T(e.top),right:T(e.right),bottom:T(e.bottom),width:T(e.width),height:T(e.height)}},Ah=function(e){var t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?B.some(n).map(Uh):B.none()},Ph=function(e){var t=e.getBoundingClientRect();return t.width>0||t.height>0?B.some(t).map(Uh):B.none()},Mh=function(e){return e.toString()},Lh={create:kh,replaceWith:Ih,selectNodeContents:Eh,selectNodeContentsUsing:_h,relativeToNative:Dh,exactToNative:Rh,deleteContents:Oh,cloneFragment:Nh,getFirstRect:Ah,getBounds:Ph,isWithin:Sh,toString:Mh},jh=Ta.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Fh=function(e,t,n){return t(Ve.fromDom(n.startContainer),n.startOffset,Ve.fromDom(n.endContainer),n.endOffset)},Gh=function(e,t){return t.match({domRange:function(e){return{ltr:T(e),rtl:B.none}},relative:function(t,n){return{ltr:mt(function(){return Lh.relativeToNative(e,t,n)}),rtl:mt(function(){return B.some(Lh.relativeToNative(e,n,t))})}},exact:function(t,n,r,o){return{ltr:mt(function(){return Lh.exactToNative(e,t,n,r,o)}),rtl:mt(function(){return B.some(Lh.exactToNative(e,r,o,t,n))})}}})},Bh=function(e,t){var n=t.ltr();if(n.collapsed){return t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return jh.rtl(Ve.fromDom(e.endContainer),e.endOffset,Ve.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return Fh(0,jh.ltr,n)})}return Fh(0,jh.ltr,n)},Hh=function(e,t){var n=Gh(e,t);return Bh(0,n)},zh=function(e,t){return Hh(e,t).match({ltr:function(t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},rtl:function(t,n,r,o){var i=e.document.createRange();return i.setStart(r.dom(),o),i.setEnd(t.dom(),n),i}})},Wh={ltr:jh.ltr,rtl:jh.rtl,diagnose:Hh,asLtrRange:zh},qh=function(e,t,n,r,o){if(0===o)return 0;if(t===r)return o-1;for(var i=r,a=1;a<o;a++){var c=e(a),s=Math.abs(t-c.left);if(n<=c.bottom){if(n<c.top||s>i)return a-1;i=s}}return 0},Vh=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Jh={inRect:Vh,searchForPoint:qh},Yh=function(e,t,n,r,o){var i=function(n){var r=e.dom().createRange();return r.setStart(t.dom(),n),r.collapse(!0),r},a=function(e){return i(e).getBoundingClientRect()},c=qo.get(t).length,s=Jh.searchForPoint(a,n,r,o.right,c);return i(s)},Kh=function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getClientRects();return Ys(i,function(e){return Jh.inRect(e,n,r)?B.some(e):B.none()}).map(function(o){return Yh(e,t,n,r,o)})},Xh={locate:Kh},Qh=function(e,t,n,r){var o=e.dom().createRange(),i=wn.children(t);return Ys(i,function(t){return o.selectNode(t.dom()),Jh.inRect(o.getBoundingClientRect(),n,r)?$h(e,t,n,r):B.none()})},$h=function(e,t,n,r){return(Un.isText(t)?Xh.locate:Qh)(e,t,n,r)},Zh=function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),a=Math.max(i.left,Math.min(i.right,n)),c=Math.max(i.top,Math.min(i.bottom,r));return $h(e,t,a,c)},eg={locate:Zh},tg=function(e,t){return t-e.left<e.right-t},ng=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r},rg=function(e,t,n){var r=e.dom().createRange();r.selectNode(t.dom());var o=r.getBoundingClientRect(),i=tg(o,n);return(!0===i?ni.first:ni.last)(t).map(function(t){return ng(e,t,i)})},og=function(e,t,n){var r=t.dom().getBoundingClientRect(),o=tg(r,n);return B.some(ng(e,t,o))},ig=function(e,t,n){return(0===wn.children(t).length?og:rg)(e,t,n)},ag={search:ig},cg=function(e,t,n){return B.from(e.dom().caretPositionFromPoint(t,n)).bind(function(t){if(null===t.offsetNode)return B.none();var n=e.dom().createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),B.some(n)})},sg=function(e,t,n){return B.from(e.dom().caretRangeFromPoint(t,n))},lg=function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),a=Math.max(i.left,Math.min(i.right,n)),c=Math.max(i.top,Math.min(i.bottom,r));return eg.locate(e,t,a,c)},ug=function(e,t,n){return Ve.fromPoint(e,t,n).bind(function(r){var o=function(){return ag.search(e,r,t)};return 0===wn.children(r).length?o():lg(e,r,t,n).orThunk(o)})},dg=document.caretPositionFromPoint?cg:document.caretRangeFromPoint?sg:ug,fg=function(e,t,n){var r=Ve.fromDom(e.document);return dg(r,t,n).map(function(e){return hh.range(Ve.fromDom(e.startContainer),e.startOffset,Ve.fromDom(e.endContainer),e.endOffset)})},pg={fromPoint:fg},mg=function(e,t,n,r){var o=Lh.create(e),i=et.is(t,r)?[t]:[],a=i.concat(ar.descendants(t,r));return ne(a,function(e){return Lh.selectNodeContentsUsing(o,e),Lh.isWithin(n,o)})},hg=function(e,t,n){var r=Wh.asLtrRange(e,t),o=Ve.fromDom(r.commonAncestorContainer);return Un.isElement(o)?mg(e,o,r,n):[]},gg={find:hg},vg=function(e,t){var n=Un.name(e);return"input"===n?lh.after(e):X(["br","img"],n)?0===t?lh.before(e):lh.after(e):lh.on(e,t)},bg=function(e,t){var n=e.fold(lh.before,vg,lh.after),r=t.fold(lh.before,vg,lh.after);return hh.relative(n,r)},yg=function(e,t,n,r){var o=vg(e,t),i=vg(n,r);return hh.relative(o,i)},xg=function(e){return e.match({domRange:function(e){var t=Ve.fromDom(e.startContainer),n=Ve.fromDom(e.endContainer);return yg(t,e.startOffset,n,e.endOffset)},relative:bg,exact:yg})},wg={beforeSpecial:vg,preprocess:xg,preprocessRelative:bg,preprocessExact:yg},Eg=function(e,t){B.from(e.getSelection()).each(function(e){e.removeAllRanges(),e.addRange(t)})},_g=function(e,t,n,r,o){var i=Lh.exactToNative(e,t,n,r,o);Eg(e,i)},Sg=function(e,t,n){return gg.find(e,t,n)},kg=function(e,t,n,r,o,i){t.collapse(n.dom(),r),t.extend(o.dom(),i)},Cg=function(e,t){return Wh.diagnose(e,t).match({ltr:function(t,n,r,o){_g(e,t,n,r,o)},rtl:function(t,n,r,o){var i=e.getSelection();if(i.setBaseAndExtent)i.setBaseAndExtent(t.dom(),n,r.dom(),o);else if(i.extend)try{kg(0,i,t,n,r,o)}catch(i){_g(e,r,o,t,n)}else _g(e,r,o,t,n)}})},Tg=function(e,t,n,r,o){var i=wg.preprocessExact(t,n,r,o);Cg(e,i)},Ig=function(e,t,n){var r=wg.preprocessRelative(t,n);Cg(e,r)},Dg=function(e){var t=hh.getWin(e).dom(),n=function(e,n,r,o){return Lh.exactToNative(t,e,n,r,o)},r=wg.preprocess(e);return Wh.diagnose(t,r).match({ltr:n,rtl:n})},Rg=function(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return B.some(hh.range(Ve.fromDom(t.startContainer),t.startOffset,Ve.fromDom(n.endContainer),n.endOffset))}return B.none()},Og=function(e){var t=Ve.fromDom(e.anchorNode),n=Ve.fromDom(e.focusNode);return yh.after(t,e.anchorOffset,n,e.focusOffset)?B.some(hh.range(Ve.fromDom(e.anchorNode),e.anchorOffset,Ve.fromDom(e.focusNode),e.focusOffset)):Rg(e)},Ng=function(e,t){var n=Lh.selectNodeContents(e,t);Eg(e,n)},Ug=function(e,t){var n=Lh.selectNodeContents(e,t);return hh.range(Ve.fromDom(n.startContainer),n.startOffset,Ve.fromDom(n.endContainer),n.endOffset)},Ag=function(e){return B.from(e.getSelection()).filter(function(e){return e.rangeCount>0}).bind(Og)},Pg=function(e){return Ag(e).map(function(e){return hh.exact(e.start(),e.soffset(),e.finish(),e.foffset())})},Mg=function(e,t){var n=Wh.asLtrRange(e,t);return Lh.getFirstRect(n)},Lg=function(e,t){var n=Wh.asLtrRange(e,t);return Lh.getBounds(n)},jg=function(e,t,n){return pg.fromPoint(e,t,n)},Fg=function(e,t){var n=Wh.asLtrRange(e,t);return Lh.toString(n)},Gg=function(e){e.getSelection().removeAllRanges()},Bg=function(e,t){var n=Wh.asLtrRange(e,t);return Lh.cloneFragment(n)},Hg=function(e,t,n){var r=Wh.asLtrRange(e,t),o=wh.fromElements(n,e.document);Lh.replaceWith(r,o)},zg=function(e,t){var n=Wh.asLtrRange(e,t);Lh.deleteContents(n)},Wg=function(e,t,n,r){return Zt.eq(e,n)&&t===r},qg={setExact:Tg,getExact:Ag,get:Pg,setRelative:Ig,toNative:Dg,setToElement:Ng,clear:Gg,clone:Bg,replace:Hg,deleteAt:zg,forElement:Ug,getFirstRect:Mg,getBounds:Lg,getAtPoint:jg,findWithin:Sg,getAsString:Fg,isCollapsed:Wg},Vg=tinymce.util.Tools.resolve("tinymce.util.VK"),Jg=function(e,t,n,r){return Qg(e,t,ih.next(n),r)},Yg=function(e,t,n,r){return Qg(e,t,ih.prev(n),r)},Kg=function(e,t){var n=hh.exact(t,0,t,0);return qg.toNative(n)},Xg=function(e,t){var n=ar.descendants(t,"tr");return me(n).bind(function(e){return xr.descendant(e,"td,th").map(function(e){return Kg(0,e)})})},Qg=function(e,t,n,r,o){return n.fold(B.none,B.none,function(e,t){return ni.first(t).map(function(e){return Kg(0,e)})},function(n){return Ar.table(n,t).bind(function(t){var o=Ga.noMenu(n);return e.undoManager.transact(function(){r.insertRowsAfter(t,o)}),Xg(0,t)})})},$g=["table","li","dl"],Zg=function(e,t,n,r){if(e.keyCode===Vg.TAB){var o=wf(t),i=function(e){var t=Un.name(e);return Zt.eq(e,o)||X($g,t)},a=t.selection.getRng();if(a.collapsed){var c=Ve.fromDom(a.startContainer);Ar.cell(c,i).each(function(o){e.preventDefault(),(e.shiftKey?Yg:Jg)(t,i,o,n,r).each(function(e){t.selection.setRng(e)})})}}},ev={handle:Zg},tv=ye("selection","kill"),nv={response:tv},rv=function(e){return function(t){return t===e}},ov=rv(38),iv=rv(40),av=function(e){return e>=37&&e<=40},cv={ltr:{isBackward:rv(37),isForward:rv(39)},rtl:{isBackward:rv(39),isForward:rv(37)},isUp:ov,isDown:iv,isNavigation:av},sv=function(e,t){var n=Wh.asLtrRange(e,t);return{start:T(Ve.fromDom(n.startContainer)),soffset:T(n.startOffset),finish:T(Ve.fromDom(n.endContainer)),foffset:T(n.endOffset)}},lv=function(e,t,n,r){return{start:T(lh.on(e,t)),finish:T(lh.on(n,r))}},uv={convertToRange:sv,makeSitus:lv},dv=qt.detect().browser.isSafari(),fv=function(e){var t=void 0!==e?e.dom():document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return Gc(n,r)},pv=function(e,t,n){(void 0!==n?n.dom():document).defaultView.scrollTo(e,t)},mv=function(e,t,n){(void 0!==n?n.dom():document).defaultView.scrollBy(e,t)},hv=function(e,t){var n=Vc.absolute(t),r=Ve.fromDom(e.document);pv(n.left(),n.top(),r)},gv=function(e,t){var n=fv(e);t();var r=fv(e);n.top()===r.top()&&n.left()===r.left()||pv(n.left(),n.top(),e)},vv=function(e){var t=B.none(),n=function(){t=B.some(fv(e))},r=function(){t.each(function(t){pv(t.left(),t.top(),e)})};return n(),{save:n,restore:r}},bv=function(e,t){dv&&J(e.dom().scrollIntoViewIfNeeded)?e.dom().scrollIntoViewIfNeeded(!1):e.dom().scrollIntoView(t)},yv=function(e,t){var n=t.dom().getBoundingClientRect(),r=e.dom().getBoundingClientRect();r.top<n.top?bv(e,!0):r.bottom>n.bottom&&bv(e,!1)},xv=function(){var e=Ve.fromHtml('<div style="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;"></div>');vo.after(Yn.body(),e);var t=e.dom().offsetWidth-e.dom().clientWidth;return Co.remove(e),t},wv={get:fv,to:pv,by:mv,preserve:gv,capture:vv,intoView:bv,intoViewIfNeeded:yv,setToElement:hv,scrollBarWidth:xv},Ev=function(e,t,n,r,o,i,a){return Zt.eq(n,o)&&r===i?B.none():xr.closest(n,"td,th",t).bind(function(n){return xr.closest(o,"td,th",t).bind(function(r){return _v(e,t,n,r,a)})})},_v=function(e,t,n,r,o){return Zt.eq(n,r)?B.none():xa.identify(n,r,t).bind(function(t){var r=t.boxes().getOr([]);return r.length>0?(o(e,r,t.start(),t.finish()),B.some(nv.response(B.some(uv.makeSitus(n,0,n,$o.getEnd(n))),!0))):B.none()})},Sv=function(e,t,n,r,o){var i=function(e){return o.clear(n),o.selectRange(n,e.boxes(),e.start(),e.finish()),e.boxes()};return xa.shiftSelection(r,e,t,o.firstSelectedSelector(),o.lastSelectedSelector()).map(i)},kv={sync:Ev,detect:_v,update:Sv},Cv=Ce(["left","top","right","bottom"],[]),Tv=function(e,t){return Cv({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})},Iv=function(e,t){return Cv({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})},Dv=function(e,t){var n=e.bottom()-e.top();return Cv({left:e.left(),top:t-n,right:e.right(),bottom:t})},Rv=function(e,t){var n=e.bottom()-e.top();return Cv({left:e.left(),top:t,right:e.right(),bottom:t+n})},Ov=function(e,t,n){return Cv({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})},Nv=function(e){return e.top()},Uv=function(e){return e.bottom()},Av=function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"},Pv={nu:Cv,moveUp:Iv,moveDown:Tv,moveBottomTo:Dv,moveTopTo:Rv,getTop:Nv,getBottom:Uv,translate:Ov,toString:Av},Mv=function(e,t,n){return n>=0&&n<$o.getEnd(t)?e.getRangedRect(t,n,t,n+1):n>0?e.getRangedRect(t,n-1,t,n):B.none()},Lv=function(e){return Pv.nu({left:e.left,top:e.top,right:e.right,bottom:e.bottom})},jv=function(e,t){return B.some(e.getRect(t))},Fv=function(e,t,n){return Un.isElement(t)?jv(e,t).map(Lv):Un.isText(t)?Mv(e,t,n).map(Lv):B.none()},Gv=function(e,t){return Un.isElement(t)?jv(e,t).map(Lv):Un.isText(t)?e.getRangedRect(t,0,t,$o.getEnd(t)).map(Lv):B.none()},Bv={getBoxAt:Fv,getEntireBox:Gv},Hv=ye("item","mode"),zv=function(e,t,n,r){var o=void 0!==r?r:Wv;return e.property().parent(t).map(function(e){return Hv(e,o)})},Wv=function(e,t,n,r){var o=void 0!==r?r:qv;return n.sibling(e,t).map(function(e){return Hv(e,o)})},qv=function e(t,n,r,o){var i=void 0!==o?o:e,a=t.property().children(n);return r.first(a).map(function(e){return Hv(e,i)})},Vv=[{current:zv,next:Wv,fallback:B.none()},{current:Wv,next:qv,fallback:B.some(zv)},{current:qv,next:qv,fallback:B.some(Wv)}],Jv=function e(t,n,r,o,i){var i=void 0!==i?i:Vv;return ie(i,function(e){return e.current===r}).bind(function(r){return r.current(t,n,o,r.next).orThunk(function(){return r.fallback.bind(function(r){return e(t,n,r,o)})})})},Yv={backtrack:zv,sidestep:Wv,advance:qv,go:Jv},Kv=function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return e.length>0?B.some(e[e.length-1]):B.none()}}},Xv=function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return e.length>0?B.some(e[0]):B.none()}}},Qv={left:Kv,right:Xv},$v=function e(t,n,r,o,i,a){return Yv.go(t,n,o,i).bind(function(n){return a(n.item())?B.none():r(n.item())?B.some(n.item()):e(t,n.item(),r,n.mode(),i,a)})},Zv=function(e,t,n,r){return $v(e,t,n,Yv.sidestep,Qv.left(),r)},eb=function(e,t,n,r){return $v(e,t,n,Yv.sidestep,Qv.right(),r)},tb={left:Zv,right:eb},nb=function(e,t){return 0===e.property().children(t).length},rb=function(e,t,n){return ib(e,t,D(nb,e),n)},ob=function(e,t,n){return ab(e,t,D(nb,e),n)},ib=function(e,t,n,r){return tb.left(e,t,n,r)},ab=function(e,t,n,r){return tb.right(e,t,n,r)},cb=function(){return{left:Qv.left,right:Qv.right}},sb=function(e,t,n,r,o){return Yv.go(e,t,n,r,o)},lb={before:rb,after:ob,seekLeft:ib,seekRight:ab,walkers:cb,walk:sb,backtrack:Yv.backtrack,sidestep:Yv.sidestep,advance:Yv.advance},ub=r(),db=function(e,t,n){return lb.gather(ub,e,t,n)},fb=function(e,t){return lb.before(ub,e,t)},pb=function(e,t){return lb.after(ub,e,t)},mb=function(e,t,n){return lb.seekLeft(ub,e,t,n)},hb=function(e,t,n){return lb.seekRight(ub,e,t,n)},gb=function(){return lb.walkers()},vb=function(e,t,n,r){return lb.walk(ub,e,t,n,r)},bb={gather:db,before:fb,after:pb,seekLeft:mb,seekRight:hb,walkers:gb,walk:vb},yb=Ta.generate([{none:[]},{retry:["caret"]}]),xb=function(e,t){return e.left()<t.left()||Math.abs(t.right()-e.left())<1||e.left()>t.right()},wb=function(e,t,n){return pr.closest(t,Bs.isBlock).fold(T(!1),function(t){return Bv.getEntireBox(e,t).exists(function(e){return xb(n,e)})})},Eb=function(e,t,n,r,o){var i=Pv.moveDown(o,5);return Math.abs(n.bottom()-r.bottom())<1?yb.retry(i):n.top()>o.bottom()?yb.retry(i):n.top()===o.bottom()?yb.retry(Pv.moveDown(o,1)):wb(e,t,o)?yb.retry(Pv.translate(i,5,0)):yb.none()},_b=function(e,t,n,r,o){var i=Pv.moveUp(o,5);return Math.abs(n.top()-r.top())<1?yb.retry(i):n.bottom()<o.top()?yb.retry(i):n.bottom()===o.top()?yb.retry(Pv.moveUp(o,1)):wb(e,t,o)?yb.retry(Pv.translate(i,5,0)):yb.none()},Sb={point:Pv.getTop,adjuster:_b,move:Pv.moveUp,gather:bb.before},kb={point:Pv.getBottom,adjuster:Eb,move:Pv.moveDown,gather:bb.after},Cb=function(e,t,n){return e.elementFromPoint(t,n).filter(function(e){return"table"===Un.name(e)}).isSome()},Tb=function(e,t,n,r,o){return Ib(e,t,n,t.move(r,5),o)},Ib=function e(t,n,r,o,i){return 0===i?B.some(o):Cb(t,o.left(),n.point(o))?Tb(t,n,r,o,i-1):t.situsFromPoint(o.left(),n.point(o)).bind(function(a){return a.start().fold(B.none,function(a,c){return Bv.getEntireBox(t,a,c).bind(function(c){return n.adjuster(t,a,c,r,o).fold(B.none,function(o){return e(t,n,r,o,i-1)})}).orThunk(function(){return B.some(o)})},B.none)})},Db=function(e,t){return e.situsFromPoint(t.left(),t.bottom()+5)},Rb=function(e,t){return e.situsFromPoint(t.left(),t.top()-5)},Ob=function(e,t,n){return e.point(t)>n.getInnerHeight()?B.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?B.some(-e.point(t)):B.none()},Nb=function(e,t,n){var r=e.move(n,5),o=Ib(t,e,n,r,100).getOr(r);return Ob(e,o,t).fold(function(){return t.situsFromPoint(o.left(),e.point(o))},function(n){return t.scrollBy(0,n),t.situsFromPoint(o.left(),e.point(o)-n)})},Ub={tryUp:D(Nb,Sb),tryDown:D(Nb,kb),ieTryUp:Rb,ieTryDown:Db,getJumpSize:T(5)},Ab=Ta.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Pb=function(e,t,n){var r=e.getRect(t),o=e.getRect(n);return o.right>r.left&&o.left<r.right},Mb=function(e,t,n,r,o,i,a){return xr.closest(r,"td,th",a).bind(function(n){return xr.closest(t,"td,th",a).map(function(t){return Zt.eq(n,t)?Zt.eq(r,n)&&$o.getEnd(n)===o?i(t):Ab.none("in same cell"):Ji.sharedOne(Lb,[n,t]).fold(function(){return Pb(e,t,n)?Ab.success():i(t)},function(e){return i(t)})})}).getOr(Ab.none("default"))},Lb=function(e){return xr.closest(e,"tr")},jb=function(e,t,n,r,o){return e.fold(t,n,r,o)},Fb={verify:Mb,cata:jb,adt:Ab},Gb=ye("element","offset"),Bb=ye("element","deltaOffset"),Hb=ye("element","start","finish"),zb=ye("begin","end"),Wb=ye("element","text"),qb={point:Gb,delta:Bb,range:Hb,points:zb,text:Wb},Vb=ye("ancestor","descendants","element","index"),Jb=ye("parent","children","element","index"),Yb=function(e,t){return pr.closest(e,function(e){return wn.parent(e).exists(function(e){return Zt.eq(e,t)})})},Kb=function(e){return wn.parent(e).bind(function(t){var n=wn.children(t);return Xb(n,e).map(function(r){return Jb(t,n,e,r)})})},Xb=function(e,t){return ae(e,D(Zt.eq,t))},Qb=function(e,t){return wn.parent(e).bind(function(n){var r=ar.children(n,t);return Xb(r,e).map(function(t){return Jb(n,r,e,t)})})},$b=function(e,t,n){return xr.closest(e,t).bind(function(t){var r=ar.descendants(t,n);return Xb(r,e).map(function(n){return Vb(t,r,e,n)})})},Zb={childOf:Yb,indexOf:Xb,indexInParent:Kb,selectorsInParent:Qb,descendantsInAncestor:$b},ey=function(e){return"br"===Un.name(e)},ty=function e(t,n,r){return n(t,r).bind(function(t){return Un.isText(t)&&0===qo.get(t).trim().length?e(t,n,r):B.some(t)})},ny=function(e,t,n){return n.traverse(t).orThunk(function(){return ty(t,n.gather,e)}).map(n.relative)},ry=function(e,t){return wn.child(e,t).filter(ey).orThunk(function(){return wn.child(e,t-1).filter(ey)})},oy=function(e,t,n,r){return ry(t,n).bind(function(t){return r.traverse(t).fold(function(){return ty(t,r.gather,e).map(r.relative)},function(e){return Zb.indexInParent(e).map(function(e){return lh.on(e.parent(),e.index())})})})},iy=function(e,t,n,r){return(ey(t)?ny(e,t,r):oy(e,t,n,r)).map(function(e){return{start:T(e),finish:T(e)}})},ay=function(e){return Fb.cata(e,function(e){return B.none()},function(){return B.none()},function(e){return B.some(qb.point(e,0))},function(e){return B.some(qb.point(e,$o.getEnd(e)))})},cy={tryBr:iy,process:ay},sy=qt.detect(),ly=function(e,t,n){return e.getSelection().bind(function(r){return cy.tryBr(t,r.finish(),r.foffset(),n).fold(function(){return B.some(qb.point(r.finish(),r.foffset()))},function(o){var i=e.fromSitus(o),a=Fb.verify(e,r.finish(),r.foffset(),i.finish(),i.foffset(),n.failure,t);return cy.process(a)})})},uy=function e(t,n,r,o,i,a){return 0===a?B.none():py(t,n,r,o,i).bind(function(c){var s=t.fromSitus(c),l=Fb.verify(t,r,o,s.finish(),s.foffset(),i.failure,n);return Fb.cata(l,function(){return B.none()},function(){return B.some(c)},function(c){return Zt.eq(r,c)&&0===o?dy(t,r,o,Pv.moveUp,i):e(t,n,c,0,i,a-1)},function(c){return Zt.eq(r,c)&&o===$o.getEnd(c)?dy(t,r,o,Pv.moveDown,i):e(t,n,c,$o.getEnd(c),i,a-1)})})},dy=function(e,t,n,r,o){return Bv.getBoxAt(e,t,n).bind(function(t){return fy(e,o,r(t,Ub.getJumpSize()))})},fy=function(e,t,n){return sy.browser.isChrome()||sy.browser.isSafari()||sy.browser.isFirefox()||sy.browser.isEdge()?t.otherRetry(e,n):sy.browser.isIE()?t.ieRetry(e,n):B.none()},py=function(e,t,n,r,o){return Bv.getBoxAt(e,n,r).bind(function(t){return fy(e,o,t)})},my=function(e,t,n){return ly(e,t,n).bind(function(r){return uy(e,t,r.element(),r.offset(),n,20).map(e.fromSitus)})},hy={handle:my},gy=function(e){return pr.first(e).isSome()},vy=function(e,t,n){return pr.ancestor(e,t,n).isSome()},by=function(e,t,n){return pr.closest(e,t,n).isSome()},yy=function(e,t){return pr.sibling(e,t).isSome()},xy=function(e,t){return pr.child(e,t).isSome()},wy=function(e,t){return pr.descendant(e,t).isSome()},Ey={any:gy,ancestor:vy,closest:by,sibling:yy,child:xy,descendant:wy},_y=qt.detect(),Sy=function(e,t){return Ey.ancestor(e,function(e){return wn.parent(e).exists(function(e){return Zt.eq(e,t)})})},ky=function(e,t,n,r,o){return xr.closest(r,"td,th",t).bind(function(r){return xr.closest(r,"table",t).bind(function(i){return Sy(o,i)?hy.handle(e,t,n).bind(function(e){return xr.closest(e.finish(),"td,th",t).map(function(t){return{start:T(r),finish:T(t),range:T(e)}})}):B.none()})})},Cy=function(e,t,n,r,o,i){return _y.browser.isIE()?B.none():i(r,t).orThunk(function(){return ky(e,t,n,r,o).map(function(e){var t=e.range();return nv.response(B.some(uv.makeSitus(t.start(),t.soffset(),t.finish(),t.foffset())),!0)})})},Ty=function(e,t){return xr.closest(e,"tr",t).bind(function(e){return xr.closest(e,"table",t).bind(function(n){var r=ar.descendants(n,"tr");return Zt.eq(e,r[0])?bb.seekLeft(n,function(e){return ni.last(e).isSome()},t).map(function(e){var t=$o.getEnd(e);return nv.response(B.some(uv.makeSitus(e,t,e,t)),!0)}):B.none()})})},Iy=function(e,t){return xr.closest(e,"tr",t).bind(function(e){return xr.closest(e,"table",t).bind(function(n){var r=ar.descendants(n,"tr");return Zt.eq(e,r[r.length-1])?bb.seekRight(n,function(e){return ni.first(e).isSome()},t).map(function(e){return nv.response(B.some(uv.makeSitus(e,0,e,0)),!0)}):B.none()})})},Dy=function(e,t,n,r,o,i,a){return ky(e,n,r,o,i).bind(function(e){return kv.detect(t,n,e.start(),e.finish(),a)})},Ry={navigate:Cy,select:Dy,firstUpCheck:Ty,lastDownCheck:Iy},Oy=function(e,t){return xr.closest(e,"td,th",t)},Ny={down:{traverse:wn.nextSibling,gather:bb.after,relative:lh.before,otherRetry:Ub.tryDown,ieRetry:Ub.ieTryDown,failure:Fb.adt.failedDown},up:{traverse:wn.prevSibling,gather:bb.before,relative:lh.before,otherRetry:Ub.tryUp,ieRetry:Ub.ieTryUp,failure:Fb.adt.failedUp}},Uy=ye("rows","cols"),Ay=function(e,t,n,r){var o=y(e),i=x(o,t,n,r);return{mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},Py=function(e,t,n,r){var o=y(e),i=function(){return r.clear(t),B.none()};return{keydown:function(e,a,c,s,l,u){var d=e.raw().which,f=!0===e.raw().shiftKey;return xa.retrieve(t,r.selectedSelector()).fold(function(){return cv.isDown(d)&&f?D(Ry.select,o,t,n,Ny.down,s,a,r.selectRange):cv.isUp(d)&&f?D(Ry.select,o,t,n,Ny.up,s,a,r.selectRange):cv.isDown(d)?D(Ry.navigate,o,n,Ny.down,s,a,Ry.lastDownCheck):cv.isUp(d)?D(Ry.navigate,o,n,Ny.up,s,a,Ry.firstUpCheck):B.none},function(e){var n=function(n){return function(){return Ys(n,function(n){return kv.update(n.rows(),n.cols(),t,e,r)}).fold(function(){return xa.getEdges(t,r.firstSelectedSelector(),r.lastSelectedSelector()).map(function(e){var n=cv.isDown(d)||u.isForward(d)?lh.after:lh.before;return o.setRelativeSelection(lh.on(e.first(),0),n(e.table())),r.clear(t),nv.response(B.none(),!0)})},function(e){return B.some(nv.response(B.none(),!0))})}};return cv.isDown(d)&&f?n([Uy(1,0)]):cv.isUp(d)&&f?n([Uy(-1,0)]):u.isBackward(d)&&f?n([Uy(0,-1),Uy(-1,0)]):u.isForward(d)&&f?n([Uy(0,1),Uy(1,0)]):cv.isNavigation(d)&&!1===f?i:B.none})()},keyup:function(e,o,i,a,c){return xa.retrieve(t,r.selectedSelector()).fold(function(){var s=e.raw().which;return 0==(!0===e.raw().shiftKey)?B.none():cv.isNavigation(s)?kv.sync(t,n,o,i,a,c,r.selectRange):B.none()},B.none)}}},My={mouse:Ay,keyboard:Py},Ly=function(e,t){ee(t,function(t){Vl.add(e,t)})},jy=function(e,t){ee(t,function(t){Vl.remove(e,t)})},Fy=function(e,t){ee(t,function(t){Vl.toggle(e,t)})},Gy=function(e,t){return de(t,function(t){return Vl.has(e,t)})},By=function(e,t){return Q(t,function(t){return Vl.has(e,t)})},Hy=function(e){for(var t=e.dom().classList,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t.item(r);return n},zy=function(e){return Fl.supports(e)?Hy(e):Fl.get(e)},Wy={add:Ly,remove:jy,toggle:Fy,hasAll:Gy,hasAny:By,get:zy},qy=function(e){return function(t){Vl.add(t,e)}},Vy=function(e){return function(t){Vl.remove(t,e)}},Jy=function(e){return function(t){Wy.remove(t,e)}},Yy=function(e){return function(t){return Vl.has(t,e)}},Ky={addClass:qy,removeClass:Vy,removeClasses:Jy,hasClass:Yy},Xy=function(e){var t=Ky.addClass(e.selected()),n=Ky.removeClasses([e.selected(),e.lastSelected(),e.firstSelected()]),r=function(t){var r=ar.descendants(t,e.selectedSelector());ee(r,n)};return{clear:r,selectRange:function(n,o,i,a){r(n),ee(o,t),Vl.add(i,e.firstSelected()),Vl.add(a,e.lastSelected())},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},Qy=function(e){var t=function(t){Wn.remove(t,e.selected()),Wn.remove(t,e.firstSelected()),Wn.remove(t,e.lastSelected())},n=function(t){Wn.set(t,e.selected(),"1")},r=function(n){var r=ar.descendants(n,e.selectedSelector());ee(r,t)};return{clear:r,selectRange:function(t,o,i,a){r(t),ee(o,n),Wn.set(i,e.firstSelected(),"1"),Wn.set(a,e.lastSelected(),"1")},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},$y={byClass:Xy,byAttr:Qy},Zy=function(e){return!1===Vl.has(Ve.fromDom(e.target),"ephox-snooker-resizer-bar")},ex=function(e){return{get:function(){var t=wf(e);return _a.retrieve(t,ka.selectedSelector()).fold(function(){return void 0===e.selection.getStart()?Ra.none():Ra.single(e.selection)},function(e){return Ra.multiple(e)})}}},tx=lp.each,nx=function(e){function t(t){return function(){e.execCommand(t)}}var n=[];tx("inserttable tableprops deletetable | cell row column".split(" "),function(t){"|"===t?n.push({text:"-"}):n.push(e.menuItems[t])}),e.addButton("table",{type:"menubutton",title:"Table",menu:n}),e.addButton("tableprops",{title:"Table properties",onclick:t("mceTableProps"),icon:"table"}),e.addButton("tabledelete",{title:"Delete table",onclick:t("mceTableDelete")}),e.addButton("tablecellprops",{title:"Cell properties",onclick:t("mceTableCellProps")}),e.addButton("tablemergecells",{title:"Merge cells",onclick:t("mceTableMergeCells")}),e.addButton("tablesplitcells",{title:"Split cell",onclick:t("mceTableSplitCells")}),e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:t("mceTableInsertRowBefore")}),e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:t("mceTableInsertRowAfter")}),e.addButton("tabledeleterow",{title:"Delete row",onclick:t("mceTableDeleteRow")}),e.addButton("tablerowprops",{title:"Row properties",onclick:t("mceTableRowProps")}),e.addButton("tablecutrow",{title:"Cut row",onclick:t("mceTableCutRow")}),e.addButton("tablecopyrow",{title:"Copy row",onclick:t("mceTableCopyRow")}),e.addButton("tablepasterowbefore",{title:"Paste row before",onclick:t("mceTablePasteRowBefore")}),e.addButton("tablepasterowafter",{title:"Paste row after",onclick:t("mceTablePasteRowAfter")}),e.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:t("mceTableInsertColBefore")}),e.addButton("tableinsertcolafter",{title:"Insert column after",onclick:t("mceTableInsertColAfter")}),e.addButton("tabledeletecol",{title:"Delete column",onclick:t("mceTableDeleteCol")})},rx=function(e){var t=function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)},n=tp(e);n.length>0&&e.addContextToolbar(t,n.join(" "))},ox={addButtons:nx,addToolbars:rx},ix=function(e,t){function n(t){return function(){e.execCommand(t)}}var r=B.none(),o=[],i=[],a=[],c=[],s=function(e){e.disabled(!0)},l=function(e){e.disabled(!1)},u=function(){var e=this;o.push(e),r.fold(function(){s(e)},function(t){l(e)})},d=function(){var e=this;i.push(e),r.fold(function(){s(e)},function(t){l(e)})},f=function(){var e=this;a.push(e),r.fold(function(){s(e)},function(t){e.disabled(t.mergable().isNone())})},p=function(){var e=this;c.push(e),r.fold(function(){s(e)},function(t){e.disabled(t.unmergable().isNone())})},m=function(){r.fold(function(){ee(o,s),ee(i,s),ee(a,s),ee(c,s)},function(e){ee(o,l),ee(i,l),ee(a,function(t){t.disabled(e.mergable().isNone())}),ee(c,function(t){t.disabled(e.unmergable().isNone())})})};e.on("init",function(){e.on("nodechange",function(n){var o=B.from(e.dom.getParent(e.selection.getStart(),"th,td"));r=o.bind(function(e){var n=Ve.fromDom(e);return Ar.table(n).map(function(e){return Ga.forMenu(t,e,n)})}),m()})});var h=function(e,t,n,r){var o,i,a,c,s,l=r.getEl().getElementsByTagName("table")[0],u=r.isRtl()||"tl-tr"===r.parent().rel;for(l.nextSibling.innerHTML=t+1+" x "+(n+1),u&&(t=9-t),i=0;i<10;i++)for(o=0;o<10;o++)c=l.rows[i].childNodes[o].firstChild,s=(u?o>=t:o<=t)&&i<=n,e.dom.toggleClass(c,"mce-active",s),s&&(a=c);return a.parentNode},g=!1===Vf(e)?{text:"Table",icon:"table",context:"table",onclick:n("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(t){t.aria&&(this.parent().hideAll(),t.stopImmediatePropagation(),e.execCommand("mceInsertTable"))},onshow:function(){h(e,0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");e.dom.removeClass(t,"mce-active"),e.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(t){var n,r,o=t.target;"A"===o.tagName.toUpperCase()&&(n=parseInt(o.getAttribute("data-mce-x"),10),r=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(h(e,n,r,t.control),this.lastX=n,this.lastY=r))},onclick:function(t){var n=this;"A"===t.target.tagName.toUpperCase()&&(t.preventDefault(),t.stopPropagation(),n.parent().cancel(),e.undoManager.transact(function(){Kp.insert(e,n.lastX+1,n.lastY+1)}),e.addVisual())}}]},v={text:"Table properties",context:"table",onPostRender:u,onclick:n("mceTableProps")},b={text:"Delete table",context:"table",onPostRender:u,cmd:"mceTableDelete"},y={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:n("mceTableInsertRowBefore"),onPostRender:d},{text:"Insert row after",onclick:n("mceTableInsertRowAfter"),onPostRender:d},{text:"Delete row",onclick:n("mceTableDeleteRow"),onPostRender:d},{text:"Row properties",onclick:n("mceTableRowProps"),onPostRender:d},{text:"-"},{text:"Cut row",onclick:n("mceTableCutRow"),onPostRender:d},{text:"Copy row",onclick:n("mceTableCopyRow"),onPostRender:d},{text:"Paste row before",onclick:n("mceTablePasteRowBefore"),onPostRender:d},{text:"Paste row after",onclick:n("mceTablePasteRowAfter"),onPostRender:d}]},x={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:n("mceTableInsertColBefore"),onPostRender:d},{text:"Insert column after",onclick:n("mceTableInsertColAfter"),onPostRender:d},{text:"Delete column",onclick:n("mceTableDeleteCol"),onPostRender:d}]},w={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:n("mceTableCellProps"),onPostRender:d},{text:"Merge cells",onclick:n("mceTableMergeCells"),onPostRender:f},{text:"Split cell",onclick:n("mceTableSplitCells"),onPostRender:p}]};e.addMenuItem("inserttable",g),e.addMenuItem("tableprops",v),e.addMenuItem("deletetable",b),e.addMenuItem("row",y),e.addMenuItem("column",x),e.addMenuItem("cell",w)},ax={addMenuItems:ix},cx=function(e){return e.get().fold(function(){},function(e){return Z(e,function(e){return e.dom()})})},sx=function(e,t){var n=Z(e,Ve.fromDom);t.set(B.from(n))},lx=function(e,t){return{insertTable:function(t,n){return Kp.insert(e,t,n)},setClipboardRows:function(e){return sx(e,t)},getClipboardRows:function(){return cx(t)}}};S.add("table",E)}()}()},function(e,exports,t){"use strict";t(656)},function(e,exports,t){"use strict";!function(){!function(){function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(e){return e.getParam("save_enablewhendirty",!0)},i=function(e){return!!e.getParam("save_onsavecallback")},a=function(e){return!!e.getParam("save_oncancelcallback")},c={enableWhenDirty:o,hasOnSaveCallback:i,hasOnCancelCallback:a},s=function(e,t){e.notificationManager.open({text:e.translate(t),type:"error"})},l=function(e){var t;if(t=n.DOM.getParent(e.id,"form"),!c.enableWhenDirty(e)||e.isDirty()){if(e.save(),c.hasOnSaveCallback(e))return e.execCallback("save_onsavecallback",e),void e.nodeChanged();t?(e.setDirty(!1),t.onsubmit&&!t.onsubmit()||("function"==typeof t.submit?t.submit():s(e,"Error: Form submit field collision.")),e.nodeChanged()):s(e,"Error: No form element found.")}},u=function(e){var t=r.trim(e.startContent);if(c.hasOnCancelCallback(e))return void e.execCallback("save_oncancelcallback",e);e.setContent(t),e.undoManager.clear(),e.nodeChanged()},d={save:l,cancel:u},f=function(e){e.addCommand("mceSave",function(){d.save(e)}),e.addCommand("mceCancel",function(){d.cancel(e)})},p={register:f},m=function(e){return function(t){var n=t.control;e.on("nodeChange dirty",function(){n.disabled(c.enableWhenDirty(e)&&!e.isDirty())})}},h=function(e){e.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:m(e)}),e.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:m(e)}),e.addShortcut("Meta+S","","mceSave")},g={register:h};t.add("save",function(e){g.register(e),p.register(e)})}()}()},function(e,exports,t){"use strict";t(658)},function(e,exports,t){"use strict";!function(){!function(){function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.VK"),r=function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets},o=function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar},i=function(e){return e.link_list},a=function(e){return"string"==typeof e.default_link_target},c=function(e){return e.default_link_target},s=function(e){return e.target_list},l=function(e,t){e.settings.target_list=t},u=function(e){return!1!==s(e)},d=function(e){return e.rel_list},f=function(e){return void 0!==d(e)},p=function(e){return e.link_class_list},m=function(e){return void 0!==p(e)},h=function(e){return!1!==e.link_title},g=function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target},v={assumeExternalTargets:r,hasContextToolbar:o,getLinkList:i,hasDefaultLinkTarget:a,getDefaultLinkTarget:c,getTargetList:s,setTargetList:l,shouldShowTargetList:u,getRelList:d,hasRelList:f,getLinkClassList:p,hasLinkClassList:m,shouldShowLinkTitle:h,allowUnsafeLinkTarget:g},b=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),y=tinymce.util.Tools.resolve("tinymce.Env"),x=function(e,t){document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)},w=function(e){if(!y.ie||y.ie>10){var t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),x(t,n)}else{var r=window.open("","_blank");if(r){r.opener=null;var o=r.document;o.open(),o.write('<meta http-equiv="refresh" content="0; url='+b.DOM.encode(e)+'">'),o.close()}}},E={open:w},_=tinymce.util.Tools.resolve("tinymce.util.Tools"),S=function(e,t){var n=["noopener"],r=e?e.split(/\s+/):[],o=function(e){return e.filter(function(e){return-1===_.inArray(n,e)})};return r=t?function(e){return e=o(e),e.length?e.concat(n):n}(r):o(r),r.length?function(e){return _.trim(e.sort().join(" "))}(r):null},k=function(e){return e.replace(/\uFEFF/g,"")},C=function(e,t){return t=t||e.selection.getNode(),O(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},T=function(e,t){var n=t?t.innerText||t.textContent:e.getContent({format:"text"});return k(n)},I=function(e){return e&&"A"===e.nodeName&&e.href},D=function(e){return _.grep(e,I).length>0},R=function(e){return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1===e.indexOf("href=")))},O=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},N=function(e,t){return function(n){e.undoManager.transact(function(){var r=e.selection.getNode(),o=C(e,r),i={href:n.href,target:n.target?n.target:null,rel:n.rel?n.rel:null,class:n.class?n.class:null,title:n.title?n.title:null};v.hasRelList(e.settings)||!1!==v.allowUnsafeLinkTarget(e.settings)||(i.rel=S(i.rel,"_blank"===i.target)),n.href===t.href&&(t.attach(),t={}),o?(e.focus(),n.hasOwnProperty("text")&&("innerText"in o?o.innerText=n.text:o.textContent=n.text),e.dom.setAttribs(o,i),e.selection.select(o),e.undoManager.add()):O(r)?P(e,r,i):n.hasOwnProperty("text")?e.insertContent(e.dom.createHTML("a",i,e.dom.encode(n.text))):e.execCommand("mceInsertLink",!1,i)})}},U=function(e){return function(){e.undoManager.transact(function(){var t=e.selection.getNode();O(t)?A(e,t):e.execCommand("unlink")})}},A=function(e,t){var n,r;(r=e.dom.select("img",t)[0])&&(n=e.dom.getParents(r,"a[href]",t)[0])&&(n.parentNode.insertBefore(r,n),e.dom.remove(n))},P=function(e,t,n){var r,o;(o=e.dom.select("img",t)[0])&&(r=e.dom.create("a",n),o.parentNode.insertBefore(r,o),r.appendChild(o))},M={link:N,unlink:U,isLink:I,hasLinks:D,isOnlyTextSelected:R,getAnchorElement:C,getAnchorText:T,toggleTargetRules:S},L=tinymce.util.Tools.resolve("tinymce.util.Delay"),j=tinymce.util.Tools.resolve("tinymce.util.XHR"),F={},G=function(e,t){var n=v.getLinkList(e.settings);"string"==typeof n?j.send({url:n,success:function(n){t(e,JSON.parse(n))}}):"function"==typeof n?n(function(n){t(e,n)}):t(e,n)},B=function(e,t,n){return function e(n,r){return r=r||[],_.each(n,function(n){var o={text:n.text||n.title};n.menu?o.menu=e(n.menu):(o.value=n.value,t&&t(o)),r.push(o)}),r}(e,n||[])},H=function(e,t,n){var r=e.selection.getRng();L.setEditorTimeout(e,function(){e.windowManager.confirm(t,function(t){e.selection.setRng(r),n(t)})})},z=function(e,t){var n,r,o,i,a,c,s,l,u,d,f,p={},m=e.selection,h=e.dom,g=function(e){var t=o.find("#text");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),o.find("#href").value(e.control.value())},b=function(){r||!i||p.text||this.parent().parent().find("#text")[0].value(this.value())},y=function(t){var n=t.meta||{};c&&c.value(e.convertURL(this.value(),"href")),_.each(t.meta,function(e,t){var n=o.find("#"+t);"text"===t?0===r.length&&(n.value(e),p.text=e):n.value(e)}),n.attach&&(F={href:this.value(),attach:n.attach}),n.text||b.call(this)},x=function(e){e.meta=o.toJSON()};i=M.isOnlyTextSelected(m.getContent()),n=M.getAnchorElement(e),p.text=r=M.getAnchorText(e.selection,n),p.href=n?h.getAttrib(n,"href"):"",n?p.target=h.getAttrib(n,"target"):v.hasDefaultLinkTarget(e.settings)&&(p.target=v.getDefaultLinkTarget(e.settings)),(f=h.getAttrib(n,"rel"))&&(p.rel=f),(f=h.getAttrib(n,"class"))&&(p.class=f),(f=h.getAttrib(n,"title"))&&(p.title=f),i&&(a={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){p.text=this.value()}}),t&&(c={type:"listbox",label:"Link list",values:B(t,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:g,value:e.convertURL(p.href,"href"),onPostRender:function(){c=this}}),v.shouldShowTargetList(e.settings)&&(void 0===v.getTargetList(e.settings)&&v.setTargetList(e,[{text:"None",value:""},{text:"New window",value:"_blank"}]),l={name:"target",type:"listbox",label:"Target",values:B(v.getTargetList(e.settings))}),v.hasRelList(e.settings)&&(s={name:"rel",type:"listbox",label:"Rel",values:B(v.getRelList(e.settings),function(t){!1===v.allowUnsafeLinkTarget(e.settings)&&(t.value=M.toggleTargetRules(t.value,"_blank"===p.target))})}),v.hasLinkClassList(e.settings)&&(u={name:"class",type:"listbox",label:"Class",values:B(v.getLinkClassList(e.settings),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})})}),v.shouldShowLinkTitle(e.settings)&&(d={name:"title",type:"textbox",label:"Title",value:p.title}),o=e.windowManager.open({title:"Insert link",data:p,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:y,onkeyup:b,onpaste:b,onbeforecall:x},a,d,function(t){var n=[];if(_.each(e.dom.select("a:not([href])"),function(e){var r=e.name||e.id;r&&n.push({text:r,value:"#"+r,selected:-1!==t.indexOf("#"+r)})}),n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:g}}(p.href),c,s,l,u],onSubmit:function(t){var n=v.assumeExternalTargets(e.settings),o=M.link(e,F),a=M.unlink(e),c=_.extend({},p,t.data),s=c.href;return s?(i&&c.text!==r||delete c.text,s.indexOf("@")>0&&-1===s.indexOf("//")&&-1===s.indexOf("mailto:")?void H(e,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(c.href="mailto:"+s),o(c)}):!0===n&&!/^\w+:/i.test(s)||!1===n&&/^\s*www[\.|\d\.]/i.test(s)?void H(e,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(c.href="http://"+s),o(c)}):void o(c)):void a()}})},W=function(e){G(e,z)},q={open:W},V=function(e,t){return e.dom.getParent(t,"a[href]")},J=function(e){return V(e,e.selection.getStart())},Y=function(e){var t=e.getAttribute("data-mce-href");return t||e.getAttribute("href")},K=function(e){var t=e.plugins.contextmenu;return!!t&&t.isContextMenuVisible()},X=function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey},Q=function(e,t){if(t){var n=Y(t);if(/^#/.test(n)){var r=e.$(n);r.length&&e.selection.scrollIntoView(r[0],!0)}else E.open(t.href)}},Z=function(e){return function(){q.open(e)}},ee=function(e){return function(){Q(e,J(e))}},te=function(e){return function(t){var n,r,o;return!!(v.hasContextToolbar(e.settings)&&!K(e)&&M.isLink(t)&&(n=e.selection,r=n.getRng(),o=r.startContainer,3===o.nodeType&&n.isCollapsed()&&r.startOffset>0&&r.startOffset<o.data.length))}},ne=function(e){e.on("click",function(t){var r=V(e,t.target);r&&n.metaKeyPressed(t)&&(t.preventDefault(),Q(e,r))}),e.on("keydown",function(t){var n=J(e);n&&13===t.keyCode&&X(t)&&(t.preventDefault(),Q(e,n))})},re=function(e){return function(){var t=this;e.on("nodechange",function(n){t.active(!e.readonly&&!!M.getAnchorElement(e,n.element))})}},oe=function(e){return function(){var t=this,n=function(e){M.hasLinks(e.parents)?t.show():t.hide()};M.hasLinks(e.dom.getParents(e.selection.getStart()))||t.hide(),e.on("nodechange",n),t.on("remove",function(){e.off("nodechange",n)})}},ie={openDialog:Z,gotoSelectedLink:ee,leftClickedOnAHref:te,setupGotoLinks:ne,toggleActiveState:re,toggleViewLinkState:oe},ae=function(e){e.addCommand("mceLink",ie.openDialog(e))},ce={register:ae},se=function(e){e.addShortcut("Meta+K","",ie.openDialog(e))},le={setup:se},ue=function(e){e.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:ie.openDialog(e),onpostrender:ie.toggleActiveState(e)}),e.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:M.unlink(e),onpostrender:ie.toggleActiveState(e)}),e.addContextToolbar&&e.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:ie.gotoSelectedLink(e)})},de=function(e){e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:ie.gotoSelectedLink(e),onPostRender:ie.toggleViewLinkState(e),prependToContext:!0}),e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:ie.openDialog(e),stateSelector:"a[href]",context:"insert",prependToContext:!0}),e.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:M.unlink(e),stateSelector:"a[href]"})},fe=function(e){e.addContextToolbar&&e.addContextToolbar(ie.leftClickedOnAHref(e),"openlink | link unlink")},pe={setupButtons:ue,setupMenuItems:de,setupContextToolbars:fe};t.add("link",function(e){pe.setupButtons(e),pe.setupMenuItems(e),pe.setupContextToolbars(e),ie.setupGotoLinks(e),ce.register(e),le.setup(e)})}()}()},function(e,exports,t){"use strict";t(660)},function(e,exports,t){"use strict";!function(){!function(){function e(){return new(C.getOrDie("FileReader"))}function t(){return new(C.getOrDie("XMLHttpRequest"))}function n(e){var n=function(n,r,o,i){var a,c;a=new t,a.open("POST",e.url),a.withCredentials=e.credentials,a.upload.onprogress=function(e){i(e.loaded/e.total*100)},a.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var t;return a.status<200||a.status>=300?void o("HTTP Error: "+a.status):(t=JSON.parse(a.responseText))&&"string"==typeof t.location?void r(Ke(e.basePath,t.location)):void o("Invalid JSON: "+a.responseText)},c=new FormData,c.append("file",n.blob(),n.filename()),a.send(c)},r=function(e,t){return new T(function(n,r){try{t(e,n,r,Ye)}catch(e){r(e.message)}})},o=function(e){return e===n},i=function(t){return!e.url&&o(e.handler)?T.reject("Upload url missing from the settings."):r(t,e.handler)};return e=I.extend({credentials:!1,handler:n},e),{upload:i}}function r(e){function t(t){var n,r,o=we(e);if(t&&(r={type:"listbox",label:"Image list",name:"image-list",values:F.buildListItems(t,function(t){t.value=e.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:o.src&&e.convertURL(o.src,"src"),onselect:function(e){var t=n.find("#alt");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),n.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){r=this}}),x.hasAdvTab(e)||x.hasUploadUrl(e)||x.hasUploadHandler(e)){var i=[He.makeTab(e,r)];x.hasAdvTab(e)&&i.push(Re.makeTab(e)),(x.hasUploadUrl(e)||x.hasUploadHandler(e))&&i.push($e.makeTab(e)),n=e.windowManager.open({title:"Insert/edit image",data:o,bodyType:"tabpanel",body:i,onSubmit:Ze(et,e)})}else n=e.windowManager.open({title:"Insert/edit image",data:o,body:He.getGeneralItems(e,r),onSubmit:Ze(et,e)});Le.syncSize(n)}function n(){F.createImageList(e,t)}return{open:n}}function o(){}var i=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=function(e){return!1!==e.settings.image_dimensions},c=function(e){return!0===e.settings.image_advtab},s=function(e){return e.getParam("image_prepend_url","")},l=function(e){return e.getParam("image_class_list")},u=function(e){return!1!==e.settings.image_description},d=function(e){return!0===e.settings.image_title},f=function(e){return!0===e.settings.image_caption},p=function(e){return e.getParam("image_list",!1)},m=function(e){return e.getParam("images_upload_url",!1)},h=function(e){return e.getParam("images_upload_handler",!1)},g=function(e){return e.getParam("images_upload_url")},v=function(e){return e.getParam("images_upload_handler")},b=function(e){return e.getParam("images_upload_base_path")},y=function(e){return e.getParam("images_upload_credentials")},x={hasDimensions:a,hasAdvTab:c,getPrependUrl:s,getClassList:l,hasDescription:u,hasImageTitle:d,hasImageCaption:f,getImageList:p,hasUploadUrl:m,hasUploadHandler:h,getUploadUrl:g,getUploadHandler:v,getUploadBasePath:b,getUploadCredentials:y},w="undefined"!=typeof window?window:Function("return this;")(),E=function(e,t){for(var n=void 0!==t&&null!==t?t:w,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},_=function(e,t){var n=e.split(".");return E(n,t)},S=function(e,t){return _(e,t)},k=function(e,t){var n=S(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},C={getOrDie:k},T=tinymce.util.Tools.resolve("tinymce.util.Promise"),I=tinymce.util.Tools.resolve("tinymce.util.Tools"),D=tinymce.util.Tools.resolve("tinymce.util.XHR"),R=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},O=function(e,t){function n(e,n){r.parentNode&&r.parentNode.removeChild(r),t({width:e,height:n})}var r=document.createElement("img");r.onload=function(){n(R(r.width,r.clientWidth),R(r.height,r.clientHeight))},r.onerror=function(){n(0,0)};var o=r.style;o.visibility="hidden",o.position="fixed",o.bottom=o.left="0px",o.width=o.height="auto",document.body.appendChild(r),r.src=e},N=function(e,t,n){function r(e,n){return n=n||[],I.each(e,function(e){var o={text:e.text||e.title};e.menu?o.menu=r(e.menu):(o.value=e.value,t(o)),n.push(o)}),n}return r(e,n||[])},U=function(e){return e&&(e=e.replace(/px$/,"")),e},A=function(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e},P=function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},M=function(e,t){var n=x.getImageList(e);"string"==typeof n?D.send({url:n,success:function(e){t(JSON.parse(e))}}):"function"==typeof n?n(t):t(n)},L=function(e,t,n){function r(){n.onload=n.onerror=null,e.selection&&(e.selection.select(n),e.nodeChanged())}n.onload=function(){t.width||t.height||!x.hasDimensions(e)||e.dom.setAttribs(n,{width:n.clientWidth,height:n.clientHeight}),r()},n.onerror=r},j=function(t){return new T(function(n,r){var o=new e;o.onload=function(){n(o.result)},o.onerror=function(){r(e.error.message)},o.readAsDataURL(t)})},F={getImageSize:O,buildListItems:N,removePixelSuffix:U,addPixelSuffix:A,mergeMargins:P,createImageList:M,waitLoadImage:L,blobToDataUri:j},G=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),B=Object.prototype.hasOwnProperty,H=function(e,t){return t},z=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<t.length;o++){var i=t[o];for(var a in i)B.call(i,a)&&(r[a]=e(r[a],i[a]))}return r}}(H),W=G.DOM,q=function(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?F.removePixelSuffix(e.style.marginLeft):""},V=function(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?F.removePixelSuffix(e.style.marginTop):""},J=function(e){return e.style.borderWidth?F.removePixelSuffix(e.style.borderWidth):""},Y=function(e,t){return e.hasAttribute(t)?e.getAttribute(t):""},K=function(e,t){return e.style[t]?e.style[t]:""},X=function(e){return null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName},Q=function(e,t,n){e.setAttribute(t,n)},Z=function(e){var t=W.create("figure",{class:"image"});W.insertAfter(t,e),t.appendChild(e),t.appendChild(W.create("figcaption",{contentEditable:!0},"Caption")),t.contentEditable="false"},ee=function(e){var t=e.parentNode;W.insertAfter(e,t),W.remove(t)},te=function(e){X(e)?ee(e):Z(e)},ne=function(e,t){var n=e.getAttribute("style"),r=t(null!==n?n:"");r.length>0?(e.setAttribute("style",r),e.setAttribute("data-mce-style",r)):e.removeAttribute("style")},re=function(e,t){return function(e,n,r){e.style[n]?(e.style[n]=F.addPixelSuffix(r),ne(e,t)):Q(e,n,r)}},oe=function(e,t){return e.style[t]?F.removePixelSuffix(e.style[t]):Y(e,t)},ie=function(e,t){var n=F.addPixelSuffix(t);e.style.marginLeft=n,e.style.marginRight=n},ae=function(e,t){var n=F.addPixelSuffix(t);e.style.marginTop=n,e.style.marginBottom=n},ce=function(e,t){var n=F.addPixelSuffix(t);e.style.borderWidth=n},se=function(e,t){e.style.borderStyle=t},le=function(e){return K(e,"borderStyle")},ue=function(e){return"FIGURE"===e.nodeName},de=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}},fe=function(e,t){var n=document.createElement("img");return Q(n,"style",t.style),(q(n)||""!==t.hspace)&&ie(n,t.hspace),(V(n)||""!==t.vspace)&&ae(n,t.vspace),(J(n)||""!==t.border)&&ce(n,t.border),(le(n)||""!==t.borderStyle)&&se(n,t.borderStyle),e(n.getAttribute("style"))},pe=function(e,t){var n=document.createElement("img");if(ve(e,z(t,{caption:!1}),n),Q(n,"alt",t.alt),t.caption){var r=W.create("figure",{class:"image"});return r.appendChild(n),r.appendChild(W.create("figcaption",{contentEditable:!0},"Caption")),r.contentEditable="false",r}return n},me=function(e,t){return{src:Y(t,"src"),alt:Y(t,"alt"),title:Y(t,"title"),width:oe(t,"width"),height:oe(t,"height"),class:Y(t,"class"),style:e(Y(t,"style")),caption:X(t),hspace:q(t),vspace:V(t),border:J(t),borderStyle:K(t,"borderStyle")}},he=function(e,t,n,r,o){n[r]!==t[r]&&o(e,r,n[r])},ge=function(e,t){return function(n,r,o){e(n,o),ne(n,t)}},ve=function(e,t,n){var r=me(e,n);he(n,r,t,"caption",function(e,t,n){return te(e)}),he(n,r,t,"src",Q),he(n,r,t,"alt",Q),he(n,r,t,"title",Q),he(n,r,t,"width",re(0,e)),he(n,r,t,"height",re(0,e)),he(n,r,t,"class",Q),he(n,r,t,"style",ge(function(e,t){return Q(e,"style",t)},e)),he(n,r,t,"hspace",ge(ie,e)),he(n,r,t,"vspace",ge(ae,e)),he(n,r,t,"border",ge(ce,e)),he(n,r,t,"borderStyle",ge(se,e))},be=function(e,t){var n=e.dom.styles.parse(t),r=F.mergeMargins(n),o=e.dom.styles.parse(e.dom.styles.serialize(r));return e.dom.styles.serialize(o)},ye=function(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))?null:t},xe=function(e,t){var n=e.dom,r=n.getParent(t.parentNode,function(t){return e.schema.getTextBlockElements()[t.nodeName]});return r?n.split(r,t):t},we=function(e){var t=ye(e);return t?me(function(t){return be(e,t)},t):de()},Ee=function(e,t){var n=pe(function(t){return be(e,t)},t);e.dom.setAttrib(n,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(n.outerHTML);var r=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(r,"data-mce-id",null),ue(r)){var o=xe(e,r);e.selection.select(o)}else e.selection.select(r)},_e=function(e,t){e.dom.setAttrib(t,"src",t.getAttribute("src"))},Se=function(e,t){if(t){var n=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(n),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}},ke=function(e,t){var n=ye(e);if(ve(function(t){return be(e,t)},t,n),_e(e,n),ue(n.parentNode)){var r=n.parentNode;xe(e,r),e.selection.select(n.parentNode)}else e.selection.select(n),F.waitLoadImage(e,t,n)},Ce=function(e,t){var n=ye(e);n?t.src?ke(e,t):Se(e,n):t.src&&Ee(e,t)},Te=function(e){return function(t){var n=e.dom,r=t.control.rootControl;if(x.hasAdvTab(e)){var o=r.toJSON(),i=n.parseStyle(o.style);r.find("#vspace").value(""),r.find("#hspace").value(""),i=F.mergeMargins(i),(i["margin-top"]&&i["margin-bottom"]||i["margin-right"]&&i["margin-left"])&&(i["margin-top"]===i["margin-bottom"]?r.find("#vspace").value(F.removePixelSuffix(i["margin-top"])):r.find("#vspace").value(""),i["margin-right"]===i["margin-left"]?r.find("#hspace").value(F.removePixelSuffix(i["margin-right"])):r.find("#hspace").value("")),i["border-width"]?r.find("#border").value(F.removePixelSuffix(i["border-width"])):r.find("#border").value(""),i["border-style"]?r.find("#borderStyle").value(i["border-style"]):r.find("#borderStyle").value(""),r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(i))))}}},Ie=function(e,t){t.find("#style").each(function(n){var r=fe(function(t){return be(e,t)},z(de(),t.toJSON()));n.value(r)})},De=function(e){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:Te(e)},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(t){Ie(e,t.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(t){Ie(e,t.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},Re={makeTab:De},Oe=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},Ne=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],o=e.find("#constrain")[0];n&&r&&o&&t(n,r,o.checked())},Ue=function(e,t,n){var r=e.state.get("oldVal"),o=t.state.get("oldVal"),i=e.value(),a=t.value();n&&r&&o&&i&&a&&(i!==r?(a=Math.round(i/r*a),isNaN(a)||t.value(a)):(i=Math.round(a/o*i),isNaN(i)||e.value(i))),Oe(e,t)},Ae=function(e){Ne(e,Oe)},Pe=function(e){Ne(e,Ue)},Me=function(){var e=function(e){Pe(e.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},Le={createUi:Me,syncSize:Ae,updateSize:Pe},je=function(e,t){var n,r,o,i=e.meta||{},a=e.control,c=a.rootControl,s=c.find("#image-list")[0];s&&s.value(t.convertURL(a.value(),"src")),I.each(i,function(e,t){c.find("#"+t).value(e)}),i.width||i.height||(n=t.convertURL(a.value(),"src"),r=x.getPrependUrl(t),o=new RegExp("^(?:[a-z]+:)?//","i"),r&&!o.test(n)&&n.substring(0,r.length)!==r&&(n=r+n),a.value(n),F.getImageSize(t.documentBaseURI.toAbsolute(a.value()),function(e){e.width&&e.height&&x.hasDimensions(t)&&(c.find("#width").value(e.width),c.find("#height").value(e.height),Le.syncSize(c))}))},Fe=function(e){e.meta=e.control.rootControl.toJSON()},Ge=function(e,t){var n=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(t){je(t,e)},onbeforecall:Fe},t];return x.hasDescription(e)&&n.push({name:"alt",type:"textbox",label:"Image description"}),x.hasImageTitle(e)&&n.push({name:"title",type:"textbox",label:"Image Title"}),x.hasDimensions(e)&&n.push(Le.createUi()),x.getClassList(e)&&n.push({name:"class",type:"listbox",label:"Class",values:F.buildListItems(x.getClassList(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"img",classes:[t.value]})})})}),x.hasImageCaption(e)&&n.push({name:"caption",type:"checkbox",label:"Caption"}),n},Be=function(e,t){return{title:"General",type:"form",items:Ge(e,t)}},He={makeTab:Be,getGeneralItems:Ge},ze=function(){return C.getOrDie("URL")},We=function(e){return ze().createObjectURL(e)},qe=function(e){ze().revokeObjectURL(e)},Ve={createObjectURL:We,revokeObjectURL:qe},Je=tinymce.util.Tools.resolve("tinymce.ui.Factory"),Ye=function(){},Ke=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},Xe=function(e){return function(t){var r=Je.get("Throbber"),o=t.control.rootControl,i=new r(o.getEl()),a=t.control.value(),c=Ve.createObjectURL(a),s=n({url:x.getUploadUrl(e),basePath:x.getUploadBasePath(e),credentials:x.getUploadCredentials(e),handler:x.getUploadHandler(e)}),l=function(){i.hide(),Ve.revokeObjectURL(c)};return i.show(),F.blobToDataUri(a).then(function(t){var n=e.editorUpload.blobCache.create({blob:a,blobUri:c,name:a.name?a.name.replace(/\.[^\.]+$/,""):null,base64:t.split(",")[1]});return s.upload(n).then(function(e){var t=o.find("#src");return t.value(e),o.find("tabpanel")[0].activateTab(0),t.fire("change"),l(),e})}).catch(function(t){e.windowManager.alert(t),l()})}},Qe=function(e){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:".jpg,.jpeg,.png,.gif",onchange:Xe(e)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:".jpg,.jpeg,.png,.gif",height:100,onchange:Xe(e)}]}},$e={makeTab:Qe},Ze=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var a=r.concat(o);return e.apply(null,a)}},et=function(e,t){var n=t.control.getRoot();Le.updateSize(n),e.undoManager.transact(function(){var t=z(we(e),n.toJSON());Ce(e,t)}),e.editorUpload.uploadImagesAuto()},tt=function(e){e.addCommand("mceImage",r(e).open)},nt={register:tt},rt=function(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)},ot=function(e){return function(t){for(var n,r=t.length,o=function(t){t.attr("contenteditable",e?"true":null)};r--;)n=t[r],rt(n)&&(n.attr("contenteditable",e?"false":null),I.each(n.getAll("figcaption"),o))}},it=function(e){e.on("preInit",function(){e.parser.addNodeFilter("figure",ot(!0)),e.serializer.addNodeFilter("figure",ot(!1))})},at={setup:it},ct=function(e){e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:r(e).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),e.addMenuItem("image",{icon:"image",text:"Image",onclick:r(e).open,context:"insert",prependToContext:!0})},st={register:ct};i.add("image",function(e){at.setup(e),st.register(e),nt.register(e)})}()}()},function(e,exports,t){"use strict";t(662)},function(e,exports,t){"use strict";(function(e){var t="function"==typeof Symbol&&"symbol"==typeof("function"==typeof Symbol?Symbol.iterator:"@@iterator")?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==("function"==typeof Symbol?Symbol.prototype:"@@prototype")?"symbol":typeof e};!function(){!function(){function n(e,t){return a(document.createElement("canvas"),e,t)}function r(e){var t,r;return t=n(e.width,e.height),r=o(t),r.drawImage(e,0,0),t}function o(e){return e.getContext("2d")}function i(e){var t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return t||(t=null),t}function a(e,t,n){return e.width=t,e.height=n,e}function c(e){return e.naturalWidth||e.width}function s(e){return e.naturalHeight||e.height}function l(e,t){return new(je.getOrDie("Blob"))(e,t)}function u(){return new(je.getOrDie("FileReader"))}function d(e){return new(je.getOrDie("Uint8Array"))(e)}function f(e){var t=e.src;return 0===t.indexOf("data:")?g(t):m(t)}function p(e){return new we(function(t,n){function r(){c(),t(a)}function o(){c(),n("Unable to load data of type "+e.type+": "+i)}var i=URL.createObjectURL(e),a=new Image,c=function(){a.removeEventListener("load",r),a.removeEventListener("error",o)};a.addEventListener("load",r),a.addEventListener("error",o),a.src=i,a.complete&&r()})}function m(e){return new we(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=function(){200==this.status&&t(this.response)},r.onerror=function(){var e=this;n(0===this.status?function(){var e=new Error("No access to download image");return e.code=18,e.name="SecurityError",e}():function(){return new Error("Error "+e.status+" downloading image")}())},r.send()})}function h(e){var t=e.split(","),n=/data:([^;]+)/.exec(t[0]);if(!n)return Ne.none();for(var r=n[1],o=t[1],i=Be.atob(o),a=i.length,c=Math.ceil(a/1024),s=new Array(c),u=0;u<c;++u){for(var f=1024*u,p=Math.min(f+1024,a),m=new Array(p-f),h=f,g=0;h<p;++g,++h)m[g]=i[h].charCodeAt(0);s[u]=d(m)}return Ne.some(l(s,{type:r}))}function g(e){return new we(function(t,n){h(e).fold(function(){n("uri is not base64: "+e)},t)})}function v(e){return 0===e.indexOf("blob:")?m(e):0===e.indexOf("data:")?g(e):null}function b(e,t,n){return t=t||"image/png",HTMLCanvasElement.prototype.toBlob?new we(function(r){e.toBlob(function(e){r(e)},t,n)}):g(e.toDataURL(t,n))}function y(e,t,n){return t=t||"image/png",e.then(function(e){return e.toDataURL(t,n)})}function x(e){return p(e).then(function(e){S(e);var t,n;return n=ye.create(xe.getWidth(e),xe.getHeight(e)),t=ye.get2dContext(n),t.drawImage(e,0,0),n})}function w(e){return new we(function(t){var n=new u;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})}function E(e){return new we(function(t){var n=new u;n.onloadend=function(){t(n.result)},n.readAsArrayBuffer(e)})}function _(e){return w(e).then(function(e){return e.split(",")[1]})}function S(e){URL.revokeObjectURL(e.src)}function k(e,t,n){function r(){return we.resolve(t)}function o(){return n}function i(){return n.split(",")[1]}function a(t,n){return e.then(function(e){return He.canvasToBlob(e,t,n)})}function c(t,n){return e.then(function(e){return He.canvasToDataURL(e,t,n)})}function s(e,t){return c(e,t).then(function(e){return e.split(",")[1]})}function l(){return e.then(ye.clone)}var u=t.type;return{getType:Ee(u),toBlob:r,toDataURL:o,toBase64:i,toAdjustedBlob:a,toAdjustedDataURL:c,toAdjustedBase64:s,toCanvas:l}}function C(e){return He.blobToDataUri(e).then(function(t){return k(He.blobToCanvas(e),e,t)})}function T(e,t){return He.canvasToBlob(e,t).then(function(t){return k(we.resolve(e),t,e.toDataURL())})}function I(e){return He.imageToBlob(e).then(function(e){return C(e)})}function D(e,t,n){return e=parseFloat(e),e>n?e=n:e<t&&(e=t),e}function R(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}function O(e,t){var n,r,o,i,a=[],c=new Array(10);for(n=0;n<5;n++){for(r=0;r<5;r++)a[r]=t[r+5*n];for(r=0;r<5;r++){for(i=0,o=0;o<5;o++)i+=e[r+5*o]*a[o];c[r+5*n]=i}}return c}function N(e,t){return t=D(t,0,1),e.map(function(e,n){return n%6==0?e=1-(1-e)*t:e*=t,D(e,0,1)})}function U(e,t){var n;return t=D(t,-1,1),t*=100,t<0?n=127+t/100*127:(n=t%1,n=0===n?$e[t]:$e[Math.floor(t)]*(1-n)+$e[Math.floor(t)+1]*n,n=127*n+127),O(e,[n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])}function A(e,t){var n,r,o,i;return t=D(t,-1,1),n=1+(t>0?3*t:t),r=.3086,o=.6094,i=.082,O(e,[r*(1-n)+n,o*(1-n),i*(1-n),0,0,r*(1-n),o*(1-n)+n,i*(1-n),0,0,r*(1-n),o*(1-n),i*(1-n)+n,0,0,0,0,0,1,0,0,0,0,0,1])}function P(e,t){var n,r,o,i,a;return t=D(t,-180,180)/180*Math.PI,n=Math.cos(t),r=Math.sin(t),o=.213,i=.715,a=.072,O(e,[o+n*(1-o)+r*-o,i+n*-i+r*-i,a+n*-a+r*(1-a),0,0,o+n*-o+.143*r,i+n*(1-i)+.14*r,a+n*-a+-.283*r,0,0,o+n*-o+r*-(1-o),i+n*-i+r*i,a+n*(1-a)+r*a,0,0,0,0,0,1,0,0,0,0,0,1])}function M(e,t){return t=D(255*t,-255,255),O(e,[1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])}function L(e,t,n,r){return t=D(t,0,2),n=D(n,0,2),r=D(r,0,2),O(e,[t,0,0,0,0,0,n,0,0,0,0,0,r,0,0,0,0,0,1,0,0,0,0,0,1])}function j(e,t){return t=D(t,0,1),O(e,N([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],t))}function F(e,t){return t=D(t,0,1),O(e,N([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],t))}function G(e,t){return e.toCanvas().then(function(n){return B(n,e.getType(),t)})}function B(e,t,n){var r,o=ye.get2dContext(e);return r=function(e,t){var n,r,o,i,a,c=e.data,s=t[0],l=t[1],u=t[2],d=t[3],f=t[4],p=t[5],m=t[6],h=t[7],g=t[8],v=t[9],b=t[10],y=t[11],x=t[12],w=t[13],E=t[14],_=t[15],S=t[16],k=t[17],C=t[18],T=t[19];for(a=0;a<c.length;a+=4)n=c[a],r=c[a+1],o=c[a+2],i=c[a+3],c[a]=n*s+r*l+o*u+i*d+f,c[a+1]=n*p+r*m+o*h+i*g+v,c[a+2]=n*b+r*y+o*x+i*w+E,c[a+3]=n*_+r*S+o*k+i*C+T;return e}(o.getImageData(0,0,e.width,e.height),n),o.putImageData(r,0,0),Qe.fromCanvas(e,t)}function H(e,t){return e.toCanvas().then(function(n){return z(n,e.getType(),t)})}function z(e,t,n){var r,o,i=ye.get2dContext(e);return r=i.getImageData(0,0,e.width,e.height),o=i.getImageData(0,0,e.width,e.height),o=function(e,t,n){function r(e,t,n){return e>n?e=n:e<t&&(e=t),e}var o,i,a,c,s,l,u,d,f,p,m,h,g,v,b,y,x;for(a=Math.round(Math.sqrt(n.length)),c=Math.floor(a/2),o=e.data,i=t.data,y=e.width,x=e.height,l=0;l<x;l++)for(s=0;s<y;s++){for(u=d=f=0,m=0;m<a;m++)for(p=0;p<a;p++)h=r(s+p-c,0,y-1),g=r(l+m-c,0,x-1),v=4*(g*y+h),b=n[m*a+p],u+=o[v]*b,d+=o[v+1]*b,f+=o[v+2]*b;v=4*(l*y+s),i[v]=r(u,0,255),i[v+1]=r(d,0,255),i[v+2]=r(f,0,255)}return t}(r,o,n),i.putImageData(o,0,0),Qe.fromCanvas(e,t)}function W(e){var t=function(t,n,r){var o,i,a=ye.get2dContext(t),c=new Array(256);for(i=0;i<c.length;i++)c[i]=e(i,r);return o=function(e,t){var n,r=e.data;for(n=0;n<r.length;n+=4)r[n]=t[r[n]],r[n+1]=t[r[n+1]],r[n+2]=t[r[n+2]];return e}(a.getImageData(0,0,t.width,t.height),c),a.putImageData(o,0,0),Qe.fromCanvas(t,n)};return function(e,n){return e.toCanvas().then(function(r){return t(r,e.getType(),n)})}}function q(e){return function(t,n){return G(t,e(Ze.identity(),n))}}function V(e){return function(t){return H(t,e)}}function J(e,t,n){var r=xe.getWidth(e),o=xe.getHeight(e),i=t/r,a=n/o,c=!1;(i<.5||i>2)&&(i=i<.5?.5:2,c=!0),(a<.5||a>2)&&(a=a<.5?.5:2,c=!0);var s=Y(e,i,a);return c?s.then(function(e){return J(e,t,n)}):s}function Y(e,t,n){return new we(function(r){var o=xe.getWidth(e),i=xe.getHeight(e),a=Math.floor(o*t),c=Math.floor(i*n),s=ye.create(a,c);ye.get2dContext(s).drawImage(e,0,0,o,i,0,0,a,c),r(s)})}function K(e,t){return e.toCanvas().then(function(n){return X(n,e.getType(),t)})}function X(e,t,n){var r=ye.create(e.width,e.height),o=ye.get2dContext(r),i=0,a=0;return n=n<0?360+n:n,90!=n&&270!=n||ye.resize(r,r.height,r.width),90!=n&&180!=n||(i=r.width),270!=n&&180!=n||(a=r.height),o.translate(i,a),o.rotate(n*Math.PI/180),o.drawImage(e,0,0),Qe.fromCanvas(r,t)}function Q(e,t){return e.toCanvas().then(function(n){return Z(n,e.getType(),t)})}function Z(e,t,n){var r=ye.create(e.width,e.height),o=ye.get2dContext(r);return"v"==n?(o.scale(1,-1),o.drawImage(e,0,-r.height)):(o.scale(-1,1),o.drawImage(e,-r.width,0)),Qe.fromCanvas(r,t)}function ee(e,t,n,r,o){return e.toCanvas().then(function(i){return te(i,e.getType(),t,n,r,o)})}function te(e,t,n,r,o,i){var a=ye.create(o,i);return ye.get2dContext(a).drawImage(e,-n,-r),Qe.fromCanvas(a,t)}function ne(e,t,n){return e.toCanvas().then(function(r){return tt.scale(r,t,n).then(function(t){return Qe.fromCanvas(t,e.getType())})})}function re(){function e(e){var t;return t=i.splice(++a),i.push(e),{state:e,removed:t}}function t(){if(r())return i[--a]}function n(){if(o())return i[++a]}function r(){return a>0}function o(){return-1!==a&&a<i.length-1}var i=[],a=-1;return{data:i,add:e,undo:t,redo:n,canUndo:r,canRedo:o}}function oe(e,t,n,r,o){function i(e,t){return{x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}}function a(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}}function c(){return a(n,e)}function s(t,r,o,i){var c,s,l,u,d;c=r.x,s=r.y,l=r.w,u=r.h,c+=o*t.deltaX,s+=i*t.deltaY,l+=o*t.deltaW,u+=i*t.deltaH,l<20&&(l=20),u<20&&(u=20),d=e=Qt.clamp({x:c,y:s,w:l,h:u},n,"move"===t.name),d=a(n,d),g.fire("updateRect",{rect:d}),p(d)}function l(e){var t;t=be.map(v,function(e){return"#"+w+"-"+e.name}).concat(be.map(y,function(e){return"#"+w+"-"+e})).join(","),e?en(t,r).show():en(t,r).hide()}function u(e){function n(e,t){t.h<0&&(t.h=0),t.w<0&&(t.w=0),en("#"+w+"-"+e,r).css({left:t.x,top:t.y,width:t.w,height:t.h})}be.each(v,function(t){en("#"+w+"-"+t.name,r).css({left:e.w*t.xMul+e.x,top:e.h*t.yMul+e.y})}),n("top",{x:t.x,y:t.y,w:t.w,h:e.y-t.y}),n("right",{x:e.x+e.w,y:e.y,w:t.w-e.x-e.w+t.x,h:e.h}),n("bottom",{x:t.x,y:e.y+e.h,w:t.w,h:t.h-e.y-e.h+t.y}),n("left",{x:t.x,y:e.y,w:e.x-t.x,h:e.h}),n("move",e)}function d(t){e=t,u(e)}function f(n){t=n,u(e)}function p(e){d(i(n,e))}function m(t){n=t,u(e)}function h(){be.each(b,function(e){e.destroy()}),b=[]}var g,v,b,y,x="mce-",w=x+"crid-"+rn++;return v=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],y=["top","right","bottom","left"],function(){function t(t){var n;return new(Xt.get("DragHelper"))(w,{document:r.ownerDocument,handle:w+"-"+t.name,start:function(){n=e},drag:function(e){s(t,n,e.deltaX,e.deltaY)}})}en('<div id="'+w+'" class="'+x+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(r),be.each(y,function(e){en("#"+w,r).append('<div id="'+w+"-"+e+'"class="'+x+'croprect-block" style="display: none" data-mce-bogus="all">')}),be.each(v,function(e){en("#"+w,r).append('<div id="'+w+"-"+e.name+'" class="'+x+"croprect-handle "+x+"croprect-handle-"+e.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+e.label+'" aria-grabbed="false">')}),b=be.map(v,t),u(e),en(r).on("focusin focusout",function(e){en(e.target).attr("aria-grabbed","focus"===e.type)}),en(r).on("keydown",function(t){function n(e,t,n,o,i){e.stopPropagation(),e.preventDefault(),s(r,n,o,i)}var r;switch(be.each(v,function(e){if(t.target.id===w+"-"+e.name)return r=e,!1}),t.keyCode){case nn.LEFT:n(t,r,e,-10,0);break;case nn.RIGHT:n(t,r,e,10,0);break;case nn.UP:n(t,r,e,0,-10);break;case nn.DOWN:n(t,r,e,0,10);break;case nn.ENTER:case nn.SPACEBAR:t.preventDefault(),o()}})}(),g=be.extend({toggleVisibility:l,setClampRect:m,setRect:d,getInnerRect:c,setInnerRect:p,setViewPortRect:f,destroy:h},tn)}function ie(e){return{blob:e,url:jt.createObjectURL(e)}}function ae(e){e&&jt.revokeObjectURL(e.url)}function ce(e){be.each(e,ae)}function se(e,t,n,r){function o(e){var t,n,r,o;t=C.find("#w")[0],n=C.find("#h")[0],r=parseInt(t.value(),10),o=parseInt(n.value(),10),C.find("#constrain")[0].checked()&&K&&X&&r&&o&&("w"===e.control.settings.name?(o=Math.round(r*Q),n.value(o)):(r=Math.round(o*Z),t.value(r))),K=r,X=o}function i(e){return Math.round(100*e)+"%"}function a(){C.find("#undo").disabled(!ee.canUndo()),C.find("#redo").disabled(!ee.canRedo()),C.statusbar.find("#save").disabled(!ee.canUndo())}function c(){C.find("#undo").disabled(!0),C.find("#redo").disabled(!0)}function s(e){e&&U.imageSrc(e.url)}function l(e){return function(){var t=be.grep(Y,function(t){return t.settings.name!==e});be.each(t,function(e){e.hide()}),e.show(),e.focus()}}function u(e){D=ie(e),s(D)}function d(e){t=ie(e),s(t),ce(ee.add(t).removed),a()}function f(){var e=U.selection();At.blobToImageResult(t.blob).then(function(t){Tt.crop(t,e.x,e.y,e.w,e.h).then(oe).then(function(e){d(e),m()})})}function p(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=[].slice.call(arguments,1);return function(){At.blobToImageResult(t.blob).then(function(t){e.apply(this,[t].concat(o)).then(oe).then(d)})}}function m(){s(t),ae(D),l(T)(),a()}function h(t,n){D?n():setTimeout(function(){t-- >0?h(t,n):e.windowManager.alert("Error: failed to apply image operation.")},10)}function g(){D?(d(D.blob),m()):h(100,g)}function v(){var e=U.zoom();e<2&&(e+=.1),U.zoom(e)}function b(){var e=U.zoom();e>.1&&(e-=.1),U.zoom(e)}function y(){t=ee.undo(),s(t),a()}function x(){t=ee.redo(),s(t),a()}function w(){n(t.blob),C.close()}function E(e){return Xt.create("Form",{layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",padding:"0 10 0 10",spacing:5,flex:0,minHeight:60,defaults:{classes:"imagetool",type:"button"},items:e})}function _(e,n){return E(te([{text:"Back",onclick:m},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:g}])).hide().on("show",function(){c(),At.blobToImageResult(t.blob).then(function(e){return n(e)}).then(oe).then(function(e){var t=ie(e);s(t),ae(D),D=t})})}function S(n,r,o,a,l){function u(e){At.blobToImageResult(t.blob).then(function(t){return r(t,e)}).then(oe).then(function(e){var t=ie(e);s(t),ae(D),D=t})}return E(te([{text:"Back",onclick:m},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:function(e){u(e.value)},minValue:e.rtl?l:a,maxValue:e.rtl?a:l,value:o,previewFilter:i},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:g}])).hide().on("show",function(){this.find("slider").value(o),c()})}function k(e){!0===e.control.value()&&(Q=X/K,Z=K/X)}var C,T,I,D,R,O,N,U,A,P,M,L,j,F,G,B,H,z,W,q,V,J,Y,K,X,Q,Z,ee=re(),te=function(t){return e.rtl?t.reverse():t},ne=function(e){var n=[].slice.call(arguments,1);return function(){var r=D||t;At.blobToImageResult(r.blob).then(function(t){e.apply(this,[t].concat(n)).then(oe).then(u)})}},oe=function(e){return e.toBlob()};R=E(te([{text:"Back",onclick:m},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:f}])).hide().on("show hide",function(e){U.toggleCropRect("show"===e.type)}).on("show",c),O=E(te([{text:"Back",onclick:m},{type:"spacer",flex:1},{type:"textbox",name:"w",label:"Width",size:4,onkeyup:o},{type:"textbox",name:"h",label:"Height",size:4,onkeyup:o},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:k},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}])).hide().on("submit",function(e){var t=parseInt(C.find("#w").value(),10),n=parseInt(C.find("#h").value(),10);e.preventDefault(),p(Tt.resize,t,n)(),m()}).on("show",c),N=E(te([{text:"Back",onclick:m},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:ne(Tt.flip,"h")},{icon:"flipv",tooltip:"Flip vertically",onclick:ne(Tt.flip,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:ne(Tt.rotate,-90)},{icon:"rotateright",tooltip:"Rotate clockwise",onclick:ne(Tt.rotate,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:g}])).hide().on("show",c),M=_("Invert",Tt.invert),W=_("Sharpen",Tt.sharpen),q=_("Emboss",Tt.emboss),L=S("Brightness",Tt.brightness,0,-1,1),j=S("Hue",Tt.hue,180,0,360),F=S("Saturate",Tt.saturate,0,-1,1),G=S("Contrast",Tt.contrast,0,-1,1),B=S("Grayscale",Tt.grayscale,0,0,1),H=S("Sepia",Tt.sepia,0,0,1),z=function(n,r){function o(){var e,n,o;e=C.find("#r")[0].value(),n=C.find("#g")[0].value(),o=C.find("#b")[0].value(),At.blobToImageResult(t.blob).then(function(t){return r(t,e,n,o)}).then(oe).then(function(e){var t=ie(e);s(t),ae(D),D=t})}var a=e.rtl?2:0,l=e.rtl?0:2;return E(te([{text:"Back",onclick:m},{type:"spacer",flex:1},{type:"slider",label:"R",name:"r",minValue:a,value:1,maxValue:l,ondragend:o,previewFilter:i},{type:"slider",label:"G",name:"g",minValue:a,value:1,maxValue:l,ondragend:o,previewFilter:i},{type:"slider",label:"B",name:"b",minValue:a,value:1,maxValue:l,ondragend:o,previewFilter:i},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:g}])).hide().on("show",function(){C.find("#r,#g,#b").value(1),c()})}("Colorize",Tt.colorize),V=S("Gamma",Tt.gamma,0,-1,1),J=S("Exposure",Tt.exposure,1,0,2),I=E(te([{text:"Back",onclick:m},{type:"spacer",flex:1},{text:"hue",icon:"hue",onclick:l(j)},{text:"saturate",icon:"saturate",onclick:l(F)},{text:"sepia",icon:"sepia",onclick:l(H)},{text:"emboss",icon:"emboss",onclick:l(q)},{text:"exposure",icon:"exposure",onclick:l(J)},{type:"spacer",flex:1}])).hide(),T=E(te([{tooltip:"Crop",icon:"crop",onclick:l(R)},{tooltip:"Resize",icon:"resize2",onclick:l(O)},{tooltip:"Orientation",icon:"orientation",onclick:l(N)},{tooltip:"Brightness",icon:"sun",onclick:l(L)},{tooltip:"Sharpen",icon:"sharpen",onclick:l(W)},{tooltip:"Contrast",icon:"contrast",onclick:l(G)},{tooltip:"Color levels",icon:"drop",onclick:l(z)},{tooltip:"Gamma",icon:"gamma",onclick:l(V)},{tooltip:"Invert",icon:"invert",onclick:l(M)}])),U=an.create({flex:1,imageSrc:t.url}),A=Xt.create("Container",{layout:"flex",direction:"column",pack:"start",border:"0 1 0 0",padding:5,spacing:5,items:[{type:"button",icon:"undo",tooltip:"Undo",name:"undo",onclick:y},{type:"button",icon:"redo",tooltip:"Redo",name:"redo",onclick:x},{type:"button",icon:"zoomin",tooltip:"Zoom in",onclick:v},{type:"button",icon:"zoomout",tooltip:"Zoom out",onclick:b}]}),P=Xt.create("Container",{type:"container",layout:"flex",direction:"row",align:"stretch",flex:1,items:te([A,U])}),Y=[T,R,O,N,I,M,L,j,F,G,B,H,z,W,q,V,J],C=e.windowManager.open({layout:"flex",direction:"column",align:"stretch",minWidth:Math.min(Kt.DOM.getViewPort().w,800),minHeight:Math.min(Kt.DOM.getViewPort().h,650),title:"Edit image",items:Y.concat([P]),buttons:te([{text:"Save",name:"save",subtype:"primary",onclick:w},{text:"Cancel",onclick:"close"}])}),C.on("close",function(){r(),ce(ee.data),ee=null,D=null}),ee.add(t),a(),U.on("load",function(){K=U.imageSize().w,X=U.imageSize().h,Q=X/K,Z=K/X,C.find("#w").value(K),C.find("#h").value(X)}),U.on("crop",f)}function le(e,t){return new Gt(function(n,r){return t.toBlob().then(function(t){se(e,ie(t),n,r)})})}function ue(e){function t(e){return/^[0-9\.]+px$/.test(e)}var n,r;return n=e.style.width,r=e.style.height,n||r?t(n)&&t(r)?{w:parseInt(n,10),h:parseInt(r,10)}:null:(n=e.width,r=e.height,n&&r?{w:parseInt(n,10),h:parseInt(r,10)}:null)}function de(e,t){var n,r;t&&(n=e.style.width,r=e.style.height,(n||r)&&(e.style.width=t.w+"px",e.style.height=t.h+"px",e.removeAttribute("data-mce-style")),n=e.width,r=e.height,(n||r)&&(e.setAttribute("width",t.w),e.setAttribute("height",t.h)))}function fe(e){return{w:e.naturalWidth,h:e.naturalHeight}}function pe(){return new(je.getOrDie("XMLHttpRequest"))}function me(e,t){return bn.requestUrlAsBlob(e,{},t).then(function(e){return e.status<200||e.status>=300?In.handleHttpError(e.status):Gt.resolve(e.blob)})}function he(){}var ge=function e(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},ve=tinymce.util.Tools.resolve("tinymce.PluginManager"),be=tinymce.util.Tools.resolve("tinymce.util.Tools"),ye={create:n,clone:r,resize:a,get2dContext:o,get3dContext:i},xe={getWidth:c,getHeight:s},we=window.Promise?window.Promise:function(){function n(e,t){return function(){e.apply(t,arguments)}}function r(e){var t=this;if(null===this._state)return void this._deferreds.push(e);u(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)})}function o(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":t(e))||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void s(n(r,e),n(o,this),n(i,this))}this._state=!0,this._value=e,a.call(this)}catch(e){i.call(this,e)}}function i(e){this._state=!1,this._value=e,a.call(this)}function a(){for(var e=0,t=this._deferreds.length;e<t;e++)r.call(this,this._deferreds[e]);this._deferreds=null}function c(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function s(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}var l=function(e){if("object"!==t(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],s(e,n(o,this),n(i,this))},u=l.immediateFn||"function"==typeof e&&e||function(e){setTimeout(e,1)},d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){var n=this;return new l(function(o,i){r.call(n,new c(e,t,o,i))})},l.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&d(arguments[0])?arguments[0]:arguments);return new l(function(n,r){function o(a,c){try{if(c&&("object"===(void 0===c?"undefined":t(c))||"function"==typeof c)){var s=c.then;if("function"==typeof s)return void s.call(c,function(e){o(a,e)},r)}e[a]=c,0==--i&&n(e)}catch(e){r(e)}}if(0===e.length)return n([]);for(var i=e.length,a=0;a<e.length;a++)o(a,e[a])})},l.resolve=function(e){return e&&"object"===(void 0===e?"undefined":t(e))&&e.constructor===l?e:new l(function(t){t(e)})},l.reject=function(e){return new l(function(t,n){n(e)})},l.race=function(e){return new l(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},l}(),Ee=function(e){return function(){return e}},_e=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var a=r.concat(o);return e.apply(null,a)}},Se=Ee(!1),ke=Ee(!0),Ce=Se,Te=ke,Ie=function(){return De},De=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r=function(){},o=function(){return null},i=function(){},a={fold:function(e,t){return e()},is:Ce,isSome:Ce,isNone:Te,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:o,getOrUndefined:i,or:n,orThunk:t,map:Ie,ap:Ie,each:r,bind:Ie,flatten:Ie,exists:Ce,forall:Te,filter:Ie,equals:e,equals_:e,toArray:function(){return[]},toString:Ee("none()")};return Object.freeze&&Object.freeze(a),a}(),Re=function e(t){var n=function(){return t},r=function(){return a},o=function(n){return e(n(t))},i=function(e){return e(t)},a={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:Te,isNone:Ce,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:r,orThunk:r,map:o,ap:function(n){return n.fold(Ie,function(n){return e(n(t))})},each:function(e){e(t)},bind:i,flatten:n,exists:i,forall:i,filter:function(e){return e(t)?a:De},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(Ce,function(e){return n(t,e)})},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return a},Oe=function(e){return null===e||void 0===e?De:Re(e)},Ne={some:Re,none:Ie,from:Oe},Ue="undefined"!=typeof window?window:Function("return this;")(),Ae=function(e,t){for(var n=void 0!==t&&null!==t?t:Ue,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},Pe=function(e,t){var n=e.split(".");return Ae(n,t)},Me=function(e,t){return Pe(e,t)},Le=function(e,t){var n=Me(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},je={getOrDie:Le},Fe=function(e){je.getOrDie("requestAnimationFrame")(e)},Ge=function(e){return je.getOrDie("atob")(e)},Be={atob:Ge,requestAnimationFrame:Fe},He={blobToImage:p,imageToBlob:f,blobToArrayBuffer:E,blobToDataUri:w,blobToBase64:_,dataUriToBlobSync:h,canvasToBlob:b,canvasToDataURL:y,blobToCanvas:x,uriToBlob:v},ze=function(e){return He.blobToImage(e)},We=function(e){return He.imageToBlob(e)},qe=function(e){return He.blobToDataUri(e)},Ve=function(e){return He.blobToBase64(e)},Je=function(e){return He.dataUriToBlobSync(e)},Ye=function(e){return Ne.from(He.uriToBlob(e))},Ke={blobToImage:ze,imageToBlob:We,blobToDataUri:qe,blobToBase64:Ve,dataUriToBlobSync:Je,uriToBlob:Ye},Xe=function(e,t){return k(He.blobToCanvas(e),e,t)},Qe={fromBlob:C,fromCanvas:T,fromImage:I,fromBlobAndUrlSync:Xe},$e=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],Ze={identity:R,adjust:N,multiply:O,adjustContrast:U,adjustBrightness:M,adjustSaturation:A,adjustHue:P,adjustColors:L,adjustSepia:j,adjustGrayscale:F},et={invert:function(e){return function(t){return G(t,e)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),brightness:q(Ze.adjustBrightness),hue:q(Ze.adjustHue),saturate:q(Ze.adjustSaturation),contrast:q(Ze.adjustContrast),grayscale:q(Ze.adjustGrayscale),sepia:q(Ze.adjustSepia),colorize:function(e,t,n,r){return G(e,Ze.adjustColors(Ze.identity(),t,n,r))},sharpen:V([0,-1,0,-1,5,-1,0,-1,0]),emboss:V([-2,-1,0,-1,1,1,0,1,2]),gamma:W(function(e,t){return 255*Math.pow(e/255,1-t)}),exposure:W(function(e,t){return 255*(1-Math.exp(-e/255*t))}),colorFilter:G,convoluteFilter:H},tt={scale:J},nt={rotate:K,flip:Q,crop:ee,resize:ne},rt=function(){function e(e){this.littleEndian=!1,this._dv=new DataView(e)}return e.prototype.readByteAt=function(e){return this._dv.getUint8(e)},e.prototype.read=function(e,t){if(e+t>this.length())return null;for(var n=this.littleEndian?0:-8*(t-1),r=0,o=0;r<t;r++)o|=this.readByteAt(e+r)<<Math.abs(n+8*r);return o},e.prototype.BYTE=function(e){return this.read(e,1)},e.prototype.SHORT=function(e){return this.read(e,2)},e.prototype.LONG=function(e){return this.read(e,4)},e.prototype.SLONG=function(e){var t=this.read(e,4);return t>2147483647?t-4294967296:t},e.prototype.CHAR=function(e){return String.fromCharCode(this.read(e,1))},e.prototype.STRING=function(e,t){return this.asArray("CHAR",e,t).join("")},e.prototype.SEGMENT=function(e,t){var n=this._dv.buffer;switch(arguments.length){case 2:return n.slice(e,e+t);case 1:return n.slice(e);default:return n}},e.prototype.asArray=function(e,t,n){for(var r=[],o=0;o<n;o++)r[o]=this[e](t+o);return r},e.prototype.length=function(){return this._dv?this._dv.byteLength:0},e}(),ot={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},it={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},at=function(){function e(e){this._offsets={tiffHeader:10,IFD0:null,IFD1:null,exifIFD:null,gpsIFD:null},this._tiffTags={};var t=this;if(t._reader=new rt(e),t._idx=t._offsets.tiffHeader,65505!==t.SHORT(0)||"EXIF\0"!==t.STRING(4,5).toUpperCase())throw new Error("Exif data cannot be read or not available.");if(t._reader.littleEndian=18761==t.SHORT(t._idx),42!==t.SHORT(t._idx+=2))throw new Error("Invalid Exif data.");t._offsets.IFD0=t._offsets.tiffHeader+t.LONG(t._idx+=2),t._tiffTags=t.extractTags(t._offsets.IFD0,ot.tiff),"ExifIFDPointer"in t._tiffTags&&(t._offsets.exifIFD=t._offsets.tiffHeader+t._tiffTags.ExifIFDPointer,delete t._tiffTags.ExifIFDPointer),"GPSInfoIFDPointer"in t._tiffTags&&(t._offsets.gpsIFD=t._offsets.tiffHeader+t._tiffTags.GPSInfoIFDPointer,delete t._tiffTags.GPSInfoIFDPointer);var n=t.LONG(t._offsets.IFD0+12*t.SHORT(t._offsets.IFD0)+2);n&&(t._offsets.IFD1=t._offsets.tiffHeader+n)}return e.prototype.BYTE=function(e){return this._reader.BYTE(e)},e.prototype.SHORT=function(e){return this._reader.SHORT(e)},e.prototype.LONG=function(e){return this._reader.LONG(e)},e.prototype.SLONG=function(e){return this._reader.SLONG(e)},e.prototype.CHAR=function(e){return this._reader.CHAR(e)},e.prototype.STRING=function(e,t){return this._reader.STRING(e,t)},e.prototype.SEGMENT=function(e,t){return this._reader.SEGMENT(e,t)},e.prototype.asArray=function(e,t,n){for(var r=[],o=0;o<n;o++)r[o]=this[e](t+o);return r},e.prototype.length=function(){return this._reader.length()},e.prototype.UNDEFINED=function(){return this.BYTE.apply(this,arguments)},e.prototype.RATIONAL=function(e){return this.LONG(e)/this.LONG(e+4)},e.prototype.SRATIONAL=function(e){return this.SLONG(e)/this.SLONG(e+4)},e.prototype.ASCII=function(e){return this.CHAR(e)},e.prototype.TIFF=function(){return this._tiffTags},e.prototype.EXIF=function(){var e=this,t=null;if(e._offsets.exifIFD){try{t=e.extractTags(e._offsets.exifIFD,ot.exif)}catch(e){return null}if(t.ExifVersion&&Array.isArray(t.ExifVersion)){for(var n=0,r="";n<t.ExifVersion.length;n++)r+=String.fromCharCode(t.ExifVersion[n]);t.ExifVersion=r}}return t},e.prototype.GPS=function(){var e=this,t=null;if(e._offsets.gpsIFD){try{t=e.extractTags(e._offsets.gpsIFD,ot.gps)}catch(e){return null}t.GPSVersionID&&Array.isArray(t.GPSVersionID)&&(t.GPSVersionID=t.GPSVersionID.join("."))}return t},e.prototype.thumb=function(){var e=this;if(e._offsets.IFD1)try{var t=e.extractTags(e._offsets.IFD1,ot.thumb);if("JPEGInterchangeFormat"in t)return e.SEGMENT(e._offsets.tiffHeader+t.JPEGInterchangeFormat,t.JPEGInterchangeFormatLength)}catch(e){}return null},e.prototype.extractTags=function(e,n){var r,o,i,a,c,s,l,u,d=this,f=[],p={},m={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},h={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};for(r=d.SHORT(e),o=0;o<r;o++)if(f=[],l=e+2+12*o,void 0!==(i=n[d.SHORT(l)])){if(a=m[d.SHORT(l+=2)],c=d.LONG(l+=2),!(s=h[a]))throw new Error("Invalid Exif data.");if(l+=4,s*c>4&&(l=d.LONG(l)+d._offsets.tiffHeader),l+s*c>=d.length())throw new Error("Invalid Exif data.");"ASCII"!==a?(f=d.asArray(a,l,c),u=1==c?f[0]:f,it.hasOwnProperty(i)&&"object"!=(void 0===u?"undefined":t(u))?p[i]=it[i][u]:p[i]=u):p[i]=d.STRING(l,c).replace(/\0$/,"").trim()}return p},e}(),ct=function(e){return He.blobToArrayBuffer(e).then(function(t){try{var n=new rt(t);if(65496===n.SHORT(0)){var r=st(n),o=r.filter(function(e){return"APP1"===e.name}),i={};if(!o.length)return we.reject("Headers did not include required information");var a=new at(o[0].segment);return i={tiff:a.TIFF(),exif:a.EXIF(),gps:a.GPS(),thumb:a.thumb()},i.rawHeaders=r,i}return we.reject("Image was not a jpeg")}catch(t){return we.reject("Unsupported format or not an image: "+e.type+" (Exception: "+t.message+")")}})},st=function(e){var t,n,r=[],o=0;for(t=2;t<=e.length();)if((n=e.SHORT(t))>=65488&&n<=65495)t+=2;else{if(65498===n||65497===n)break;o=e.SHORT(t+2)+2,n>=65505&&n<=65519&&r.push({hex:n,name:"APP"+(15&n),start:t,length:o,segment:e.SEGMENT(t,o)}),t+=o}return r},lt={extractFrom:ct},ut=function(e){return et.invert(e)},dt=function(e){return et.sharpen(e)},ft=function(e){return et.emboss(e)},pt=function(e,t){return et.gamma(e,t)},mt=function(e,t){return et.exposure(e,t)},ht=function(e,t,n,r){return et.colorize(e,t,n,r)},gt=function(e,t){return et.brightness(e,t)},vt=function(e,t){return et.hue(e,t)},bt=function(e,t){return et.saturate(e,t)},yt=function(e,t){return et.contrast(e,t)},xt=function(e,t){return et.grayscale(e,t)},wt=function(e,t){return et.sepia(e,t)},Et=function(e,t){return nt.flip(e,t)},_t=function(e,t,n,r,o){return nt.crop(e,t,n,r,o)},St=function(e,t,n){return nt.resize(e,t,n)},kt=function(e,t){return nt.rotate(e,t)},Ct=function(e){var t=function(t){switch(t.tiff.Orientation){case 6:return kt(e,90);case 3:return kt(e,180);case 8:return kt(e,270);default:return e}},n=function(){return e};return e.toBlob().then(lt.extractFrom).then(t,n)},Tt={invert:ut,sharpen:dt,emboss:ft,brightness:gt,hue:vt,saturate:bt,contrast:yt,grayscale:xt,sepia:wt,colorize:ht,gamma:pt,exposure:mt,flip:Et,crop:_t,resize:St,rotate:kt,exifRotate:Ct},It=function(e){return Qe.fromBlob(e)},Dt=function(e,t){return Qe.fromBlobAndUrlSync(e,t)},Rt=function(e){return Qe.fromImage(e)},Ot=function(e,t,n){return void 0===t&&void 0===n?Nt(e):e.toAdjustedBlob(t,n)},Nt=function(e){return e.toBlob()},Ut=function(e){return e.toDataURL()},At={blobToImageResult:It,fromBlobAndUrlSync:Dt,imageToImageResult:Rt,imageResultToBlob:Ot,imageResultToOriginalBlob:Nt,imageResultToDataURL:Ut},Pt=function(){return je.getOrDie("URL")},Mt=function(e){return Pt().createObjectURL(e)},Lt=function(e){Pt().revokeObjectURL(e)},jt={createObjectURL:Mt,revokeObjectURL:Lt},Ft=tinymce.util.Tools.resolve("tinymce.util.Delay"),Gt=tinymce.util.Tools.resolve("tinymce.util.Promise"),Bt=tinymce.util.Tools.resolve("tinymce.util.URI"),Ht=function(e){return e.getParam("imagetools_toolbar","rotateleft rotateright | flipv fliph | crop editimage imageoptions")},zt=function(e){return e.getParam("imagetools_proxy")},Wt=function(e){return e.getParam("imagetools_cors_hosts",[],"string[]")},qt=function(e){return e.getParam("imagetools_credentials_hosts",[],"string[]")},Vt=function(e){return e.getParam("api_key",e.getParam("imagetools_api_key","","string"),"string")},Jt=function(e){return e.getParam("images_upload_timeout",3e4,"number")},Yt=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},Kt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Xt=tinymce.util.Tools.resolve("tinymce.ui.Factory"),Qt=tinymce.util.Tools.resolve("tinymce.geom.Rect"),$t=function(e){return new Gt(function(t){var n=function n(){e.removeEventListener("load",n),t(e)};e.complete?t(e):e.addEventListener("load",n)})},Zt={loadImage:$t},en=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),tn=tinymce.util.Tools.resolve("tinymce.util.Observable"),nn=tinymce.util.Tools.resolve("tinymce.util.VK"),rn=0,on=function(e){return new(Xt.get("Control").extend({Defaults:{classes:"imagepanel"},selection:function(e){return arguments.length?(this.state.set("rect",e),this):this.state.get("rect")},imageSize:function(){var e=this.state.get("viewRect");return{w:e.w,h:e.h}},toggleCropRect:function(e){this.state.set("cropEnabled",e)},imageSrc:function(e){var t=this,n=new Image;n.src=e,Zt.loadImage(n).then(function(){var e,r,o=t.state.get("viewRect");if(r=t.$el.find("img"),r[0])r.replaceWith(n);else{var i=document.createElement("div");i.className="mce-imagepanel-bg",t.getEl().appendChild(i),t.getEl().appendChild(n)}e={x:0,y:0,w:n.naturalWidth,h:n.naturalHeight},t.state.set("viewRect",e),t.state.set("rect",Qt.inflate(e,-20,-20)),o&&o.w===e.w&&o.h===e.h||t.zoomFit(),t.repaintImage(),t.fire("load")})},zoom:function(e){return arguments.length?(this.state.set("zoom",e),this):this.state.get("zoom")},postRender:function(){return this.imageSrc(this.settings.imageSrc),this._super()},zoomFit:function(){var e,t,n,r,o,i,a,c=this;a=10,e=c.$el.find("img"),t=c.getEl().clientWidth,n=c.getEl().clientHeight,r=e[0].naturalWidth,o=e[0].naturalHeight,i=Math.min((t-a)/r,(n-a)/o),i>=1&&(i=1),c.zoom(i)},repaintImage:function(){var e,t,n,r,o,i,a,c,s,l,u;u=this.getEl(),s=this.zoom(),l=this.state.get("rect"),a=this.$el.find("img"),c=this.$el.find(".mce-imagepanel-bg"),o=u.offsetWidth,i=u.offsetHeight,n=a[0].naturalWidth*s,r=a[0].naturalHeight*s,e=Math.max(0,o/2-n/2),t=Math.max(0,i/2-r/2),a.css({left:e,top:t,width:n,height:r}),c.css({left:e,top:t,width:n,height:r}),this.cropRect&&(this.cropRect.setRect({x:l.x*s+e,y:l.y*s+t,w:l.w*s,h:l.h*s}),this.cropRect.setClampRect({x:e,y:t,w:n,h:r}),this.cropRect.setViewPortRect({x:0,y:0,w:o,h:i}))},bindStates:function(){function e(e){t.cropRect=oe(e,t.state.get("viewRect"),t.state.get("viewRect"),t.getEl(),function(){t.fire("crop")}),t.cropRect.on("updateRect",function(e){var n=e.rect,r=t.zoom();n={x:Math.round(n.x/r),y:Math.round(n.y/r),w:Math.round(n.w/r),h:Math.round(n.h/r)},t.state.set("rect",n)}),t.on("remove",t.cropRect.destroy)}var t=this;t.state.on("change:cropEnabled",function(e){t.cropRect.toggleVisibility(e.value),t.repaintImage()}),t.state.on("change:zoom",function(){t.repaintImage()}),t.state.on("change:rect",function(n){var r=n.value;t.cropRect||e(r),t.cropRect.setRect(r)})}}))(e)},an={create:on},cn={edit:le},sn={getImageSize:ue,setImageSize:de,getNaturalImageSize:fe},ln=function(e){if(null===e)return"null";var n=void 0===e?"undefined":t(e);return"object"===n&&Array.prototype.isPrototypeOf(e)?"array":"object"===n&&String.prototype.isPrototypeOf(e)?"string":n},un=function(e){return function(t){return ln(t)===e}}("function"),dn=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n,e))return Ne.some(o)}return Ne.none()},fn=Array.prototype.slice,pn=(un(Array.from)&&Array.from,function(e){return null!==e&&void 0!==e}),mn=function(e,t){var n;return n=t.reduce(function(e,t){return pn(e)?e[t]:void 0},e),pn(n)?n:null},hn=function(e,t,n){return new Gt(function(r){var o;o=new pe,o.onreadystatechange=function(){4===o.readyState&&r({status:o.status,blob:this.response})},o.open("GET",e,!0),o.withCredentials=n,be.each(t,function(e,t){o.setRequestHeader(t,e)}),o.responseType="blob",o.send()})},gn=function(e){return new Gt(function(t){var n=new u;n.onload=function(e){var n=e.target;t(n.result)},n.readAsText(e)})},vn=function(e){var t;try{t=JSON.parse(e)}catch(e){}return t},bn={traverse:mn,readBlob:gn,requestUrlAsBlob:hn,parseJson:vn},yn=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],xn=[{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],wn=function(e){return 400===e||403===e||500===e},En=function(e){return"ImageProxy HTTP error: "+dn(yn,function(t){return e===t.code}).fold(Ee("Unknown ImageProxy error"),function(e){return e.message})},_n=function(e){var t=En(e);return Gt.reject(t)},Sn=function(e){return dn(xn,function(t){return t.type===e}).fold(Ee("Unknown service error"),function(e){return e.message})},kn=function(e){var t=bn.parseJson(e),n=bn.traverse(t,["error","type"]);return"ImageProxy Service error: "+(n?Sn(n):"Invalid JSON in service error message")},Cn=function(e,t){return bn.readBlob(t).then(function(e){var t=kn(e);return Gt.reject(t)})},Tn=function(e,t){return wn(e)?Cn(0,t):_n(e)},In={handleServiceErrorResponse:Tn,handleHttpError:_n,getHttpErrorMsg:En,getServiceErrorMsg:Sn},Dn=function(e,t){var n=-1===e.indexOf("?")?"?":"&";return/[?&]apiKey=/.test(e)||!t?e:e+n+"apiKey="+encodeURIComponent(t)},Rn=function(e,t){var n={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":t};return bn.requestUrlAsBlob(Dn(e,t),n,!1).then(function(e){return e.status<200||e.status>=300?In.handleServiceErrorResponse(e.status,e.blob):Gt.resolve(e.blob)})},On=function(e,t,n){return t?Rn(e,t):me(e,n)},Nn={getUrl:On},Un=0,An=function(e,t){return e.dom.is(t,"img:not([data-mce-object],[data-mce-placeholder])")&&(Fn(e,t)||Gn(e,t)||e.settings.imagetools_proxy)},Pn=function(e,t){e.notificationManager.open({text:t,type:"error"})},Mn=function(e){return e.selection.getNode()},Ln=function(e,t){var n=t.match(/\/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i);return n?e.dom.encode(n[1]):null},jn=function(){return"imagetools"+Un++},Fn=function(e,t){var n=t.src;return 0===n.indexOf("data:")||0===n.indexOf("blob:")||new Bt(n).host===e.documentBaseURI.host},Gn=function(e,t){return-1!==be.inArray(Wt(e),new Bt(t.src).host)},Bn=function(e,t){return-1!==be.inArray(qt(e),new Bt(t.src).host)},Hn=function(e,t){var n,r=t.src;return Gn(e,t)?Nn.getUrl(t.src,null,Bn(e,t)):Fn(e,t)?Ke.imageToBlob(t):(r=zt(e),r+=(-1===r.indexOf("?")?"?":"&")+"url="+encodeURIComponent(t.src),n=Vt(e),Nn.getUrl(r,n,!1))},zn=function(e){var t;return t=e.editorUpload.blobCache.getByUri(Mn(e).src),t?Gt.resolve(t.blob()):Hn(e,Mn(e))},Wn=function(e,t){var n=Ft.setEditorTimeout(e,function(){e.editorUpload.uploadImagesAuto()},Jt(e));t.set(n)},qn=function(e){clearTimeout(e.get())},Vn=function(e,t,n,r,o){return t.toBlob().then(function(i){var a,c,s,l,u;return s=e.editorUpload.blobCache,u=Mn(e),a=u.src,Yt(e)&&(l=s.getByUri(a),l?(a=l.uri(),c=l.name()):c=Ln(e,a)),l=s.create({id:jn(),blob:i,base64:t.toBase64(),uri:a,name:c}),s.add(l),e.undoManager.transact(function(){function t(){e.$(u).off("load",t),e.nodeChanged(),n?e.editorUpload.uploadImagesAuto():(qn(r),Wn(e,r))}e.$(u).on("load",t),o&&e.$(u).attr({width:o.w,height:o.h}),e.$(u).attr({src:l.blobUri()}).removeAttr("data-mce-src")}),l})},Jn=function(e,t,n,r){return function(){return e._scanForImages().then(_e(zn,e)).then(At.blobToImageResult).then(n).then(function(n){return Vn(e,n,!1,t,r)},function(t){Pn(e,t)})}},Yn=function(e,t,n){return function(){var r=sn.getImageSize(Mn(e)),o=r?{w:r.h,h:r.w}:null;return Jn(e,t,function(e){return Tt.rotate(e,n)},o)()}},Kn=function(e,t,n){return function(){return Jn(e,t,function(e){return Tt.flip(e,n)})()}},Xn=function(e,t){return function(){var n=Mn(e),r=sn.getNaturalImageSize(n),o=function(e){return new Gt(function(t){Ke.blobToImage(e).then(function(o){var i=sn.getNaturalImageSize(o);r.w===i.w&&r.h===i.h||sn.getImageSize(n)&&sn.setImageSize(n,i),jt.revokeObjectURL(o.src),t(e)})})},i=function(e,n){return cn.edit(e,n).then(o).then(At.blobToImageResult).then(function(n){return Vn(e,n,!0,t)},function(){})};zn(e).then(At.blobToImageResult).then(_e(i,e),function(t){Pn(e,t)})}},Qn={rotate:Yn,flip:Kn,editImageDialog:Xn,isEditableImage:An,cancelTimedUpload:qn},$n=function(e,t){be.each({mceImageRotateLeft:Qn.rotate(e,t,-90),mceImageRotateRight:Qn.rotate(e,t,90),mceImageFlipVertical:Qn.flip(e,t,"v"),mceImageFlipHorizontal:Qn.flip(e,t,"h"),mceEditImage:Qn.editImageDialog(e,t)},function(t,n){e.addCommand(n,t)})},Zn={register:$n},er=function(e,t,n){e.on("NodeChange",function(r){var o=n.get();o&&o.src!==r.element.src&&(Qn.cancelTimedUpload(t),e.editorUpload.uploadImagesAuto(),n.set(null)),Qn.isEditableImage(e,r.element)&&n.set(r.element)})},tr={setup:er},nr=function(e){e.addButton("rotateleft",{title:"Rotate counterclockwise",cmd:"mceImageRotateLeft"}),e.addButton("rotateright",{title:"Rotate clockwise",cmd:"mceImageRotateRight"}),e.addButton("flipv",{title:"Flip vertically",cmd:"mceImageFlipVertical"}),e.addButton("fliph",{title:"Flip horizontally",cmd:"mceImageFlipHorizontal"}),e.addButton("editimage",{title:"Edit image",cmd:"mceEditImage"}),e.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"})},rr={register:nr},or=function(e){e.addContextToolbar(_e(Qn.isEditableImage,e),Ht(e))},ir={register:or};ve.add("imagetools",function(e){var t=ge(0),n=ge(null);Zn.register(e,t),rr.register(e),ir.register(e),tr.setup(e,t,n)})}()}()}).call(exports,t(271).setImmediate)},function(e,exports,t){"use strict";t(664)},function(e,exports,t){"use strict";!function(){!function(){function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e,t){var n;return e.dom.getParents(e.selection.getStart(),function(e){var r;(r=e.style["forecolor"===t?"color":"background-color"])&&(n=r)}),n},r=function(e){var t,n=[];for(t=0;t<e.length;t+=2)n.push({text:e[t+1],color:"#"+e[t]});return n},o=function(e,t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})},i=function(e,t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})},a={getCurrentColor:n,mapColors:r,applyFormat:o,removeFormat:i},c=function(e){e.addCommand("mceApplyTextcolor",function(t,n){a.applyFormat(e,t,n)}),e.addCommand("mceRemoveTextcolor",function(t){a.removeFormat(e,t)})},s={register:c},l=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),u=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],f=function(e){return e.getParam("textcolor_map",d)},p=function(e){return e.getParam("forecolor_map",f(e))},m=function(e){return e.getParam("backcolor_map",f(e))},h=function(e){return e.getParam("textcolor_rows",5)},g=function(e){return e.getParam("textcolor_cols",8)},v=function(e){return e.getParam("forecolor_rows",h(e))},b=function(e){return e.getParam("backcolor_rows",h(e))},y=function(e){return e.getParam("forecolor_cols",g(e))},x=function(e){return e.getParam("backcolor_cols",g(e))},w=function(e){return e.getParam("color_picker_callback",null)},E=function(e){return"function"==typeof w(e)},_={getForeColorMap:p,getBackColorMap:m,getForeColorRows:v,getBackColorRows:b,getForeColorCols:y,getBackColorCols:x,getColorPickerCallback:w,hasColorPicker:E},S=tinymce.util.Tools.resolve("tinymce.util.I18n"),k=function(e,t,n,r){var o,i,c,s,u,d,f,p=0,m=l.DOM.uniqueId("mcearia"),h=function(e,t){var n="transparent"===e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+m+"-"+p+++'" data-mce-color="'+(e||"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+S.translate(t)+'">'+(n?"&#215;":"")+"</div></td>"};for(o=a.mapColors(n),o.push({text:S.translate("No color"),color:"transparent"}),c='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',s=o.length-1,d=0;d<t;d++){for(c+="<tr>",u=0;u<e;u++)f=d*e+u,f>s?c+="<td></td>":(i=o[f],c+=h(i.color,i.text));c+="</tr>"}if(r){for(c+='<tr><td colspan="'+e+'" class="mce-custom-color-btn"><div id="'+m+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+m+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+S.translate("Custom...")+"</button></div></td></tr>",c+="<tr>",u=0;u<e;u++)c+=h("","Custom color");c+="</tr>"}return c+="</tbody></table>"},C={getHtml:k},T=function(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)},I=function(e){return function(t){var n=t.control;n._color?e.execCommand("mceApplyTextcolor",n.settings.format,n._color):e.execCommand("mceRemoveTextcolor",n.settings.format)}},D=function(e,t){return function(n){var r,o=this.parent(),i=a.getCurrentColor(e,o.settings.format),c=function(t){e.execCommand("mceApplyTextcolor",o.settings.format,t),o.hidePanel(),o.color(t)};if(l.DOM.getParent(n.target,".mce-custom-color-btn")){o.hidePanel();_.getColorPickerCallback(e).call(e,function(e){var n,r,i,a=o.panel.getEl().getElementsByTagName("table")[0];for(n=u.map(a.rows[a.rows.length-1].childNodes,function(e){return e.firstChild}),i=0;i<n.length&&(r=n[i],r.getAttribute("data-mce-color"));i++);if(i===t)for(i=0;i<t-1;i++)T(n[i],n[i+1].getAttribute("data-mce-color"));T(r,e),c(e)},i)}r=n.target.getAttribute("data-mce-color"),r?(this.lastId&&l.DOM.get(this.lastId).setAttribute("aria-selected","false"),n.target.setAttribute("aria-selected",!0),this.lastId=n.target.id,"transparent"===r?function(){e.execCommand("mceRemoveTextcolor",o.settings.format),o.hidePanel(),o.resetColor()}():c(r)):null!==r&&o.hidePanel()}},R=function(e,t){return function(){var n=t?_.getForeColorCols(e):_.getBackColorCols(e),r=t?_.getForeColorRows(e):_.getBackColorRows(e),o=t?_.getForeColorMap(e):_.getBackColorMap(e),i=_.hasColorPicker(e);return C.getHtml(n,r,o,i)}},O=function(e){e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:R(e,!0),onclick:D(e,_.getForeColorCols(e))},onclick:I(e)}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:R(e,!1),onclick:D(e,_.getBackColorCols(e))},onclick:I(e)})},N={register:O};t.add("textcolor",function(e){s.register(e),N.register(e)})}()}()},function(e,exports,t){"use strict";t(666)},function(e,exports,t){"use strict";!function(){!function(){function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")})},r={register:n},o=function(e){e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})},i={register:o};t.add("hr",function(e){r.register(e),i.register(e)})}()}()},function(e,exports,t){"use strict";var n={Cut:"剪切","Heading 5":"标题5","Header 2":"标题2","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"你的浏览器不支持对剪贴板的访问，请使用Ctrl+X/C/V键进行复制粘贴。","Heading 4":"标题4",Div:"Div区块","Heading 2":"标题2",Paste:"粘贴",Close:"关闭","Font Family":"字体",Pre:"预格式文本","Align right":"右对齐","New document":"新文档",Blockquote:"引用","Numbered list":"编号列表","Heading 1":"标题1",Headings:"标题","Increase indent":"增加缩进",Formats:"格式",Headers:"标题","Select all":"全选","Header 3":"标题3",Blocks:"区块",Undo:"撤消",Strikethrough:"删除线","Bullet list":"项目符号","Header 1":"标题1",Superscript:"上标","Clear formatting":"清除格式","Font Sizes":"字号",Subscript:"下标","Header 6":"标题6",Redo:"重复",Paragraph:"段落",Ok:"确定",Bold:"粗体",Code:"代码",Italic:"斜体","Align center":"居中","Header 5":"标题5","Heading 6":"标题6","Heading 3":"标题3","Decrease indent":"减少缩进","Header 4":"标题4","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"当前为纯文本粘贴模式，再次点击可以回到普通粘贴模式。",Underline:"下划线",Cancel:"取消",Justify:"两端对齐",Inline:"文本",Copy:"复制","Align left":"左对齐","Visual aids":"网格线","Lower Greek":"小写希腊字母",Square:"方块",Default:"默认","Lower Alpha":"小写英文字母",Circle:"空心圆",Disc:"实心圆","Upper Alpha":"大写英文字母","Upper Roman":"大写罗马字母","Lower Roman":"小写罗马字母",Name:"名称",Anchor:"锚点","You have unsaved changes are you sure you want to navigate away?":"你还有文档尚未保存，确定要离开？","Restore last draft":"恢复上次的草稿","Special character":"特殊符号","Source code":"源代码",Color:"颜色","Right to left":"从右到左","Left to right":"从左到右",Emoticons:"表情",Robots:"机器人","Document properties":"文档属性",Title:"标题",Keywords:"关键词",Encoding:"编码",Description:"描述",Author:"作者",Fullscreen:"全屏","Horizontal line":"水平分割线","Horizontal space":"水平边距","Insert/edit image":"插入/编辑图片",General:"普通",Advanced:"高级",Source:"地址",Border:"边框","Constrain proportions":"保持纵横比","Vertical space":"垂直边距","Image description":"图片描述",Style:"样式",Dimensions:"大小","Insert image":"插入图片","Insert date/time":"插入日期/时间","Remove link":"删除链接",Url:"地址","Text to display":"显示文字",Anchors:"锚点","Insert link":"插入链接","New window":"在新窗口打开",None:"无","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"你所填写的URL地址属于外部链接，需要加上http://:前缀吗？",Target:"打开方式","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"你所填写的URL地址貌似是邮件地址，需要加上mailto:前缀吗？","Insert/edit link":"插入/编辑链接","Insert/edit video":"插入/编辑视频",Poster:"封面","Alternative source":"镜像","Paste your embed code below:":"将内嵌代码粘贴在下面:","Insert video":"插入视频",Embed:"内嵌","Nonbreaking space":"不间断空格","Page break":"分页符","Paste as text":"粘贴为文本",Preview:"预览",Print:"打印",Save:"保存","Could not find the specified string.":"未找到搜索内容.",Replace:"替换",Next:"下一个","Whole words":"全字匹配","Find and replace":"查找和替换","Replace with":"替换为",Find:"查找","Replace all":"全部替换","Match case":"区分大小写",Prev:"上一个",Spellcheck:"拼写检查",Finish:"完成","Ignore all":"全部忽略",Ignore:"忽略","Add to Dictionary":"添加到字典","Insert row before":"在上方插入",Rows:"行",Height:"高","Paste row after":"粘贴到下方",Alignment:"对齐方式","Border color":"边框颜色","Column group":"列组",Row:"行","Insert column before":"在左侧插入","Split cell":"拆分单元格","Cell padding":"单元格内边距","Cell spacing":"单元格外间距","Row type":"行类型","Insert table":"插入表格",Body:"表体",Caption:"标题",Footer:"表尾","Delete row":"删除行","Paste row before":"粘贴到上方",Scope:"范围","Delete table":"删除表格","H Align":"水平对齐",Top:"顶部对齐","Header cell":"表头单元格",Column:"列","Row group":"行组",Cell:"单元格",Middle:"垂直居中","Cell type":"单元格类型","Copy row":"复制行","Row properties":"行属性","Table properties":"表格属性",Bottom:"底部对齐","V Align":"垂直对齐",Header:"表头",Right:"右对齐","Insert column after":"在右侧插入",Cols:"列","Insert row after":"在下方插入",Width:"宽","Cell properties":"单元格属性",Left:"左对齐","Cut row":"剪切行","Delete column":"删除列",Center:"居中","Merge cells":"合并单元格","Insert template":"插入模板",Templates:"模板","Background color":"背景色","Custom...":"自定义...","Custom color":"自定义颜色","No color":"无","Text color":"文字颜色","Show blocks":"显示区块边框","Show invisible characters":"显示不可见字符","Words: {0}":"字数：{0}",Insert:"插入",File:"文件",Edit:"编辑","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"在编辑区按ALT-F9打开菜单，按ALT-F10打开工具栏，按ALT-0查看帮助",Tools:"工具",View:"视图",Table:"表格",Format:"格式"};tinymce.addI18n("zh_CN",n)},function(e,exports,t){var n=t(669);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".mce-container, .mce-container * {\n  transition: initial; }\n",""])},function(e,exports,t){var n=t(671);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".note-detail {\n  height: 100%; }\n  .note-detail .title input {\n    height: 44px;\n    padding: 8px 12px;\n    border: 0;\n    outline: 0;\n    border-bottom: 1px solid #DDDCDD;\n    background-color: transparent;\n    font-size: 16px;\n    position: relative;\n    width: 100%; }\n    .note-detail .title input:focus {\n      border-bottom-color: #705949; }\n    .note-detail .title input:disabled {\n      cursor: not-allowed;\n      color: #999999; }\n",""])},function(e,exports,t){var n=t(673);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".note .list {\n  user-select: none;\n  width: 240px;\n  background-color: #FFFBF8;\n  position: relative; }\n  .note .list .items {\n    overflow: hidden;\n    height: 100%; }\n    .note .list .items:hover {\n      overflow-y: auto;\n      overflow-y: overlay; }\n  .note .list .note-item {\n    cursor: pointer;\n    padding: 24px 12px; }\n    .note .list .note-item:hover, .note .list .note-item.active {\n      background-color: #FBF5F1; }\n    .note .list .note-item .note-title {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      font-size: 16px;\n      font-weight: 400;\n      color: #4a4a4a;\n      margin-bottom: 4px;\n      max-height: 40px;\n      overflow: hidden;\n      overflow-wrap: break-word;\n      word-wrap: break-word;\n      line-height: 20px;\n      min-height: 20px; }\n    .note .list .note-item .note-update-time {\n      font-size: 11px;\n      font-weight: 400;\n      text-transform: uppercase;\n      letter-spacing: 1px;\n      margin-bottom: 8px;\n      color: #878787; }\n    .note .list .note-item .note-summary {\n      font-size: 12px;\n      font-weight: 400;\n      line-height: 17px;\n      min-height: 17px;\n      color: #878787; }\n  .note .list .add-note {\n    position: absolute;\n    width: 40px;\n    height: 40px;\n    line-height: 40px;\n    right: 20px;\n    bottom: 20px;\n    background-color: #EDAB7C;\n    border-radius: 50%;\n    text-align: center;\n    cursor: pointer; }\n    .note .list .add-note .iconfont {\n      font-size: 24px;\n      color: white; }\n\n.note .detail {\n  flex: 1; }\n  .note .detail .nocontent {\n    display: flex;\n    flex: 1;\n    height: 100%;\n    align-items: center;\n    justify-content: center;\n    border-left: 1px solid #DDDCDD; }\n    .note .detail .nocontent .addNote {\n      font-size: 16px;\n      border: 0;\n      cursor: pointer;\n      color: white;\n      border-radius: 3px;\n      background-color: #999;\n      padding: 6px 12px;\n      outline: 0;\n      user-select: none;\n      width: 160px;\n      height: 40px; }\n      .note .detail .nocontent .addNote:hover, .note .detail .nocontent .addNote:active, .note .detail .nocontent .addNote.active {\n        background-color: #705949; }\n      .note .detail .nocontent .addNote:disabled {\n        cursor: not-allowed;\n        background-color: #999999; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(7),u=t(17),d=u.logout,f=t(5),p=f.showModal,m=f.switchMenuPannel,h=t(23),g=h.setEditedTemplate,v=t(45),b=v.addNote,y=t(57),x=t(280),w=t(675),E=t(678),_=t(681),S=t(686),k=t(689),C=t(692),T=t(12),I=t(287);t(702);var D=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={show:""},o.hideMenu=function(){document.removeEventListener("click",o.hideMenu),o.setState({show:""})},o}return o(t,e),i(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hideMenu)}},{key:"_handleClick",value:function(e){this.state.show!==e?this.setState({show:e}):this.setState({show:""}),document.addEventListener("click",this.hideMenu)}},{key:"_handleClickMenu",value:function(e){"actorCreate"===e?this.props.dispatch(p(a.createElement(y,null))):"templateCreate"===e?(this.props.dispatch(g({})),this.props.dispatch(p(a.createElement(x,{isEdit:!1})))):"noteCreate"===e?(this.props.dispatch(m(3)),this.props.dispatch(b())):"groupCreate"===e?this.props.dispatch(p(a.createElement(w,null))):"addFriend"===e?this.props.dispatch(p(a.createElement(_,null))):"addGroup"===e?this.props.dispatch(p(a.createElement(S,null))):"userSettings"===e?this.props.dispatch(p(a.createElement(k,null))):"systemSettings"===e?this.props.dispatch(p(a.createElement(C,null))):"changePassword"===e?this.props.dispatch(p(a.createElement(E,null))):"help"===e?this.props.dispatch(p(a.createElement(T,{title:"帮助反馈",className:"help"},a.createElement(I,{src:l.file.url+"/help/feedback",allowExopen:!1})))):"blog"===e?window.open(l.url.blog):"logout"===e&&this.props.dispatch(d()),this.setState({show:""})}},{key:"_getContent",value:function(){var e=this,t=this.state.show;return"add"===t?a.createElement("ul",null,a.createElement("li",{onClick:function(){return e._handleClickMenu("actorCreate")}},"创建人物"),a.createElement("li",{onClick:function(){return e._handleClickMenu("templateCreate")}},"创建模板"),a.createElement("li",{onClick:function(){return e._handleClickMenu("groupCreate")}},"创建团"),a.createElement("li",{onClick:function(){return e._handleClickMenu("noteCreate")}},"添加笔记"),a.createElement("li",{onClick:function(){return e._handleClickMenu("addFriend")}},"添加好友"),a.createElement("li",{onClick:function(){return e._handleClickMenu("addGroup")}},"添加团")):"more"===t?a.createElement("ul",null,a.createElement("li",{onClick:function(){return e._handleClickMenu("userSettings")}},"个人设置"),a.createElement("li",{onClick:function(){return e._handleClickMenu("systemSettings")}},"系统设置"),a.createElement("li",{onClick:function(){return e._handleClickMenu("changePassword")}},"修改密码"),a.createElement("li",{onClick:function(){return e._handleClickMenu("help")}},"帮助反馈"),a.createElement("li",{onClick:function(){return e._handleClickMenu("blog")}},"开发者博客"),a.createElement("li",{onClick:function(){return e._handleClickMenu("logout")}},"退出登录")):""}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"extra-options"},a.createElement("div",{className:"extra-menu "+this.state.show+(this.state.show?" active":"")},this._getContent()),a.createElement("div",{className:"extra-item",onClick:function(){return e._handleClick("add")}},a.createElement("i",{className:"iconfont"},"")),a.createElement("div",{className:"extra-item",onClick:function(){return e._handleClick("more")}},a.createElement("i",{className:"iconfont"},"")))}}]),t}(a.Component);e.exports=s()(D)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(12),u=t(11),d=u.createGroup;t(676);var f=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={groupName:"",groupSubName:"",groupDesc:""},o}return o(t,e),i(t,[{key:"_handleCreate",value:function(){this.props.dispatch(d(this.state.groupName,this.state.groupSubName,this.state.groupDesc))}},{key:"render",value:function(){var e=this,t=a.createElement("div",null,a.createElement("button",{onClick:function(){return e._handleCreate()}},"创建"));return a.createElement(l,{title:"创建团",actions:t},a.createElement("div",{className:"group-create"},a.createElement("div",null,a.createElement("label",null,"团名"),a.createElement("input",{type:"text",maxLength:"16",value:this.state.groupName,onChange:function(t){return e.setState({groupName:t.target.value})}})),a.createElement("div",null,a.createElement("label",null,"团副名"),a.createElement("input",{type:"text",placeholder:"选填",maxLength:"32",value:this.state.groupSubName,onChange:function(t){return e.setState({groupSubName:t.target.value})}})),a.createElement("div",null,a.createElement("label",null,"团简介"),a.createElement("textarea",{type:"text",placeholder:"简单介绍下你的团吧",maxLength:"100",rows:"4",value:this.state.groupDesc,onChange:function(t){return e.setState({groupDesc:t.target.value})}}))))}}]),t}(a.Component);e.exports=s()(f)},function(e,exports,t){var n=t(677);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,'.group-create > div {\n  text-align: left;\n  display: flex;\n  margin-bottom: 10px; }\n  .group-create > div > label {\n    width: 80px;\n    padding-top: 4px; }\n    .group-create > div > label:after {\n      content: \':\'; }\n  .group-create > div > input, .group-create > div > textarea {\n    flex: 1;\n    background-color: transparent;\n    font-size: 16px;\n    border: 1px solid #DDDCDD;\n    outline: 0;\n    padding: 4px 6px;\n    border-radius: 3px;\n    resize: none; }\n    .group-create > div > input:focus, .group-create > div > textarea:focus {\n      border-color: #705949; }\n    .group-create > div > input:disabled, .group-create > div > textarea:disabled {\n      cursor: not-allowed;\n      background-color: rgba(0, 0, 0, 0.1);\n      color: #999999; }\n    .group-create > div > input[type="checkbox"], .group-create > div > textarea[type="checkbox"] {\n      -webkit-appearance: none;\n      background-color: white;\n      background-image: url("/src/assets/img/checkbox.png");\n      height: 22px;\n      vertical-align: middle;\n      width: 22px;\n      outline: none;\n      border: 0;\n      transition: initial;\n      padding: 0; }\n      .group-create > div > input[type="checkbox"]:focus, .group-create > div > input[type="checkbox"]:hover, .group-create > div > textarea[type="checkbox"]:focus, .group-create > div > textarea[type="checkbox"]:hover {\n        background-position: -24px 0; }\n      .group-create > div > input[type="checkbox"]:checked, .group-create > div > textarea[type="checkbox"]:checked {\n        background-position: -48px 0; }\n      .group-create > div > input[type="checkbox"][disabled], .group-create > div > textarea[type="checkbox"][disabled] {\n        background-position: -72px 0; }\n      .group-create > div > input[type="checkbox"][disabled]:checked, .group-create > div > textarea[type="checkbox"][disabled]:checked {\n        background-position: -96px 0; }\n',""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(12),u=t(17),d=u.changePassword,f=t(5),p=f.showAlert,m=f.hideModal;t(679);var h=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={error:"",oldPassword:"",newPassword:"",newPasswordRepeat:""},o}return o(t,e),i(t,[{key:"_handleChangePassword",value:function(){var e=this;return this.setState({error:""}),this.state.newPassword&&this.state.oldPassword?this.state.newPassword.length<5||this.state.oldPassword.length<5?void this.setState({error:"密码不能小于5位"}):this.state.newPassword!==this.state.newPasswordRepeat?void this.setState({error:"重复密码不正确, 请检查您的输入"}):void this.props.dispatch(d(this.state.oldPassword,this.state.newPassword,function(){e.props.dispatch(m()),e.props.dispatch(p("密码修改成功"))},function(t){e.setState({error:t})})):void this.setState({error:"密码不能为空"})}},{key:"render",value:function(){var e=this,t=a.createElement("button",{onClick:function(){return e._handleChangePassword()}},"确认修改");return a.createElement(l,{title:"修改密码",actions:t},a.createElement("div",{className:"change-password"},a.createElement("input",{type:"password",placeholder:"原密码",value:this.state.oldPassword,onChange:function(t){return e.setState({oldPassword:t.target.value})}}),a.createElement("input",{type:"password",placeholder:"请输入5~20位新密码",value:this.state.newPassword,onChange:function(t){return e.setState({newPassword:t.target.value})}}),a.createElement("input",{type:"password",placeholder:"再次输入新密码",value:this.state.newPasswordRepeat,onChange:function(t){return e.setState({newPasswordRepeat:t.target.value})}}),a.createElement("p",{className:"tip"},"tip: 一旦确认修改无法撤回，请三思后行"),a.createElement("p",{className:"error-msg"},this.state.error)))}}]),t}(a.Component);e.exports=s()(h)},function(e,exports,t){var n=t(680);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,'.change-password {\n  display: flex;\n  flex-direction: column;\n  padding: 20px; }\n  .change-password input {\n    background-color: transparent;\n    font-size: 16px;\n    border: 1px solid #DDDCDD;\n    outline: 0;\n    padding: 4px 6px;\n    border-radius: 3px;\n    resize: none;\n    margin-bottom: 10px; }\n    .change-password input:focus {\n      border-color: #705949; }\n    .change-password input:disabled {\n      cursor: not-allowed;\n      background-color: rgba(0, 0, 0, 0.1);\n      color: #999999; }\n    .change-password input[type="checkbox"] {\n      -webkit-appearance: none;\n      background-color: white;\n      background-image: url("/src/assets/img/checkbox.png");\n      height: 22px;\n      vertical-align: middle;\n      width: 22px;\n      outline: none;\n      border: 0;\n      transition: initial;\n      padding: 0; }\n      .change-password input[type="checkbox"]:focus, .change-password input[type="checkbox"]:hover {\n        background-position: -24px 0; }\n      .change-password input[type="checkbox"]:checked {\n        background-position: -48px 0; }\n      .change-password input[type="checkbox"][disabled] {\n        background-position: -72px 0; }\n      .change-password input[type="checkbox"][disabled]:checked {\n        background-position: -96px 0; }\n  .change-password .tip {\n    color: #C7C7CC;\n    text-align: left;\n    font-size: 12px; }\n  .change-password .error-msg {\n    text-align: left;\n    margin: 0;\n    color: #EC2121;\n    font-size: 14px; }\n',""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(15),u=t(17),d=u.findUser,f=t(12),p=t(286);t(684);var m=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={selectValue:"username",searchText:""},o}return o(t,e),i(t,[{key:"_handleSearch",value:function(){var e=this.state.searchText.trim(),t=this.state.selectValue;e&&this.props.dispatch(d(e,t))}},{key:"getFriendResult",value:function(e){return e||(e=[]),e.map(function(e,t){return a.createElement(p,{key:e.uuid+"#"+t,info:e})})}},{key:"render",value:function(){var e=this,t=[{value:"uuid",label:"用户唯一标示符"},{value:"username",label:"用户名"},{value:"nickname",label:"昵称"}];return a.createElement(f,{title:"添加好友"},a.createElement("div",{className:"friends-add"},a.createElement("div",{className:"friends-search"},a.createElement("input",{type:"text",placeholder:"请输入你要添加的好友信息",spellCheck:"false",value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})}}),a.createElement("div",{className:"friends-search-method"},a.createElement(l,{name:"form-field-name",value:this.state.selectValue,options:t,clearable:!1,searchable:!1,placeholder:"请选择搜索方式...",onChange:function(t){return e.setState({selectValue:t.value})}})),a.createElement("button",{onClick:function(){return e._handleSearch()}},"搜索")),a.createElement("div",{className:"friends-search-result"},this.props.isFinding?"正在查询...":this.getFriendResult(this.props.findingResult.toJS()))))}}]),t}(a.Component);e.exports=s(function(e){return{isFinding:e.getIn(["user","isFindingUser"]),findingResult:e.getIn(["user","findingResult"])}})(m)},function(e,exports,t){var n=t(683);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".find-result-item {\n  min-height: 90px;\n  overflow: hidden;\n  padding: 12px 0;\n  margin: 0 24px;\n  display: flex;\n  align-items: center;\n  border-bottom: 1px dashed #DDDCDD; }\n  .find-result-item .avatar {\n    height: 60px;\n    width: 60px;\n    border-radius: 50%;\n    overflow: hidden;\n    margin-right: 15px; }\n    .find-result-item .avatar img {\n      height: 100%;\n      width: 100%; }\n  .find-result-item .profile {\n    flex: 1;\n    display: flex;\n    flex-direction: column; }\n    .find-result-item .profile .username {\n      margin-bottom: 6px;\n      font-size: 16px; }\n    .find-result-item .profile .uuid {\n      color: #999999;\n      font-size: 12px; }\n  .find-result-item .action {\n    width: 100px; }\n    .find-result-item .action button {\n      padding: 6px 12px;\n      background-color: transparent;\n      border: 1px solid #8C6244;\n      border-radius: 2px;\n      cursor: pointer;\n      color: #333333;\n      outline: 0;\n      user-select: none; }\n      .find-result-item .action button:hover {\n        background-color: #8C6244;\n        color: white; }\n      .find-result-item .action button:disabled {\n        border-color: #999999;\n        background-color: #CCCCCC;\n        color: white;\n        cursor: not-allowed; }\n      .find-result-item .action button .iconfont {\n        vertical-align: middle;\n        margin-right: 2px; }\n",""])},function(e,exports,t){var n=t(685);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".friends-add {\n  height: 480px;\n  width: 640px;\n  display: flex;\n  flex-direction: column; }\n  .friends-add .friends-search {\n    height: 44px;\n    min-height: 44px;\n    padding: 0 24px;\n    display: flex;\n    margin: 6px 0; }\n    .friends-add .friends-search input {\n      height: 100%;\n      flex: 1;\n      font-size: 16px;\n      background-color: transparent;\n      border: 0;\n      border-bottom: 1px solid #DDDCDD;\n      margin: 0 12px;\n      padding: 6px 12px;\n      outline: 0; }\n      .friends-add .friends-search input:focus {\n        border-bottom-color: #705949; }\n    .friends-add .friends-search .friends-search-method {\n      height: 100%;\n      padding-top: 4px;\n      min-width: 150px;\n      margin-right: 10px; }\n    .friends-add .friends-search button {\n      font-size: 16px;\n      border: 0;\n      cursor: pointer;\n      color: white;\n      border-radius: 3px;\n      background-color: #999;\n      padding: 6px 12px;\n      outline: 0;\n      user-select: none;\n      height: 100%;\n      width: 80px;\n      font-size: 14px; }\n      .friends-add .friends-search button:hover, .friends-add .friends-search button:active, .friends-add .friends-search button.active {\n        background-color: #705949; }\n      .friends-add .friends-search button:disabled {\n        cursor: not-allowed;\n        background-color: #999999; }\n  .friends-add .friends-search-result {\n    flex: 1;\n    overflow-y: auto;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden; }\n    .friends-add .friends-search-result:hover {\n      overflow-y: auto;\n      overflow-y: overlay; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(15),u=t(11),d=u.findGroup,f=t(12),p=t(286);t(687);var m=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={selectValue:"groupname",searchText:""},o}return o(t,e),i(t,[{key:"_handleSearch",value:function(){var e=this.state.searchText.trim(),t=this.state.selectValue;e&&this.props.dispatch(d(e,t))}},{key:"getFriendResult",value:function(e){return e||(e=[]),e.map(function(e,t){return a.createElement(p,{key:e.uuid+"#"+t,info:e,type:"group"})})}},{key:"render",value:function(){var e=this,t=[{value:"uuid",label:"团唯一标示符"},{value:"groupname",label:"团名称"},{value:"groupdesc",label:"团简介"}];return a.createElement(f,{title:"添加团"},a.createElement("div",{className:"group-add"},a.createElement("div",{className:"group-search"},a.createElement("input",{type:"text",placeholder:"请输入你要添加的团信息",spellCheck:"false",value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})}}),a.createElement("div",{className:"group-search-method"},a.createElement(l,{name:"form-field-name",value:this.state.selectValue,options:t,clearable:!1,searchable:!1,placeholder:"请选择搜索方式...",onChange:function(t){return e.setState({selectValue:t.value})}})),a.createElement("button",{onClick:function(){return e._handleSearch()}},"搜索")),a.createElement("div",{className:"group-search-result"},this.props.isFinding?"正在查询...":this.getFriendResult(this.props.findingResult.toJS()))))}}]),t}(a.Component);e.exports=s(function(e){return{isFinding:e.getIn(["group","isFindingGroup"]),findingResult:e.getIn(["group","findingResult"])}})(m)},function(e,exports,t){var n=t(688);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".group-add {\n  height: 480px;\n  width: 640px;\n  display: flex;\n  flex-direction: column; }\n  .group-add .group-search {\n    height: 44px;\n    min-height: 44px;\n    padding: 0 24px;\n    display: flex;\n    margin: 6px 0; }\n    .group-add .group-search input {\n      height: 100%;\n      flex: 1;\n      font-size: 16px;\n      background-color: transparent;\n      border: 0;\n      border-bottom: 1px solid #DDDCDD;\n      margin: 0 12px;\n      padding: 6px 12px;\n      outline: 0; }\n      .group-add .group-search input:focus {\n        border-bottom-color: #705949; }\n    .group-add .group-search .group-search-method {\n      height: 100%;\n      padding-top: 4px;\n      min-width: 150px;\n      margin-right: 10px; }\n    .group-add .group-search button {\n      font-size: 16px;\n      border: 0;\n      cursor: pointer;\n      color: white;\n      border-radius: 3px;\n      background-color: #999;\n      padding: 6px 12px;\n      outline: 0;\n      user-select: none;\n      height: 100%;\n      width: 80px;\n      font-size: 14px; }\n      .group-add .group-search button:hover, .group-add .group-search button:active, .group-add .group-search button.active {\n        background-color: #705949; }\n      .group-add .group-search button:disabled {\n        cursor: not-allowed;\n        background-color: #999999; }\n  .group-add .group-search-result {\n    flex: 1;\n    overflow-y: auto;\n    display: flex;\n    flex-direction: column; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(12),u=t(38),d=u.addFavoriteDice,f=u.removeFavoriteDice,p=u.updateFavoriteDice,m=u.saveSettings;t(690);var h=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"componentWillUnmount",value:function(){this.props.dispatch(m())}},{key:"_handleAddFavoriteDice",value:function(){this.props.dispatch(d())}},{key:"_handleRemoveFavoriteDice",value:function(e){this.props.dispatch(f(e))}},{key:"render",value:function(){var e=this;return a.createElement(l,{title:"个人设置",className:"user-settings"},a.createElement("p",null,"常用骰子:"),a.createElement("div",{className:"user-favorite-list"},this.props.userSettings.get("favoriteDice").map(function(t,n){return a.createElement("div",{className:"user-favorite-item",key:"favorite-dice#"+n},a.createElement("input",{value:t.get("title"),onChange:function(r){return e.props.dispatch(p(n,{title:r.target.value,value:t.get("value")}))},placeholder:"标题"}),a.createElement("input",{value:t.get("value"),onChange:function(r){return e.props.dispatch(p(n,{title:t.get("title"),value:r.target.value}))},placeholder:"骰值"}),a.createElement("button",{title:"移除该项",onClick:function(){return e._handleRemoveFavoriteDice(n)}},a.createElement("i",{className:"iconfont"},"")))}),a.createElement("button",{onClick:function(){return e._handleAddFavoriteDice()}},a.createElement("i",{className:"iconfont"},""))))}}]),t}(a.Component);e.exports=s(function(e){return{userSettings:e.getIn(["settings","user"])}})(h)},function(e,exports,t){var n=t(691);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".user-settings p {\n  text-align: left; }\n\n.user-settings .user-favorite-list {\n  min-height: 104px;\n  max-height: 104px;\n  border: 1px solid #DDDCDD;\n  overflow: hidden; }\n  .user-settings .user-favorite-list:hover {\n    overflow-y: auto;\n    overflow-y: overlay; }\n  .user-settings .user-favorite-list .user-favorite-item {\n    text-align: left;\n    padding: 2px 4px; }\n    .user-settings .user-favorite-list .user-favorite-item input {\n      outline: 0;\n      border: 1px solid transparent;\n      background-color: transparent; }\n      .user-settings .user-favorite-list .user-favorite-item input:focus {\n        background-color: white;\n        border-color: #D0A282; }\n    .user-settings .user-favorite-list .user-favorite-item button {\n      width: auto;\n      display: inline-block;\n      border: 0;\n      float: right; }\n      .user-settings .user-favorite-list .user-favorite-item button:hover {\n        background-color: transparent; }\n  .user-settings .user-favorite-list button {\n    display: block;\n    width: 100%;\n    background-color: transparent;\n    border: 1px solid transparent;\n    color: #FFA160;\n    outline: 0;\n    cursor: pointer; }\n    .user-settings .user-favorite-list button:hover {\n      border-color: #D0A282;\n      background-color: rgba(204, 204, 204, 0.1); }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(4),s=c.connect,l=t(12),u=t(693),d=t(38),f=d.setSystemSettings,p=d.saveSettings;t(696);var m=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"componentWillUnmount",value:function(){this.props.dispatch(p())}},{key:"_handleRequestNotificationPermission",value:function(e){this.props.dispatch(f({notification:e}))}},{key:"render",value:function(){var e=this;return a.createElement(l,{title:"系统设置",className:"system-settings"},a.createElement("div",{className:"setting-cell"},a.createElement("label",null,"桌面通知权限(",this.props.notificationPermission,")"),a.createElement(u,{value:this.props.systemSettings.get("notification"),onChange:function(t){return e._handleRequestNotificationPermission(t)}})))}}]),t}(a.Component);e.exports=s(function(e){return{notificationPermission:e.getIn(["settings","notificationPermission"]),systemSettings:e.getIn(["settings","system"])}})(m)},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(6);t(694);var s=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"_handleClick",value:function(){this.props.onChange&&this.props.onChange(!this.props.value)}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"check-box",onClick:function(){return e._handleClick()}},a.createElement("label",{className:this.props.value?"checked":"unchecked"}))}}]),t}(a.Component);s.propTypes={value:c.bool,onChange:c.func},e.exports=s},function(e,exports,t){var n=t(695);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".check-box > label {\n  position: relative;\n  display: block;\n  width: 38px;\n  height: 16px;\n  cursor: pointer;\n  background-color: #e8e8e9;\n  border-radius: 8px;\n  box-shadow: inset rgba(0, 0, 0, 0.1) 1px 1px 1px; }\n  .check-box > label:before {\n    position: absolute;\n    left: -2px;\n    top: -2px;\n    content: ' ';\n    font-family: iconfont;\n    font-size: 22px;\n    display: block;\n    width: 20px;\n    height: 20px;\n    background-color: #999999;\n    border-radius: 50%;\n    cursor: pointer;\n    -webkit-transition: left 0.2s 0s ease;\n    -moz-transition: left 0.2s 0s ease;\n    transition: left 0.2s 0s ease; }\n  .check-box > label.checked:before {\n    background-color: #8C6244;\n    left: 18px; }\n",""])},function(e,exports,t){var n=t(697);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".system-settings .setting-cell {\n  display: flex;\n  align-items: center;\n  padding: 4px 12px; }\n  .system-settings .setting-cell > label {\n    flex: 1;\n    text-align: left; }\n",""])},function(e,exports,t){var n=t(699);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,"/* Make clicks pass-through */\n#nprogress {\n  pointer-events: none; }\n\n#nprogress .bar {\n  background: #29d;\n  position: fixed;\n  z-index: 1031;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 2px; }\n\n/* Fancy blur effect */\n#nprogress .peg {\n  display: block;\n  position: absolute;\n  right: 0px;\n  width: 100px;\n  height: 100%;\n  box-shadow: 0 0 10px #29d, 0 0 5px #29d;\n  opacity: 1.0;\n  -webkit-transform: rotate(3deg) translate(0px, -4px);\n  -ms-transform: rotate(3deg) translate(0px, -4px);\n  transform: rotate(3deg) translate(0px, -4px); }\n\n/* Remove these to get rid of the spinner */\n#nprogress .spinner {\n  display: block;\n  position: fixed;\n  z-index: 1031;\n  top: 15px;\n  right: 15px; }\n\n#nprogress .spinner-icon {\n  width: 18px;\n  height: 18px;\n  box-sizing: border-box;\n  border: solid 2px transparent;\n  border-top-color: #29d;\n  border-left-color: #29d;\n  border-radius: 50%;\n  -webkit-animation: nprogress-spinner 400ms linear infinite;\n  animation: nprogress-spinner 400ms linear infinite; }\n\n.nprogress-custom-parent {\n  overflow: hidden;\n  position: relative; }\n\n.nprogress-custom-parent #nprogress .spinner,\n.nprogress-custom-parent #nprogress .bar {\n  position: absolute; }\n\n@-webkit-keyframes nprogress-spinner {\n  0% {\n    -webkit-transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg); } }\n\n@keyframes nprogress-spinner {\n  0% {\n    transform: rotate(0deg); }\n  100% {\n    transform: rotate(360deg); } }\n",""])},function(e,exports,t){var n=t(701);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".webview {\n  height: 100%;\n  position: relative; }\n  .webview iframe, .webview webview {\n    border: 0;\n    width: 100%;\n    height: 100%;\n    display: flex; }\n  .webview .open-new {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    background-color: rgba(0, 0, 0, 0.2);\n    padding: 4px;\n    border-radius: 3px;\n    cursor: pointer; }\n    .webview .open-new:hover {\n      background-color: rgba(0, 0, 0, 0.5); }\n    .webview .open-new .iconfont {\n      font-size: 24px;\n      display: block;\n      color: white;\n      width: 26px;\n      text-align: center; }\n",""])},function(e,exports,t){var n=t(703);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".extra-options {\n  position: relative; }\n  .extra-options .extra-item {\n    margin-bottom: 10px;\n    cursor: pointer; }\n    .extra-options .extra-item .iconfont {\n      font-size: 18px;\n      color: #707275; }\n  .extra-options .extra-menu {\n    border-radius: 3px;\n    min-width: 72px;\n    box-shadow: rgba(0, 0, 0, 0.15) 0 0 8px;\n    background-color: white;\n    position: absolute;\n    left: 2px;\n    padding: 0;\n    display: none;\n    z-index: 1; }\n    .extra-options .extra-menu:after {\n      content: ' ';\n      border-width: 5px;\n      border-style: solid dashed dashed dashed;\n      border-color: #F9FCFA transparent transparent transparent;\n      position: absolute;\n      left: 2px; }\n    .extra-options .extra-menu.active {\n      display: block; }\n    .extra-options .extra-menu.add {\n      bottom: 70px; }\n    .extra-options .extra-menu.more {\n      bottom: 38px; }\n    .extra-options .extra-menu > ul > li {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      border-bottom: 1px solid rgba(220, 220, 220, 0.5);\n      line-height: 31px;\n      cursor: pointer;\n      text-align: left;\n      text-indent: 10px;\n      font-size: 12px;\n      color: #222;\n      padding-right: 10px;\n      word-wrap: normal; }\n      .extra-options .extra-menu > ul > li:last-child {\n        border-bottom: 0; }\n      .extra-options .extra-menu > ul > li:hover {\n        background-color: #FFF4EB; }\n\n.help.modal-panel > .body {\n  padding: 0; }\n",""])},function(e,exports,t){var n=t(705);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".sidebar {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 76px;\n  background-color: #F1EBE6;\n  position: relative;\n  border-right: 1px solid #DDDCDD;\n  border-bottom-left-radius: 3px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  padding: 10px 0; }\n  .sidebar .profile {\n    padding: 0 10px;\n    margin-top: 10px;\n    margin-bottom: 20px; }\n    .sidebar .profile .avatar {\n      border-radius: 50%;\n      overflow: hidden;\n      cursor: pointer;\n      border: 3px solid white;\n      width: 55px;\n      height: 55px;\n      min-width: 55px;\n      min-height: 55px; }\n      .sidebar .profile .avatar img {\n        width: 100%;\n        height: 100%;\n        display: block; }\n  .sidebar .menus {\n    flex: 1;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center; }\n    .sidebar .menus a {\n      flex: 0 1 60px;\n      min-width: 80%;\n      cursor: pointer;\n      color: #707275;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      min-height: 30px;\n      color: gray;\n      flex-direction: column;\n      border-radius: 4px; }\n      .sidebar .menus a:hover {\n        background-color: rgba(0, 0, 0, 0.2); }\n        .sidebar .menus a:hover span {\n          opacity: 1; }\n      .sidebar .menus a.active {\n        color: #705949; }\n        .sidebar .menus a.active span {\n          opacity: 1; }\n      .sidebar .menus a .iconfont {\n        font-size: 28px; }\n      .sidebar .menus a span {\n        font-size: 12px;\n        opacity: 0; }\n\n.menu-panel {\n  display: flex;\n  flex: 1;\n  background-color: #fffcfc;\n  position: relative; }\n  .menu-panel > div {\n    display: flex;\n    flex: 1;\n    flex-direction: row; }\n",""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=t(1),s=t(4),l=s.connect,u=t(7),d=t(15),f=t(284),p=t(77),m=t(5),h=m.showAlert,g=m.hideProfileCard,v=t(17),b=v.addFriend,y=v.updateInfo,x=t(16),w=x.addUserConverse,E=x.switchToConverse;t(707);var _=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={isEdited:!1,editedInfo:{}},o}return o(t,e),a(t,[{key:"_handleEditProfile",value:function(){this.props.isSelf?(this.setState({isEdited:!0}),this.setEditedInfo()):this.props.showAlert("不是本人无法修改信息")}},{key:"_handleClose",value:function(){this.setState({isEdited:!1}),this.props.hideProfileCard()}},{key:"_handleReset",value:function(){this.setEditedInfo()}},{key:"_handleSave",value:function(){this.props.updateInfo(this.state.editedInfo),this.setState({isEdited:!1})}},{key:"_handleUpdateAvatar",value:function(e){this.props.updateInfo({avatar:e})}},{key:"checkEditedIsChange",value:function(){var e=this.props.userInfo;return JSON.stringify(this.state.editedInfo)!==JSON.stringify(e)}},{key:"setEditedInfo",value:function(){var e=this.props.userInfo;this.setState({editedInfo:e?e.toJS():{}})}},{key:"getActions",value:function(){var e=this,t=this.props.friendList.toJS(),n=t.indexOf(this.props.selectedUUID)>=0||this.props.isSelf,r=this.props.selectedUUID;if(this.state.isEdited){var o=this.checkEditedIsChange();return c.createElement("div",{className:"actions"},c.createElement("button",{className:"footer-item active",onClick:function(){return e._handleReset()},disabled:!o},c.createElement("i",{className:"iconfont"},""),"重置"),c.createElement("button",{className:"footer-item active",onClick:function(){return e._handleSave()},disabled:!o},c.createElement("i",{className:"iconfont"},""),"保存"))}return c.createElement("div",{className:"actions"},c.createElement("button",{className:"footer-item active",onClick:function(){return e.props.addUserConverse(r)}},c.createElement("i",{className:"iconfont"},""),"发消息"),c.createElement("button",{className:"footer-item active",disabled:n,onClick:function(){return e.props.addFriend(r)}},c.createElement("i",{className:"iconfont"},""),"添加好友"))}},{key:"getSexP",value:function(e){return"男"===e?c.createElement("span",null,c.createElement("i",{className:"iconfont"},""),"男"):"女"===e?c.createElement("span",null,c.createElement("i",{className:"iconfont"},""),"女"):"其他"===e?c.createElement("span",null,c.createElement("i",{className:"iconfont"},""),"其他"):c.createElement("span",null,c.createElement("i",{className:"iconfont"},""),"保密")}},{key:"getBody",value:function(){var e=this;if(this.props.isShow){var t=this.props.isSelf,n=this.state.isEdited?c.createElement("button",{className:"action",onClick:function(){return e.setState({isEdited:!1})}},c.createElement("i",{className:"iconfont"},""),"取消编辑"):c.createElement("button",{className:"action",onClick:function(){return e._handleEditProfile()}},c.createElement("i",{className:"iconfont"},""),"编辑资料"),r=this.state.isEdited?c.createElement("div",{className:"body"},c.createElement("div",{className:"item"},c.createElement("span",null,"唯一标识符:"),c.createElement("span",null,this.props.userInfo.get("uuid"))),c.createElement("div",{className:"item"},c.createElement("span",null,"用户名:"),c.createElement("span",null,this.props.userInfo.get("username"))),c.createElement("div",{className:"item"},c.createElement("span",null,"昵称:"),c.createElement("input",{value:this.state.editedInfo.nickname||"",onChange:function(t){return e.setState({editedInfo:i(e.state.editedInfo,{nickname:t.target.value})})}})),c.createElement("div",{className:"item"},c.createElement("span",null,"性别:"),c.createElement(d,{name:"sex-select",className:"sex-select",value:this.state.editedInfo.sex,options:[{value:"男",label:"男"},{value:"女",label:"女"},{value:"保密",label:"保密"},{value:"其他",label:"其他"}],clearable:!1,searchable:!1,placeholder:"请选择性别...",onChange:function(t){return e.setState({editedInfo:i(e.state.editedInfo,{sex:t.value})})}})),c.createElement("div",{className:"item"},c.createElement("span",null,"个人签名:"),c.createElement("textarea",{rows:"3",value:this.state.editedInfo.sign||"",onChange:function(t){return e.setState({editedInfo:i(e.state.editedInfo,{sign:t.target.value})})}}))):c.createElement("div",{className:"body"},c.createElement("div",{className:"item"},c.createElement("span",null,"唯一标识符:"),c.createElement("span",null,this.props.userInfo.get("uuid"))),t?c.createElement("div",{className:"item"},c.createElement("span",null,"用户名:"),this.props.userInfo.get("username")):null,c.createElement("div",{className:"item"},c.createElement("span",null,"昵称:"),this.props.userInfo.get("nickname")),c.createElement("div",{className:"item"},c.createElement("span",null,"性别:"),this.getSexP(this.props.userInfo.get("sex"))),c.createElement("div",{className:"item"},c.createElement("span",null,"个人签名:"),c.createElement("span",null,this.props.userInfo.get("sign")))),o=this.props.userInfo.get("avatar")||"";return c.createElement("div",{className:"mask",onClick:function(e){return e.stopPropagation()}},c.createElement("div",{className:"card"},c.createElement("div",{className:"header"},c.createElement("div",{className:"profile"},c.createElement("div",{className:"avatar"},t?c.createElement(p,{width:"57",height:"57",type:"user",attachUUID:this.props.selectedUUID,onUploadSuccess:function(t){return e._handleUpdateAvatar(t.url)}},c.createElement("img",{src:o||u.defaultImg.user})):c.createElement(f,{originImageUrl:o.replace("/thumbnail","")},c.createElement("img",{src:o||u.defaultImg.user}))),c.createElement("span",{className:"username"},this.props.userInfo.get("nickname")||this.props.userInfo.get("username")),t?n:null),c.createElement("div",{className:"close",onClick:function(){return e._handleClose()}},c.createElement("i",{className:"iconfont"},""))),r,c.createElement("div",{className:"footer"},this.getActions())))}}},{key:"render",value:function(){return c.createElement("div",{className:"profile-card"},this.getBody())}}]),t}(c.Component);e.exports=l(function(e){var t=e.getIn(["user","info","uuid"]),n=e.getIn(["ui","showProfileCardUUID"]),r=t===n;return{userInfo:r?e.getIn(["user","info"]):e.getIn(["cache","user",n]),friendList:e.getIn(["user","friendList"]),isSelf:r,selectedUUID:n,isShow:e.getIn(["ui","showProfileCard"])}},function(e){return{showAlert:function(){return e(h.apply(void 0,arguments))},hideProfileCard:function(){return e(g())},addUserConverse:function(t){e(w(t)),e(E(t,t))},addFriend:function(t){return e(b(t))},updateInfo:function(t){return e(y(t))}}})(_)},function(e,exports,t){var n=t(708);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,'.profile-card > .mask {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.6);\n  z-index: 100; }\n  .profile-card > .mask .card {\n    border-radius: 3px;\n    overflow: hidden;\n    background-color: white;\n    text-align: center;\n    box-shadow: rgba(0, 0, 0, 0.15) 1px 4px 12px;\n    width: 375px;\n    min-height: 500px;\n    display: flex;\n    flex-direction: column; }\n    .profile-card > .mask .card .header {\n      background-image: -webkit-linear-gradient(0deg, #726155, #998272);\n      background-image: linear-gradient(0deg, #726155, #998272);\n      height: 150px;\n      border-bottom: 1px solid #675548;\n      position: relative;\n      display: flex;\n      flex-direction: column;\n      justify-content: center; }\n      .profile-card > .mask .card .header .profile {\n        color: white;\n        display: flex;\n        align-items: center;\n        padding: 0 24px; }\n        .profile-card > .mask .card .header .profile .avatar {\n          width: 57px;\n          height: 57px;\n          border-radius: 50%;\n          overflow: hidden;\n          margin-right: 16px;\n          border: 2px solid white; }\n          .profile-card > .mask .card .header .profile .avatar img {\n            width: 100%;\n            height: 100%; }\n          .profile-card > .mask .card .header .profile .avatar > .image-uploader > .mask {\n            font-size: 10px; }\n        .profile-card > .mask .card .header .profile .username {\n          flex: 1;\n          text-align: left;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap; }\n        .profile-card > .mask .card .header .profile .action {\n          background-color: transparent;\n          border: 1px solid white;\n          padding: 4px 12px;\n          color: white;\n          border-radius: 14px;\n          cursor: pointer;\n          outline: 0; }\n          .profile-card > .mask .card .header .profile .action:hover {\n            color: #726155;\n            background-color: white; }\n          .profile-card > .mask .card .header .profile .action .iconfont {\n            margin-right: 4px; }\n      .profile-card > .mask .card .header .close {\n        position: absolute;\n        right: 10px;\n        top: 10px;\n        cursor: pointer; }\n        .profile-card > .mask .card .header .close .iconfont {\n          font-size: 21px;\n          color: white;\n          line-height: 1em;\n          display: block; }\n          .profile-card > .mask .card .header .close .iconfont:hover {\n            color: #ff4234; }\n    .profile-card > .mask .card .body {\n      flex: 1;\n      padding: 15px 5px 0 25px; }\n      .profile-card > .mask .card .body .item {\n        margin-top: 13px;\n        display: flex; }\n        .profile-card > .mask .card .body .item > span:nth-child(1) {\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          float: left;\n          width: 28%;\n          word-wrap: normal;\n          margin-right: 2%;\n          color: #aeaeb2;\n          text-align: left;\n          user-select: none; }\n        .profile-card > .mask .card .body .item > span:nth-child(2) {\n          float: left;\n          display: flex;\n          align-items: center;\n          flex-wrap: wrap;\n          max-width: 70%;\n          word-break: break-all;\n          text-align: left;\n          color: #222; }\n        .profile-card > .mask .card .body .item .Select {\n          min-width: 120px; }\n        .profile-card > .mask .card .body .item input, .profile-card > .mask .card .body .item textarea {\n          background-color: transparent;\n          font-size: 16px;\n          border: 1px solid #DDDCDD;\n          outline: 0;\n          padding: 4px 6px;\n          border-radius: 3px;\n          resize: none; }\n          .profile-card > .mask .card .body .item input:focus, .profile-card > .mask .card .body .item textarea:focus {\n            border-color: #705949; }\n          .profile-card > .mask .card .body .item input:disabled, .profile-card > .mask .card .body .item textarea:disabled {\n            cursor: not-allowed;\n            background-color: rgba(0, 0, 0, 0.1);\n            color: #999999; }\n          .profile-card > .mask .card .body .item input[type="checkbox"], .profile-card > .mask .card .body .item textarea[type="checkbox"] {\n            -webkit-appearance: none;\n            background-color: white;\n            background-image: url("/src/assets/img/checkbox.png");\n            height: 22px;\n            vertical-align: middle;\n            width: 22px;\n            outline: none;\n            border: 0;\n            transition: initial;\n            padding: 0; }\n            .profile-card > .mask .card .body .item input[type="checkbox"]:focus, .profile-card > .mask .card .body .item input[type="checkbox"]:hover, .profile-card > .mask .card .body .item textarea[type="checkbox"]:focus, .profile-card > .mask .card .body .item textarea[type="checkbox"]:hover {\n              background-position: -24px 0; }\n            .profile-card > .mask .card .body .item input[type="checkbox"]:checked, .profile-card > .mask .card .body .item textarea[type="checkbox"]:checked {\n              background-position: -48px 0; }\n            .profile-card > .mask .card .body .item input[type="checkbox"][disabled], .profile-card > .mask .card .body .item textarea[type="checkbox"][disabled] {\n              background-position: -72px 0; }\n            .profile-card > .mask .card .body .item input[type="checkbox"][disabled]:checked, .profile-card > .mask .card .body .item textarea[type="checkbox"][disabled]:checked {\n              background-position: -96px 0; }\n        .profile-card > .mask .card .body .item textarea {\n          flex: 1; }\n    .profile-card > .mask .card .footer {\n      border-top: 1px solid #e3e3e5;\n      background-color: #f9f9f9; }\n      .profile-card > .mask .card .footer .actions {\n        height: 53px;\n        line-height: 23px;\n        padding: 15px 0;\n        display: flex;\n        width: 100%; }\n        .profile-card > .mask .card .footer .actions .footer-item {\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          background-color: transparent;\n          border: 0;\n          outline: 0;\n          cursor: pointer;\n          color: #9ea1a2;\n          flex: 1 1 0;\n          border-right: 1px solid #d7d6d9;\n          text-align: center;\n          font-size: 14px;\n          user-select: none; }\n          .profile-card > .mask .card .footer .actions .footer-item:not(:disabled):hover, .profile-card > .mask .card .footer .actions .footer-item:not(:disabled):active, .profile-card > .mask .card .footer .actions .footer-item:not(:disabled).active {\n            color: #7e3f12; }\n            .profile-card > .mask .card .footer .actions .footer-item:not(:disabled):hover .iconfont, .profile-card > .mask .card .footer .actions .footer-item:not(:disabled):active .iconfont, .profile-card > .mask .card .footer .actions .footer-item:not(:disabled).active .iconfont {\n              color: #7e3f12; }\n          .profile-card > .mask .card .footer .actions .footer-item:disabled {\n            cursor: not-allowed; }\n          .profile-card > .mask .card .footer .actions .footer-item .iconfont {\n            color: #9ea1a2;\n            line-height: 18px;\n            height: 18px;\n            font-size: 18px; }\n          .profile-card > .mask .card .footer .actions .footer-item:last-child {\n            border-right: 0; }\n          .profile-card > .mask .card .footer .actions .footer-item:disabled {\n            color: #BDBEBF; }\n          .profile-card > .mask .card .footer .actions .footer-item .iconfont {\n            font-size: 22px;\n            margin-right: 4px; }\n',""])},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),c=t(710).ipcRenderer;t(711);var s=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={isBig:!1},o}return o(t,e),i(t,[{key:"_handleClose",value:function(){c.send("close-window")}},{key:"_handleMinimize",value:function(){c.send("hide-window")}},{key:"_handleMaximize",value:function(){this.state.isBig?(c.send("orignal-window"),this.setState({isBig:!1})):(c.send("show-window"),this.setState({isBig:!0}))}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"electron-title-toolbar"},a.createElement("button",{title:"最小化",onClick:function(){return e._handleMinimize()}},a.createElement("i",{className:"iconfont"},"")),a.createElement("button",{title:"最大化",onClick:function(){return e._handleMaximize()}},this.state.isBig?a.createElement("i",{className:"iconfont"},""):a.createElement("i",{className:"iconfont"},"")),a.createElement("button",{title:"退出",onClick:function(){return e._handleClose()}},a.createElement("i",{className:"iconfont"},"")))}}]),t}(a.Component);e.exports=s},function(e,exports){e.exports=require("electron")},function(e,exports,t){var n=t(712);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,".electron-title-toolbar {\n  display: flex;\n  padding: 6px; }\n  .electron-title-toolbar > button {\n    background: transparent;\n    color: white;\n    border: 0;\n    margin: 10px 8px;\n    cursor: pointer;\n    padding: 0;\n    opacity: 0.4;\n    transition: opacity 0.2s;\n    outline: 0; }\n    .electron-title-toolbar > button:hover {\n      opacity: 1; }\n",""])},function(e,exports,t){var n=t(714);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,"#main {\n  width: 1000px;\n  min-width: 1000px;\n  overflow: hidden;\n  box-shadow: rgba(0, 0, 0, 0.15) 1px 4px 12px;\n  border-radius: 3px;\n  display: flex;\n  flex-direction: column; }\n  #main > .head {\n    flex: 0 0 59px;\n    width: 100%;\n    height: 59px;\n    background-size: auto 28px !important;\n    border-bottom: 1px solid #726155;\n    border-top-left-radius: 3px;\n    border-top-right-radius: 3px;\n    position: relative;\n    background-color: #705949;\n    display: flex;\n    cursor: default; }\n    #main > .head > .title {\n      color: white;\n      font-size: 20px;\n      display: inline-block;\n      height: 100%;\n      line-height: 58px;\n      padding-left: 14px;\n      width: 350px; }\n    #main > .head > .title-blank {\n      flex: 1; }\n    #main > .head > .menu {\n      position: absolute;\n      left: 40%;\n      top: 0;\n      bottom: 0;\n      display: flex;\n      align-items: center; }\n      #main > .head > .menu button {\n        font-size: 14px;\n        background-color: transparent;\n        border: 0;\n        cursor: pointer;\n        color: #705949;\n        padding: 0 2px;\n        margin: 4px 6px;\n        outline: 0;\n        position: relative;\n        user-select: none;\n        color: white;\n        margin: 0 10px;\n        font-size: 16px; }\n        #main > .head > .menu button:disabled {\n          cursor: not-allowed;\n          color: #999999; }\n        #main > .head > .menu button:enabled:after {\n          content: ' ';\n          position: absolute;\n          border-top: 1px solid #705949;\n          bottom: 0;\n          transition: all 0.2s ease-in-out;\n          left: 0;\n          width: 0; }\n        #main > .head > .menu button:enabled:hover:after, #main > .head > .menu button:enabled:active:after, #main > .head > .menu button:enabled.active:after {\n          border-top: 1px solid #705949;\n          width: 100%; }\n        #main > .head > .menu button:after {\n          border-color: white !important; }\n  #main > .body {\n    display: flex;\n    height: 542px;\n    border-bottom-left-radius: 3px;\n    border-bottom-right-radius: 3px;\n    flex: 0 1 auto;\n    background-color: white; }\n",""])},function(e,exports,t){var n=t(716);"string"==typeof n&&(n=[[e.i,n,""]]);var r={};r.transform=void 0;t(3)(n,r);n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(2)(!1),exports.push([e.i,"#main {\n  min-width: 1000px;\n  width: 100%;\n  height: 100%;\n  transition: initial; }\n  #main > .head {\n    -webkit-app-region: drag; }\n    #main > .head button {\n      -webkit-app-region: no-drag; }\n  #main > .body {\n    min-height: 542px;\n    height: 100%; }\n",""])}],[489]);